"use strict";(self.webpackChunkswingfox_client=self.webpackChunkswingfox_client||[]).push([[792],{210:(n,e,t)=>{var r=t(6540),i=t(5338),a=t(7528),s=t(4976),o=t(7767),c=t(5942),l=t(888),d=t(7581),u=t(467),p=t(296),x=t(4756),h=t.n(x),f=t(4983),m=t(4848);const g=function(n){var e=n.children,t=(0,r.useState)(null),i=(0,p.A)(t,2),a=i[0],s=i[1],c=(0,r.useState)(!0),l=(0,p.A)(c,2),d=l[0],x=l[1],g=(0,o.zy)();return(0,r.useEffect)(function(){var n=function(){var n=(0,u.A)(h().mark(function n(){var e;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(x(!0),n.prev=1,f.apiUtils.isAuthenticated()){n.next=2;break}return s(!1),x(!1),n.abrupt("return");case 2:return n.prev=2,n.next=3,f.apiUtils.refreshCurrentUser();case 3:s(!0),n.next=5;break;case 4:n.prev=4,n.catch(2),console.warn("Токен невалиден, очищаем авторизацию"),f.apiUtils.logout(),s(!1);case 5:n.next=7;break;case 6:n.prev=6,e=n.catch(1),console.error("Ошибка проверки авторизации:",e),s(!1);case 7:return n.prev=7,x(!1),n.finish(7);case 8:case"end":return n.stop()}},n,null,[[1,6,7,8],[2,4]])}));return function(){return n.apply(this,arguments)}}();n();var e=function(){s(!1)},t=function(){n()};return window.addEventListener("auth-logout",e),window.addEventListener("storage",t),function(){window.removeEventListener("auth-logout",e),window.removeEventListener("storage",t)}},[g.pathname]),d?(0,m.jsx)("div",{className:"loading",children:"Проверка авторизации..."}):a?e:(0,m.jsx)(o.C5,{to:"/login",replace:!0,state:{from:g}})};var v,b=t(4980);function j(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function y(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?j(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var w,A,k,N,S,C,z,_,E,P,L,O,D,$,M,I,U,T,R,B,W,F,Q,q,H,V,X,Y,K,G,J,Z,nn,en,tn,rn,an,sn,on,cn,ln,dn,un,pn,xn,hn,fn,mn,gn,vn,bn,jn,yn,wn,An,kn="/api/club",Nn=function(){var n=(0,u.A)(h().mark(function n(e){var t,r,i,a,s,o,c,l=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:{},r=localStorage.getItem("clubToken"),i=y({headers:y(y({"Content-Type":"application/json"},r&&{Authorization:"Bearer ".concat(r)}),t.headers)},t),n.prev=1,n.next=2,fetch("".concat(kn).concat(e),i);case 2:if((a=n.sent).ok){n.next=7;break}return s="API Error",n.prev=3,n.next=4,a.json();case 4:o=n.sent,s=o.message||o.error||"HTTP ".concat(a.status,": ").concat(a.statusText),n.next=6;break;case 5:n.prev=5,n.catch(3),s="HTTP ".concat(a.status,": ").concat(a.statusText);case 6:throw console.error("API Error Details:",{status:a.status,statusText:a.statusText,endpoint:e,config:i}),new Error(s);case 7:return n.next=8,a.json();case 8:return n.abrupt("return",n.sent);case 9:throw n.prev=9,c=n.catch(1),console.error("API Error:",c),c;case 10:case"end":return n.stop()}},n,null,[[1,9],[3,5]])}));return function(e){return n.apply(this,arguments)}}(),Sn=(v={register:(An=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/auth/register",{method:"POST",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),function(n){return An.apply(this,arguments)}),login:(wn=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,Nn("/auth/login",{method:"POST",body:JSON.stringify(e)});case 1:return(t=n.sent).token&&localStorage.setItem("clubToken",t.token),n.abrupt("return",t);case 2:case"end":return n.stop()}},n)})),function(n){return wn.apply(this,arguments)}),logout:(yn=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,Nn("/auth/logout",{method:"POST"});case 1:return n.prev=1,localStorage.removeItem("clubToken"),n.finish(1);case 2:case"end":return n.stop()}},n,null,[[0,,1,2]])})),function(){return yn.apply(this,arguments)}),getProfile:(jn=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/auth/profile"));case 1:case"end":return n.stop()}},n)})),function(){return jn.apply(this,arguments)}),updateProfile:(bn=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/auth/profile",{method:"PUT",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),function(n){return bn.apply(this,arguments)}),getEvents:(vn=(0,u.A)(h().mark(function n(){var e,t=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new URLSearchParams(t.length>0&&void 0!==t[0]?t[0]:{}).toString(),n.abrupt("return",Nn("/events/events".concat(e?"?".concat(e):"")));case 1:case"end":return n.stop()}},n)})),function(){return vn.apply(this,arguments)}),getEvent:(gn=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e)));case 1:case"end":return n.stop()}},n)})),function(n){return gn.apply(this,arguments)}),createEvent:(mn=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events",{method:"POST",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),function(n){return mn.apply(this,arguments)}),updateEvent:(fn=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e),{method:"PUT",body:JSON.stringify(t)}));case 1:case"end":return n.stop()}},n)})),function(n,e){return fn.apply(this,arguments)}),deleteEvent:(hn=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),function(n){return hn.apply(this,arguments)}),getEventParticipants:(xn=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e,"/participants")));case 1:case"end":return n.stop()}},n)})),function(n){return xn.apply(this,arguments)}),updateParticipantStatus:(pn=(0,u.A)(h().mark(function n(e,t,r){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e,"/participants/").concat(t),{method:"PUT",body:JSON.stringify({status:r})}));case 1:case"end":return n.stop()}},n)})),function(n,e,t){return pn.apply(this,arguments)}),removeParticipant:(un=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e,"/participants/").concat(t),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),function(n,e){return un.apply(this,arguments)}),applyToEvent:(dn=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e,"/apply"),{method:"POST",body:JSON.stringify(t)}));case 1:case"end":return n.stop()}},n)})),function(n,e){return dn.apply(this,arguments)}),getMyApplications:(ln=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/applications"));case 1:case"end":return n.stop()}},n)})),function(){return ln.apply(this,arguments)}),cancelApplication:(cn=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/events/".concat(e,"/cancel"),{method:"POST"}));case 1:case"end":return n.stop()}},n)})),function(n){return cn.apply(this,arguments)}),inviteParticipants:(on=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e,"/invite"),{method:"POST",body:JSON.stringify({user_ids:t})}));case 1:case"end":return n.stop()}},n)})),function(n,e){return on.apply(this,arguments)})},(0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)(v,"removeParticipant",(sn=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e,"/participants/").concat(t),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),function(n,e){return sn.apply(this,arguments)})),"uploadEventAvatar",(an=(0,u.A)(h().mark(function n(e,t){var r,i,a;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=localStorage.getItem("clubToken"),n.next=1,fetch("".concat(kn,"/events/events/").concat(e,"/avatar"),{method:"POST",headers:y({},r&&{Authorization:"Bearer ".concat(r)}),body:t});case 1:if((i=n.sent).ok){n.next=3;break}return n.next=2,i.json();case 2:throw a=n.sent,new Error(a.message||"Upload Error");case 3:return n.next=4,i.json();case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n)})),function(n,e){return an.apply(this,arguments)})),"uploadEventImages",(rn=(0,u.A)(h().mark(function n(e,t){var r,i,a;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=localStorage.getItem("clubToken"),n.next=1,fetch("".concat(kn,"/events/events/").concat(e,"/images"),{method:"POST",headers:y({},r&&{Authorization:"Bearer ".concat(r)}),body:t});case 1:if((i=n.sent).ok){n.next=3;break}return n.next=2,i.json();case 2:throw a=n.sent,new Error(a.message||"Upload Error");case 3:return n.next=4,i.json();case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n)})),function(n,e){return rn.apply(this,arguments)})),"deleteEventImage",(tn=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/events/events/".concat(e,"/images/").concat(t),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),function(n,e){return tn.apply(this,arguments)})),"getAds",(en=(0,u.A)(h().mark(function n(){var e,t=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new URLSearchParams(t.length>0&&void 0!==t[0]?t[0]:{}).toString(),n.abrupt("return",Nn("/ads/ads".concat(e?"?".concat(e):"")));case 1:case"end":return n.stop()}},n)})),function(){return en.apply(this,arguments)})),"getAd",(nn=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads/".concat(e)));case 1:case"end":return n.stop()}},n)})),function(n){return nn.apply(this,arguments)})),"createAd",(Z=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads",{method:"POST",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),function(n){return Z.apply(this,arguments)})),"updateAd",(J=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads/".concat(e),{method:"PUT",body:JSON.stringify(t)}));case 1:case"end":return n.stop()}},n)})),function(n,e){return J.apply(this,arguments)})),"deleteAd",(G=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads/".concat(e),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),function(n){return G.apply(this,arguments)})),"getAdStats",(K=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads/stats/overview"));case 1:case"end":return n.stop()}},n)})),function(){return K.apply(this,arguments)})),(0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)(v,"getAnalytics",(Y=(0,u.A)(h().mark(function n(){var e,t,r=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"overview",t=r.length>1&&void 0!==r[1]?r[1]:"week",n.abrupt("return",Nn("/analytics/".concat(e,"?period=").concat(t)));case 1:case"end":return n.stop()}},n)})),function(){return Y.apply(this,arguments)})),"getBots",(X=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots"));case 1:case"end":return n.stop()}},n)})),function(){return X.apply(this,arguments)})),"getBot",(V=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/".concat(e)));case 1:case"end":return n.stop()}},n)})),function(n){return V.apply(this,arguments)})),"createBot",(H=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots",{method:"POST",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),function(n){return H.apply(this,arguments)})),"updateBotSettings",(q=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/".concat(e,"/settings"),{method:"PUT",body:JSON.stringify(t)}));case 1:case"end":return n.stop()}},n)})),function(n,e){return q.apply(this,arguments)})),"toggleBot",(Q=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/".concat(e,"/toggle"),{method:"PUT"}));case 1:case"end":return n.stop()}},n)})),function(n){return Q.apply(this,arguments)})),"deleteBot",(F=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/".concat(e),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),function(n){return F.apply(this,arguments)})),"getBotLogs",(W=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/".concat(e,"/logs")));case 1:case"end":return n.stop()}},n)})),function(n){return W.apply(this,arguments)})),"sendAutoInvites",(B=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/auto-invites/".concat(e),{method:"POST"}));case 1:case"end":return n.stop()}},n)})),function(n){return B.apply(this,arguments)})),"sendReminders",(R=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/reminders",{method:"POST"}));case 1:case"end":return n.stop()}},n)})),function(){return R.apply(this,arguments)})),(0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)(v,"generateRecommendations",(T=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/recommendations",{method:"POST"}));case 1:case"end":return n.stop()}},n)})),function(){return T.apply(this,arguments)})),"updateStats",(U=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/update-stats",{method:"POST"}));case 1:case"end":return n.stop()}},n)})),function(){return U.apply(this,arguments)})),"getBotStats",(I=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/stats/overview"));case 1:case"end":return n.stop()}},n)})),function(){return I.apply(this,arguments)})),"getPublicEvents",(M=(0,u.A)(h().mark(function n(){var e,t=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new URLSearchParams(t.length>0&&void 0!==t[0]?t[0]:{}).toString(),n.abrupt("return",Nn("/user-events/public/events".concat(e?"?".concat(e):"")));case 1:case"end":return n.stop()}},n)})),function(){return M.apply(this,arguments)})),"getPublicEvent",($=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/events/".concat(e)));case 1:case"end":return n.stop()}},n)})),function(n){return $.apply(this,arguments)})),"joinEvent",(D=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/events/".concat(e,"/join"),{method:"POST"}));case 1:case"end":return n.stop()}},n)})),function(n){return D.apply(this,arguments)})),"leaveEvent",(O=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/events/".concat(e,"/leave"),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),function(n){return O.apply(this,arguments)})),"updateEventStatus",(L=(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/events/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})}));case 1:case"end":return n.stop()}},n)})),function(n,e){return L.apply(this,arguments)})),"getUserEvents",(P=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/user/events"));case 1:case"end":return n.stop()}},n)})),function(){return P.apply(this,arguments)})),"getRecommendations",(E=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/user-events/recommendations"));case 1:case"end":return n.stop()}},n)})),function(){return E.apply(this,arguments)})),(0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)((0,b.A)(v,"searchEvents",(_=(0,u.A)(h().mark(function n(e){var t,r,i=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=y({q:e},i.length>1&&void 0!==i[1]?i[1]:{}),r=new URLSearchParams(t).toString(),n.abrupt("return",Nn("/user-events/search/events?".concat(r)));case 1:case"end":return n.stop()}},n)})),function(n){return _.apply(this,arguments)})),"getPublicClubs",(z=(0,u.A)(h().mark(function n(){var e,t=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new URLSearchParams(t.length>0&&void 0!==t[0]?t[0]:{}).toString(),n.abrupt("return",Nn("/user-events/public/clubs".concat(e?"?".concat(e):"")));case 1:case"end":return n.stop()}},n)})),function(){return z.apply(this,arguments)})),"getUserApplications",(C=(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/applications/applications/user"));case 1:case"end":return n.stop()}},n)})),function(){return C.apply(this,arguments)})),"createApplication",(S=(0,u.A)(h().mark(function n(e){var t,r=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:"",n.abrupt("return",Nn("/applications/applications",{method:"POST",body:JSON.stringify({club_id:e,message:t})}));case 1:case"end":return n.stop()}},n)})),function(n){return S.apply(this,arguments)})),"uploadClubAvatar",(N=(0,u.A)(h().mark(function n(e){var t,r,i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=localStorage.getItem("clubToken"),n.next=1,fetch("".concat(kn,"/auth/profile/avatar"),{method:"POST",headers:y({},t&&{Authorization:"Bearer ".concat(t)}),body:e});case 1:if((r=n.sent).ok){n.next=3;break}return n.next=2,r.json();case 2:throw i=n.sent,new Error(i.message||"Upload Error");case 3:return n.next=4,r.json();case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n)})),function(n){return N.apply(this,arguments)})),"updateProfile",(k=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/auth/profile",{method:"PUT",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),function(n){return k.apply(this,arguments)})),"changePassword",(A=(0,u.A)(h().mark(function n(e){var t,r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("ClubApi.changePassword called with:",e),n.prev=1,n.next=2,Nn("/auth/password",{method:"PUT",body:JSON.stringify(e)});case 2:return t=n.sent,console.log("ClubApi.changePassword success:",t),n.abrupt("return",t);case 3:throw n.prev=3,r=n.catch(1),console.error("ClubApi.changePassword error:",r),r;case 4:case"end":return n.stop()}},n,null,[[1,3]])})),function(n){return A.apply(this,arguments)})),"uploadAvatar",(w=(0,u.A)(h().mark(function n(e){var t,r,i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=localStorage.getItem("clubToken"),n.next=1,fetch("".concat(kn,"/auth/profile/avatar"),{method:"POST",headers:y({},t&&{Authorization:"Bearer ".concat(t)}),body:e});case 1:if((r=n.sent).ok){n.next=3;break}return n.next=2,r.json();case 2:throw i=n.sent,new Error(i.message||"Upload Error");case 3:return n.next=4,r.json();case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}},n)})),function(n){return w.apply(this,arguments)}))),Cn=function(){return!!localStorage.getItem("clubToken")},zn=function(){localStorage.removeItem("clubToken")};(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,Nn("/auth/refresh",{method:"POST"});case 1:return(e=n.sent).token&&localStorage.setItem("clubToken",e.token),n.abrupt("return",e);case 2:throw n.prev=2,t=n.catch(0),localStorage.removeItem("clubToken"),t;case 3:case"end":return n.stop()}},n,null,[[0,2]])})),(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads"));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads",{method:"POST",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads/".concat(e),{method:"PUT",body:JSON.stringify(t)}));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/ads/ads/".concat(e),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots"));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots",{method:"POST",body:JSON.stringify(e)}));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/".concat(e),{method:"PUT",body:JSON.stringify(t)}));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/bots/bots/".concat(e),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/participants"));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e,t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/participants/".concat(e,"/role"),{method:"PUT",body:JSON.stringify({role:t})}));case 1:case"end":return n.stop()}},n)})),(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Nn("/participants/".concat(e),{method:"DELETE"}));case 1:case"end":return n.stop()}},n)}));const _n=function(n){var e=n.children,t=(0,r.useState)(null),i=(0,p.A)(t,2),a=i[0],s=i[1];return(0,r.useEffect)(function(){var n;n=Cn(),s(n)},[]),null===a?(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[(0,m.jsx)("div",{style:{width:"50px",height:"50px",border:"4px solid rgba(255, 255, 255, 0.3)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,m.jsx)("style",{children:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "})]}):a?e:(0,m.jsx)(o.C5,{to:"/club/login",replace:!0})};var En,Pn,Ln,On=t(3986),Dn=["label","checked","onChange","disabled","name"];function $n(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Mn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$n(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var In=d.Ay.label(En||(En=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  cursor: pointer;\n  padding: 8px 0;\n  user-select: none;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    opacity: 0.8;\n  }\n"]))),Un=d.Ay.input(Pn||(Pn=(0,a.A)(["\n  width: 18px;\n  height: 18px;\n  accent-color: #dc3522;\n  cursor: pointer;\n  \n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]))),Tn=d.Ay.span(Ln||(Ln=(0,a.A)(["\n  font-size: 14px;\n  color: #4a5568;\n  line-height: 1.4;\n"])));const Rn=function(n){var e=n.label,t=n.checked,r=n.onChange,i=n.disabled,a=void 0!==i&&i,s=n.name,o=(0,On.A)(n,Dn);return(0,m.jsxs)(In,{children:[(0,m.jsx)(Un,Mn({type:"checkbox",checked:t,onChange:r,disabled:a,name:s},o)),(0,m.jsx)(Tn,{children:e})]})};var Bn,Wn,Fn,Qn,qn,Hn,Vn,Xn,Yn,Kn,Gn,Jn,Zn,ne,ee,te,re,ie,ae,se,oe,ce,le,de,ue,pe,xe,he,fe,me,ge,ve,be,je=d.Ay.div(Bn||(Bn=(0,a.A)(["\n  background: white;\n  border-radius: 20px;\n  padding: 30px;\n  box-shadow: 0 10px 40px rgba(220, 53, 34, 0.15);\n  max-width: 600px;\n  width: 100%;\n  border: 2px solid #fce8e8;\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n    border-radius: 15px;\n  }\n"]))),ye=d.Ay.div(Wn||(Wn=(0,a.A)(["\n  text-align: center;\n  margin-bottom: 30px;\n"]))),we=d.Ay.h2(Fn||(Fn=(0,a.A)(["\n  color: #2d3748;\n  font-size: 28px;\n  font-weight: 700;\n  margin: 0 0 10px 0;\n  \n  @media (max-width: 768px) {\n    font-size: 24px;\n  }\n"]))),Ae=d.Ay.p(Qn||(Qn=(0,a.A)(["\n  color: #718096;\n  font-size: 16px;\n  margin: 0;\n  \n  @media (max-width: 768px) {\n    font-size: 14px;\n  }\n"]))),ke=d.Ay.div(qn||(qn=(0,a.A)(["\n  margin-bottom: 30px;\n"]))),Ne=d.Ay.label(Hn||(Hn=(0,a.A)(["\n  display: block;\n  color: #2d3748;\n  font-weight: 600;\n  margin-bottom: 10px;\n  font-size: 16px;\n"]))),Se=d.Ay.input(Vn||(Vn=(0,a.A)(["\n  width: 100%;\n  padding: 15px;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  font-size: 18px;\n  font-weight: 600;\n  color: #2d3748;\n  background: #f7fafc;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #667eea;\n    background: white;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n  }\n  \n  &::placeholder {\n    color: #a0aec0;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 12px;\n    font-size: 16px;\n  }\n"]))),Ce=d.Ay.div(Xn||(Xn=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 10px;\n  margin-top: 15px;\n  \n  @media (max-width: 480px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n"]))),ze=d.Ay.button(Yn||(Yn=(0,a.A)(["\n  padding: 12px;\n  border: 2px solid #e2e8f0;\n  border-radius: 8px;\n  background: white;\n  color: #4a5568;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    border-color: #667eea;\n    color: #667eea;\n    transform: translateY(-1px);\n  }\n  \n  &.selected {\n    border-color: #667eea;\n    background: #667eea;\n    color: white;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px;\n    font-size: 14px;\n  }\n"]))),_e=d.Ay.div(Kn||(Kn=(0,a.A)(["\n  margin-bottom: 30px;\n"]))),Ee=d.Ay.label(Gn||(Gn=(0,a.A)(["\n  display: block;\n  color: #2d3748;\n  font-weight: 600;\n  margin-bottom: 15px;\n  font-size: 16px;\n"]))),Pe=d.Ay.div(Jn||(Jn=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  background: #f8fafc;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    border-color: #667eea;\n    background: #f0f4ff;\n  }\n"]))),Le=d.Ay.div(Zn||(Zn=(0,a.A)(["\n  flex: 1;\n"]))),Oe=d.Ay.div(ne||(ne=(0,a.A)(["\n  font-weight: 600;\n  color: #2d3748;\n  margin-bottom: 4px;\n  font-size: 18px;\n"]))),De=d.Ay.div(ee||(ee=(0,a.A)(["\n  font-size: 14px;\n  color: #718096;\n"]))),$e=d.Ay.div(te||(te=(0,a.A)(["\n  color: #667eea;\n  margin-left: 15px;\n  font-size: 24px;\n"]))),Me=d.Ay.div(re||(re=(0,a.A)(["\n  width: 100%;\n  height: 200px;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  border-radius: 15px;\n  padding: 20px;\n  color: white;\n  position: relative;\n  margin-bottom: 20px;\n  box-shadow: 0 10px 30px rgba(220, 53, 34, 0.3);\n  \n  @media (max-width: 768px) {\n    height: 180px;\n    padding: 15px;\n  }\n"]))),Ie=d.Ay.div(ie||(ie=(0,a.A)(["\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  font-size: 24px;\n  font-weight: bold;\n  \n  @media (max-width: 768px) {\n    font-size: 20px;\n    top: 15px;\n    left: 15px;\n  }\n"]))),Ue=d.Ay.input(ae||(ae=(0,a.A)(["\n  position: absolute;\n  bottom: 80px;\n  left: 20px;\n  width: 280px;\n  background: transparent;\n  border: none;\n  font-size: 18px;\n  font-weight: 600;\n  letter-spacing: 2px;\n  font-family: 'Courier New', monospace;\n  color: white;\n  outline: none;\n  \n  &::placeholder {\n    color: rgba(255, 255, 255, 0.7);\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 16px;\n    bottom: 70px;\n    left: 15px;\n    width: 240px;\n  }\n"]))),Te=d.Ay.div(se||(se=(0,a.A)(["\n  position: absolute;\n  bottom: 20px;\n  left: 20px;\n  display: flex;\n  gap: 30px;\n  \n  @media (max-width: 768px) {\n    bottom: 15px;\n    left: 15px;\n    gap: 20px;\n  }\n"]))),Re=d.Ay.div(oe||(oe=(0,a.A)(["\n  font-size: 14px;\n  \n  @media (max-width: 768px) {\n    font-size: 12px;\n  }\n"]))),Be=d.Ay.div(ce||(ce=(0,a.A)(["\n  opacity: 0.8;\n  margin-bottom: 2px;\n"]))),We=d.Ay.input(le||(le=(0,a.A)(["\n  background: transparent;\n  border: none;\n  font-weight: 600;\n  font-family: 'Courier New', monospace;\n  color: white;\n  outline: none;\n  font-size: 14px;\n  width: 120px;\n  \n  &::placeholder {\n    color: rgba(255, 255, 255, 0.7);\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 12px;\n    width: 100px;\n  }\n"]))),Fe=d.Ay.div(de||(de=(0,a.A)(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 5px;\n  \n  @media (max-width: 768px) {\n    top: 15px;\n    right: 15px;\n  }\n"]))),Qe=d.Ay.div(ue||(ue=(0,a.A)(["\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 12px;\n  font-weight: 600;\n  text-align: center;\n  \n  @media (max-width: 768px) {\n    font-size: 10px;\n  }\n"]))),qe=d.Ay.input(pe||(pe=(0,a.A)(["\n  width: 60px;\n  height: 30px;\n  background: rgba(255, 255, 255, 0.9);\n  border: none;\n  border-radius: 6px;\n  text-align: center;\n  font-size: 14px;\n  font-weight: 600;\n  color: #2d3748;\n  outline: none;\n  \n  &::placeholder {\n    color: #a0aec0;\n  }\n  \n  @media (max-width: 768px) {\n    width: 50px;\n    height: 25px;\n    font-size: 12px;\n  }\n"]))),He=(d.Ay.div(xe||(xe=(0,a.A)(["\n  margin-top: 20px;\n  padding: 25px;\n  background: #f8fafc;\n  border-radius: 15px;\n  border: 1px solid #e2e8f0;\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n  }\n"]))),d.Ay.h3(he||(he=(0,a.A)(["\n  margin: 0 0 20px 0;\n  color: #2d3748;\n  font-size: 18px;\n  font-weight: 600;\n"]))),d.Ay.div(fe||(fe=(0,a.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 15px;\n  margin-bottom: 15px;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  @media (max-width: 480px) {\n    grid-template-columns: 1fr;\n  }\n"]))),d.Ay.input(me||(me=(0,a.A)(["\n  width: 100%;\n  padding: 12px;\n  border: 2px solid #e2e8f0;\n  border-radius: 8px;\n  font-size: 16px;\n  color: #2d3748;\n  background: white;\n  transition: all 0.2s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);\n  }\n  \n  &::placeholder {\n    color: #a0aec0;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px;\n    font-size: 14px;\n  }\n"]))),d.Ay.button(ge||(ge=(0,a.A)(["\n  width: 100%;\n  padding: 16px;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  font-size: 18px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 14px;\n    font-size: 16px;\n  }\n"])))),Ve=d.Ay.div(ve||(ve=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  padding: 20px;\n  background: #f0fff4;\n  border: 2px solid #68d391;\n  border-radius: 12px;\n  color: #22543d;\n  font-weight: 600;\n  margin-bottom: 20px;\n"]))),Xe=d.Ay.div(be||(be=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  padding: 15px;\n  background: #fff5f5;\n  border: 2px solid #f56565;\n  border-radius: 12px;\n  color: #742a2a;\n  font-weight: 600;\n  margin-bottom: 20px;\n  font-size: 14px;\n"])));const Ye=function(n){var e=n.onClose,t=n.currentBalance,i=void 0===t?0:t,a=n.onSuccess,s=(0,r.useState)(""),o=(0,p.A)(s,2),c=o[0],l=o[1],d=(0,r.useState)(""),x=(0,p.A)(d,2),f=x[0],g=x[1],v=(0,r.useState)(""),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)(""),A=(0,p.A)(w,2),k=A[0],N=A[1],S=(0,r.useState)(""),C=(0,p.A)(S,2),z=C[0],_=C[1],E=(0,r.useState)(!1),P=(0,p.A)(E,2),L=P[0],O=P[1],D=(0,r.useState)(!1),$=(0,p.A)(D,2),M=$[0],I=$[1],U=(0,r.useState)(""),T=(0,p.A)(U,2),R=T[0],B=T[1],W=function(){var n=(0,u.A)(h().mark(function n(t){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),c&&!(parseFloat(c)<=0)){n.next=1;break}return B("Пожалуйста, введите сумму пополнения"),n.abrupt("return");case 1:if(!(parseFloat(c)<100)){n.next=2;break}return B("Минимальная сумма пополнения 100 рублей"),n.abrupt("return");case 2:if(f&&j&&k&&z){n.next=3;break}return B("Пожалуйста, заполните все поля карты"),n.abrupt("return");case 3:B(""),O(!0),setTimeout(function(){O(!1),I(!0),a&&a(),setTimeout(function(){I(!1),e&&e()},3e3)},2e3);case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();return M?(0,m.jsx)(je,{children:(0,m.jsxs)(Ve,{children:[(0,m.jsx)(ur,{}),"Баланс успешно пополнен на ",c," 🦊!"]})}):(0,m.jsxs)(je,{children:[(0,m.jsxs)(ye,{children:[(0,m.jsx)(we,{children:"Пополнение баланса"}),(0,m.jsxs)(Ae,{children:["Текущий баланс: ",i," 🦊"]})]}),(0,m.jsxs)("form",{onSubmit:W,children:[(0,m.jsxs)(ke,{children:[(0,m.jsx)(Ne,{children:"Сумма пополнения (🦊)"}),(0,m.jsx)(Se,{type:"number",placeholder:"Введите сумму",value:c,onChange:function(n){return function(n){if(l(n),n&&""!==n){var e=parseFloat(n);isNaN(e)?B("Пожалуйста, введите корректное число"):B(e>0&&e<100?"Минимальная сумма пополнения 100 рублей":"")}else B("")}(n.target.value)},min:"1",step:"1"}),R&&(0,m.jsx)(Xe,{children:R}),(0,m.jsx)(Ce,{children:[100,300,500,1e3,2e3,5e3].map(function(n){return(0,m.jsx)(ze,{type:"button",className:c===n.toString()?"selected":"",onClick:function(){return function(n){B(""),l(n.toString())}(n)},children:n},n)})})]}),(0,m.jsxs)(_e,{children:[(0,m.jsx)(Ee,{children:"Способ оплаты"}),(0,m.jsxs)(Pe,{children:[(0,m.jsxs)(Le,{children:[(0,m.jsx)(Oe,{children:"Банковская карта"}),(0,m.jsx)(De,{children:"Visa, MasterCard, МИР"})]}),(0,m.jsx)($e,{children:(0,m.jsx)(Xr,{})})]})]}),(0,m.jsxs)(Me,{children:[(0,m.jsx)(Ie,{children:"💳"}),(0,m.jsx)(Ue,{type:"text",placeholder:"**** **** **** ****",value:f,onChange:function(n){return g(function(n){for(var e=n.replace(/\s+/g,"").replace(/[^0-9]/gi,""),t=e.match(/\d{4,16}/g),r=t&&t[0]||"",i=[],a=0,s=r.length;a<s;a+=4)i.push(r.substring(a,a+4));return i.length?i.join(" "):e}(n.target.value))},maxLength:"19"}),(0,m.jsxs)(Te,{children:[(0,m.jsxs)(Re,{children:[(0,m.jsx)(Be,{children:"ВЛАДЕЛЕЦ"}),(0,m.jsx)(We,{type:"text",placeholder:"ИМЯ ФАМИЛИЯ",value:z,onChange:function(n){return _(n.target.value)}})]}),(0,m.jsxs)(Re,{children:[(0,m.jsx)(Be,{children:"СРОК ДЕЙСТВИЯ"}),(0,m.jsx)(We,{type:"text",placeholder:"MM/YY",value:j,onChange:function(n){return y((e=n.target.value.replace(/\s+/g,"").replace(/[^0-9]/gi,"")).length>=2?e.substring(0,2)+"/"+e.substring(2,4):e);var e},maxLength:"5"})]})]}),(0,m.jsxs)(Fe,{children:[(0,m.jsx)(Qe,{children:"CVV"}),(0,m.jsx)(qe,{type:"text",placeholder:"123",value:k,onChange:function(n){return N(n.target.value.replace(/\D/g,""))},maxLength:"4"})]})]}),(0,m.jsx)(He,{type:"submit",disabled:L,children:L?"Обработка...":"Пополнить на ".concat(c||0," 🦊")})]})]})};var Ke,Ge,Je,Ze,nt,et;function tt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function rt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tt(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var it=d.Ay.div(Ke||(Ke=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  width: 100%;\n  touch-action: none;\n  -webkit-overflow-scrolling: touch;\n  \n  @media (max-width: 768px) {\n    gap: 15px;\n  }\n"]))),at=d.Ay.div(Ge||(Ge=(0,a.A)(["\n  position: relative;\n  width: 100%;\n  max-width: 600px;\n  height: ",";\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  overflow: hidden;\n  background: #f7fafc;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  touch-action: none;\n  -webkit-overflow-scrolling: touch;\n  \n  img {\n    max-width: 100%;\n    max-height: 100%;\n    object-fit: contain;\n    pointer-events: none;\n  }\n  \n  @media (max-width: 768px) {\n    max-width: 100%;\n    height: ",";\n    border-radius: 8px;\n  }\n  \n  @media (max-width: 480px) {\n    height: ",";\n    border-radius: 6px;\n  }\n"])),function(n){return n.$height||"400px"},function(n){return n.$mobileHeight||"300px"},function(n){return n.$mobileHeight||"250px"}),st=d.Ay.div(Je||(Je=(0,a.A)(["\n  position: absolute;\n  border: 2px solid #dc3522;\n  background: rgba(220, 53, 34, 0.1);\n  cursor: move;\n  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);\n  user-select: none;\n  touch-action: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  \n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background: #dc3522;\n  }\n  \n  &::before {\n    top: 50%;\n    left: -2px;\n    right: -2px;\n    height: 2px;\n    transform: translateY(-50%);\n  }\n  \n  &::after {\n    left: 50%;\n    top: -2px;\n    bottom: -2px;\n    width: 2px;\n    transform: translateX(-50%);\n  }\n  \n  @media (max-width: 768px) {\n    border-width: 3px;\n    \n    &::before,\n    &::after {\n      background: #dc3522;\n    }\n  }\n"]))),ot=d.Ay.div(Ze||(Ze=(0,a.A)(["\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  background: #dc3522;\n  border: 2px solid white;\n  border-radius: 50%;\n  cursor: ",";\n  z-index: 10;\n  touch-action: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  \n  &.top-left { top: -6px; left: -6px; cursor: nw-resize; }\n  &.top-right { top: -6px; right: -6px; cursor: ne-resize; }\n  &.bottom-left { bottom: -6px; left: -6px; cursor: sw-resize; }\n  &.bottom-right { bottom: -6px; right: -6px; cursor: se-resize; }\n  \n  &:hover {\n    background: #ff6b58;\n    transform: scale(1.2);\n  }\n  \n  @media (max-width: 768px) {\n    width: 16px;\n    height: 16px;\n    border-width: 3px;\n    \n    &.top-left { top: -8px; left: -8px; }\n    &.top-right { top: -8px; right: -8px; }\n    &.bottom-left { bottom: -8px; left: -8px; }\n    &.bottom-right { bottom: -8px; right: -8px; }\n  }\n"])),function(n){return n.$cursor||"nw-resize"}),ct=d.Ay.div(nt||(nt=(0,a.A)(["\n  display: flex;\n  gap: 15px;\n  flex-wrap: wrap;\n  justify-content: center;\n  \n  @media (max-width: 768px) {\n    gap: 10px;\n    flex-direction: column;\n    width: 100%;\n    max-width: 300px;\n  }\n"]))),lt=d.Ay.div(et||(et=(0,a.A)(["\n  text-align: center;\n  color: #718096;\n  font-size: 14px;\n  line-height: 1.5;\n  max-width: 600px;\n  margin-bottom: 10px;\n  \n  @media (max-width: 768px) {\n    font-size: 13px;\n    margin-bottom: 15px;\n    padding: 0 10px;\n  }\n"])));const dt=function(n){var e=n.isOpen,t=n.onClose,i=n.imageFile,a=n.onCrop,s=(n.aspectRatio,n.minSize),o=void 0===s?100:s,c=(0,r.useState)({x:0,y:0,width:200,height:200}),l=(0,p.A)(c,2),d=l[0],u=l[1],x=(0,r.useState)(!1),h=(0,p.A)(x,2),f=h[0],g=h[1],v=(0,r.useState)({x:0,y:0}),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)(!1),A=(0,p.A)(w,2),k=A[0],N=A[1],S=(0,r.useState)(null),C=(0,p.A)(S,2),z=C[0],_=C[1],E=(0,r.useState)({width:0,height:0}),P=(0,p.A)(E,2),L=P[0],O=P[1],D=(0,r.useState)(""),$=(0,p.A)(D,2),M=$[0],I=$[1],U=(0,r.useState)({width:400,height:400}),T=(0,p.A)(U,2),R=T[0],B=T[1],W=(0,r.useState)(!1),F=(0,p.A)(W,2),Q=F[0],q=F[1],H=(0,r.useRef)(),V=(0,r.useRef)();(0,r.useEffect)(function(){var n=function(){q(window.innerWidth<=768)};return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}},[]),(0,r.useEffect)(function(){if(i){var n=URL.createObjectURL(i);I(n);var e=new Image;return e.onload=function(){var n=e.width,t=e.height;O({width:n,height:t});var r,i,a=Q?400:600;n>t?(r=a,i=t/n*a):(i=a,r=n/t*a),r=Math.max(r,Q?250:300),i=Math.max(i,Q?200:300),B({width:r,height:i});var s=Math.min(Q?150:200,.8*Math.min(r,i));u({x:(r-s)/2,y:(i-s)/2,width:s,height:s})},e.src=n,function(){return URL.revokeObjectURL(n)}}},[i,Q]);var X=(0,r.useCallback)(function(n){return n.touches&&n.touches[0]?{x:n.touches[0].clientX,y:n.touches[0].clientY}:{x:n.clientX,y:n.clientY}},[]),Y=(0,r.useCallback)(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"move";n.type,n.preventDefault(),n.stopPropagation();var t=X(n);"move"===e?(g(!0),y({x:t.x-d.x,y:t.y-d.y})):(N(!0),_(e),y({x:t.x,y:t.y}))},[d.x,d.y,X]),K=(0,r.useCallback)(function(n){if(f||k){"touchmove"===n.type&&n.preventDefault();var e=X(n);if(f){var t=e.x-j.x,r=e.y-j.y,i=R.width-d.width,a=R.height-d.height;u(function(n){return rt(rt({},n),{},{x:Math.max(0,Math.min(t,i)),y:Math.max(0,Math.min(r,a))})})}else if(k){var s=e.x-j.x,c=e.y-j.y;u(function(n){var e=n.width,t=n.height,r=n.x,i=n.y;switch(z){case"top-left":e=Math.max(o,n.width-s),t=Math.max(o,n.height-c),r=n.x+n.width-e,i=n.y+n.height-t;break;case"top-right":e=Math.max(o,n.width+s),t=Math.max(o,n.height-c),i=n.y+n.height-t;break;case"bottom-left":e=Math.max(o,n.width-s),t=Math.max(o,n.height+c),r=n.x+n.width-e;break;case"bottom-right":e=Math.max(o,n.width+s),t=Math.max(o,n.height+c);break;default:return n}var a=Math.min(e,t),l=R.width-a,d=R.height-a;return{x:Math.max(0,Math.min(r,l)),y:Math.max(0,Math.min(i,d)),width:a,height:a}}),y({x:e.x,y:e.y})}}},[f,k,d,j,z,R,o,X]),G=(0,r.useCallback)(function(n){n&&"touchend"===n.type&&n.preventDefault(),g(!1),N(!1),_(null)},[]);(0,r.useEffect)(function(){var n=function(n){return K(n)},e=function(){return G()},t=function(n){n.preventDefault(),K(n)},r=function(n){return G(n)},i=function(n){(f||k)&&n.preventDefault()};return(f||k)&&(document.addEventListener("mousemove",n),document.addEventListener("mouseup",e),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",r,{passive:!1}),document.addEventListener("touchmove",i,{passive:!1}),document.body.style.overflow="hidden"),function(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",r),document.removeEventListener("touchmove",i),document.body.style.overflow=""}},[f,k,K,G]),(0,r.useEffect)(function(){var n=V.current;if(n){var e=function(n){n.preventDefault(),Y(n,"move")},t=function(n){n.preventDefault(),Y(n,"top-left")},r=function(n){n.preventDefault(),Y(n,"top-right")},i=function(n){n.preventDefault(),Y(n,"bottom-left")},a=function(n){n.preventDefault(),Y(n,"bottom-right")},s=function(n){n.preventDefault()};n.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchmove",s,{passive:!1});var o=n.querySelectorAll(".crop-handle");return o.forEach(function(n,e){var s=[t,r,i,a][e];n.addEventListener("touchstart",s,{passive:!1})}),function(){n.removeEventListener("touchstart",e),n.removeEventListener("touchmove",s),o.forEach(function(n,e){var s=[t,r,i,a][e];n.removeEventListener("touchstart",s)})}}},[Y]),(0,r.useEffect)(function(){if(e)return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",function(){document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}},[e]);var J=(0,r.useCallback)(function(){if(H.current){var n=document.createElement("canvas"),e=n.getContext("2d");n.width=d.width,n.height=d.height;var r=L.width/R.width,i=L.height/R.height,s=d.x*r,o=d.y*i,c=d.width*r,l=d.height*i;e.drawImage(H.current,s,o,c,l,0,0,d.width,d.height),n.toBlob(function(n){if(n){var e=new File([n],"avatar.jpg",{type:"image/jpeg"});a(e),t()}},"image/jpeg",.9)}},[d,L,R,a,t]),Z=(0,r.useCallback)(function(){var n=Math.min(Q?150:200,.8*Math.min(R.width,R.height));u({x:(R.width-n)/2,y:(R.height-n)/2,width:n,height:n})},[R,Q]);return e&&i?(0,m.jsx)(Tr,{children:(0,m.jsxs)(Rr,{$maxWidth:Q?"95vw":"800px",children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"Обрезка аватарки"}),(0,m.jsx)(Dr,{$variant:"secondary",onClick:t,children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)(it,{children:[(0,m.jsx)(lt,{children:"Перетащите область выделения или используйте угловые маркеры для изменения размера. Аватарка будет квадратной формы."}),(0,m.jsxs)(at,{ref:V,$height:"".concat(R.height,"px"),$mobileHeight:"".concat(Math.min(R.height,300),"px"),children:[(0,m.jsx)("img",{ref:H,src:M,alt:"Предварительный просмотр",draggable:!1}),(0,m.jsxs)(st,{style:{left:d.x,top:d.y,width:d.width,height:d.height},onMouseDown:function(n){return Y(n,"move")},children:[(0,m.jsx)(ot,{className:"crop-handle top-left",$cursor:"nw-resize",onMouseDown:function(n){return Y(n,"top-left")}}),(0,m.jsx)(ot,{className:"crop-handle top-right",$cursor:"ne-resize",onMouseDown:function(n){return Y(n,"top-right")}}),(0,m.jsx)(ot,{className:"crop-handle bottom-left",$cursor:"sw-resize",onMouseDown:function(n){return Y(n,"bottom-left")}}),(0,m.jsx)(ot,{className:"crop-handle bottom-right",$cursor:"se-resize",onMouseDown:function(n){return Y(n,"bottom-right")}})]})]}),(0,m.jsxs)(ct,{children:[(0,m.jsx)(Dr,{$variant:"secondary",onClick:Z,children:"Сбросить"}),(0,m.jsx)(Dr,{onClick:J,children:"Обрезать и сохранить"})]})]})]})}):null};var ut,pt,xt,ht,ft,mt,gt,vt,bt,jt,yt,wt,At,kt,Nt,St,Ct,zt,_t,Et,Pt,Lt,Ot,Dt,$t,Mt,It,Ut,Tt,Rt,Bt,Wt,Ft,Qt,qt,Ht,Vt,Xt,Yt,Kt,Gt,Jt,Zt,nr,er=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})},tr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,m.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})},rr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,m.jsx)("path",{d:"m21 21-4.35-4.35"})]})},ir=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,m.jsx)("polygon",{points:"22,2 15,22 11,13 2,9 22,2"})]})},ar=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})},sr=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})},or=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,m.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},cr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,m.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})},lr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,m.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},dr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,m.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]})},ur=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polyline",{points:"20,6 9,17 4,12"})})},pr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,m.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,m.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,m.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})},xr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"20,12 20,22 4,22 4,12"}),(0,m.jsx)("rect",{x:"2",y:"7",width:"20",height:"5"}),(0,m.jsx)("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),(0,m.jsx)("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),(0,m.jsx)("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]})},hr=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polygon",{points:"12,2 15.09,8.26 22,9 17,14.74 18.18,21.02 12,17.77 5.82,21.02 7,14.74 2,9 8.91,8.26 12,2"})})},fr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,m.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,m.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},mr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M6 6l6-4 6 4"}),(0,m.jsx)("path",{d:"M6 6v14h12V6"}),(0,m.jsx)("circle",{cx:"12",cy:"13",r:"2"})]})},gr=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polyline",{points:"18,15 12,9 6,15"})})},vr=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polyline",{points:"6,9 12,15 18,9"})})},br=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,m.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"}),(0,m.jsx)("path",{d:"M5.7 8H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h3.7"}),(0,m.jsx)("path",{d:"M18.3 8H22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-3.7"}),(0,m.jsx)("path",{d:"M5.7 8v5.7C5.7 17 8.3 19 12 19s6.3-2 6.3-5.3V8"})]})},jr=d.Ay.div(ut||(ut=(0,a.A)(["\n  min-height: 100vh;\n  background: ",";\n  padding: ",";\n  \n  @media (max-width: 768px) {\n    padding: ",";\n  }\n"])),function(n){return n.$gradient?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":n.theme.colors.background},function(n){return n.$noPadding?"0":"20px"},function(n){return n.$noPadding?"0":"10px"}),yr=d.Ay.div(pt||(pt=(0,a.A)(["\n  width: 100%;\n  max-width: ",";\n  margin: 0 auto;\n  background: white;\n  border-radius: 20px;\n  padding: ",";\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);\n  animation: slideUp 0.4s ease-out;\n  \n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(30px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  @media (max-width: 768px) {\n    padding: ",";\n    max-width: 100%;\n    border-radius: 15px;\n  }\n"])),function(n){return n.$maxWidth||"900px"},function(n){return n.$padding||"40px"},function(n){return n.$mobilePadding||"20px"}),wr=d.Ay.div(xt||(xt=(0,a.A)(["\n  text-align: center;\n  margin-bottom: 30px;\n"]))),Ar=d.Ay.div(ht||(ht=(0,a.A)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: ",";\n  height: ",";\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  border-radius: 20px;\n  color: white;\n  font-size: ",";\n  font-weight: bold;\n  margin-bottom: 15px;\n  box-shadow: 0 10px 30px rgba(220, 53, 34, 0.3);\n  \n  @media (max-width: 768px) {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n"])),function(n){return n.$size||"80px"},function(n){return n.$size||"80px"},function(n){return n.$fontSize||"32px"},function(n){return n.$mobileSize||"60px"},function(n){return n.$mobileSize||"60px"},function(n){return n.$mobileFontSize||"24px"}),kr=d.Ay.h1(ft||(ft=(0,a.A)(["\n  text-align: center;\n  margin: 0 0 10px 0;\n  color: #2d3748;\n  font-size: ",";\n  font-weight: 700;\n  \n  @media (max-width: 768px) {\n    font-size: ",";\n  }\n"])),function(n){return"large"===n.$size?"32px":"28px"},function(n){return"large"===n.$size?"28px":"24px"}),Nr=d.Ay.p(mt||(mt=(0,a.A)(["\n  text-align: center;\n  color: #718096;\n  font-size: 14px;\n  margin-bottom: 30px;\n"]))),Sr=d.Ay.h3(gt||(gt=(0,a.A)(["\n  margin: 0 0 20px 0;\n  color: #2d3748;\n  font-size: 18px;\n  font-weight: 600;\n  padding-bottom: 10px;\n  border-bottom: 2px solid #dc3522;\n  display: inline-block;\n  \n  @media (max-width: 768px) {\n    font-size: 16px;\n  }\n"]))),Cr=d.Ay.form(vt||(vt=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),zr=(d.Ay.div(bt||(bt=(0,a.A)(["\n  background: #f7fafc;\n  padding: 25px;\n  border-radius: 15px;\n  margin-bottom: 20px;\n  border: 1px solid #e2e8f0;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n  }\n  \n  @media (max-width: 768px) {\n    padding: 20px 15px;\n  }\n"]))),d.Ay.div(jt||(jt=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  position: relative;\n"])))),_r=(d.Ay.div(yt||(yt=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(",", 1fr));\n  gap: 20px;\n  \n  @media (max-width: 576px) {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n"])),function(n){return n.$minWidth||"240px"}),d.Ay.label(wt||(wt=(0,a.A)(["\n  font-weight: 500;\n  color: #4a5568;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  \n  .required {\n    color: #dc3522;\n    font-weight: bold;\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 13px;\n  }\n"])))),Er=d.Ay.div(At||(At=(0,a.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n"]))),Pr=d.Ay.input(kt||(kt=(0,a.A)(['\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 15px;\n  transition: all 0.3s ease;\n  background: white;\n  \n  &:focus {\n    outline: none;\n    border-color: #dc3522;\n    box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n  }\n  \n  &:hover:not(:focus) {\n    border-color: #cbd5e0;\n  }\n  \n  &.error {\n    border-color: #f56565;\n    background: #fff5f5;\n  }\n  \n  &:disabled {\n    background: #f7fafc;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n  \n  &[type="password"] {\n    padding-right: 45px;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n  }\n']))),Lr=d.Ay.select(Nt||(Nt=(0,a.A)(["\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 15px;\n  background: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%234A5568' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 16px center;\n  padding-right: 40px;\n  \n  &:focus {\n    outline: none;\n    border-color: #dc3522;\n    box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n  }\n  \n  &:hover:not(:focus) {\n    border-color: #cbd5e0;\n  }\n  \n  &.error {\n    border-color: #f56565;\n    background-color: #fff5f5;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n  }\n"]))),Or=d.Ay.textarea(St||(St=(0,a.A)(["\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 15px;\n  min-height: ",";\n  resize: vertical;\n  font-family: inherit;\n  transition: all 0.3s ease;\n  background: white;\n  \n  &:focus {\n    outline: none;\n    border-color: #dc3522;\n    box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n  }\n  \n  &:hover:not(:focus) {\n    border-color: #cbd5e0;\n  }\n  \n  &.error {\n    border-color: #f56565;\n    background: #fff5f5;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n    min-height: 80px;\n  }\n"])),function(n){return n.$minHeight||"100px"}),Dr=d.Ay.button(Ct||(Ct=(0,a.A)(["\n  padding: ",";\n  background: ",";\n  color: ",";\n  border: ",";\n  border-radius: 10px;\n  font-size: ",";\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: ",";\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  \n  &:hover:not(:disabled) {\n    transform: ",";\n    box-shadow: ",";\n    background: ",";\n  }\n  \n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n  \n  &:disabled {\n    background: linear-gradient(135deg, #cbd5e0 0%, #a0aec0 100%);\n    cursor: not-allowed;\n    box-shadow: none;\n    transform: none;\n    border-color: ",";\n    color: ",";\n  }\n  \n  @media (max-width: 768px) {\n    padding: ",";\n    font-size: ",";\n  }\n"])),function(n){return"small"===n.$size?"8px 16px":"14px 28px"},function(n){return"secondary"===n.$variant?"white":"danger"===n.$variant?"#f56565":"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)"},function(n){return"secondary"===n.$variant?"#dc3522":"white"},function(n){return"secondary"===n.$variant?"2px solid #dc3522":"none"},function(n){return"small"===n.$size?"14px":"16px"},function(n){return"secondary"===n.$variant?"none":"0 4px 15px rgba(220, 53, 34, 0.3)"},function(n){return"secondary"===n.$variant?"none":"translateY(-2px)"},function(n){return"secondary"===n.$variant?"0 2px 10px rgba(220, 53, 34, 0.2)":"danger"===n.$variant?"0 6px 20px rgba(245, 101, 101, 0.4)":"0 6px 20px rgba(220, 53, 34, 0.4)"},function(n){return"secondary"===n.$variant?"#fff5f5":"danger"===n.$variant?"#e53e3e":"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)"},function(n){return"secondary"===n.$variant?"#cbd5e0":"transparent"},function(n){return"secondary"===n.$variant?"#a0aec0":"white"},function(n){return"small"===n.$size?"6px 12px":"12px 24px"},function(n){return"small"===n.$size?"13px":"15px"}),$r=d.Ay.button(zt||(zt=(0,a.A)(["\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  border: none;\n  background: ",";\n  color: ",";\n  cursor: pointer;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  \n  &:hover:not(:disabled) {\n    background: ",";\n    transform: scale(1.1);\n  }\n  \n  &:focus {\n    outline: none;\n  }\n  \n  &:disabled {\n    background: #e2e8f0;\n    color: #a0aec0;\n    cursor: not-allowed;\n    transform: none;\n  }\n"])),function(n){return n.$size||"40px"},function(n){return n.$size||"40px"},function(n){return"secondary"===n.$variant?"#f7fafc":"#dc3522"},function(n){return"secondary"===n.$variant?"#4a5568":"white"},function(n){return"secondary"===n.$variant?"#e2e8f0":"#ff6b58"}),Mr=d.Ay.span(_t||(_t=(0,a.A)(["\n  color: #f56565;\n  font-size: 13px;\n  margin-top: 4px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  \n  &::before {\n    content: '⚠';\n    font-size: 12px;\n  }\n"]))),Ir=d.Ay.div(Et||(Et=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: ",";\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n  border: 1px solid #e2e8f0;\n  \n  &:hover {\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n    transform: translateY(-2px);\n  }\n"])),function(n){return n.$padding||"20px"}),Ur=d.Ay.div(Pt||(Pt=(0,a.A)(["\n  width: ",";\n  height: ",";\n  border-radius: 50%;\n  background-image: url(",");\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  font-size: ",";\n  border: ",";\n  cursor: ",";\n  transition: all 0.2s ease;\n  position: relative;\n  overflow: hidden;\n  \n  &:hover {\n    ","\n  }\n  \n  ","\n  \n  /* Адаптивные размеры для разных экранов */\n  /* Большие экраны - аватарка 50px */\n  @media (min-width: 1440px) {\n    ","\n  }\n  \n  /* Средне-большие экраны - аватарка 47px */\n  @media (min-width: 1240px) and (max-width: 1439px) {\n    ","\n  }\n  \n  /* Средние экраны - аватарка 45px */\n  @media (max-width: 1200px) {\n    ","\n  }\n  \n  /* Планшеты в альбомной ориентации - аватарка 42px */\n  @media (max-width: 1024px) {\n    ","\n  }\n  \n  /* Планшеты в портретной ориентации - аватарка 40px */\n  @media (max-width: 768px) {\n    ","\n  }\n  \n  /* Большие мобильные - аватарка 38px */\n  @media (max-width: 576px) {\n    ","\n  }\n  \n  /* Маленькие мобильные - аватарка 34px */\n  @media (max-width: 360px) {\n    ","\n  }\n"])),function(n){return n.$size||"40px"},function(n){return n.$size||"40px"},function(n){return n.$src},function(n){return n.$bgColor||"#dc3522"},function(n){return n.$fontSize||"16px"},function(n){return n.$border||"2px solid #e2e8f0"},function(n){return n.$clickable?"pointer":"default"},function(n){return n.$clickable&&"\n      border-color: #dc3522;\n      transform: scale(1.05);\n    "},function(n){return n.$online&&"\n    &::after {\n      content: '';\n      position: absolute;\n      bottom: 2px;\n      right: 2px;\n      width: 12px;\n      height: 12px;\n      background: #4caf50;\n      border-radius: 50%;\n      border: 2px solid white;\n    }\n  "},function(n){return"45px"===n.$size&&"\n      width: 50px;\n      height: 50px;\n      font-size: 20px;\n      border-width: 2px;\n    "},function(n){return"45px"===n.$size&&"\n      width: 47px;\n      height: 47px;\n      font-size: 19px;\n      border-width: 2px;\n    "},function(n){return"45px"===n.$size&&"\n      width: 45px;\n      height: 45px;\n      font-size: 18px;\n      border-width: 2px;\n    "},function(n){return"45px"===n.$size&&"\n      width: 42px;\n      height: 42px;\n      font-size: 17px;\n      border-width: 2px;\n    "},function(n){return"45px"===n.$size&&"\n      width: 40px;\n      height: 40px;\n      font-size: 16px;\n      border-width: 1.5px;\n    "},function(n){return"45px"===n.$size&&"\n      width: 38px;\n      height: 38px;\n      font-size: 15px;\n      border-width: 1.5px;\n    "},function(n){return"45px"===n.$size&&"\n      width: 34px;\n      height: 34px;\n      font-size: 13px;\n      border-width: 1px;\n    "}),Tr=d.Ay.div(Lt||(Lt=(0,a.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n  backdrop-filter: blur(5px);\n"]))),Rr=d.Ay.div(Ot||(Ot=(0,a.A)(["\n  background: white;\n  border-radius: 20px;\n  padding: 30px;\n  max-width: ",";\n  width: 100%;\n  max-height: 90vh;\n  overflow-y: auto;\n  animation: modalSlideUp 0.3s ease-out;\n  \n  @keyframes modalSlideUp {\n    from {\n      opacity: 0;\n      transform: translateY(30px) scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0) scale(1);\n    }\n  }\n"])),function(n){return n.$maxWidth||"500px"}),Br=d.Ay.div(Dt||(Dt=(0,a.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  \n  h2 {\n    margin: 0;\n    color: #2d3748;\n    font-size: 24px;\n    font-weight: 700;\n  }\n"]))),Wr=d.Ay.div($t||($t=(0,a.A)(["\n  display: flex;\n  align-items: ",";\n  justify-content: ",";\n  gap: ",";\n  flex-direction: ",";\n  flex-wrap: ",";\n  \n  @media (max-width: 768px) {\n    flex-direction: ",";\n    gap: ",";\n  }\n"])),function(n){return n.$align||"center"},function(n){return n.$justify||"flex-start"},function(n){return n.$gap||"10px"},function(n){return n.$direction||"row"},function(n){return n.$wrap?"wrap":"nowrap"},function(n){return n.$mobileDirection||n.$direction||"row"},function(n){return n.$mobileGap||n.$gap||"10px"}),Fr=d.Ay.div(Mt||(Mt=(0,a.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: ",";\n  \n  @media (max-width: 768px) {\n    grid-template-columns: ",";\n    gap: ",";\n  }\n"])),function(n){return n.$columns||"repeat(auto-fit, minmax(250px, 1fr))"},function(n){return n.$gap||"20px"},function(n){return n.$mobileColumns||"1fr"},function(n){return n.$mobileGap||"15px"}),Qr=d.Ay.div(It||(It=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  \n  &::after {\n    content: '';\n    width: 40px;\n    height: 40px;\n    border: 4px solid #e2e8f0;\n    border-top: 4px solid #dc3522;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n"]))),qr=(d.Ay.div(Ut||(Ut=(0,a.A)(["\n  height: 4px;\n  background: #e2e8f0;\n  border-radius: 2px;\n  margin: 20px 0;\n  overflow: hidden;\n  \n  &::after {\n    content: '';\n    display: block;\n    height: 100%;\n    width: ","%;\n    background: linear-gradient(90deg, #dc3522 0%, #ff6b58 100%);\n    transition: width 0.3s ease;\n  }\n"])),function(n){return n.$progress||0}),function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})}),Hr=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",transform:"rotate(180)",children:(0,m.jsx)("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})})},Vr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,m.jsx)("circle",{cx:"12",cy:"16",r:"1"}),(0,m.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})},Xr=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]})},Yr="480px",Kr="576px",Gr="768px",Jr="992px",Zr="1170px",ni="1200px",ei="1440px",ti="1920px",ri={mobile:"@media (min-width: ".concat(Yr,")"),mobileLarge:"@media (min-width: ".concat(Kr,")"),tablet:"@media (min-width: ".concat(Gr,")"),tabletLarge:"@media (min-width: ".concat(Jr,")"),desktopMobile:"@media (min-width: ".concat(Zr,")"),desktop:"@media (min-width: ".concat(ni,")"),desktopLarge:"@media (min-width: ".concat(ei,")"),desktopXL:"@media (min-width: ".concat(ti,")"),maxMobile:"@media (max-width: ".concat(parseInt(Yr)-1,"px)"),maxMobileLarge:"@media (max-width: ".concat(parseInt(Kr)-1,"px)"),maxTablet:"@media (max-width: ".concat(parseInt(Gr)-1,"px)"),maxTabletLarge:"@media (max-width: ".concat(parseInt(Jr)-1,"px)"),maxDesktopMobile:"@media (max-width: ".concat(parseInt(Zr)-1,"px)"),maxDesktop:"@media (max-width: ".concat(parseInt(ni)-1,"px)"),maxDesktopLarge:"@media (max-width: ".concat(parseInt(ei)-1,"px)"),mobileOnly:"@media (max-width: ".concat(parseInt(Gr)-1,"px)"),tabletOnly:"@media (min-width: ".concat(Gr,") and (max-width: ").concat(parseInt(Zr)-1,"px)"),desktopOnly:"@media (min-width: ".concat(Zr,")"),landscape:"@media (orientation: landscape)",portrait:"@media (orientation: portrait)",retina:"@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)"},ii={tiny:"50px",mobile:"55px",mobileLarge:"58px",tablet:"62px",tabletLarge:"66px",desktop:"70px",desktopLarge:"75px",desktopXL:"80px"},ai={tiny:"0 8px",mobile:"0 12px",mobileLarge:"0 15px",tablet:"0 18px",tabletLarge:"0 22px",desktop:"0 25px",desktopLarge:"0 30px",desktopXL:"0 35px"},si={tiny:"32px",mobile:"36px",mobileLarge:"38px",tablet:"40px",tabletLarge:"42px",desktop:"45px",desktopLarge:"48px",desktopXL:"52px"},oi={tiny:"13px",mobile:"14px",mobileLarge:"15px",tablet:"16px",tabletLarge:"17px",desktop:"18px",desktopLarge:"19px",desktopXL:"21px"},ci={tiny:"16px",mobile:"18px",mobileLarge:"19px",tablet:"20px",tabletLarge:"22px",desktop:"24px",desktopLarge:"26px",desktopXL:"28px"},li={padding:{tiny:"6px 8px",mobile:"8px 10px",mobileLarge:"8px 12px",tablet:"10px 14px",tabletLarge:"10px 16px",desktop:"12px 16px",desktopLarge:"12px 18px",desktopXL:"14px 20px"},fontSize:{tiny:"12px",mobile:"13px",mobileLarge:"13px",tablet:"14px",tabletLarge:"14px",desktop:"15px",desktopLarge:"15px",desktopXL:"16px"},gap:{tiny:"4px",mobile:"5px",mobileLarge:"6px",tablet:"6px",tabletLarge:"7px",desktop:"8px",desktopLarge:"8px",desktopXL:"10px"}},di={gap:{tiny:"2px",mobile:"4px",mobileLarge:"6px",tablet:"6px",tabletLarge:"8px",desktop:"8px",desktopLarge:"10px",desktopXL:"12px"}},ui={tiny:"34px",mobile:"36px",mobileLarge:"38px",tablet:"40px",tabletLarge:"42px",desktop:"45px",desktopLarge:"48px",desktopXL:"52px"},pi={tiny:"14px",mobile:"16px",mobileLarge:"17px",tablet:"18px",tabletLarge:"19px",desktop:"20px",desktopLarge:"22px",desktopXL:"24px"},xi={tiny:"14px",mobile:"16px",mobileLarge:"17px",tablet:"17px",tabletLarge:"18px",desktop:"18px",desktopLarge:"20px",desktopXL:"22px"},hi={padding:{tiny:"12px",mobile:"15px",mobileLarge:"18px",tablet:"20px",tabletLarge:"22px"},linkPadding:{tiny:"12px",mobile:"14px",mobileLarge:"16px",tablet:"16px",tabletLarge:"18px"},fontSize:{tiny:"14px",mobile:"15px",mobileLarge:"15px",tablet:"16px",tabletLarge:"16px"}},fi={minWidth:{tiny:"200px",mobile:"220px",mobileLarge:"240px",tablet:"250px",tabletLarge:"260px",desktop:"280px",desktopLarge:"300px",desktopXL:"320px"},padding:{tiny:"6px",mobile:"8px",mobileLarge:"8px",tablet:"10px",tabletLarge:"10px",desktop:"12px",desktopLarge:"12px",desktopXL:"14px"}},mi=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,m.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]})},gi=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})},vi=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,m.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})},bi=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M12 1l3 6 6 3-6 3-3 6-3-6-6-3 6-3z"})})},ji=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,m.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]})},yi=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,m.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,m.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},wi=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M6 3h12l4 6-10 13L2 9z"}),(0,m.jsx)("path",{d:"M11 3L8 9l4 13 4-13-3-6"}),(0,m.jsx)("path",{d:"M2 9l4.5 13L11 9"}),(0,m.jsx)("path",{d:"M13 9l4.5 13L22 9"})]})},Ai=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,m.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"}),(0,m.jsx)("path",{d:"M5.7 8H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h3.7"}),(0,m.jsx)("path",{d:"M18.3 8H22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-3.7"}),(0,m.jsx)("path",{d:"M5.7 8v5.7C5.7 17 8.3 19 12 19s6.3-2 6.3-5.3V8"})]})},ki=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,m.jsx)("path",{d:"M21 21l-4.35-4.35"})]})},Ni=function(){return(0,m.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,m.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})},Si=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})},Ci=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,m.jsx)("path",{d:"M12 1v6m0 6v6m11-7h-6m-6 0H1"})]})},zi=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,m.jsx)("polyline",{points:"16,17 21,12 16,7"}),(0,m.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})},_i=d.Ay.nav(Tt||(Tt=(0,a.A)(["\n  background: white;\n  border-bottom: 1px solid #e2e8f0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  backdrop-filter: blur(10px);\n  \n  /* Классы для устранения конфликтов с старым CSS */\n  &.react-navigation-container {\n    position: sticky !important;\n    top: 0 !important;\n    z-index: 1000 !important;\n    width: 100% !important;\n    background: white !important;\n    border-bottom: 1px solid #e2e8f0 !important;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important;\n    backdrop-filter: blur(10px) !important;\n  }\n"]))),Ei=d.Ay.div(Rt||(Rt=(0,a.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  \n  /* Высота и отступы по новой системе */\n  height: ",";\n  padding: ",";\n  \n  "," {\n    height: ",";\n    padding: ",";\n  }\n  \n  "," {\n    height: ",";\n    padding: ",";\n  }\n  \n  "," {\n    height: ",";\n    padding: ",";\n  }\n  \n  "," {\n    height: ",";\n    padding: ",";\n  }\n  \n  "," {\n    height: ",";\n    padding: ",";\n  }\n  \n  "," {\n    height: ",";\n    padding: ",";\n    max-width: 1400px;\n  }\n  \n  "," {\n    height: ",";\n    padding: ",";\n    max-width: 1600px;\n  }\n"])),ii.tiny,ai.tiny,ri.mobile,ii.mobile,ai.mobile,ri.mobileLarge,ii.mobileLarge,ai.mobileLarge,ri.tablet,ii.tablet,ai.tablet,ri.tabletLarge,ii.tabletLarge,ai.tabletLarge,ri.desktop,ii.desktop,ai.desktop,ri.desktopLarge,ii.desktopLarge,ai.desktopLarge,ri.desktopXL,ii.desktopXL,ai.desktopXL),Pi=d.Ay.div(Bt||(Bt=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n"]))),Li=d.Ay.div(Wt||(Wt=(0,a.A)(["\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  border-radius: 12px;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  box-shadow: 0 4px 15px rgba(220, 53, 34, 0.3);\n  transition: all 0.3s ease;\n  \n  /* Адаптивные размеры */\n  width: ",";\n  height: ",";\n  font-size: ",";\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: ",";\n  }\n  \n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 6px 20px rgba(220, 53, 34, 0.4);\n  }\n"])),si.tiny,si.tiny,oi.tiny,ri.mobile,si.mobile,si.mobile,oi.mobile,ri.mobileLarge,si.mobileLarge,si.mobileLarge,oi.mobileLarge,ri.tablet,si.tablet,si.tablet,oi.tablet,ri.tabletLarge,si.tabletLarge,si.tabletLarge,oi.tabletLarge,ri.desktop,si.desktop,si.desktop,oi.desktop,ri.desktopLarge,si.desktopLarge,si.desktopLarge,oi.desktopLarge,ri.desktopXL,si.desktopXL,si.desktopXL,oi.desktopXL),Oi=d.Ay.div(Ft||(Ft=(0,a.A)(["\n  font-weight: bold;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  transition: all 0.3s ease;\n  user-select: none;\n  \n  /* Адаптивные размеры шрифта */\n  font-size: ",";\n  \n  "," {\n    font-size: ",";\n  }\n  \n  "," {\n    font-size: ",";\n  }\n  \n  "," {\n    font-size: ",";\n  }\n  \n  "," {\n    font-size: ",";\n  }\n  \n  "," {\n    font-size: ",";\n  }\n  \n  "," {\n    font-size: ",";\n  }\n  \n  "," {\n    font-size: ",";\n  }\n  \n  /* Скрываем на самых маленьких экранах */\n  "," {\n    display: none;\n  }\n"])),ci.tiny,ri.mobile,ci.mobile,ri.mobileLarge,ci.mobileLarge,ri.tablet,ci.tablet,ri.tabletLarge,ci.tabletLarge,ri.desktop,ci.desktop,ri.desktopLarge,ci.desktopLarge,ri.desktopXL,ci.desktopXL,ri.maxMobile),Di=d.Ay.div(Qt||(Qt=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  \n  /* Адаптивный gap */\n  gap: ",";\n  \n  "," {\n    gap: ",";\n  }\n  \n  "," {\n    gap: ",";\n  }\n  \n  "," {\n    gap: ",";\n  }\n  \n  "," {\n    gap: ",";\n  }\n  \n  "," {\n    gap: ",";\n  }\n  \n  "," {\n    gap: ",";\n  }\n  \n  "," {\n    gap: ",";\n  }\n  \n  /* Скрываем при ширине меньше 1170px */\n  "," {\n    display: none;\n  }\n"])),di.gap.tiny,ri.mobile,di.gap.mobile,ri.mobileLarge,di.gap.mobileLarge,ri.tablet,di.gap.tablet,ri.tabletLarge,di.gap.tabletLarge,ri.desktop,di.gap.desktop,ri.desktopLarge,di.gap.desktopLarge,ri.desktopXL,di.gap.desktopXL,ri.maxDesktopMobile),$i=(0,d.Ay)(s.N_)(qt||(qt=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  border-radius: 12px;\n  color: #4a5568;\n  text-decoration: none;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  position: relative;\n  white-space: nowrap;\n  \n  /* Адаптивные размеры */\n  padding: ",";\n  font-size: ",";\n  gap: ",";\n  \n  "," {\n    padding: ",";\n    font-size: ",";\n    gap: ",";\n  }\n  \n  "," {\n    padding: ",";\n    font-size: ",";\n    gap: ",";\n  }\n  \n  "," {\n    padding: ",";\n    font-size: ",";\n    gap: ",";\n  }\n  \n  "," {\n    padding: ",";\n    font-size: ",";\n    gap: ",";\n  }\n  \n  "," {\n    padding: ",";\n    font-size: ",";\n    gap: ",";\n  }\n  \n  "," {\n    padding: ",";\n    font-size: ",";\n    gap: ",";\n  }\n  \n  "," {\n    padding: ",";\n    font-size: ",";\n    gap: ",";\n  }\n  \n  &:hover {\n    background: linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%);\n    color: #dc3522;\n    text-decoration: none;\n    transform: translateY(-1px);\n  }\n  \n  &.active {\n    background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n    color: white;\n    box-shadow: 0 4px 15px rgba(220, 53, 34, 0.3);\n  }\n  \n  /* Иконки в ссылках */\n  svg {\n    width: 18px;\n    height: 18px;\n    flex-shrink: 0;\n    \n    "," {\n      width: 20px;\n      height: 20px;\n    }\n    \n    "," {\n      width: 22px;\n      height: 22px;\n    }\n  }\n"])),li.padding.tiny,li.fontSize.tiny,li.gap.tiny,ri.mobile,li.padding.mobile,li.fontSize.mobile,li.gap.mobile,ri.mobileLarge,li.padding.mobileLarge,li.fontSize.mobileLarge,li.gap.mobileLarge,ri.tablet,li.padding.tablet,li.fontSize.tablet,li.gap.tablet,ri.tabletLarge,li.padding.tabletLarge,li.fontSize.tabletLarge,li.gap.tabletLarge,ri.desktop,li.padding.desktop,li.fontSize.desktop,li.gap.desktop,ri.desktopLarge,li.padding.desktopLarge,li.fontSize.desktopLarge,li.gap.desktopLarge,ri.desktopXL,li.padding.desktopXL,li.fontSize.desktopXL,li.gap.desktopXL,ri.desktopLarge,ri.desktopXL),Mi=d.Ay.div(Ht||(Ht=(0,a.A)(["\n  position: relative;\n"]))),Ii=d.Ay.button(Vt||(Vt=(0,a.A)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  position: relative;\n  \n  &:hover {\n    transform: scale(1.05);\n  }\n"]))),Ui=d.Ay.div(Xt||(Xt=(0,a.A)(["\n  position: absolute;\n  bottom: -2px;\n  right: -2px;\n  border-radius: 50%;\n  background: ",";\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid white;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s ease;\n  \n  /* Адаптивные размеры */\n  width: ",";\n  height: ",";\n  font-size: 8px;\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 9px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 9px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 10px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 10px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 10px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 11px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 12px;\n  }\n"])),function(n){return n.$color},pi.tiny,pi.tiny,ri.mobile,pi.mobile,pi.mobile,ri.mobileLarge,pi.mobileLarge,pi.mobileLarge,ri.tablet,pi.tablet,pi.tablet,ri.tabletLarge,pi.tabletLarge,pi.tabletLarge,ri.desktop,pi.desktop,pi.desktop,ri.desktopLarge,pi.desktopLarge,pi.desktopLarge,ri.desktopXL,pi.desktopXL,pi.desktopXL),Ti=d.Ay.div(Yt||(Yt=(0,a.A)(["\n  position: absolute;\n  top: calc(100% + 10px);\n  right: 0;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 15px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  backdrop-filter: blur(10px);\n  transition: all 0.3s ease;\n  \n  /* Адаптивные размеры */\n  padding: ",";\n  min-width: ",";\n  \n  "," {\n    padding: ",";\n    min-width: ",";\n  }\n  \n  "," {\n    padding: ",";\n    min-width: ",";\n  }\n  \n  "," {\n    padding: ",";\n    min-width: ",";\n  }\n  \n  "," {\n    padding: ",";\n    min-width: ",";\n  }\n  \n  "," {\n    padding: ",";\n    min-width: ",";\n  }\n  \n  "," {\n    padding: ",";\n    min-width: ",";\n  }\n  \n  "," {\n    padding: ",";\n    min-width: ",";\n  }\n  \n  ","\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: -8px;\n    right: 20px;\n    width: 16px;\n    height: 16px;\n    background: white;\n    border-left: 1px solid #e2e8f0;\n    border-top: 1px solid #e2e8f0;\n    transform: rotate(45deg);\n  }\n"])),fi.padding.tiny,fi.minWidth.tiny,ri.mobile,fi.padding.mobile,fi.minWidth.mobile,ri.mobileLarge,fi.padding.mobileLarge,fi.minWidth.mobileLarge,ri.tablet,fi.padding.tablet,fi.minWidth.tablet,ri.tabletLarge,fi.padding.tabletLarge,fi.minWidth.tabletLarge,ri.desktop,fi.padding.desktop,fi.minWidth.desktop,ri.desktopLarge,fi.padding.desktopLarge,fi.minWidth.desktopLarge,ri.desktopXL,fi.padding.desktopXL,fi.minWidth.desktopXL,function(n){return!n.$show&&"display: none;"}),Ri=d.Ay.button(Kt||(Kt=(0,a.A)(["\n  width: 100%;\n  padding: 12px 16px;\n  text-align: left;\n  background: none;\n  border: none;\n  cursor: pointer;\n  border-radius: 10px;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  color: #4a5568;\n  \n  &:hover {\n    background: linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%);\n    color: #dc3522;\n  }\n  \n  &.danger {\n    color: #f56565;\n    \n    &:hover {\n      background: rgba(245, 101, 101, 0.1);\n    }\n  }\n"]))),Bi=(0,d.Ay)($r)(Gt||(Gt=(0,a.A)(["\n  display: none;\n  transition: all 0.3s ease;\n  \n  /* Показываем при ширине меньше 1170px */\n  "," {\n    display: flex;\n  }\n  \n  /* Адаптивные размеры для иконки меню */\n  svg {\n    width: 22px;\n    height: 22px;\n    \n    "," {\n      width: 24px;\n      height: 24px;\n    }\n    \n    "," {\n      width: 26px;\n      height: 26px;\n    }\n  }\n  \n  &:hover {\n    transform: scale(1.1);\n  }\n"])),ri.maxDesktopMobile,ri.mobile,ri.tablet),Wi=d.Ay.div.attrs({className:"react-mobile-menu"})(Jt||(Jt=(0,a.A)(["\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: white;\n  border-top: 1px solid #e2e8f0;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  z-index: 999;\n  \n  /* Адаптивные отступы */\n  padding: ",";\n  \n  "," {\n    padding: ",";\n  }\n  \n  "," {\n    padding: ",";\n  }\n  \n  "," {\n    padding: ",";\n  }\n  \n  "," {\n    padding: ",";\n  }\n  \n  "," {\n    display: ",";\n  }\n"])),hi.padding.tiny,ri.mobile,hi.padding.mobile,ri.mobileLarge,hi.padding.mobileLarge,ri.tablet,hi.padding.tablet,ri.tabletLarge,hi.padding.tabletLarge,ri.maxDesktopMobile,function(n){return n.$show?"block":"none"}),Fi=(0,d.Ay)(s.N_)(Zt||(Zt=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  color: #4a5568;\n  text-decoration: none;\n  border-radius: 12px;\n  margin-bottom: 8px;\n  transition: all 0.2s ease;\n  font-weight: 500;\n  \n  /* Адаптивные размеры */\n  padding: ",";\n  gap: 10px;\n  font-size: ",";\n  \n  "," {\n    padding: ",";\n    gap: 12px;\n    font-size: ",";\n  }\n  \n  "," {\n    padding: ",";\n    gap: 12px;\n    font-size: ",";\n  }\n  \n  "," {\n    padding: ",";\n    gap: 14px;\n    font-size: ",";\n  }\n  \n  "," {\n    padding: ",";\n    gap: 14px;\n    font-size: ",";\n  }\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  &.active {\n    background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n    color: white;\n    box-shadow: 0 4px 15px rgba(220, 53, 34, 0.3);\n  }\n  \n  &:hover:not(.active) {\n    background: #f7fafc;\n    text-decoration: none;\n    transform: translateX(4px);\n  }\n  \n  /* Иконки в мобильном меню */\n  svg {\n    width: 20px;\n    height: 20px;\n    flex-shrink: 0;\n    \n    "," {\n      width: 22px;\n      height: 22px;\n    }\n  }\n"])),hi.linkPadding.tiny,hi.fontSize.tiny,ri.mobile,hi.linkPadding.mobile,hi.fontSize.mobile,ri.mobileLarge,hi.linkPadding.mobileLarge,hi.fontSize.mobileLarge,ri.tablet,hi.linkPadding.tablet,hi.fontSize.tablet,ri.tabletLarge,hi.linkPadding.tabletLarge,hi.fontSize.tabletLarge,ri.tablet),Qi=d.Ay.span(nr||(nr=(0,a.A)(["\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: #f56565;\n  color: white;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  box-shadow: 0 2px 8px rgba(245, 101, 101, 0.4);\n  transition: all 0.3s ease;\n  \n  /* Адаптивные размеры */\n  width: ",";\n  height: ",";\n  font-size: 10px;\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 11px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 11px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 12px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 12px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 12px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 13px;\n  }\n  \n  "," {\n    width: ",";\n    height: ",";\n    font-size: 14px;\n  }\n"])),xi.tiny,xi.tiny,ri.mobile,xi.mobile,xi.mobile,ri.mobileLarge,xi.mobileLarge,xi.mobileLarge,ri.tablet,xi.tablet,xi.tablet,ri.tabletLarge,xi.tabletLarge,xi.tabletLarge,ri.desktop,xi.desktop,xi.desktop,ri.desktopLarge,xi.desktopLarge,xi.desktopLarge,ri.desktopXL,xi.desktopXL,xi.desktopXL),qi=function(){var n=(0,c.useQuery)("unread-notifications-count",function(){return f.notificationsAPI.getUnreadCount()},{refetchInterval:3e4,retry:1,enabled:f.apiUtils.isAuthenticated(),onError:function(n){var e;401===(null===(e=n.response)||void 0===e?void 0:e.status)&&console.log("Unauthorized in Navigation notification counter")}}).data,e=(null==n?void 0:n.total_unread)||0;return e&&0!==e?(0,m.jsx)(Qi,{children:e>99?"99+":e}):null};const Hi=function(){var n=(0,o.zy)(),e=(0,o.Zp)(),t=(0,c.useQueryClient)(),i=(0,r.useState)(!1),a=(0,p.A)(i,2),d=a[0],x=a[1],g=(0,r.useState)(!1),v=(0,p.A)(g,2),b=v[0],j=v[1],y=(0,r.useState)(null),w=(0,p.A)(y,2),A=w[0],k=w[1],N=(0,r.useRef)(null);(0,r.useEffect)(function(){var n=function(){var n=(0,u.A)(h().mark(function n(){var e,t,r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(e=f.apiUtils.getCurrentUser())){n.next=2;break}if(k(e),e.ava){n.next=2;break}return n.next=1,f.apiUtils.refreshCurrentUser();case 1:(t=n.sent)&&k(t);case 2:n.next=4;break;case 3:n.prev=3,r=n.catch(0),console.warn("Ошибка получения данных пользователя:",r),k(f.apiUtils.getCurrentUser());case 4:case"end":return n.stop()}},n,null,[[0,3]])}));return function(){return n.apply(this,arguments)}}();n()},[]),(0,r.useEffect)(function(){var n=function(n){if("swingfox_user_cache"===n.key||"swingfox_token"===n.key){var e=f.apiUtils.getCurrentUser();k(e)}};return window.addEventListener("storage",n),function(){return window.removeEventListener("storage",n)}},[]);var S=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,f.apiUtils.refreshCurrentUser();case 1:(e=n.sent)&&k(e),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.warn("Ошибка обновления данных пользователя:",t);case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}();(0,r.useEffect)(function(){return window.refreshNavigation=S,function(){delete window.refreshNavigation}},[]);var C=function(){window.confirm("Выйти из аккаунта?")&&(f.apiUtils.logout(),t.clear(),l.Ay.success("Вы вышли из аккаунта"),e("/login"))},z=function(e){return n.pathname===e};return(0,r.useEffect)(function(){var n=function(n){N.current&&!N.current.contains(n.target)&&x(!1);var e=n.target.closest("[data-mobile-menu-button]"),t=n.target.closest(".react-mobile-menu");e||t||!b||j(!1)};return document.addEventListener("mousedown",n),function(){return document.removeEventListener("mousedown",n)}},[b]),A?(0,m.jsxs)(_i,{className:"react-navigation-container",children:[(0,m.jsxs)(Ei,{children:[(0,m.jsx)(Pi,{children:(0,m.jsxs)(s.N_,{to:"/",style:{textDecoration:"none",display:"flex",alignItems:"center",gap:"12px"},children:[(0,m.jsx)(Li,{children:"SF"}),(0,m.jsx)(Oi,{children:"SwingFox"})]})}),(0,m.jsxs)(Di,{children:[(0,m.jsxs)($i,{to:"/",className:z("/")?"active":"",children:[(0,m.jsx)(mi,{}),"Свайп"]}),(0,m.jsxs)($i,{to:"/catalog",className:z("/catalog")?"active":"",children:[(0,m.jsx)(ki,{}),"Каталог"]}),(0,m.jsxs)($i,{to:"/chat",className:n.pathname.startsWith("/chat")?"active":"",children:[(0,m.jsx)(gi,{}),"Чат"]}),(0,m.jsxs)($i,{to:"/notifications",className:z("/notifications")?"active":"",style:{position:"relative"},children:[(0,m.jsx)(ji,{}),"Уведомления",(0,m.jsx)(qi,{})]}),(0,m.jsxs)($i,{to:"/clubs",className:z("/clubs")?"active":"",children:[(0,m.jsx)(yi,{}),"Клубы"]}),(0,m.jsxs)($i,{to:"/subscriptions",className:z("/subscriptions")?"active":"",children:[(0,m.jsx)(wi,{}),"VIP"]}),(0,m.jsxs)($i,{to:"/ratings",className:z("/ratings")?"active":"",children:[(0,m.jsx)(Ai,{}),"Рейтинг"]}),(0,m.jsxs)($i,{to:"/ads",className:z("/ads")?"active":"",children:[(0,m.jsx)(vi,{}),"Объявления"]}),A.is_admin&&(0,m.jsxs)($i,{to:"/admin",className:n.pathname.startsWith("/admin")?"active":"",children:[(0,m.jsx)(bi,{}),"Админ"]})]}),(0,m.jsxs)(Wr,{$gap:"12px",children:[(0,m.jsxs)(Mi,{ref:N,children:[(0,m.jsxs)(Ii,{onClick:function(){return x(!d)},children:[(0,m.jsx)(Ur,{$src:A.ava?"/uploads/".concat(A.ava):"",$size:ui.desktop,$fontSize:"18px",$clickable:!0,css:"\n                  width: ".concat(ui.tiny,";\n                  height: ").concat(ui.tiny,";\n                  \n                  ").concat(ri.mobile," {\n                    width: ").concat(ui.mobile,";\n                    height: ").concat(ui.mobile,";\n                  }\n                  \n                  ").concat(ri.mobileLarge," {\n                    width: ").concat(ui.mobileLarge,";\n                    height: ").concat(ui.mobileLarge,";\n                  }\n                  \n                  ").concat(ri.tablet," {\n                    width: ").concat(ui.tablet,";\n                    height: ").concat(ui.tablet,";\n                  }\n                  \n                  ").concat(ri.tabletLarge," {\n                    width: ").concat(ui.tabletLarge,";\n                    height: ").concat(ui.tabletLarge,";\n                  }\n                  \n                  ").concat(ri.desktop," {\n                    width: ").concat(ui.desktop,";\n                    height: ").concat(ui.desktop,";\n                  }\n                  \n                  ").concat(ri.desktopLarge," {\n                    width: ").concat(ui.desktopLarge,";\n                    height: ").concat(ui.desktopLarge,";\n                  }\n                  \n                  ").concat(ri.desktopXL," {\n                    width: ").concat(ui.desktopXL,";\n                    height: ").concat(ui.desktopXL,";\n                  }\n                "),children:!A.ava&&A.login.charAt(0).toUpperCase()}),f.apiUtils.isVip(A)&&(0,m.jsx)(Ui,{$color:f.apiUtils.getVipBadgeColor(A.vipType),children:f.apiUtils.getVipBadgeIcon(A.vipType)})]}),(0,m.jsxs)(Ti,{$show:d,children:[(0,m.jsxs)(Ri,{onClick:function(){e("/profile"),x(!1)},children:[(0,m.jsx)(Si,{}),"Мой профиль"]}),(0,m.jsxs)(Ri,{onClick:function(){return e("/profile?tab=settings")},children:[(0,m.jsx)(Ci,{}),"Настройки"]}),(0,m.jsxs)(Ri,{onClick:function(){return e("/club/login")},children:[(0,m.jsx)(yi,{}),"Вход для клубов"]}),(0,m.jsxs)(Ri,{className:"danger",onClick:C,children:[(0,m.jsx)(zi,{}),"Выйти"]})]})]}),(0,m.jsx)(Bi,{onClick:function(n){n.stopPropagation(),j(!b)},"data-mobile-menu-button":"true",$variant:"secondary",children:(0,m.jsx)(Ni,{})})]})]}),(0,m.jsxs)(Wi,{$show:b,children:[(0,m.jsxs)(Fi,{to:"/",className:z("/")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(mi,{}),"Свайп"]}),(0,m.jsxs)(Fi,{to:"/catalog",className:z("/catalog")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(ki,{}),"Каталог"]}),(0,m.jsxs)(Fi,{to:"/chat",className:n.pathname.startsWith("/chat")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(gi,{}),"Чат"]}),(0,m.jsxs)(Fi,{to:"/notifications",className:z("/notifications")?"active":"",onClick:function(){return j(!1)},style:{position:"relative"},children:[(0,m.jsx)(ji,{}),"Уведомления",(0,m.jsx)(qi,{})]}),(0,m.jsxs)(Fi,{to:"/clubs",className:z("/clubs")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(yi,{}),"Клубы"]}),(0,m.jsxs)(Fi,{to:"/subscriptions",className:z("/subscriptions")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(wi,{}),"VIP"]}),(0,m.jsxs)(Fi,{to:"/ratings",className:z("/ratings")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(Ai,{}),"Рейтинг"]}),(0,m.jsxs)(Fi,{to:"/ads",className:z("/ads")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(vi,{}),"Объявления"]}),A.is_admin&&(0,m.jsxs)(Fi,{to:"/admin",className:n.pathname.startsWith("/admin")?"active":"",onClick:function(){return j(!1)},children:[(0,m.jsx)(bi,{}),"Админ"]}),(0,m.jsxs)(Fi,{to:"/profile",onClick:function(){return j(!1)},children:[(0,m.jsx)(Si,{}),"Профиль"]}),(0,m.jsxs)(Ri,{className:"danger",onClick:C,children:[(0,m.jsx)(zi,{}),"Выйти"]})]})]}):null};var Vi,Xi,Yi,Ki,Gi,Ji,Zi,na,ea,ta,ra,ia,aa,sa,oa,ca,la,da,ua,pa=t(5458),xa=t(961),ha=t(8732),fa=t(8691),ma=((0,d.i7)(Vi||(Vi=(0,a.A)(["\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n"]))),(0,d.i7)(Xi||(Xi=(0,a.A)(["\n  from {\n    transform: translateX(0);\n    opacity: 1;\n  }\n  to {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n"]))),(0,d.i7)(Yi||(Yi=(0,a.A)(["\n  0%, 100% { transform: translateY(0px) rotate(0deg); }\n  25% { transform: translateY(-10px) rotate(2deg); }\n  75% { transform: translateY(-5px) rotate(-2deg); }\n"])))),ga=(0,d.i7)(Ki||(Ki=(0,a.A)(["\n  0% { transform: scale(0) rotate(0deg); opacity: 0; }\n  50% { transform: scale(1) rotate(180deg); opacity: 1; }\n  100% { transform: scale(0) rotate(360deg); opacity: 0; }\n"]))),va=d.Ay.div(Gi||(Gi=(0,a.A)(["\n  position: fixed;\n  top: 0;\n  right: 0;\n  z-index: 9999;\n  pointer-events: none;\n"]))),ba=(0,d.Ay)(ha.P.div)(Ji||(Ji=(0,a.A)(["\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  width: 350px;\n  max-width: calc(100vw - 40px);\n  background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 50%, #ffa8a8 100%);\n  border-radius: 20px;\n  padding: 20px;\n  color: white;\n  box-shadow: 0 15px 35px rgba(255, 107, 107, 0.4);\n  pointer-events: all;\n  overflow: hidden;\n  position: relative;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: -20px;\n    right: -20px;\n    width: 60px;\n    height: 60px;\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 50%;\n    animation: "," 2s infinite;\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -10px;\n    left: -10px;\n    width: 40px;\n    height: 40px;\n    background: rgba(255, 255, 255, 0.05);\n    border-radius: 50%;\n    animation: "," 3s infinite 0.5s;\n  }\n  \n  @media (max-width: 768px) {\n    width: calc(100vw - 20px);\n    right: 10px;\n    top: 10px;\n    padding: 15px;\n  }\n"])),ga,ga),ja=d.Ay.div(Zi||(Zi=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 15px;\n  position: relative;\n  z-index: 2;\n"]))),ya=d.Ay.div(na||(na=(0,a.A)(["\n  font-size: 32px;\n  animation: "," 3s infinite;\n  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));\n"])),ma),wa=d.Ay.h4(ea||(ea=(0,a.A)(["\n  margin: 0;\n  font-size: 18px;\n  font-weight: bold;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  \n  @media (max-width: 768px) {\n    font-size: 16px;\n  }\n"]))),Aa=d.Ay.div(ta||(ta=(0,a.A)(["\n  position: relative;\n  z-index: 2;\n"]))),ka=d.Ay.div(ra||(ra=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 15px;\n"]))),Na=d.Ay.div(ia||(ia=(0,a.A)(["\n  flex: 1;\n"]))),Sa=d.Ay.div(aa||(aa=(0,a.A)(["\n  font-size: 16px;\n  font-weight: 600;\n  margin-bottom: 2px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  \n  @media (max-width: 768px) {\n    font-size: 15px;\n  }\n"]))),Ca=d.Ay.div(sa||(sa=(0,a.A)(["\n  font-size: 13px;\n  opacity: 0.9;\n  \n  @media (max-width: 768px) {\n    font-size: 12px;\n  }\n"]))),za=d.Ay.div(oa||(oa=(0,a.A)(["\n  display: flex;\n  gap: 8px;\n  margin-top: 15px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n"]))),_a=(0,d.Ay)(Dr)(ca||(ca=(0,a.A)(["\n  flex: 1;\n  background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);\n  border: none;\n  padding: 10px 16px;\n  font-size: 14px;\n  font-weight: 600;\n  box-shadow: 0 4px 12px rgba(68, 160, 141, 0.3);\n  \n  &:hover:not(:disabled) {\n    background: linear-gradient(135deg, #45b7b8 0%, #3d8b7a 100%);\n    transform: translateY(-1px);\n    box-shadow: 0 6px 16px rgba(68, 160, 141, 0.4);\n  }\n"]))),Ea=(0,d.Ay)(Dr)(la||(la=(0,a.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 10px 16px;\n  font-size: 14px;\n  \n  &:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.3);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n"]))),Pa=d.Ay.button(da||(da=(0,a.A)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  border-radius: 50%;\n  width: 24px;\n  height: 24px;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  transition: all 0.2s ease;\n  z-index: 3;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n    transform: scale(1.1);\n  }\n"]))),La=d.Ay.div(ua||(ua=(0,a.A)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: 3px;\n  background: rgba(255, 255, 255, 0.3);\n  border-radius: 0 0 20px 20px;\n  overflow: hidden;\n  \n  &::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    background: rgba(255, 255, 255, 0.8);\n    border-radius: inherit;\n    animation: progress ","ms linear;\n  }\n  \n  @keyframes progress {\n    from { width: 100%; }\n    to { width: 0%; }\n  }\n"])),function(n){return n.$duration});const Oa=function(n){var e,t=n.notification,i=n.onClose,a=n.onStartChat,s=n.onViewProfile,o=n.autoCloseDelay,c=void 0===o?8e3:o,l=(0,r.useState)(!0),d=(0,p.A)(l,2),u=d[0],x=d[1],h=(null==t||null===(e=t.data)||void 0===e?void 0:e.match_user)||(null==t?void 0:t.from_user),f=null==t?void 0:t.from_user_data;(0,r.useEffect)(function(){var n=setTimeout(function(){g()},c);return function(){return clearTimeout(n)}},[c]);var g=function(){x(!1),setTimeout(function(){i&&i()},300)};return t?(0,xa.createPortal)((0,m.jsx)(va,{children:(0,m.jsx)(fa.N,{children:u&&(0,m.jsxs)(ba,{initial:{x:"100%",opacity:0,scale:.8},animate:{x:0,opacity:1,scale:1},exit:{x:"100%",opacity:0,scale:.8},transition:{type:"spring",duration:.6,bounce:.3},children:[(0,m.jsx)(Pa,{onClick:g,children:"✕"}),(0,m.jsxs)(ja,{children:[(0,m.jsx)(ya,{children:"💕"}),(0,m.jsx)(wa,{children:"Новый мэтч!"})]}),(0,m.jsxs)(Aa,{children:[(0,m.jsxs)(ka,{children:[(0,m.jsx)(Ur,{$src:null!=f&&f.avatar?"/uploads/".concat(f.avatar):"",$size:"50px",$fontSize:"20px",$online:!0,children:!(null!=f&&f.avatar)&&(h?h.charAt(0).toUpperCase():"?")}),(0,m.jsxs)(Na,{children:[(0,m.jsxs)(Sa,{children:["@",h||"Пользователь"]}),(0,m.jsx)(Ca,{children:"У вас взаимная симпатия!"})]})]}),(0,m.jsxs)(za,{children:[(0,m.jsx)(_a,{onClick:function(){a&&a(h),g()},children:"💬 Чат"}),(0,m.jsx)(Ea,{onClick:function(){s&&s(h),g()},children:"👀 Профиль"})]})]}),(0,m.jsx)(La,{$duration:c})]})})}),document.body):null};function Da(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return $a(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$a(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return s=n.done,n},e:function(n){o=!0,a=n},f:function(){try{s||null==t.return||t.return()}finally{if(o)throw a}}}}function $a(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}var Ma=(0,r.createContext)(),Ia=function(n){var e=n.children,i=(0,o.Zp)(),a=(0,r.useState)([]),s=(0,p.A)(a,2),l=s[0],d=s[1],x=(0,r.useState)(Date.now()),g=(0,p.A)(x,2),v=g[0],b=g[1],j=(0,r.useState)(0),y=(0,p.A)(j,2),w=y[0],A=y[1],k=(0,r.useState)(!1),N=(0,p.A)(k,2),S=N[0],C=N[1],z=(0,r.useState)(!1),_=(0,p.A)(z,2),E=_[0],P=_[1],L=(0,r.useState)(!1),O=(0,p.A)(L,2),D=O[0],$=O[1];(0,r.useEffect)(function(){C(!0)},[]),(0,r.useEffect)(function(){var n=function(){var n=f.apiUtils.isAuthenticated();$(n),n||(A(0),d([]))};n();var e=function(){n()};return window.addEventListener("auth-logout",e),window.addEventListener("storage",e),function(){window.removeEventListener("auth-logout",e),window.removeEventListener("storage",e)}},[]),(0,r.useEffect)(function(){i&&"function"==typeof i?(P(!0),console.log("Router context is ready in NotificationProvider")):console.log("Router context not ready yet in NotificationProvider")},[i]),(0,r.useEffect)(function(){i?console.log("Navigation is available in NotificationProvider"):console.warn("Navigation not available in NotificationProvider")},[i]),(0,c.useQuery)("unread-notifications-count",function(){return f.notificationsAPI.getUnreadCount()},{refetchInterval:15e3,enabled:E&&D,onSuccess:function(n){A((null==n?void 0:n.total_unread)||0)},onError:function(n){var e;401===(null===(e=n.response)||void 0===e?void 0:e.status)&&(console.log("Unauthorized in notifications query, resetting auth state"),$(!1),A(0))}}).data;var M,I=(0,c.useQuery)(["latest-notifications",v],function(){return f.notificationsAPI.getNotifications({unread:!0,limit:10})},{refetchInterval:1e4,enabled:E&&D,onSuccess:(M=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e||!e.notifications){n.next=1;break}return n.next=1,U(e.notifications);case 1:case"end":return n.stop()}},n)})),function(n){return M.apply(this,arguments)}),onError:function(n){var e;401===(null===(e=n.response)||void 0===e?void 0:e.status)&&(console.log("Unauthorized in latest notifications query, resetting auth state"),$(!1))}}),U=(I.data,function(){var n=(0,u.A)(h().mark(function n(e){var r,i,a,s,o,c,d,u,p,x;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=Date.now(),i=r-12e4,a=e.filter(function(n){var e=new Date(n.created_at).getTime();return"match"===n.type&&e>i&&e>v&&!l.find(function(e){return e.id===n.id})}),!(a.length>0)){n.next=15;break}s=Da(a),n.prev=1,s.s();case 2:if((o=s.n()).done){n.next=11;break}return c=o.value,n.prev=3,n.next=4,Promise.resolve().then(t.bind(t,4983));case 4:return d=n.sent,u=d.chatAPI,n.next=5,u.getMatchStatus(c.from_user);case 5:if(n.sent.hasMatch){n.next=7;break}return n.next=6,T(c);case 6:n.next=8;break;case 7:console.log("Match already exists with",c.from_user,"skipping notification popup");case 8:n.next=10;break;case 9:return n.prev=9,p=n.catch(3),console.error("Error checking existing match for notification:",p),n.next=10,T(c);case 10:n.next=2;break;case 11:n.next=13;break;case 12:n.prev=12,x=n.catch(1),s.e(x);case 13:return n.prev=13,s.f(),n.finish(13);case 14:b(r);case 15:case"end":return n.stop()}},n,null,[[1,12,13,14],[3,9]])}));return function(e){return n.apply(this,arguments)}}()),T=function(){var n=(0,u.A)(h().mark(function n(e){var r,i,a,s;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(E&&D){n.next=1;break}return console.log("Router not ready or user not authenticated, skipping popup:",e.id),n.abrupt("return");case 1:if("match"!==e.type||!e.from_user){n.next=7;break}return n.prev=2,n.next=3,Promise.resolve().then(t.bind(t,4983));case 3:return r=n.sent,i=r.chatAPI,n.next=4,i.getMatchStatus(e.from_user);case 4:if(!n.sent.hasMatch){n.next=5;break}return console.log("Match already exists with",e.from_user,"skipping popup:",e.id),n.abrupt("return");case 5:n.next=7;break;case 6:n.prev=6,s=n.catch(2),console.error("Error checking existing match in showMatchPopup:",s);case 7:a={id:e.id,notification:e,timestamp:Date.now()},d(function(n){return[].concat((0,pa.A)(n),[a])}),setTimeout(function(){R(e.id)},8e3);case 8:case"end":return n.stop()}},n,null,[[2,6]])}));return function(e){return n.apply(this,arguments)}}(),R=function(n){d(function(e){return e.filter(function(e){return e.id!==n})})},B=function(){var n=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,f.notificationsAPI.markAsRead(e);case 1:R(e),A(function(n){return Math.max(0,n-1)}),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.error("Error marking notification as read:",t);case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(e){return n.apply(this,arguments)}}(),W=function(){var n=(0,u.A)(h().mark(function n(e){var r,i,a,s;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(E&&D){n.next=1;break}return console.log("Router not ready or user not authenticated, skipping custom popup"),n.abrupt("return");case 1:return n.prev=1,n.next=2,Promise.resolve().then(t.bind(t,4983));case 2:return r=n.sent,i=r.chatAPI,n.next=3,i.getMatchStatus(e.username);case 3:if(!n.sent.hasMatch){n.next=4;break}return console.log("Match already exists with",e.username,"skipping popup"),n.abrupt("return");case 4:n.next=6;break;case 5:n.prev=5,s=n.catch(1),console.error("Error checking existing match in popup:",s);case 6:return a={id:"custom-".concat(Date.now()),type:"match",title:"Взаимная симпатия!",message:"У вас взаимная симпатия с ".concat(e.username,"!"),from_user:e.username,from_user_data:e.userData,data:{match_user:e.username},created_at:(new Date).toISOString(),priority:"high"},n.next=7,T(a);case 7:case"end":return n.stop()}},n,null,[[1,5]])}));return function(e){return n.apply(this,arguments)}}(),F={unreadCount:w,activePopups:l,showMatchPopup:W,removePopup:R,markNotificationAsRead:B};return(0,m.jsxs)(Ma.Provider,{value:F,children:[e,S&&E&&D&&l.map(function(n){return(0,m.jsx)(Oa,{notification:n.notification,onClose:function(){return R(n.id)},onStartChat:function(e){if(B(n.id),i&&"function"==typeof i)try{i("/chat/".concat(e))}catch(n){console.error("Navigation error:",n),window.location.href="/chat/".concat(e)}else window.location.href="/chat/".concat(e)},onViewProfile:function(e){if(B(n.id),i&&"function"==typeof i)try{i("/profile/".concat(e))}catch(n){console.error("Navigation error:",n),window.location.href="/profile/".concat(e)}else window.location.href="/profile/".concat(e)},autoCloseDelay:8e3},n.id)})]})},Ua=t(9785);function Ta(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Ra(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Ta(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ta(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}const Ba=function(){var n=(0,o.Zp)(),e=(0,r.useState)(!1),t=(0,p.A)(e,2),i=t[0],a=t[1],c=(0,r.useState)(!1),d=(0,p.A)(c,2),x=d[0],g=d[1],v=(0,Ua.mN)(),b=v.register,j=v.handleSubmit,y=v.formState.errors;r.useEffect(function(){var e=function(){var e=(0,u.A)(h().mark(function e(){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.apiUtils.isAuthenticated()){e.next=4;break}return e.prev=1,e.next=2,f.apiUtils.refreshCurrentUser();case 2:n("/",{replace:!0}),e.next=4;break;case 3:e.prev=3,e.catch(1),console.warn("Токен невалиден при входе в Login"),f.apiUtils.logout();case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();e()},[n]);var w=function(){var e=(0,u.A)(h().mark(function e(t){var r,i;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=2,f.authAPI.login({login:t.login,password:t.password});case 2:e.sent.success&&(l.Ay.success("Успешная авторизация!"),n("/",{replace:!0})),e.next=4;break;case 3:e.prev=3,i=e.catch(1),r=f.apiUtils.handleError(i),l.Ay.error(r);case 4:return e.prev=4,a(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)(jr,{$gradient:!0,children:[(0,m.jsx)("div",{className:"auth-decoration auth-decoration-top-right"}),(0,m.jsx)("div",{className:"auth-decoration auth-decoration-bottom-left"}),(0,m.jsxs)(yr,{$maxWidth:"450px",children:[(0,m.jsxs)(wr,{children:[(0,m.jsx)(Ar,{children:"SF"}),(0,m.jsx)(kr,{children:"SwingFox"}),(0,m.jsx)(Nr,{children:"Добро пожаловать! Войдите в свой аккаунт"})]}),(0,m.jsxs)(Cr,{onSubmit:j(w),children:[(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"login",children:"Логин или Email"}),(0,m.jsx)(Pr,Ra(Ra({type:"text",id:"login",placeholder:"Введите логин или email",autoComplete:"username"},b("login",{required:"Логин или email обязателен",minLength:{value:3,message:"Минимум 3 символа"}})),{},{className:y.login?"error":""})),y.login&&(0,m.jsx)(Mr,{children:y.login.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"password",children:"Пароль"}),(0,m.jsxs)(Er,{children:[(0,m.jsx)(Pr,Ra(Ra({type:x?"text":"password",id:"password",placeholder:"Введите пароль",autoComplete:"current-password"},b("password",{required:"Пароль обязателен",minLength:{value:6,message:"Минимум 6 символов"}})),{},{className:y.password?"error":""})),(0,m.jsx)($r,{type:"button",$variant:"secondary",onClick:function(){return g(!x)},style:{position:"absolute",right:"12px",background:"none",color:"#718096"},children:x?(0,m.jsx)(tr,{}):(0,m.jsx)(er,{})})]}),y.password&&(0,m.jsx)(Mr,{children:y.password.message})]}),(0,m.jsx)(Dr,{type:"submit",disabled:i,style:{width:"100%"},children:i?"Вход...":"Войти"})]}),(0,m.jsxs)(Wr,{$justify:"center",$gap:"20px",style:{marginTop:"25px"},children:[(0,m.jsx)(s.N_,{to:"/register",style:{color:"#dc3522",textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:"Регистрация"}),(0,m.jsx)("span",{style:{color:"#cbd5e0"},children:"|"}),(0,m.jsx)(s.N_,{to:"/forgot-password",style:{color:"#dc3522",textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:"Забыли пароль?"})]}),(0,m.jsxs)("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e2e8f0",textAlign:"center"},children:[(0,m.jsx)("p",{style:{color:"#718096",fontSize:"14px",marginBottom:"15px",fontWeight:"500"},children:"Вы представляете клуб?"}),(0,m.jsxs)(Wr,{$justify:"center",$gap:"15px",children:[(0,m.jsx)(s.N_,{to:"/club/login",style:{background:"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)",color:"white",textDecoration:"none",fontWeight:"600",fontSize:"14px",padding:"10px 20px",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(220, 53, 34, 0.3)"},onMouseEnter:function(n){n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 20px rgba(220, 53, 34, 0.4)"},onMouseLeave:function(n){n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 15px rgba(220, 53, 34, 0.3)"},children:"Вход для клубов"}),(0,m.jsx)(s.N_,{to:"/club/register",style:{background:"white",color:"#dc3522",textDecoration:"none",fontWeight:"600",fontSize:"14px",padding:"10px 20px",borderRadius:"8px",border:"2px solid #dc3522",transition:"all 0.3s ease"},onMouseEnter:function(n){n.target.style.background="#dc3522",n.target.style.color="white",n.target.style.transform="translateY(-2px)"},onMouseLeave:function(n){n.target.style.background="white",n.target.style.color="#dc3522",n.target.style.transform="translateY(0)"},children:"Регистрация клуба"})]})]})]})]})};var Wa,Fa,Qa,qa,Ha,Va=d.Ay.div(Wa||(Wa=(0,a.A)(["\n  position: relative;\n  width: 100%;\n"]))),Xa=d.Ay.div(Fa||(Fa=(0,a.A)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: 1000;\n  background: white;\n  border: 2px solid #e2e8f0;\n  border-top: none;\n  border-radius: 0 0 10px 10px;\n  max-height: 200px;\n  overflow-y: auto;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  display: ",";\n"])),function(n){return n.$show?"block":"none"}),Ya=d.Ay.div(Qa||(Qa=(0,a.A)(["\n  padding: 12px 16px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  font-size: 15px;\n  border-bottom: 1px solid #f7fafc;\n  \n  &:hover {\n    background: #f7fafc;\n  }\n  \n  &:last-child {\n    border-bottom: none;\n  }\n  \n  &.selected {\n    background: #dc3522;\n    color: white;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n  }\n"]))),Ka=d.Ay.div(qa||(qa=(0,a.A)(["\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #718096;\n  font-size: 14px;\n  gap: 8px;\n"]))),Ga=d.Ay.div(Ha||(Ha=(0,a.A)(["\n  padding: 20px 16px;\n  text-align: center;\n  color: #718096;\n  font-size: 14px;\n  font-style: italic;\n"])));const Ja=function(n){var e=n.value,t=void 0===e?"":e,i=n.onChange,a=n.onSelect,s=n.error,o=n.placeholder,c=void 0===o?"Выберите страну...":o,l=n.label,d=n.required,x=void 0!==d&&d,f=n.disabled,g=void 0!==f&&f,v=n.className,b=(0,r.useState)(!1),j=(0,p.A)(b,2),y=j[0],w=j[1],A=(0,r.useState)(t),k=(0,p.A)(A,2),N=k[0],S=k[1],C=(0,r.useState)([]),z=(0,p.A)(C,2),_=z[0],E=z[1],P=(0,r.useState)([]),L=(0,p.A)(P,2),O=L[0],D=L[1],$=(0,r.useState)(!1),M=(0,p.A)($,2),I=M[0],U=M[1],T=(0,r.useState)(-1),R=(0,p.A)(T,2),B=R[0],W=R[1],F=(0,r.useRef)(null),Q=(0,r.useRef)(null),q=(0,r.useRef)(null);(0,r.useEffect)(function(){H()},[]),(0,r.useEffect)(function(){S(t)},[t]),(0,r.useEffect)(function(){if(_.length>0){var n=_.filter(function(n){return n.country.toLowerCase().includes(N.toLowerCase())});D(n),W(-1)}},[N,_]),(0,r.useEffect)(function(){var n=function(n){Q.current&&!Q.current.contains(n.target)&&(w(!1),W(-1))};return document.addEventListener("mousedown",n),function(){return document.removeEventListener("mousedown",n)}},[]);var H=function(){var n=(0,u.A)(h().mark(function n(){var e,t,r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return U(!0),n.prev=1,n.next=2,fetch("/api/geo/countries");case 2:if((e=n.sent).ok){n.next=3;break}throw new Error("Ошибка загрузки стран");case 3:return n.next=4,e.json();case 4:t=n.sent,E(t.data||[]),D(t.data||[]),n.next=6;break;case 5:n.prev=5,r=n.catch(1),console.error("Ошибка загрузки стран:",r),E([]),D([]);case 6:return n.prev=6,U(!1),n.finish(6);case 7:case"end":return n.stop()}},n,null,[[1,5,6,7]])}));return function(){return n.apply(this,arguments)}}(),V=function(n){S(n.country),w(!1),W(-1),i&&i(n.country),a&&a(n)};return(0,r.useEffect)(function(){if(B>=0&&q.current){var n=q.current.children[B];n&&n.scrollIntoView({block:"nearest",behavior:"smooth"})}},[B]),(0,m.jsxs)(Va,{ref:Q,className:v,children:[l&&(0,m.jsxs)(_r,{children:[l," ",x&&(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(Pr,{ref:F,type:"text",value:N,onChange:function(n){var e=n.target.value;S(e),w(!0),i&&i(e)},onFocus:function(){w(!0),0===_.length&&H()},onKeyDown:function(n){var e;if(y)switch(n.key){case"ArrowDown":n.preventDefault(),W(function(n){return n<O.length-1?n+1:n});break;case"ArrowUp":n.preventDefault(),W(function(n){return n>0?n-1:-1});break;case"Enter":n.preventDefault(),B>=0&&O[B]&&V(O[B]);break;case"Escape":w(!1),W(-1),null===(e=F.current)||void 0===e||e.blur()}},placeholder:c,disabled:g,className:s?"error":"",autoComplete:"off"}),(0,m.jsx)(Xa,{$show:y&&!g,ref:q,children:I?(0,m.jsxs)(Ka,{children:[(0,m.jsx)(Qr,{}),"Загрузка стран..."]}):O.length>0?O.map(function(n,e){return(0,m.jsx)(Ya,{onClick:function(){return V(n)},className:e===B?"selected":"",children:n.country},n.country)}):(0,m.jsx)(Ga,{children:N?"Страны не найдены":"Загрузка..."})}),s&&(0,m.jsx)(Mr,{children:s})]})};var Za,ns,es,ts,rs,is,as=d.Ay.div(Za||(Za=(0,a.A)(["\n  position: relative;\n  width: 100%;\n"]))),ss=d.Ay.div(ns||(ns=(0,a.A)(["\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  z-index: 1000;\n  background: white;\n  border: 2px solid #e2e8f0;\n  border-top: none;\n  border-radius: 0 0 10px 10px;\n  max-height: 200px;\n  overflow-y: auto;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n  display: ",";\n"])),function(n){return n.$show?"block":"none"}),os=d.Ay.div(es||(es=(0,a.A)(["\n  padding: 12px 16px;\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  font-size: 15px;\n  border-bottom: 1px solid #f7fafc;\n  \n  &:hover {\n    background: #f7fafc;\n  }\n  \n  &:last-child {\n    border-bottom: none;\n  }\n  \n  &.selected {\n    background: #dc3522;\n    color: white;\n  }\n  \n  .city-name {\n    font-weight: 500;\n  }\n  \n  .region-name {\n    font-size: 13px;\n    color: #718096;\n    margin-top: 2px;\n  }\n  \n  &.selected .region-name {\n    color: rgba(255, 255, 255, 0.8);\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n    \n    .region-name {\n      font-size: 12px;\n    }\n  }\n"]))),cs=d.Ay.div(ts||(ts=(0,a.A)(["\n  padding: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #718096;\n  font-size: 14px;\n  gap: 8px;\n"]))),ls=d.Ay.div(rs||(rs=(0,a.A)(["\n  padding: 20px 16px;\n  text-align: center;\n  color: #718096;\n  font-size: 14px;\n  font-style: italic;\n"]))),ds=d.Ay.div(is||(is=(0,a.A)(["\n  padding: 12px 16px;\n  color: #a0aec0;\n  font-size: 14px;\n  font-style: italic;\n  background: #f7fafc;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n"])));const us=function(n){var e=n.country,t=void 0===e?"":e,i=n.value,a=void 0===i?"":i,s=n.onChange,o=n.onSelect,c=n.error,l=n.placeholder,d=void 0===l?"Выберите город...":l,x=n.label,f=n.required,g=void 0!==f&&f,v=n.disabled,b=void 0!==v&&v,j=n.className,y=(0,r.useState)(!1),w=(0,p.A)(y,2),A=w[0],k=w[1],N=(0,r.useState)(a),S=(0,p.A)(N,2),C=S[0],z=S[1],_=(0,r.useState)([]),E=(0,p.A)(_,2),P=E[0],L=E[1],O=(0,r.useState)([]),D=(0,p.A)(O,2),$=D[0],M=D[1],I=(0,r.useState)(!1),U=(0,p.A)(I,2),T=U[0],R=U[1],B=(0,r.useState)(-1),W=(0,p.A)(B,2),F=W[0],Q=W[1],q=(0,r.useRef)(null),H=(0,r.useRef)(null),V=(0,r.useRef)(null);(0,r.useEffect)(function(){z(a)},[a]),(0,r.useEffect)(function(){t?X(t):(L([]),M([]),z(""),s&&s(""))},[t]),(0,r.useEffect)(function(){if(P.length>0){var n=P.filter(function(n){return n.city.toLowerCase().includes(C.toLowerCase())});M(n),Q(-1)}},[C,P]),(0,r.useEffect)(function(){var n=function(n){H.current&&!H.current.contains(n.target)&&(k(!1),Q(-1))};return document.addEventListener("mousedown",n),function(){return document.removeEventListener("mousedown",n)}},[]);var X=function(){var n=(0,u.A)(h().mark(function n(e){var t,r,i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return R(!0),n.prev=1,n.next=2,fetch("/api/geo/cities/".concat(encodeURIComponent(e),"?limit=500"));case 2:if((t=n.sent).ok){n.next=3;break}throw new Error("Ошибка загрузки городов");case 3:return n.next=4,t.json();case 4:r=n.sent,L(r.data||[]),M(r.data||[]),n.next=6;break;case 5:n.prev=5,i=n.catch(1),console.error("Ошибка загрузки городов:",i),L([]),M([]);case 6:return n.prev=6,R(!1),n.finish(6);case 7:case"end":return n.stop()}},n,null,[[1,5,6,7]])}));return function(e){return n.apply(this,arguments)}}(),Y=function(n){z(n.city),k(!1),Q(-1),s&&s(n.city),o&&o(n)};(0,r.useEffect)(function(){if(F>=0&&V.current){var n=V.current.children[F];n&&n.scrollIntoView({block:"nearest",behavior:"smooth"})}},[F]);var K=!t,G=b||K;return(0,m.jsxs)(as,{ref:H,className:j,children:[x&&(0,m.jsxs)(_r,{children:[x," ",g&&(0,m.jsx)("span",{className:"required",children:"*"})]}),K?(0,m.jsx)(ds,{children:"Сначала выберите страну"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Pr,{ref:q,type:"text",value:C,onChange:function(n){var e=n.target.value;z(e),k(!0),s&&s(e)},onFocus:function(){t&&k(!0)},onKeyDown:function(n){var e;if(A&&t)switch(n.key){case"ArrowDown":n.preventDefault(),Q(function(n){return n<$.length-1?n+1:n});break;case"ArrowUp":n.preventDefault(),Q(function(n){return n>0?n-1:-1});break;case"Enter":n.preventDefault(),F>=0&&$[F]&&Y($[F]);break;case"Escape":k(!1),Q(-1),null===(e=q.current)||void 0===e||e.blur()}},placeholder:d,disabled:G,className:c?"error":"",autoComplete:"off"}),(0,m.jsx)(ss,{$show:A&&!G,ref:V,children:T?(0,m.jsxs)(cs,{children:[(0,m.jsx)(Qr,{}),"Загрузка городов..."]}):$.length>0?$.map(function(n,e){return(0,m.jsxs)(os,{onClick:function(){return Y(n)},className:e===F?"selected":"",children:[(0,m.jsx)("div",{className:"city-name",children:n.city}),n.region&&(0,m.jsx)("div",{className:"region-name",children:n.region})]},"".concat(n.city,"-").concat(n.region||"no-region"))}):(0,m.jsx)(ls,{children:C?"Города не найдены":t?"Загрузка...":"Выберите страну"})})]}),c&&(0,m.jsx)(Mr,{children:c})]})};var ps,xs,hs,fs=d.Ay.div(ps||(ps=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  width: 100%;\n"]))),ms=d.Ay.div(xs||(xs=(0,a.A)(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 15px;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    gap: 12px;\n  }\n"])),function(n){return"stacked"===n.$layout?"1fr":"1fr 1fr"}),gs=d.Ay.div(hs||(hs=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 13px;\n  color: ",";\n  margin-top: 5px;\n  \n  &::before {\n    content: '","';\n    font-size: 12px;\n    color: ",";\n  }\n"])),function(n){return n.$valid?"#38a169":"#718096"},function(n){return n.$valid?"✓":"ⓘ"},function(n){return n.$valid?"#38a169":"#a0aec0"});const vs=function(n){var e=n.countryValue,t=void 0===e?"":e,i=n.cityValue,a=void 0===i?"":i,s=n.onCountryChange,o=n.onCityChange,c=n.onCountrySelect,l=n.onCitySelect,d=n.onLocationChange,u=n.countryError,x=n.cityError,h=n.layout,f=void 0===h?"side-by-side":h,g=n.countryLabel,v=void 0===g?"Страна":g,b=n.cityLabel,j=void 0===b?"Город":b,y=n.countryPlaceholder,w=void 0===y?"Выберите страну...":y,A=n.cityPlaceholder,k=void 0===A?"Выберите город...":A,N=n.required,S=void 0!==N&&N,C=n.disabled,z=void 0!==C&&C,_=n.showValidation,E=void 0!==_&&_,P=n.className,L=(0,r.useState)(!1),O=(0,p.A)(L,2),D=O[0],$=O[1];return(0,m.jsxs)(fs,{className:P,children:[(0,m.jsxs)(ms,{$layout:f,children:[(0,m.jsx)(Ja,{value:t,onChange:function(n){o&&a&&o(""),s&&s(n),d&&d({country:n,city:"",isComplete:!1}),$(!1)},onSelect:function(n){c&&c(n)},error:u,label:v,placeholder:w,required:S,disabled:z}),(0,m.jsx)(us,{country:t,value:a,onChange:function(n){o&&o(n);var e=!(!t||!n);$(e),d&&d({country:t,city:n,isComplete:e})},onSelect:function(n){var e=!(!t||!n.city);$(e),l&&l(n),d&&d({country:t,city:n.city,region:n.region,isComplete:e,fullData:{country:t,city:n.city,region:n.region}})},error:x,label:j,placeholder:k,required:S,disabled:z})]}),E?D?(0,m.jsx)(gs,{$valid:!0,children:"Местоположение подтверждено"}):t&&!a?(0,m.jsx)(gs,{$valid:!1,children:"Выберите город для завершения"}):t?null:(0,m.jsx)(gs,{$valid:!1,children:"Начните с выбора страны"}):null]})};var bs,js,ys,ws,As,ks,Ns,Ss,Cs,zs,_s,Es,Ps,Ls,Os,Ds,$s,Ms,Is,Us,Ts,Rs,Bs,Ws,Fs,Qs,qs,Hs,Vs;function Xs(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Ys(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Xs(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xs(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var Ks=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})},Gs=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,m.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})},Js=d.Ay.div(bs||(bs=(0,a.A)(["\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 20px;\n  \n  @media (max-width: 768px) {\n    padding: 10px;\n  }\n"]))),Zs=d.Ay.div(js||(js=(0,a.A)(["\n  width: 100%;\n  max-width: 900px;\n  background: white;\n  border-radius: 20px;\n  padding: 40px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);\n  animation: slideUp 0.4s ease-out;\n  \n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(30px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n    max-width: 100%;\n    border-radius: 15px;\n  }\n"]))),no=d.Ay.div(ys||(ys=(0,a.A)(["\n  text-align: center;\n  margin-bottom: 30px;\n"]))),eo=d.Ay.div(ws||(ws=(0,a.A)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 80px;\n  height: 80px;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  border-radius: 20px;\n  color: white;\n  font-size: 32px;\n  font-weight: bold;\n  margin-bottom: 15px;\n  box-shadow: 0 10px 30px rgba(220, 53, 34, 0.3);\n  \n  @media (max-width: 768px) {\n    width: 60px;\n    height: 60px;\n    font-size: 24px;\n  }\n"]))),to=d.Ay.h2(As||(As=(0,a.A)(["\n  text-align: center;\n  margin: 0 0 10px 0;\n  color: #2d3748;\n  font-size: 28px;\n  font-weight: 700;\n  \n  @media (max-width: 768px) {\n    font-size: 24px;\n  }\n"]))),ro=d.Ay.p(ks||(ks=(0,a.A)(["\n  text-align: center;\n  color: #718096;\n  font-size: 14px;\n  margin-bottom: 30px;\n"]))),io=d.Ay.div(Ns||(Ns=(0,a.A)(["\n  display: flex;\n  justify-content: center;\n  margin-bottom: 30px;\n  position: relative;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 25%;\n    right: 25%;\n    height: 2px;\n    background: #e2e8f0;\n    transform: translateY(-50%);\n    z-index: 0;\n  }\n"]))),ao=d.Ay.div(Ss||(Ss=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: ",";\n  color: ",";\n  font-weight: 600;\n  font-size: 14px;\n  transition: all 0.3s ease;\n  position: relative;\n  z-index: 1;\n  margin: 0 40px;\n  box-shadow: ",";\n  \n  @media (max-width: 480px) {\n    width: 30px;\n    height: 30px;\n    font-size: 12px;\n    margin: 0 25px;\n  }\n"])),function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"#e2e8f0"},function(n){return n.$active?"white":"#a0aec0"},function(n){return n.$active?"0 4px 15px rgba(220, 53, 34, 0.3)":"none"}),so=d.Ay.form(Cs||(Cs=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),oo=d.Ay.div(zs||(zs=(0,a.A)(["\n  background: #f7fafc;\n  padding: 25px;\n  border-radius: 15px;\n  margin-bottom: 20px;\n  border: 1px solid #e2e8f0;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n  }\n  \n  @media (max-width: 768px) {\n    padding: 20px 15px;\n  }\n"]))),co=d.Ay.h3(_s||(_s=(0,a.A)(["\n  margin: 0 0 20px 0;\n  color: #2d3748;\n  font-size: 18px;\n  font-weight: 600;\n  padding-bottom: 10px;\n  border-bottom: 2px solid #dc3522;\n  display: inline-block;\n  \n  @media (max-width: 768px) {\n    font-size: 16px;\n  }\n"]))),lo=d.Ay.div(Es||(Es=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  position: relative;\n"]))),uo=d.Ay.label(Ps||(Ps=(0,a.A)(["\n  font-weight: 500;\n  color: #4a5568;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  \n  .required {\n    color: #dc3522;\n    font-weight: bold;\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 13px;\n  }\n"]))),po=d.Ay.div(Ls||(Ls=(0,a.A)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n"]))),xo=d.Ay.input(Os||(Os=(0,a.A)(['\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 15px;\n  transition: all 0.3s ease;\n  background: white;\n  \n  &:focus {\n    outline: none;\n    border-color: #dc3522;\n    box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n  }\n  \n  &:hover:not(:focus) {\n    border-color: #cbd5e0;\n  }\n  \n  &.error {\n    border-color: #f56565;\n    background: #fff5f5;\n  }\n  \n  &:disabled {\n    background: #f7fafc;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n  \n  &[type="password"] {\n    padding-right: 45px;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n  }\n']))),ho=d.Ay.button(Ds||(Ds=(0,a.A)(["\n  position: absolute;\n  right: 12px;\n  background: none;\n  border: none;\n  color: #718096;\n  cursor: pointer;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: color 0.2s ease;\n  \n  &:hover {\n    color: #dc3522;\n  }\n  \n  &:focus {\n    outline: none;\n  }\n"]))),fo=d.Ay.select($s||($s=(0,a.A)(["\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 15px;\n  background: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%234A5568' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 16px center;\n  padding-right: 40px;\n  \n  &:focus {\n    outline: none;\n    border-color: #dc3522;\n    box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n  }\n  \n  &:hover:not(:focus) {\n    border-color: #cbd5e0;\n  }\n  \n  &.error {\n    border-color: #f56565;\n    background-color: #fff5f5;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n  }\n"]))),mo=d.Ay.textarea(Ms||(Ms=(0,a.A)(["\n  width: 100%;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  font-size: 15px;\n  min-height: 100px;\n  resize: vertical;\n  font-family: inherit;\n  transition: all 0.3s ease;\n  background: white;\n  \n  &:focus {\n    outline: none;\n    border-color: #dc3522;\n    box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n  }\n  \n  &:hover:not(:focus) {\n    border-color: #cbd5e0;\n  }\n  \n  &.error {\n    border-color: #f56565;\n    background: #fff5f5;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    font-size: 14px;\n    min-height: 80px;\n  }\n"]))),go=d.Ay.span(Is||(Is=(0,a.A)(["\n  color: #f56565;\n  font-size: 13px;\n  margin-top: 4px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  \n  &::before {\n    content: '⚠';\n    font-size: 12px;\n  }\n"]))),vo=d.Ay.button(Us||(Us=(0,a.A)(["\n  padding: 14px 28px;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(220, 53, 34, 0.3);\n  \n  &:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(220, 53, 34, 0.4);\n  }\n  \n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n  \n  &:disabled {\n    background: linear-gradient(135deg, #cbd5e0 0%, #a0aec0 100%);\n    cursor: not-allowed;\n    box-shadow: none;\n    transform: none;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 12px 24px;\n    font-size: 15px;\n  }\n"]))),bo=(0,d.Ay)(vo)(Ts||(Ts=(0,a.A)(["\n  background: white;\n  color: #dc3522;\n  border: 2px solid #dc3522;\n  box-shadow: none;\n  padding: 10px 20px;\n  font-size: 14px;\n  \n  &:hover:not(:disabled) {\n    background: #fff5f5;\n    transform: none;\n    box-shadow: 0 2px 10px rgba(220, 53, 34, 0.2);\n  }\n  \n  &:disabled {\n    background: #f7fafc;\n    border-color: #cbd5e0;\n    color: #a0aec0;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 8px 16px;\n    font-size: 13px;\n  }\n"]))),jo=d.Ay.div(Rs||(Rs=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  gap: 20px;\n  \n  @media (max-width: 576px) {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n"]))),yo=d.Ay.div(Bs||(Bs=(0,a.A)(["\n  text-align: center;\n  margin-top: 25px;\n  color: #718096;\n  font-size: 14px;\n  \n  a {\n    color: #dc3522;\n    text-decoration: none;\n    font-weight: 600;\n    transition: all 0.2s ease;\n    \n    &:hover {\n      text-decoration: underline;\n      color: #ff6b58;\n    }\n  }\n"]))),wo=d.Ay.div(Ws||(Ws=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\n  gap: 12px;\n  margin-top: 12px;\n  \n  @media (max-width: 576px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Ao=d.Ay.label(Fs||(Fs=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px 16px;\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: white;\n  position: relative;\n  overflow: hidden;\n  \n  &:hover {\n    border-color: #dc3522;\n    background: #fff5f5;\n  }\n  \n  &.selected {\n    border-color: #dc3522;\n    background: linear-gradient(135deg, rgba(220, 53, 34, 0.05) 0%, rgba(255, 107, 88, 0.05) 100%);\n    \n    &::after {\n      content: '✓';\n      position: absolute;\n      top: 8px;\n      right: 12px;\n      color: #dc3522;\n      font-weight: bold;\n      font-size: 16px;\n    }\n  }\n  \n  input[type=\"radio\"] {\n    width: 0;\n    height: 0;\n    opacity: 0;\n    position: absolute;\n  }\n  \n  span {\n    font-size: 14px;\n    color: #4a5568;\n    font-weight: 500;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 14px;\n    \n    span {\n      font-size: 13px;\n    }\n  }\n"]))),ko=d.Ay.div(Qs||(Qs=(0,a.A)(["\n  display: flex;\n  gap: 12px;\n  align-items: flex-start;\n  \n  .email-input-wrapper {\n    flex: 1;\n  }\n  \n  .code-button-wrapper {\n    padding-top: 0;\n  }\n  \n  @media (max-width: 576px) {\n    flex-direction: column;\n    \n    .code-button-wrapper {\n      width: 100%;\n      \n      button {\n        width: 100%;\n      }\n    }\n  }\n"]))),No=d.Ay.div(qs||(qs=(0,a.A)(["\n  max-width: 250px;\n  \n  @media (max-width: 576px) {\n    max-width: 100%;\n  }\n"]))),So=d.Ay.div(Hs||(Hs=(0,a.A)(["\n  color: #718096;\n  font-size: 13px;\n  margin-top: 6px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  \n  &::before {\n    content: '⏱';\n    font-size: 14px;\n  }\n"]))),Co=d.Ay.div(Vs||(Vs=(0,a.A)(["\n  height: 4px;\n  background: #e2e8f0;\n  border-radius: 2px;\n  margin: 20px 0;\n  overflow: hidden;\n  \n  &::after {\n    content: '';\n    display: block;\n    height: 100%;\n    width: ","%;\n    background: linear-gradient(90deg, #dc3522 0%, #ff6b58 100%);\n    transition: width 0.3s ease;\n  }\n"])),function(n){return n.$progress});const zo=function(){var n,e,t=(0,o.Zp)(),i=(0,r.useState)(1),a=(0,p.A)(i,2),d=a[0],u=a[1],x=(0,r.useState)(""),h=(0,p.A)(x,2),g=h[0],v=h[1],b=(0,r.useState)(""),j=(0,p.A)(b,2),y=j[0],w=j[1],A=(0,r.useState)(!1),k=(0,p.A)(A,2),N=k[0],S=k[1],C=(0,r.useState)(0),z=(0,p.A)(C,2),_=z[0],E=z[1],P=(0,r.useState)(!1),L=(0,p.A)(P,2),O=L[0],D=L[1],$=(0,r.useState)(!1),M=(0,p.A)($,2),I=M[0],U=M[1],T=(0,r.useState)(0),R=(0,p.A)(T,2),B=R[0],W=R[1],F=(0,Ua.mN)({defaultValues:{country:"Россия",city:""}}),Q=F.register,q=F.handleSubmit,H=F.watch,V=(F.getValues,F.setValue),X=F.clearErrors,Y=F.formState.errors,K=H("password"),G=H("email"),J=H();(0,r.useEffect)(function(){var n=["login","email","password","confirmPassword","searchStatus","searchAge","city"];"Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g?n.push("manBirthday","womanBirthday"):"Мужчина"===g?n.push("manBirthday"):"Женщина"===g&&n.push("womanBirthday"),J.location&&Array.isArray(J.location)&&J.location.length>0&&n.push("location");var e=n.filter(function(n){return"location"===n?J.location&&Array.isArray(J.location)&&J.location.length>0:J[n]}).length/n.length*100;W(e)},[J,g]),(0,r.useEffect)(function(){var n;return _>0&&(n=setInterval(function(){E(function(n){return n-1})},1e3)),function(){return clearInterval(n)}},[_]);var Z=(0,c.useMutation)(f.authAPI.sendCode,{onSuccess:function(){l.Ay.success("Код отправлен на ваш email"),S(!0),E(120)},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),nn=(0,c.useMutation)(f.authAPI.register,{onSuccess:function(n){l.Ay.success("Регистрация успешна! Добро пожаловать в SwingFox!"),t("/")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),en=[{value:"Не курю и не переношу табачного дыма",label:"Не курю и не переношу табачного дыма"},{value:"Не курю, но терпимо отношусь к табачному дыму",label:"Не курю, но терпимо отношусь к табачному дыму"},{value:"Курю, но могу обойтись какое-то время без сигарет",label:"Курю, но могу обойтись какое-то время без сигарет"},{value:"Не могу отказаться от курения ни при каких обстоятельствах",label:"Не могу отказаться от курения ни при каких обстоятельствах"}],tn=[{value:"Не употребляю вообще",label:"Не употребляю вообще"},{value:"В незначительных дозах, количество выпитого не отражается на моем поведении",label:"В незначительных дозах, количество выпитого не отражается на моем поведении"},{value:"Умеренно, до легкого опьянения, контролирую свое поведение",label:"Умеренно, до легкого опьянения, контролирую свое поведение"},{value:"Могу напиться, потерять контроль над своим поведением",label:"Могу напиться, потерять контроль над своим поведением"}];return(0,r.useEffect)(function(){if(J.searchStatus&&J.searchAge&&g){var n=!0;"Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g?n=J.manBirthday&&J.womanBirthday:"Мужчина"===g?n=J.manBirthday:"Женщина"===g&&(n=J.womanBirthday),u(n?3:2)}else J.login&&J.email&&J.password?u(2):u(1)},[J,g]),(0,m.jsxs)(Js,{children:[(0,m.jsx)("div",{className:"auth-decoration auth-decoration-top-right"}),(0,m.jsx)("div",{className:"auth-decoration auth-decoration-bottom-left"}),(0,m.jsxs)(Zs,{children:[(0,m.jsxs)(no,{children:[(0,m.jsx)(eo,{children:"SF"}),(0,m.jsx)(to,{children:"Присоединиться к SwingFox"}),(0,m.jsx)(ro,{children:"Создайте аккаунт и найдите единомышленников"})]}),(0,m.jsxs)(io,{children:[(0,m.jsx)(ao,{$active:d>=1,children:"1"}),(0,m.jsx)(ao,{$active:d>=2,children:"2"}),(0,m.jsx)(ao,{$active:d>=3,children:"3"})]}),(0,m.jsx)(Co,{$progress:B}),(0,m.jsxs)(so,{onSubmit:q(function(n){if(y)if(g){var e={};"Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g?e={date:"".concat(n.manBirthday,"_").concat(n.womanBirthday),height:"".concat(n.manHeight||"","_").concat(n.womanHeight||""),weight:"".concat(n.manWeight||"","_").concat(n.womanWeight||""),smoking:"".concat(n.manSmoking||"no_matter","_").concat(n.womanSmoking||"no_matter"),alko:"".concat(n.manAlko||"no_matter","_").concat(n.womanAlko||"no_matter")}:"Мужчина"===g?e={date:n.manBirthday,height:n.manHeight||"",weight:n.manWeight||"",smoking:n.manSmoking||"no_matter",alko:n.manAlko||"no_matter"}:"Женщина"===g&&(e={date:n.womanBirthday,height:n.womanHeight||"",weight:n.womanWeight||"",smoking:n.womanSmoking||"no_matter",alko:n.womanAlko||"no_matter"});var t=(Array.isArray(n.location)?n.location:[]).join("&&"),r={email:n.email,mail_code:y,login:n.login,password:n.password,about:{status:g,country:n.country||"Россия",city:n.city,search_status:n.searchStatus,search_age:n.searchAge,location:t,mobile:n.mobile||"",info:n.info||""},individual:e};nn.mutate(r)}else l.Ay.error("Выберите ваш статус");else l.Ay.error("Введите код подтверждения из email")}),children:[(0,m.jsxs)(oo,{children:[(0,m.jsx)(co,{children:"Основная информация"}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Логин ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(xo,Ys(Ys({},Q("login",{required:"Логин обязателен",minLength:{value:3,message:"Минимум 3 символа"},pattern:{value:/^[a-zA-Z0-9_-]+$/,message:"Только латинские буквы, цифры, _ и -"}})),{},{className:Y.login?"error":"",placeholder:"Ваш логин",autoComplete:"username"})),Y.login&&(0,m.jsx)(go,{children:Y.login.message})]}),(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Email ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsxs)(ko,{children:[(0,m.jsxs)("div",{className:"email-input-wrapper",children:[(0,m.jsx)(xo,Ys(Ys({type:"email"},Q("email",{required:"Email обязателен",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Неверный формат email"}})),{},{className:Y.email?"error":"",placeholder:"your@email.com",autoComplete:"email"})),Y.email&&(0,m.jsx)(go,{children:Y.email.message})]}),(0,m.jsx)("div",{className:"code-button-wrapper",children:(0,m.jsx)(bo,{type:"button",onClick:function(){G?Z.mutate(G):l.Ay.error("Введите email адрес")},disabled:!G||Z.isLoading||_>0,children:Z.isLoading?"Отправка...":_>0?"".concat(_,"с"):"Код"})})]}),_>0&&(0,m.jsxs)(So,{children:["Повторная отправка через ",_," секунд"]})]})]}),(0,m.jsx)(jo,{children:(0,m.jsx)(No,{children:(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Код из email ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(xo,{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:y,onChange:function(n){var e=n.target.value.replace(/\D/g,"").slice(0,6);w(e)},placeholder:"123456",disabled:!N,maxLength:"6",style:{textAlign:"center",letterSpacing:"8px",fontWeight:"bold",fontSize:"18px",fontFamily:"monospace"}}),!N&&(0,m.jsx)(go,{children:"Сначала отправьте код на email"}),y.length>0&&y.length<6&&N&&(0,m.jsx)(go,{children:"Код должен содержать 6 цифр"})]})})}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Пароль ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsxs)(po,{children:[(0,m.jsx)(xo,Ys(Ys({type:O?"text":"password"},Q("password",{required:"Пароль обязателен",minLength:{value:6,message:"Минимум 6 символов"}})),{},{className:Y.password?"error":"",placeholder:"Пароль",autoComplete:"new-password"})),(0,m.jsx)(ho,{type:"button",onClick:function(){return D(!O)},children:O?(0,m.jsx)(Gs,{}):(0,m.jsx)(Ks,{})})]}),Y.password&&(0,m.jsx)(go,{children:Y.password.message})]}),(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Подтверждение пароля ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsxs)(po,{children:[(0,m.jsx)(xo,Ys(Ys({type:I?"text":"password"},Q("confirmPassword",{required:"Подтвердите пароль",validate:function(n){return n===K||"Пароли не совпадают"}})),{},{className:Y.confirmPassword?"error":"",placeholder:"Повторите пароль",autoComplete:"new-password"})),(0,m.jsx)(ho,{type:"button",onClick:function(){return U(!I)},children:I?(0,m.jsx)(Gs,{}):(0,m.jsx)(Ks,{})})]}),Y.confirmPassword&&(0,m.jsx)(go,{children:Y.confirmPassword.message})]})]})]}),(0,m.jsxs)(oo,{children:[(0,m.jsx)(co,{children:"Ваш статус и предпочтения"}),(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Ваш статус ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(wo,{children:[{value:"Семейная пара(М+Ж)",label:"Семейная пара(М+Ж)"},{value:"Несемейная пара(М+Ж)",label:"Несемейная пара(М+Ж)"},{value:"Мужчина",label:"Мужчина"},{value:"Женщина",label:"Женщина"}].map(function(n){return(0,m.jsxs)(Ao,{className:g===n.value?"selected":"",children:[(0,m.jsx)("input",{type:"radio",name:"status",value:n.value,checked:g===n.value,onChange:function(n){return v(n.target.value)},required:!0}),(0,m.jsx)("span",{children:n.label})]},n.value)})})]}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Кого ищете ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsxs)(fo,Ys(Ys({},Q("searchStatus",{required:"Выберите кого ищете"})),{},{className:Y.searchStatus?"error":"",children:[(0,m.jsx)("option",{value:"",children:"Выберите..."}),[{value:"Семейная пара(М+Ж)",label:"Семейную пару(М+Ж)"},{value:"Несемейная пара(М+Ж)",label:"Несемейную пару(М+Ж)"},{value:"Мужчина",label:"Мужчину"},{value:"Женщина",label:"Женщину"}].map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})]})),Y.searchStatus&&(0,m.jsx)(go,{children:Y.searchStatus.message})]}),(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Возрастной диапазон ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsxs)(fo,Ys(Ys({},Q("searchAge",{required:"Выберите возрастной диапазон"})),{},{className:Y.searchAge?"error":"",children:[(0,m.jsx)("option",{value:"",children:"Выберите..."}),[{value:"Возраст значения не имеет",label:"Возраст значения не имеет"},{value:"С ровестниками",label:"С ровестниками"},{value:"С ровестниками или с разницей +/- 5 лет",label:"С ровестниками или с разницей +/- 5 лет"},{value:"С ровестниками или с разницей +/- 10 лет",label:"С ровестниками или с разницей +/- 10 лет"}].map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})]})),Y.searchAge&&(0,m.jsx)(go,{children:Y.searchAge.message})]})]})]}),(0,m.jsxs)(oo,{children:[(0,m.jsx)(co,{children:"Личная информация"}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Дата рождения ",!g||"Семейная пара(М+Ж)"!==g&&"Несемейная пара(М+Ж)"!==g?"":"(Мужчина)"," ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(xo,Ys(Ys({type:"date"},Q("manBirthday",{required:"Дата рождения обязательна",validate:function(n){var e=new Date,t=new Date(n);return e.getFullYear()-t.getFullYear()>=18||"Вам должно быть больше 18 лет"}})),{},{className:Y.manBirthday?"error":""})),Y.manBirthday&&(0,m.jsx)(go,{children:Y.manBirthday.message})]}),g&&("Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g)&&(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Дата рождения (Женщина) ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(xo,Ys(Ys({type:"date"},Q("womanBirthday",{required:"Дата рождения партнера обязательна",validate:function(n){var e=new Date,t=new Date(n);return e.getFullYear()-t.getFullYear()>=18||"Партнеру должно быть больше 18 лет"}})),{},{className:Y.womanBirthday?"error":""})),Y.womanBirthday&&(0,m.jsx)(go,{children:Y.womanBirthday.message})]}),(0,m.jsx)(vs,{countryValue:H("country"),cityValue:H("city"),onCountryChange:function(n){V("country",n),X("country"),H("city")&&(V("city",""),X("city"))},onCityChange:function(n){V("city",n),X("city")},countryError:null===(n=Y.country)||void 0===n?void 0:n.message,cityError:null===(e=Y.city)||void 0===e?void 0:e.message,required:!0,showValidation:!0,layout:"stacked"}),(0,m.jsx)("input",Ys({type:"hidden"},Q("country",{required:"Страна обязательна"}))),(0,m.jsx)("input",Ys({type:"hidden"},Q("city",{required:"Город обязателен"})))]}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsx)(uo,{children:"Мобильный телефон"}),(0,m.jsx)(xo,Ys(Ys({type:"tel"},Q("mobile")),{},{placeholder:"+7 (999) 123-45-67"}))]}),(0,m.jsxs)(lo,{children:[(0,m.jsx)(uo,{children:"Предпочитаемые места для встреч"}),(0,m.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[{id:"У себя дома (пригласим к себе)",label:"У себя дома (пригласим к себе)"},{id:"У вас дома (примем приглашение)",label:"У вас дома (примем приглашение)"},{id:"В свинг-клубе или на закрытой вечеринке",label:"В свинг-клубе или на закрытой вечеринке"},{id:"В сауне",label:"В сауне"},{id:"В гостинице или на съемной квартире",label:"В гостинице или на съемной квартире"}].map(function(n){return(0,m.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)("input",Ys({type:"checkbox",value:n.id},Q("location"))),(0,m.jsx)("span",{style:{fontSize:"14px"},children:n.label})]},n.id)})})]})]}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Рост (см) ",!g||"Семейная пара(М+Ж)"!==g&&"Несемейная пара(М+Ж)"!==g?"":"(Мужчина)"]}),(0,m.jsx)(xo,Ys(Ys({type:"number"},Q("manHeight")),{},{placeholder:"175",min:"140",max:"220"}))]}),g&&("Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g)&&(0,m.jsxs)(lo,{children:[(0,m.jsx)(uo,{children:"Рост (см) (Женщина)"}),(0,m.jsx)(xo,Ys(Ys({type:"number"},Q("womanHeight")),{},{placeholder:"165",min:"140",max:"200"}))]})]}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Вес (кг) ",!g||"Семейная пара(М+Ж)"!==g&&"Несемейная пара(М+Ж)"!==g?"":"(Мужчина)"]}),(0,m.jsx)(xo,Ys(Ys({type:"number"},Q("manWeight")),{},{placeholder:"70",min:"40",max:"200"}))]}),g&&("Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g)&&(0,m.jsxs)(lo,{children:[(0,m.jsx)(uo,{children:"Вес (кг) (Женщина)"}),(0,m.jsx)(xo,Ys(Ys({type:"number"},Q("womanWeight")),{},{placeholder:"55",min:"40",max:"150"}))]})]}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Отношение к курению ",!g||"Семейная пара(М+Ж)"!==g&&"Несемейная пара(М+Ж)"!==g?"":"(Мужчина)"]}),(0,m.jsx)(fo,Ys(Ys({},Q("manSmoking")),{},{children:en.map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})}))]}),g&&("Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g)&&(0,m.jsxs)(lo,{children:[(0,m.jsx)(uo,{children:"Отношение к курению (Женщина)"}),(0,m.jsx)(fo,Ys(Ys({},Q("womanSmoking")),{},{children:en.map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})}))]})]}),(0,m.jsxs)(jo,{children:[(0,m.jsxs)(lo,{children:[(0,m.jsxs)(uo,{children:["Отношение к алкоголю ",!g||"Семейная пара(М+Ж)"!==g&&"Несемейная пара(М+Ж)"!==g?"":"(Мужчина)"]}),(0,m.jsx)(fo,Ys(Ys({},Q("manAlko")),{},{children:tn.map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})}))]}),g&&("Семейная пара(М+Ж)"===g||"Несемейная пара(М+Ж)"===g)&&(0,m.jsxs)(lo,{children:[(0,m.jsx)(uo,{children:"Отношение к алкоголю (Женщина)"}),(0,m.jsx)(fo,Ys(Ys({},Q("womanAlko")),{},{children:tn.map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})}))]})]}),(0,m.jsxs)(lo,{children:[(0,m.jsx)(uo,{children:"О себе"}),(0,m.jsx)(mo,Ys(Ys({},Q("info")),{},{placeholder:"Расскажите о себе, ваших интересах и предпочтениях..."}))]})]}),(0,m.jsx)(vo,{type:"submit",disabled:nn.isLoading||!y,children:nn.isLoading?"Регистрация...":"Зарегистрироваться"})]}),(0,m.jsxs)(yo,{children:["Уже есть аккаунт? ",(0,m.jsx)(s.N_,{to:"/login",children:"Войти"})]}),(0,m.jsxs)("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e2e8f0",textAlign:"center"},children:[(0,m.jsx)("p",{style:{color:"#718096",fontSize:"14px",marginBottom:"15px",fontWeight:"500"},children:"Вы представляете клуб?"}),(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"15px",flexWrap:"wrap"},children:[(0,m.jsx)(s.N_,{to:"/club/login",style:{background:"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)",color:"white",textDecoration:"none",fontWeight:"600",fontSize:"14px",padding:"10px 20px",borderRadius:"8px",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(220, 53, 34, 0.3)"},onMouseEnter:function(n){n.target.style.transform="translateY(-2px)",n.target.style.boxShadow="0 6px 20px rgba(220, 53, 34, 0.4)"},onMouseLeave:function(n){n.target.style.transform="translateY(0)",n.target.style.boxShadow="0 4px 15px rgba(220, 53, 34, 0.3)"},children:"Вход для клубов"}),(0,m.jsx)(s.N_,{to:"/club/register",style:{background:"white",color:"#dc3522",textDecoration:"none",fontWeight:"600",fontSize:"14px",padding:"10px 20px",borderRadius:"8px",border:"2px solid #dc3522",transition:"all 0.3s ease"},onMouseEnter:function(n){n.target.style.background="#dc3522",n.target.style.color="white",n.target.style.transform="translateY(-2px)"},onMouseLeave:function(n){n.target.style.background="white",n.target.style.color="#dc3522",n.target.style.transform="translateY(0)"},children:"Регистрация клуба"})]})]})]})]})};var _o,Eo,Po,Lo,Oo,Do,$o,Mo,Io,Uo,To,Ro,Bo,Wo,Fo,Qo=function(){return(0,m.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,m.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},qo=function(){return(0,m.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polygon",{points:"12,2 15.09,8.26 22,9 17,14.74 18.18,21.02 12,17.77 5.82,21.02 7,14.74 2,9 8.91,8.26 12,2"})})},Ho=function(){return(0,m.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M19 12H6m6-7l-7 7 7 7"})})},Vo=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,m.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})},Xo=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,m.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,m.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})},Yo=(0,d.Ay)(jr)(_o||(_o=(0,a.A)(["\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n"]))),Ko=d.Ay.div(Eo||(Eo=(0,a.A)(["\n  background: white;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  backdrop-filter: blur(10px);\n  border-bottom: 1px solid #e2e8f0;\n  \n  /* Большие экраны */\n  @media (min-width: 1440px) {\n    padding: 25px;\n    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.1);\n  }\n  \n  /* Средние экраны */\n  @media (max-width: 1200px) {\n    padding: 20px;\n    box-shadow: 0 4px 18px rgba(0, 0, 0, 0.08);\n  }\n  \n  /* Планшеты в альбомной ориентации */\n  @media (max-width: 1024px) {\n    padding: 18px;\n    box-shadow: 0 3px 16px rgba(0, 0, 0, 0.08);\n  }\n  \n  /* Планшеты в портретной ориентации */\n  @media (max-width: 768px) {\n    padding: 15px;\n    box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);\n  }\n  \n  /* Большие мобильные */\n  @media (max-width: 576px) {\n    padding: 12px;\n    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\n  }\n  \n  /* Мобильные */\n  @media (max-width: 480px) {\n    padding: 10px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);\n  }\n  \n  /* Маленькие мобильные */\n  @media (max-width: 360px) {\n    padding: 8px;\n    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.08);\n  }\n"]))),Go=d.Ay.div(Po||(Po=(0,a.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  /* Большие экраны */\n  @media (min-width: 1440px) {\n    max-width: 1400px;\n  }\n  \n  /* Средние экраны */\n  @media (max-width: 1200px) {\n    max-width: 100%;\n  }\n  \n  /* Планшеты */\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 15px;\n    align-items: flex-start;\n  }\n  \n  /* Мобильные */\n  @media (max-width: 480px) {\n    gap: 12px;\n  }\n"]))),Jo=d.Ay.div(Lo||(Lo=(0,a.A)(["\n  h1 {\n    margin: 0 0 5px 0;\n    font-size: 28px;\n    font-weight: 700;\n    background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n  }\n  \n  p {\n    margin: 0;\n    color: #718096;\n    font-size: 14px;\n  }\n  \n  /* Большие экраны */\n  @media (min-width: 1440px) {\n    h1 {\n      font-size: 32px;\n    }\n    \n    p {\n      font-size: 16px;\n    }\n  }\n  \n  /* Средние экраны */\n  @media (max-width: 1200px) {\n    h1 {\n      font-size: 28px;\n    }\n    \n    p {\n      font-size: 14px;\n    }\n  }\n  \n  /* Планшеты в альбомной ориентации */\n  @media (max-width: 1024px) {\n    h1 {\n      font-size: 26px;\n    }\n    \n    p {\n      font-size: 14px;\n    }\n  }\n  \n  /* Планшеты в портретной ориентации */\n  @media (max-width: 768px) {\n    h1 {\n      font-size: 24px;\n    }\n    \n    p {\n      font-size: 13px;\n    }\n  }\n  \n  /* Большие мобильные */\n  @media (max-width: 576px) {\n    h1 {\n      font-size: 22px;\n    }\n    \n    p {\n      font-size: 13px;\n    }\n  }\n  \n  /* Мобильные */\n  @media (max-width: 480px) {\n    h1 {\n      font-size: 20px;\n    }\n    \n    p {\n      font-size: 12px;\n    }\n  }\n  \n  /* Маленькие мобильные */\n  @media (max-width: 360px) {\n    h1 {\n      font-size: 18px;\n    }\n    \n    p {\n      font-size: 11px;\n    }\n  }\n"]))),Zo=d.Ay.div(Oo||(Oo=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  \n  .user-details {\n    text-align: right;\n    \n    .username {\n      font-weight: 600;\n      color: #2d3748;\n      margin: 0;\n    }\n    \n    .status {\n      font-size: 12px;\n      color: #718096;\n      margin: 0;\n    }\n  }\n  \n  /* Большие экраны */\n  @media (min-width: 1440px) {\n    gap: 15px;\n    \n    .user-details .username {\n      font-size: 16px;\n    }\n    \n    .user-details .status {\n      font-size: 13px;\n    }\n  }\n  \n  /* Средние экраны */\n  @media (max-width: 1200px) {\n    gap: 12px;\n  }\n  \n  /* Планшеты в альбомной ориентации */\n  @media (max-width: 1024px) {\n    gap: 10px;\n    \n    .user-details .username {\n      font-size: 15px;\n    }\n    \n    .user-details .status {\n      font-size: 12px;\n    }\n  }\n  \n  /* Планшеты в портретной ориентации */\n  @media (max-width: 768px) {\n    gap: 8px;\n    \n    .user-details .username {\n      font-size: 14px;\n    }\n    \n    .user-details .status {\n      font-size: 11px;\n    }\n  }\n  \n  /* Большие мобильные */\n  @media (max-width: 576px) {\n    gap: 6px;\n    \n    .user-details .username {\n      font-size: 13px;\n    }\n    \n    .user-details .status {\n      font-size: 10px;\n    }\n  }\n  \n  /* Мобильные */\n  @media (max-width: 480px) {\n    .user-details {\n      display: none;\n    }\n  }\n"]))),nc=d.Ay.div(Do||(Do=(0,a.A)(["\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40px 20px;\n  position: relative;\n  max-width: 500px;\n  margin: 0 auto;\n  width: 100%;\n  \n  @media (max-width: 768px) {\n    padding: 20px 15px;\n  }\n  \n  /* Десктопная версия */\n  @media (min-width: 1024px) {\n    max-width: 900px;\n    padding: 40px;\n  }\n"]))),ec=(0,d.Ay)(ha.P.div)($o||($o=(0,a.A)(["\n  width: 100%;\n  max-width: 400px;\n  height: 650px;\n  background: white;\n  border-radius: 25px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n  position: relative;\n  cursor: grab;\n  \n  &:active {\n    cursor: grabbing;\n  }\n  \n  @media (max-width: 768px) {\n    height: 650px; /* Увеличиваем высоту для мобильной версии */\n    max-width: 100%;\n  }\n  \n  @media (max-width: 480px) {\n    height: 600px; /* Оптимальная высота для маленьких экранов */\n  }\n  \n  /* Десктопная версия */\n  @media (min-width: 1024px) {\n    max-width: 800px;\n    height: 500px;\n    display: flex;\n    flex-direction: row;\n  }\n"]))),tc=d.Ay.div(Mo||(Mo=(0,a.A)(["\n  width: 100%;\n  height: 65%;\n  background-image: url(",");\n  background-size: cover;\n  background-position: center;\n  background-color: #f7fafc;\n  position: relative;\n  transition: all 0.3s ease;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(\n      to bottom,\n      transparent 0%,\n      transparent 40%,\n      rgba(0,0,0,0.2) 70%,\n      rgba(0,0,0,0.8) 100%\n    );\n    transition: all 0.3s ease;\n  }\n  \n  ","\n  \n  @media (max-width: 768px) {\n    height: 60%; /* Уменьшаем высоту изображения в мобильной версии */\n  }\n  \n  @media (max-width: 480px) {\n    height: 55%; /* Еще больше уменьшаем для маленьких экранов */\n  }\n  \n  /* Десктопная версия */\n  @media (min-width: 1024px) {\n    width: 50%;\n    height: 100%;\n    \n    &::before {\n      background: linear-gradient(\n        to bottom,\n        transparent 0%,\n        transparent 40%,\n        rgba(0,0,0,0.2) 70%,\n        rgba(0,0,0,0.8) 100%\n      );\n    }\n  }\n"])),function(n){return n.$src},function(n){return!n.$src&&"\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%);\n    color: #a0aec0;\n    font-size: 48px;\n    font-weight: bold;\n    \n    &::before {\n      display: none;\n    }\n  "}),rc=d.Ay.div(Io||(Io=(0,a.A)(["\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 20px;\n  color: white;\n  z-index: 2;\n  transition: all 0.3s ease;\n  \n  .username {\n    font-size: 24px;\n    font-weight: 700;\n    margin: 0 0 6px 0;\n    text-shadow: 0 2px 4px rgba(0,0,0,0.3);\n    transition: all 0.3s ease;\n  }\n  \n  .location {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 14px;\n    opacity: 0.9;\n    margin-bottom: 3px;\n    transition: all 0.3s ease;\n  }\n  \n  .age {\n    font-size: 14px;\n    opacity: 0.9;\n    transition: all 0.3s ease;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 16px;\n    \n    .username {\n      font-size: 20px;\n    }\n    \n    .location, .age {\n      font-size: 12px;\n    }\n  }\n  \n  /* Десктопная версия */\n  @media (min-width: 1024px) {\n    padding: 30px;\n    \n    .username {\n      font-size: 28px;\n    }\n    \n    .location, .age {\n      font-size: 16px;\n    }\n  }\n"]))),ic=d.Ay.div(Uo||(Uo=(0,a.A)(["\n  padding: 20px;\n  height: 35%;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  overflow-y: auto; /* Добавляем вертикальный скролл */\n  overflow-x: hidden; /* Предотвращаем горизонтальный скролл */\n  transition: all 0.3s ease;\n  \n  /* Стили для скроллбара */\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n    border-radius: 3px;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #c1c1c1;\n    border-radius: 3px;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: #a8a8a8;\n  }\n  \n  .status-badge {\n    display: inline-flex;\n    align-items: center;\n    gap: 6px;\n    background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n    color: white;\n    padding: 6px 12px;\n    border-radius: 16px;\n    font-size: 12px;\n    font-weight: 600;\n    margin-bottom: 10px;\n    align-self: flex-start;\n    box-shadow: 0 4px 12px rgba(220, 53, 34, 0.3);\n    transition: all 0.3s ease;\n  }\n  \n  .compatibility-badge {\n    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);\n    border-radius: 16px;\n    padding: 12px 16px;\n    color: white;\n    font-size: 12px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);\n    margin: 8px 0;\n    transition: all 0.3s ease;\n    \n    .percentage {\n      font-weight: bold;\n      font-size: 13px;\n    }\n    \n    .progress-bar {\n      flex: 1;\n      height: 6px;\n      background: rgba(255, 255, 255, 0.3);\n      border-radius: 3px;\n      overflow: hidden;\n      \n      .progress-fill {\n        height: 100%;\n        background: linear-gradient(90deg, #ffffff 0%, #e6fffa 100%);\n        border-radius: 3px;\n        transition: width 0.3s ease;\n      }\n    }\n  }\n  \n  .partner-info {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border-radius: 16px;\n    padding: 8px 12px;\n    color: white;\n    font-size: 12px;\n    margin: 8px 0;\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n    transition: all 0.3s ease;\n    \n    .title {\n      font-weight: bold;\n      margin-bottom: 4px;\n      display: flex;\n      align-items: center;\n      gap: 6px;\n    }\n    \n    .details {\n      opacity: 0.9;\n      font-size: 11px;\n      \n      div {\n        margin-bottom: 2px;\n        \n        &:last-child {\n          margin-bottom: 0;\n        }\n        \n        strong {\n          color: #e2e8f0;\n        }\n      }\n    }\n    \n    /* Специальные стили для блока поиска */\n    &.search-info {\n      background: linear-gradient(135deg, #805ad5 0%, #6b46c1 100%);\n      box-shadow: 0 4px 12px rgba(128, 90, 213, 0.3);\n      \n      .title {\n        color: #f7fafc;\n      }\n      \n      .details {\n        div {\n          strong {\n            color: #e2e8f0;\n          }\n          \n          /* Стили для списка мест встречи */\n          div {\n            margin-top: 4px;\n            margin-left: 8px;\n            \n            div {\n              margin-bottom: 2px;\n              font-size: 10px;\n              color: #e2e8f0;\n              \n              &:last-child {\n                margin-bottom: 0;\n              }\n            }\n          }\n        }\n      }\n    }\n    \n    /* Специальные стили для блока места встречи */\n    &.location-info {\n      background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);\n      box-shadow: 0 4px 12px rgba(56, 161, 105, 0.3);\n      \n      .title {\n        color: #f7fafc;\n      }\n      \n      .details {\n        div {\n          strong {\n            color: #e2e8f0;\n          }\n          \n          /* Стили для списка мест встречи */\n          div {\n            margin-top: 4px;\n            margin-left: 8px;\n            \n            div {\n              margin-bottom: 2px;\n              font-size: 10px;\n              color: #e2e8f0;\n              \n              &:last-child {\n                margin-bottom: 0;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  \n  .additional-info {\n    display: grid;\n    grid-template-columns: 1fr; /* В мобильной версии всегда одна колонка */\n    gap: 6px;\n    margin: 8px 0;\n    \n    .info-item {\n      display: flex;\n      align-items: flex-start; /* Выравниваем по верху для многострочного текста */\n      gap: 8px;\n      font-size: 11px;\n      color: #4a5568;\n      padding: 8px 10px;\n      background: #f7fafc;\n      border-radius: 8px;\n      border: 1px solid #e2e8f0;\n      transition: all 0.3s ease;\n      \n      .emoji {\n        font-size: 14px;\n        flex-shrink: 0; /* Эмодзи не сжимается */\n        margin-top: 1px; /* Небольшое выравнивание по верху */\n      }\n      \n      .text {\n        font-weight: 500;\n        flex: 1; /* Текст занимает все доступное место */\n        line-height: 1.4;\n        \n        /* Стили для вложенных элементов (для пар) */\n        div {\n          display: flex;\n          flex-direction: column;\n          gap: 4px;\n          \n          span {\n            font-size: 11px;\n            line-height: 1.3;\n            color: #4a5568;\n          }\n        }\n      }\n      \n      &:hover {\n        background: #edf2f7;\n        border-color: #cbd5e0;\n        transform: translateY(-1px);\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      }\n    }\n  }\n  \n  .info {\n    color: #4a5568;\n    font-size: 13px;\n    line-height: 1.4;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n    margin-top: 12px;\n    transition: all 0.3s ease;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 16px;\n    height: 40%; /* Увеличиваем высоту в мобильной версии */\n    \n    .status-badge {\n      font-size: 11px;\n      padding: 5px 10px;\n    }\n    \n    .compatibility-badge, .partner-info {\n      font-size: 11px;\n      padding: 6px 10px;\n    }\n    \n    .partner-info.search-info {\n      .details div {\n        font-size: 10px;\n        \n        /* Стили для списка мест встречи */\n        div div {\n          font-size: 9px;\n        }\n      }\n    }\n    \n    .partner-info.location-info {\n      .details div {\n        font-size: 9px;\n        \n        /* Стили для списка мест встречи */\n        div div {\n          font-size: 8px;\n        }\n      }\n    }\n    \n    .additional-info {\n      gap: 4px;\n      \n      .info-item {\n        font-size: 10px;\n        padding: 6px 8px;\n        \n        .emoji {\n          font-size: 12px;\n        }\n        \n        .text {\n          font-size: 10px;\n          \n          div {\n            span {\n              font-size: 10px;\n            }\n          }\n        }\n      }\n    }\n    \n    .info {\n      font-size: 12px;\n      -webkit-line-clamp: 2;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    padding: 12px;\n    height: 45%; /* Еще больше увеличиваем высоту для маленьких экранов */\n    \n    .additional-info {\n      gap: 3px;\n      \n      .info-item {\n        padding: 5px 6px;\n        \n        .emoji {\n          font-size: 11px;\n        }\n        \n        .text {\n          font-size: 9px;\n          \n          div {\n            span {\n              font-size: 9px;\n            }\n          }\n        }\n      }\n    }\n  }\n  \n  /* Десктопная версия */\n  @media (min-width: 1024px) {\n    width: 50%;\n    height: 100%;\n    padding: 30px;\n    overflow-y: auto; /* Сохраняем скролл для десктопа */\n    \n    .status-badge {\n      font-size: 14px;\n      padding: 8px 16px;\n    }\n    \n    .compatibility-badge {\n      font-size: 14px;\n      padding: 16px 20px;\n      \n      .percentage {\n        font-size: 15px;\n      }\n    }\n    \n    .partner-info {\n      font-size: 14px;\n      padding: 12px 16px;\n      \n      .details {\n        font-size: 13px;\n      }\n      \n      &.search-info {\n        .details div {\n          font-size: 12px;\n          \n          /* Стили для списка мест встречи */\n          div div {\n            font-size: 11px;\n          }\n        }\n      }\n      \n      &.location-info {\n        .details div {\n          font-size: 12px;\n          \n          /* Стили для списка мест встречи */\n          div div {\n            font-size: 11px;\n          }\n        }\n      }\n    }\n    \n    .additional-info {\n      grid-template-columns: 1fr 1fr; /* В десктопной версии делаем две колонки */\n      gap: 8px;\n      \n      .info-item {\n        font-size: 13px;\n        padding: 8px 12px;\n        \n        .text {\n          font-size: 11px;\n          line-height: 1.4;\n          \n          /* Стили для вложенных элементов */\n          div {\n            span {\n              font-size: 11px;\n              line-height: 1.3;\n            }\n          }\n        }\n      }\n    }\n    \n    .info {\n      font-size: 15px;\n      -webkit-line-clamp: 4;\n    }\n  }\n"]))),ac=d.Ay.div(To||(To=(0,a.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 25px;\n  padding: 30px 20px 40px;\n  transition: all 0.3s ease;\n  \n  @media (max-width: 768px) {\n    gap: 20px;\n    padding: 25px 15px 35px;\n  }\n  \n  /* Десктопная версия */\n  @media (min-width: 1024px) {\n    gap: 30px;\n    padding: 40px;\n  }\n"]))),sc=(0,d.Ay)($r)(Ro||(Ro=(0,a.A)(["\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);\n    transform: translateX(-100%);\n    transition: transform 0.6s ease;\n  }\n  \n  &:hover::before {\n    transform: translateX(100%);\n  }\n  \n  &.dislike {\n    background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);\n    \n    &:hover:not(:disabled) {\n      background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);\n      transform: scale(1.15) translateY(-5px);\n      box-shadow: 0 15px 40px rgba(245, 101, 101, 0.5);\n    }\n    \n    &:active {\n      transform: scale(0.95);\n    }\n  }\n  \n  &.like {\n    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);\n    \n    &:hover:not(:disabled) {\n      background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);\n      transform: scale(1.15) translateY(-5px);\n      box-shadow: 0 15px 40px rgba(72, 187, 120, 0.5);\n    }\n    \n    &:active {\n      transform: scale(0.95);\n    }\n  }\n  \n  &.superlike {\n    background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);\n    \n    &:hover:not(:disabled) {\n      background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);\n      transform: scale(1.15) translateY(-5px);\n      box-shadow: 0 15px 40px rgba(246, 173, 85, 0.5);\n    }\n    \n    &:active {\n      transform: scale(0.95);\n    }\n  }\n  \n  &.back {\n    background: linear-gradient(135deg, #a0aec0 0%, #718096 100%);\n    \n    &:hover:not(:disabled) {\n      background: linear-gradient(135deg, #718096 0%, #4a5568 100%);\n      transform: scale(1.15) translateY(-5px);\n      box-shadow: 0 15px 40px rgba(160, 174, 192, 0.5);\n    }\n    \n    &:active {\n      transform: scale(0.95);\n    }\n  }\n    \n  @media (max-width: 768px) {\n    width: 60px;\n    height: 60px;\n  }\n  \n  @media (max-width: 480px) {\n    width: 55px;\n    height: 55px;\n  }\n  \n  /* Десктопная версия */\n  @media (min-width: 1024px) {\n    width: 80px;\n    height: 80px;\n  }\n"]))),oc=d.Ay.div(Bo||(Bo=(0,a.A)(["\n  text-align: center;\n  color: #718096;\n  padding: 60px 20px;\n  animation: fadeInUp 0.6s ease-out;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px;\n  \n  .icon {\n    font-size: 72px;\n    margin-bottom: 54px; /* Увеличиваем с 24px до 54px (24 + 30) */\n    opacity: 0.7;\n    animation: bounce 2s ease-in-out infinite;\n    line-height: 1;\n    display: block;\n    text-align: center;\n    width: 100%;\n    transform: translateX(-2px);\n  }\n  \n  h3 {\n    margin: 0 0 16px 0;\n    font-size: 28px;\n    color: #2d3748;\n    font-weight: 700;\n    animation: slideInUp 0.8s ease-out 0.2s both;\n    line-height: 1.2;\n    text-align: center;\n    width: 100%;\n  }\n  \n  p {\n    margin: 0 0 32px 0;\n    font-size: 16px;\n    line-height: 1.6;\n    max-width: 320px;\n    margin-left: auto;\n    margin-right: auto;\n    animation: slideInUp 0.8s ease-out 0.4s both;\n    color: #718096;\n    text-align: center;\n  }\n  \n  @keyframes fadeInUp {\n    from {\n      opacity: 0;\n      transform: translateY(30px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  @keyframes slideInUp {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  @keyframes bounce {\n    0%, 20%, 50%, 80%, 100% {\n      transform: translateY(0) translateX(-2px);\n    }\n    40% {\n      transform: translateY(-10px) translateX(-2px);\n    }\n    60% {\n      transform: translateY(-5px) translateX(-2px);\n    }\n  }\n  \n  @media (max-width: 768px) {\n    padding: 40px 20px;\n    min-height: 300px;\n    \n    .icon {\n      font-size: 56px;\n      margin-bottom: 50px; /* Увеличиваем с 20px до 50px (20 + 30) */\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 24px;\n      margin-bottom: 14px;\n    }\n    \n    p {\n      font-size: 15px;\n      margin-bottom: 28px;\n      max-width: 280px;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    padding: 30px 16px;\n    min-height: 250px;\n    \n    .icon {\n      font-size: 48px;\n      margin-bottom: 48px; /* Увеличиваем с 18px до 48px (18 + 30) */\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 22px;\n      margin-bottom: 12px;\n    }\n    \n    p {\n      font-size: 14px;\n      margin-bottom: 24px;\n      max-width: 260px;\n    }\n  }\n"]))),cc=d.Ay.div(Wo||(Wo=(0,a.A)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 15px 25px;\n  border-radius: 15px;\n  font-size: 14px;\n  text-align: center;\n  pointer-events: none;\n  opacity: ",";\n  transition: all 0.3s ease;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  \n  /* Красивая анимация появления */\n  ","\n  \n  @keyframes hintPulse {\n    0%, 100% {\n      transform: translate(-50%, -50%) scale(1);\n    }\n    50% {\n      transform: translate(-50%, -50%) scale(1.05);\n    }\n  }\n  \n  @media (max-width: 768px) {\n    padding: 12px 20px;\n    font-size: 13px;\n  }\n"])),function(n){return n.$show?1:0},function(n){return n.$show&&"\n    animation: hintPulse 2s ease-in-out infinite;\n  "}),lc=(0,d.Ay)(s.N_)(Fo||(Fo=(0,a.A)(["\n  font-size: 24px;\n  font-weight: 700;\n  margin: 0 0 6px 0;\n  text-shadow: 0 2px 4px rgba(0,0,0,0.3);\n  color: white;\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: block;\n  \n  &:hover {\n    color: #ffd700;\n    text-shadow: 0 2px 8px rgba(255, 215, 0, 0.5);\n    transform: scale(1.02);\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 20px;\n  }\n"])));const dc=function(){var n,e,t,i=(0,r.useState)(null),a=(0,p.A)(i,2),s=a[0],o=a[1],d=(0,r.useState)(!1),x=(0,p.A)(d,2),g=x[0],v=x[1],b=(0,r.useState)(!1),j=(0,p.A)(b,2),y=j[0],w=j[1],A=(0,r.useState)(""),k=(0,p.A)(A,2),N=k[0],S=k[1],C=(0,r.useState)(null),z=(0,p.A)(C,2),_=z[0],E=z[1],P=(0,r.useState)([]),L=(0,p.A)(P,2),O=L[0],D=L[1],$=(0,r.useState)(!1),M=(0,p.A)($,2),I=M[0],U=M[1],T=(0,r.useState)([]),R=(0,p.A)(T,2),B=R[0],W=R[1],F=(0,r.useState)(-1),Q=(0,p.A)(F,2),q=Q[0],H=Q[1],V=(0,r.useState)(0),X=(0,p.A)(V,2),Y=X[0],K=X[1],G=(0,r.useState)(!0),J=(0,p.A)(G,2),Z=J[0],nn=J[1],en=((0,c.useQueryClient)(),f.apiUtils.getCurrentUser()),tn=function(){var n=(0,r.useContext)(Ma);if(!n)throw new Error("useNotifications must be used within a NotificationProvider");return n}().showMatchPopup,rn=function(){try{var n={currentProfile:s,profileQueue:O,profileHistory:B,historyIndex:q,profileShowKey:Y,timestamp:Date.now()};sessionStorage.setItem("home-profiles-state",JSON.stringify(n)),console.log("💾 Состояние анкет сохранено в sessionStorage")}catch(n){console.error("Ошибка сохранения состояния:",n)}},an=function(){try{sessionStorage.removeItem("home-profiles-state"),console.log("🗑️ Состояние анкет очищено из sessionStorage")}catch(n){console.error("Ошибка очистки состояния:",n)}},sn=function(){var n=(0,u.A)(h().mark(function n(){var e,t,r,i,a=arguments;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:10,!I){n.next=1;break}return n.abrupt("return");case 1:return U(!0),n.prev=2,console.log("🔄 === ПРЕДЗАГРУЗКА ПРОФИЛЕЙ ==="),console.log("📊 Запрашиваем профили:",{count:e,currentQueueLength:O.length}),n.next=3,f.swipeAPI.getProfilesBatch(e,[]);case 3:t=n.sent,console.log("📥 === ПРОФИЛИ ПОЛУЧЕНЫ С БЭКЕНДА ==="),console.log("📋 Общее количество полученных профилей:",(null==t?void 0:t.length)||0),t&&t.length>0?(t.forEach(function(n,e){console.log("👤 Профиль ".concat(e+1,":"),{id:n.id,login:n.login,ava:n.ava,status:n.status,city:n.city,distance:n.distance,age:n.age,viptype:n.viptype,isCouple:n.isCouple,height:n.height,weight:n.weight,smoking:n.smoking,alko:n.alko})}),0!==O.length||s?(console.log("📚 Добавляем профили в существующую очередь"),r=O.length,D(function(n){return[].concat((0,pa.A)(n),(0,pa.A)(t))}),console.log("📊 Размер очереди: ".concat(r," → ").concat(r+t.length))):(console.log("🎯 Устанавливаем первый профиль как текущий:",t[0].login),o(t[0]),D(t.slice(1)),console.log("📚 Остальные профили добавлены в очередь:",t.slice(1).map(function(n){return n.login})))):console.warn("⚠️ Получен пустой массив профилей или null"),console.log("✅ === ПРЕДЗАГРУЗКА ЗАВЕРШЕНА ==="),n.next=5;break;case 4:n.prev=4,i=n.catch(2),console.error("❌ Ошибка предзагрузки профилей:",i);case 5:return n.prev=5,U(!1),n.finish(5);case 6:case"end":return n.stop()}},n,null,[[2,4,5,6]])}));return function(){return n.apply(this,arguments)}}(),on=function(){if(console.log("🔄 === ПОЛУЧЕНИЕ СЛЕДУЮЩЕГО ПРОФИЛЯ ==="),console.log("📊 Текущее состояние:",{currentProfile:(null==s?void 0:s.login)||"null",profileQueueLength:O.length,historyLength:B.length,historyIndex:q}),O.length>0){s&&(console.log("📚 Добавляем в историю:",s.login),(e=s)&&(W(function(n){var t=[].concat((0,pa.A)(n),[e]);return t.length>3?t.slice(-3):t}),H(function(n){return Math.min(n+1,2)}),console.log("Добавлен в историю:",e.login,"История:",B.length+1)));var n=O[0];return console.log("👉 Следующий профиль из очереди:",n.login),D(function(n){return n.slice(1)}),o(n),K(function(n){return n+1}),console.log("📊 Обновленное состояние:",{newCurrentProfile:n.login,newQueueLength:O.length-1,newProfileShowKey:Y+1}),O.length<=3&&(console.log("🔄 Запускаем предзагрузку (очередь <= 3)"),sn(10)),console.log("✅ === ПРОФИЛЬ УСПЕШНО ПОЛУЧЕН ==="),n}return console.log("⚠️ Очередь пуста, запускаем предзагрузку"),sn(10),console.log("🔄 Возвращаем текущий профиль для предотвращения дергания:",null==s?void 0:s.login),console.log("✅ === ПРОФИЛЬ ВОЗВРАЩЕН (ДУБЛИРОВАНИЕ) ==="),s;var e},cn=(0,c.useQuery)("initial-profiles",function(){return f.swipeAPI.getProfilesBatch(10,[])},{enabled:!s&&0===O.length,onSuccess:function(n){n&&n.length>0?(o(n[0]),D(n.slice(1)),K(1),sn(10)):o(null),E(null)},onError:function(n){var e;console.error("Error loading initial profiles:",n),"no_profiles"===(null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.error)?o(null):l.Ay.error(f.apiUtils.handleError(n)),E(null)}}),ln=(cn.data,cn.isLoading),dn=cn.refetch,un=(0,c.useMutation)(function(n){var e=n.targetUser,t=n.source;return f.swipeAPI.like(e,t)},{onSuccess:(e=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("reciprocal_like"!==e.result&&!e.match_created){n.next=5;break}if(!s){n.next=4;break}return n.prev=1,n.next=2,f.swipeAPI.checkExistingMatch(s.login);case 2:n.sent.hasMatch?l.Ay.success("Лайк отправлен! ��"):(tn({username:s.login,userData:{avatar:s.ava,login:s.login}}),l.Ay.success("Взаимная симпатия! 💕",{duration:6e3})),n.next=4;break;case 3:n.prev=3,t=n.catch(1),console.error("Error checking existing match:",t),tn({username:s.login,userData:{avatar:s.ava,login:s.login}}),l.Ay.success("Взаимная симпатия! 💕",{duration:6e3});case 4:n.next=6;break;case 5:l.Ay.success("Лайк отправлен! 💖");case 6:E(null),on(),s||o(null);case 7:case"end":return n.stop()}},n,null,[[1,3]])})),function(n){return e.apply(this,arguments)}),onError:function(n){l.Ay.error(f.apiUtils.handleError(n)),E(null)}}),pn=(0,c.useMutation)(function(n){var e=n.targetUser,t=n.source;return f.swipeAPI.dislike(e,t)},{onSuccess:function(){E(null),on()},onError:function(n){l.Ay.error(f.apiUtils.handleError(n)),E(null)}}),xn=(0,c.useMutation)(function(n){var e=n.targetUser,t=n.message;return f.swipeAPI.superlike({targetUser:e,message:t})},{onSuccess:(t=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(w(!1),S(""),!s||"reciprocal_like"!==e.result&&!e.match_created){n.next=5;break}return n.prev=1,n.next=2,f.swipeAPI.checkExistingMatch(s.login);case 2:n.sent.hasMatch?l.Ay.success("Суперлайк отправлен! ⭐"):(tn({username:s.login,userData:{avatar:s.ava,login:s.login}}),l.Ay.success("Взаимная симпатия! 💕",{duration:6e3})),n.next=4;break;case 3:n.prev=3,t=n.catch(1),console.error("Error checking existing match:",t),tn({username:s.login,userData:{avatar:s.ava,login:s.login}}),l.Ay.success("Взаимная симпатия! 💕",{duration:6e3});case 4:n.next=6;break;case 5:l.Ay.success("Суперлайк отправлен! ⭐");case 6:E(null),on();case 7:case"end":return n.stop()}},n,null,[[1,3]])})),function(n){return t.apply(this,arguments)}),onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}});(0,r.useEffect)(function(){!localStorage.getItem("swipe-hint-seen")&&s&&(v(!0),setTimeout(function(){v(!1),localStorage.setItem("swipe-hint-seen","true")},3e3))},[s]),(0,r.useEffect)(function(){s&&0===O.length&&sn(5)},[s]),(0,r.useEffect)(function(){(s||O.length>0||B.length>0)&&rn()},[s,O,B,q,Y]),(0,r.useEffect)(function(){return function(){try{var n=sessionStorage.getItem("home-profiles-state");if(n){var e=JSON.parse(n);if(Date.now()-e.timestamp<18e5)return o(e.currentProfile),D(e.profileQueue||[]),W(e.profileHistory||[]),H(e.historyIndex||-1),K(e.profileShowKey||0),console.log("🔄 Состояние анкет восстановлено из sessionStorage"),!0;console.log("⏰ Сохраненное состояние устарело, очищаем"),sessionStorage.removeItem("home-profiles-state")}}catch(n){console.error("Ошибка восстановления состояния:",n),sessionStorage.removeItem("home-profiles-state")}return nn(!1),!1}()?(console.log("✅ Состояние восстановлено, проверяем необходимость предзагрузки"),O.length<=3&&sn(10),nn(!1)):(console.log("🔄 Состояние не восстановлено, загружаем начальные профили"),nn(!1)),function(){rn()}},[]),(0,r.useEffect)(function(){var n=function(){console.log("🚪 Пользователь вышел, очищаем состояние анкет"),an()},e=function(){console.log("🔑 Пользователь вошел, очищаем состояние анкет"),an()},t=function(){console.log("⚙️ Профиль обновлен, очищаем состояние анкет"),an()},r=function(){console.log("📍 Местоположение изменилось, очищаем состояние анкет"),an()},i=function(){console.log("🔍 Фильтры изменились, очищаем состояние анкет"),an()},a=function(){console.log("💎 Подписка изменилась, очищаем состояние анкет"),an()},s=function(){console.log("🔒 Настройки приватности изменились, очищаем состояние анкет"),an()},o=function(){console.log("🔔 Настройки уведомлений изменились, очищаем состояние анкет"),an()},c=function(){console.log("🌐 Язык изменился, очищаем состояние анкет"),an()},l=function(){console.log("🎨 Тема изменилась, очищаем состояние анкет"),an()},d=function(){console.log("💬 Настройки уведомлений о сообщениях изменились, очищаем состояние анкет"),an()},u=function(){console.log("❤️ Настройки уведомлений о лайках изменились, очищаем состояние анкет"),an()},p=function(){console.log("💕 Настройки уведомлений о мэтчах изменились, очищаем состояние анкет"),an()},x=function(){console.log("👁️ Настройки уведомлений о посещениях изменились, очищаем состояние анкет"),an()},h=function(){console.log("💭 Настройки уведомлений о комментариях изменились, очищаем состояние анкет"),an()},f=function(){console.log("🎁 Настройки уведомлений о подарках изменились, очищаем состояние анкет"),an()},m=function(){console.log("🎉 Настройки уведомлений о событиях изменились, очищаем состояние анкет"),an()},g=function(){console.log("🏢 Настройки уведомлений о клубах изменились, очищаем состояние анкет"),an()},v=function(){console.log("⭐ Настройки уведомлений о рейтингах изменились, очищаем состояние анкет"),an()},b=function(){console.log("🚨 Настройки уведомлений о репортах изменились, очищаем состояние анкет"),an()},j=function(){console.log("🛡️ Настройки уведомлений о модерации изменились, очищаем состояние анкет"),an()},y=function(){console.log("⚙️ Настройки уведомлений о системных событиях изменились, очищаем состояние анкет"),an()};return window.addEventListener("auth-logout",n),window.addEventListener("auth-login",e),window.addEventListener("profile-updated",t),window.addEventListener("location-changed",r),window.addEventListener("filters-changed",i),window.addEventListener("subscription-changed",a),window.addEventListener("privacy-changed",s),window.addEventListener("notifications-changed",o),window.addEventListener("language-changed",c),window.addEventListener("theme-changed",l),window.addEventListener("message-notifications-changed",d),window.addEventListener("like-notifications-changed",u),window.addEventListener("match-notifications-changed",p),window.addEventListener("visit-notifications-changed",x),window.addEventListener("comment-notifications-changed",h),window.addEventListener("gift-notifications-changed",f),window.addEventListener("event-notifications-changed",m),window.addEventListener("club-notifications-changed",g),window.addEventListener("rating-notifications-changed",v),window.addEventListener("report-notifications-changed",b),window.addEventListener("moderation-notifications-changed",j),window.addEventListener("system-notifications-changed",y),function(){window.removeEventListener("auth-logout",n),window.removeEventListener("auth-login",e),window.removeEventListener("profile-updated",t),window.removeEventListener("location-changed",r),window.removeEventListener("filters-changed",i),window.removeEventListener("subscription-changed",a),window.removeEventListener("privacy-changed",s),window.removeEventListener("notifications-changed",o),window.removeEventListener("language-changed",c),window.removeEventListener("theme-changed",l),window.removeEventListener("message-notifications-changed",d),window.removeEventListener("like-notifications-changed",u),window.removeEventListener("match-notifications-changed",p),window.removeEventListener("visit-notifications-changed",x),window.removeEventListener("comment-notifications-changed",h),window.removeEventListener("gift-notifications-changed",f),window.removeEventListener("event-notifications-changed",m),window.removeEventListener("club-notifications-changed",g),window.removeEventListener("rating-notifications-changed",v),window.removeEventListener("report-notifications-changed",b),window.removeEventListener("moderation-notifications-changed",j),window.removeEventListener("system-notifications-changed",y)}},[]);var hn=function(){w(!1),S("")};return ln||Z?(0,m.jsxs)(Yo,{children:[(0,m.jsx)(Ko,{children:(0,m.jsx)(Go,{children:(0,m.jsxs)(Jo,{children:[(0,m.jsx)("h1",{children:"SwingFox"}),(0,m.jsx)("p",{children:Z?"Восстанавливаем состояние...":"Загружаем профили..."})]})})}),(0,m.jsx)(Qr,{})]}):(0,m.jsxs)(Yo,{children:[(0,m.jsx)(Ko,{children:(0,m.jsxs)(Go,{children:[(0,m.jsxs)(Jo,{children:[(0,m.jsx)("h1",{children:"Найдите свою пару"}),(0,m.jsx)("p",{children:"Свайпайте и знакомьтесь с интересными людьми"})]}),(0,m.jsxs)(Zo,{children:[(0,m.jsxs)("div",{className:"user-details",children:[(0,m.jsxs)("p",{className:"username",children:["@",null==en?void 0:en.login]}),(0,m.jsx)("p",{className:"status",children:"Онлайн"})]}),(0,m.jsx)(Ur,{$src:null!=en&&en.ava?"/uploads/".concat(en.ava):"",$size:"50px",$fontSize:"20px",children:!(null!=en&&en.ava)&&(null==en||null===(n=en.login)||void 0===n?void 0:n.charAt(0).toUpperCase())})]})]})}),(0,m.jsxs)(nc,{children:[(0,m.jsx)(cc,{$show:g,children:"Свайпайте влево/вправо или используйте кнопки ниже"}),(0,m.jsx)(fa.N,{mode:"wait",children:s?(0,m.jsxs)(ec,{drag:"x",dragConstraints:{left:0,right:0},onDragEnd:function(n,e){e.offset.x>100?s&&(E("right"),un.mutate({targetUser:s.login,source:"gesture"})):e.offset.x<-100&&s&&(E("left"),pn.mutate({targetUser:s.login,source:"gesture"}))},initial:{scale:0,opacity:0,rotateY:90},animate:{scale:1,opacity:1,rotateY:0,x:"left"===_?-400:"right"===_?400:0,rotate:"left"===_?-20:"right"===_?20:0},exit:{scale:0,opacity:0,rotateY:"left"===_?-90:90,x:"left"===_?-400:400,rotate:"left"===_?-20:20},transition:{duration:_?.1:.2,type:_?"tween":"spring",stiffness:_?void 0:200},whileDrag:{scale:1.02,rotate:2},onLoad:function(){if(console.log("=== ПРОФИЛЬ ЗАГРУЖЕН ==="),console.log("Основные данные:",{login:s.login,date:s.date,age:s.age,distance:s.distance,city:s.city,height:s.height,weight:s.weight,smoking:s.smoking,alko:s.alko,isCouple:s.isCouple,partnerData:s.partnerData}),console.log("Поля поиска:",{searchStatus:s.searchStatus,searchAge:s.searchAge,location:s.location}),s.date&&s.date.includes("_")){var n=getAgeFromDate(s.date);console.log("Возраст из date:",n)}console.log("=== КОНЕЦ ПРОФИЛЯ ===")},children:[(0,m.jsxs)(tc,{$src:s.ava?"/uploads/".concat(s.ava):"",children:[!s.ava&&"👤",(0,m.jsxs)(rc,{children:[(0,m.jsxs)(lc,{to:"/profile/".concat(s.login),children:["@",s.login]}),(0,m.jsxs)("div",{className:"location",children:[(0,m.jsx)(Vo,{}),s.city,", ",s.distance,"км"]}),(0,m.jsx)("div",{className:"age",children:s.age||"Возраст не указан"})]})]}),(0,m.jsx)(ic,{children:(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"status-badge",children:[(0,m.jsx)(Xo,{}),s.status]}),s.compatibility&&(0,m.jsxs)("div",{className:"compatibility-badge",children:[(0,m.jsx)("span",{style:{fontSize:"14px"},children:"💚"}),(0,m.jsx)("span",{children:"Совместимость:"}),(0,m.jsxs)("span",{className:"percentage",children:[Math.round(100*s.compatibility.totalScore),"%"]}),(0,m.jsx)("div",{className:"progress-bar",children:(0,m.jsx)("div",{className:"progress-fill",style:{width:"".concat(Math.round(100*s.compatibility.totalScore),"%")}})})]}),s.searchStatus&&(0,m.jsxs)("div",{className:"partner-info search-info",children:[(0,m.jsx)("div",{className:"title",children:"🔍 Кого ищет"}),(0,m.jsx)("div",{className:"details",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Ищет:"})," ",s.searchStatus]})})]}),s.location&&(0,m.jsxs)("div",{className:"partner-info location-info",children:[(0,m.jsx)("div",{className:"title",children:"📍 Где знакомиться"}),(0,m.jsx)("div",{className:"details",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Предпочитает:"}),(0,m.jsx)("div",{style:{marginTop:"4px",marginLeft:"8px"},children:s.location.split("&&").map(function(n,e){return(0,m.jsxs)("div",{style:{marginBottom:"2px"},children:["• ",n.trim()]},e)})})]})})]}),(0,m.jsx)("div",{className:"info",children:s.info?s.info.length>120?s.info.substring(0,120)+"...":s.info:"Информация не указана"})]})})]},"".concat(s.login,"-").concat(Y)):(0,m.jsxs)(oc,{children:[(0,m.jsx)("div",{className:"icon",children:"🎯"}),(0,m.jsx)("h3",{children:"Профили закончились!"}),(0,m.jsx)("p",{children:"Попробуйте позже или расширьте критерии поиска в настройках"}),(0,m.jsx)(Dr,{onClick:function(){console.log("🔄 Принудительная перезагрузка профилей"),an(),o(null),D([]),W([]),H(-1),K(0),nn(!1),dn()},children:"Обновить"})]})})]}),s&&(0,m.jsxs)(ac,{children:[(0,m.jsx)(sc,{className:"back",onClick:function(){if(q>=0&&B.length>0){s&&D(function(n){return[s].concat((0,pa.A)(n))});var n=B[q];o(n),H(function(n){return n-1}),W(function(n){return n.slice(0,q)}),console.log("Возврат к профилю:",n.login,"Индекс истории:",q-1)}else l.Ay.error("Нет предыдущих профилей"),console.log("Попытка вернуться назад, но история пуста. Индекс:",q,"История:",B.length)},title:"Вернуться к предыдущему профилю",disabled:q<0,children:(0,m.jsx)(Ho,{})}),(0,m.jsx)(sc,{className:"dislike",onClick:function(){s&&(E("left"),pn.mutate({targetUser:s.login,source:"button"}))},title:"Не нравится",disabled:pn.isLoading,children:(0,m.jsx)(Qo,{})}),(0,m.jsx)(sc,{className:"superlike",onClick:function(){s&&w(!0)},title:"Суперлайк с сообщением",disabled:xn.isLoading,children:(0,m.jsx)(qo,{})}),(0,m.jsx)(sc,{className:"like",onClick:function(){s&&(E("right"),un.mutate({targetUser:s.login,source:"button"}))},title:"Нравится",disabled:un.isLoading,children:(0,m.jsx)(ar,{})})]}),y&&(0,m.jsx)(Tr,{onClick:hn,children:(0,m.jsxs)(Rr,{$maxWidth:"500px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"Отправить суперлайк"}),(0,m.jsx)($r,{$variant:"secondary",onClick:hn,children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)("div",{style:{padding:"20px"},children:[(0,m.jsxs)("p",{style:{marginBottom:"20px",color:"#4a5568",lineHeight:"1.5"},children:["Суперлайк поможет выделиться среди других пользователей. Напишите сообщение для ",(0,m.jsxs)("strong",{children:["@",null==s?void 0:s.login]}),":"]}),(0,m.jsx)(Or,{value:N,onChange:function(n){return S(n.target.value)},placeholder:"Привет! Ты мне очень понравился(лась)...",$minHeight:"120px",style:{marginBottom:"20px"},maxLength:500}),(0,m.jsxs)("div",{style:{display:"flex",gap:"15px",justifyContent:"flex-end"},children:[(0,m.jsx)(Dr,{$variant:"secondary",onClick:hn,children:"Отмена"}),(0,m.jsx)(Dr,{onClick:function(){s&&N.trim()&&xn.mutate({targetUser:s.login,message:N.trim()})},disabled:!N.trim()||xn.isLoading,children:xn.isLoading?"Отправляем...":"Отправить суперлайк"})]}),(0,m.jsx)("p",{style:{marginTop:"15px",fontSize:"12px",color:"#718096",textAlign:"center"},children:"У вас осталось суперлайков: ∞"})]})]})})]})};var uc,pc,xc,hc,fc,mc,gc,vc,bc,jc,yc,wc,Ac,kc,Nc,Sc,Cc;function zc(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function _c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?zc(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zc(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var Ec=(0,d.Ay)(jr)(uc||(uc=(0,a.A)(["\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n  min-height: 100vh;\n"]))),Pc=d.Ay.div(pc||(pc=(0,a.A)(["\n  background: white;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border-bottom: 1px solid #e2e8f0;\n  margin-bottom: 30px;\n"]))),Lc=d.Ay.div(xc||(xc=(0,a.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  \n  h1 {\n    margin: 0;\n    font-size: 28px;\n    font-weight: 700;\n    background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    text-align: center;\n  }\n  \n  p {\n    margin: 10px 0 0 0;\n    color: #718096;\n    text-align: center;\n    font-size: 16px;\n  }\n"]))),Oc=d.Ay.div(hc||(hc=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 25px;\n  margin: 0 auto 30px auto;\n  max-width: 800px;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n"]))),Dc=d.Ay.div(fc||(fc=(0,a.A)(["\n  margin-bottom: 20px;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),$c=d.Ay.h3(mc||(mc=(0,a.A)(["\n  margin: 0 0 15px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #2d3748;\n"]))),Mc=d.Ay.div(gc||(gc=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 10px;\n  margin-bottom: 10px;\n"]))),Ic=d.Ay.label(vc||(vc=(0,a.A)(['\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  \n  &:hover {\n    background-color: #f7fafc;\n  }\n  \n  input[type="checkbox"] {\n    accent-color: #dc3522;\n  }\n  \n  span {\n    font-size: 14px;\n    color: #4a5568;\n  }\n']))),Uc=d.Ay.div(bc||(bc=(0,a.A)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 15px;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n"]))),Tc=d.Ay.div(jc||(jc=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  \n  label {\n    font-size: 14px;\n    font-weight: 500;\n    color: #4a5568;\n  }\n  \n  select, input {\n    padding: 12px;\n    border: 1px solid #e2e8f0;\n    border-radius: 8px;\n    font-size: 14px;\n    transition: border-color 0.2s;\n    \n    &:focus {\n      outline: none;\n      border-color: #dc3522;\n      box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n    }\n  }\n"]))),Rc=d.Ay.div(yc||(yc=(0,a.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin-top: 20px;\n"]))),Bc=d.Ay.div(wc||(wc=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n"]))),Wc=(0,d.Ay)(Ir)(Ac||(Ac=(0,a.A)(["\n  padding: 20px;\n  text-align: center;\n  transition: transform 0.2s, box-shadow 0.2s;\n  \n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);\n  }\n"]))),Fc=(0,d.Ay)(Ur)(kc||(kc=(0,a.A)(["\n  margin: 0 auto 15px auto;\n"]))),Qc=d.Ay.div(Nc||(Nc=(0,a.A)(["\n  .status {\n    background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n    color: white;\n    padding: 6px 12px;\n    border-radius: 12px;\n    font-size: 12px;\n    font-weight: 600;\n    margin-bottom: 10px;\n    display: inline-block;\n  }\n  \n  .age {\n    color: #718096;\n    font-size: 14px;\n    margin-bottom: 8px;\n  }\n  \n  .location {\n    color: #4a5568;\n    font-size: 14px;\n    margin-bottom: 15px;\n  }\n  \n  .username {\n    font-weight: 600;\n    color: #dc3522;\n    text-decoration: none;\n    font-size: 16px;\n    \n    &:hover {\n      text-decoration: underline;\n    }\n  }\n"]))),qc=d.Ay.div(Sc||(Sc=(0,a.A)(["\n  text-align: center;\n  padding: 60px 20px;\n  color: #718096;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px; /* Увеличиваем с 300px до 400px как в NoMoreProfiles */\n  \n  .icon {\n    font-size: 72px;\n    margin-bottom: 54px;\n    opacity: 0.7;\n    line-height: 1;\n    display: block;\n    text-align: center;\n    width: 100%;\n    transform: translateX(-2px);\n  }\n  \n  h3 {\n    margin: 0 0 16px 0;\n    font-size: 28px;\n    color: #2d3748;\n    font-weight: 700;\n    line-height: 1.2;\n    text-align: center;\n    width: 100%;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 16px;\n    max-width: 320px;\n    margin-left: auto;\n    margin-right: auto;\n    color: #718096;\n    text-align: center;\n    line-height: 1.6;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 40px 20px;\n    min-height: 300px; /* Увеличиваем с 250px до 300px */\n    \n    .icon {\n      font-size: 56px;\n      margin-bottom: 50px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 24px;\n      margin-bottom: 14px;\n    }\n    \n    p {\n      font-size: 15px;\n      max-width: 280px;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    padding: 30px 16px;\n    min-height: 250px; /* Увеличиваем с 200px до 250px */\n    \n    .icon {\n      font-size: 48px;\n      margin-bottom: 48px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 22px;\n      margin-bottom: 12px;\n    }\n    \n    p {\n      font-size: 14px;\n      max-width: 260px;\n    }\n  }\n"]))),Hc=d.Ay.div(Cc||(Cc=(0,a.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 15px;\n  margin: 30px 0;\n  \n  .page-info {\n    color: #718096;\n    font-size: 14px;\n  }\n"])));const Vc=function(){var n=(0,r.useState)({status:[],country:"",city:"",limit:14,offset:0}),e=(0,p.A)(n,2),t=e[0],i=e[1],a=(0,r.useState)({statuses:[],countries:[],cities:{}}),o=(0,p.A)(a,2),d=o[0],u=o[1],x=((0,c.useQuery)("catalog-filters",f.catalogAPI.getFilters,{onSuccess:function(n){u(n)},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}).data,(0,c.useQuery)(["catalog-profiles",t],function(){return f.catalogAPI.getProfiles(_c({},t))},{onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}})),h=x.data,g=x.isLoading,v=x.refetch,b=function(n){i(function(e){return _c(_c({},e),{},{offset:n})}),window.scrollTo({top:0,behavior:"smooth"})},j=t.country&&d.cities[t.country]?d.cities[t.country]:[];return(0,m.jsxs)(Ec,{children:[(0,m.jsx)(Pc,{children:(0,m.jsxs)(Lc,{children:[(0,m.jsx)("h1",{children:"Каталог анкет"}),(0,m.jsx)("p",{children:"Умная система рекомендаций на основе совместимости"}),(0,m.jsx)("p",{style:{fontSize:"14px",marginTop:"5px",opacity:.8},children:"Показываем всех, но сортируем по вероятности совместимости"})]})}),(0,m.jsxs)(Oc,{children:[(0,m.jsxs)(Dc,{children:[(0,m.jsx)($c,{children:"С кем хотите познакомиться?"}),(0,m.jsx)("p",{style:{fontSize:"14px",color:"#666",marginBottom:"15px",fontStyle:"italic"},children:"Фильтры помогают сузить поиск, но система покажет всех подходящих"}),(0,m.jsx)("p",{style:{fontSize:"12px",color:"#888",marginBottom:"15px",fontStyle:"italic"},children:"Сортировка по совместимости: статус, возраст, география, образ жизни"}),(0,m.jsx)(Mc,{children:d.statuses.map(function(n){return(0,m.jsxs)(Ic,{children:[(0,m.jsx)("input",{type:"checkbox",checked:t.status.includes(n),onChange:function(e){return function(n,e){i(function(t){return _c(_c({},t),{},{status:e?[].concat((0,pa.A)(t.status),[n]):t.status.filter(function(e){return e!==n}),offset:0})})}(n,e.target.checked)}}),(0,m.jsx)("span",{children:n})]},n)})})]}),(0,m.jsxs)(Dc,{children:[(0,m.jsx)($c,{children:"Местоположение"}),(0,m.jsx)("p",{style:{fontSize:"14px",color:"#666",marginBottom:"15px",fontStyle:"italic"},children:"Варианты загружаются из базы географических данных"}),(0,m.jsxs)(Uc,{children:[(0,m.jsxs)(Tc,{children:[(0,m.jsx)("label",{children:"Страна"}),(0,m.jsxs)("select",{value:t.country,onChange:function(n){return e=n.target.value,void i(function(n){return _c(_c({},n),{},{country:e,city:"",offset:0})});var e},children:[(0,m.jsx)("option",{value:"",children:"Все страны"}),d.countries.map(function(n){return(0,m.jsx)("option",{value:n,children:n},n)})]})]}),(0,m.jsxs)(Tc,{children:[(0,m.jsx)("label",{children:"Город"}),(0,m.jsxs)("select",{value:t.city,onChange:function(n){return e=n.target.value,void i(function(n){return _c(_c({},n),{},{city:e,offset:0})});var e},disabled:!t.country,children:[(0,m.jsx)("option",{value:"",children:"Все города"}),j.map(function(n){return(0,m.jsx)("option",{value:n,children:n},n)})]})]})]})]}),(0,m.jsxs)(Rc,{children:[(0,m.jsx)(Dr,{onClick:function(){return v()},children:"Обновить результаты"}),(0,m.jsx)(Dr,{variant:"secondary",onClick:function(){i({status:[],country:"",city:"",limit:14,offset:0})},children:"Очистить фильтры"})]})]}),g?(0,m.jsx)(Qr,{}):(0,m.jsx)(m.Fragment,{children:null!=h&&h.users&&h.users.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Bc,{children:h.users.map(function(n){var e;return(0,m.jsxs)(Wc,{children:[(0,m.jsx)(Fc,{$src:n.ava?"/uploads/".concat(n.ava):"",$size:"80px",$fontSize:"32px",children:!n.ava&&(null===(e=n.login)||void 0===e?void 0:e.charAt(0).toUpperCase())}),(0,m.jsxs)(Qc,{children:[(0,m.jsx)("div",{className:"status",children:n.status}),(0,m.jsx)("div",{className:"age",children:n.age}),n.compatibility&&(0,m.jsxs)("div",{className:"compatibility",style:{background:"linear-gradient(90deg, #4CAF50 ".concat(n.compatibility.percentage,"%, #e0e0e0 ").concat(n.compatibility.percentage,"%)"),color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",textAlign:"center",marginTop:"5px"},children:["Совместимость: ",n.compatibility.percentage,"%"]}),(0,m.jsxs)("div",{className:"location",children:[n.city,", ",n.distance,"км"]}),(0,m.jsxs)("div",{className:"additional-info",style:{fontSize:"11px",marginTop:"5px",color:"#666"},children:[n.height&&(0,m.jsxs)("span",{children:["📏 ",n.height,"см "]}),n.smoking&&(0,m.jsxs)("span",{children:["🚬 ",n.smoking.length>20?n.smoking.substring(0,20)+"...":n.smoking," "]})]}),n.searchStatus&&(0,m.jsxs)("div",{className:"search-info",style:{fontSize:"11px",marginTop:"5px",padding:"5px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"5px",border:"1px solid rgba(34, 197, 94, 0.2)",color:"#166534"},children:[(0,m.jsx)("div",{style:{fontWeight:"bold",marginBottom:"3px"},children:"🔍 Ищет:"}),(0,m.jsx)("div",{children:n.searchStatus}),n.searchAge&&(0,m.jsxs)("div",{style:{fontSize:"10px",marginTop:"3px",opacity:.8},children:["Возраст: ",n.searchAge]}),(0,m.jsx)("div",{style:{fontSize:"10px",marginTop:"3px",opacity:.7,fontStyle:"italic"},children:"✅ Взаимно совместимы"})]}),(0,m.jsxs)(s.N_,{to:"/profile/".concat(n.login),className:"username",children:["@",n.login]})]})]},n.login)})}),h.pagination&&(0,m.jsxs)(Hc,{children:[(0,m.jsx)(Dr,{variant:"secondary",disabled:0===h.pagination.offset,onClick:function(){return b(Math.max(0,h.pagination.offset-h.pagination.limit))},children:"← Назад"}),(0,m.jsxs)("div",{className:"page-info",children:[h.pagination.offset+1," - ",Math.min(h.pagination.offset+h.pagination.limit,h.pagination.total)," из ",h.pagination.total]}),(0,m.jsx)(Dr,{variant:"secondary",disabled:!h.pagination.hasMore,onClick:function(){return b(h.pagination.offset+h.pagination.limit)},children:"Вперед →"})]})]}):(0,m.jsxs)(qc,{children:[(0,m.jsx)("div",{className:"icon",children:"🔍"}),(0,m.jsx)("h3",{children:"Нет результатов"}),(0,m.jsx)("p",{children:"Попробуйте изменить критерии поиска или очистить фильтры"})]})})]})};var Xc,Yc,Kc,Gc,Jc,Zc,nl=d.Ay.div(Xc||(Xc=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 20px;\n  margin: 15px 0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);\n  }\n"]))),el=d.Ay.div(Yc||(Yc=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 15px;\n  \n  .title {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    font-size: 18px;\n    font-weight: 600;\n    color: #2d3748;\n  }\n  \n  .total-rating {\n    display: flex;\n    align-items: center;\n    gap: 5px;\n    font-size: 24px;\n    font-weight: 700;\n    color: #dc3522;\n  }\n"]))),tl=d.Ay.div(Kc||(Kc=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 15px;\n  margin-bottom: 20px;\n  \n  .stat {\n    text-align: center;\n    padding: 10px;\n    background: #f7fafc;\n    border-radius: 10px;\n    \n    .value {\n      font-size: 20px;\n      font-weight: 700;\n      color: #2d3748;\n      margin-bottom: 5px;\n    }\n    \n    .label {\n      font-size: 12px;\n      color: #718096;\n      text-transform: uppercase;\n      font-weight: 600;\n    }\n  }\n"]))),rl=d.Ay.div(Gc||(Gc=(0,a.A)(["\n  display: flex;\n  gap: 10px;\n  justify-content: center;\n  \n  .vote-btn {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 10px 20px;\n    border: none;\n    border-radius: 25px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    \n    &.positive {\n      background: ",";\n      color: ",";\n      border: 2px solid #4caf50;\n      \n      &:hover:not(:disabled) {\n        background: #4caf50;\n        color: white;\n        transform: translateY(-2px);\n      }\n    }\n    \n    &.negative {\n      background: ",";\n      color: ",";\n      border: 2px solid #f44336;\n      \n      &:hover:not(:disabled) {\n        background: #f44336;\n        color: white;\n        transform: translateY(-2px);\n      }\n    }\n    \n    &:disabled {\n      opacity: 0.6;\n      cursor: not-allowed;\n      transform: none;\n    }\n  }\n"])),function(n){return 1===n.$userVote?"#4caf50":"linear-gradient(135deg, #e8f5e8 0%, #f0f9f0 100%)"},function(n){return 1===n.$userVote?"white":"#4caf50"},function(n){return-1===n.$userVote?"#f44336":"linear-gradient(135deg, #fdeaea 0%, #fef2f2 100%)"},function(n){return-1===n.$userVote?"white":"#f44336"}),il=d.Ay.div(Jc||(Jc=(0,a.A)(["\n  width: 100%;\n  height: 8px;\n  background: #e2e8f0;\n  border-radius: 4px;\n  overflow: hidden;\n  margin: 10px 0;\n  \n  .fill {\n    height: 100%;\n    background: linear-gradient(90deg, #f44336 0%, #ff9800 50%, #4caf50 100%);\n    border-radius: 4px;\n    transition: width 0.3s ease;\n    width: ","%;\n  }\n"])),function(n){return n.$percentage}),al=d.Ay.div(Zc||(Zc=(0,a.A)(["\n  text-align: center;\n  padding: 15px;\n  background: #f7fafc;\n  border-radius: 10px;\n  color: #718096;\n  font-style: italic;\n"])));const sl=function(n){var e=n.targetUser,t=n.rating,i=n.userVote,a=n.canVote,s=(0,r.useState)(!1),o=(0,p.A)(s,2),d=o[0],u=o[1],x=(0,c.useQueryClient)(),h=(0,c.useMutation)(function(n){return f.ratingAPI.rateUser(e,n)},{onMutate:function(){u(!0)},onSuccess:function(n){l.Ay.success(n.message||"Оценка отправлена"),x.invalidateQueries(["profile",e]),x.invalidateQueries(["leaderboard"]),x.invalidateQueries(["my-rating-stats"])},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при оценке")},onSettled:function(){u(!1)}}),g=(0,c.useMutation)(function(){return f.ratingAPI.deleteRating(e)},{onSuccess:function(){l.Ay.success("Оценка удалена"),x.invalidateQueries(["profile",e]),x.invalidateQueries(["leaderboard"]),x.invalidateQueries(["my-rating-stats"])},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при удалении оценки")}}),v=function(n){i===n?g.mutate():h.mutate(n)};if(!t)return null;var b=t.total_rating,j=void 0===b?0:b,y=t.total_votes,w=void 0===y?0:y,A=t.positive_votes,k=void 0===A?0:A,N=t.negative_votes,S=void 0===N?0:N,C=t.percentage_positive,z=void 0===C?0:C;return(0,m.jsxs)(nl,{children:[(0,m.jsxs)(el,{children:[(0,m.jsxs)("div",{className:"title",children:[(0,m.jsx)(hr,{}),"Рейтинг пользователя"]}),(0,m.jsxs)("div",{className:"total-rating",children:[(0,m.jsx)(hr,{}),j]})]}),(0,m.jsxs)(tl,{children:[(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("div",{className:"value",children:w}),(0,m.jsx)("div",{className:"label",children:"Всего оценок"})]}),(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("div",{className:"value",children:k}),(0,m.jsx)("div",{className:"label",children:"Положительных"})]}),(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsx)("div",{className:"value",children:S}),(0,m.jsx)("div",{className:"label",children:"Отрицательных"})]}),(0,m.jsxs)("div",{className:"stat",children:[(0,m.jsxs)("div",{className:"value",children:[z,"%"]}),(0,m.jsx)("div",{className:"label",children:"Позитивность"})]})]}),w>0&&(0,m.jsx)(il,{$percentage:z,children:(0,m.jsx)("div",{className:"fill"})}),a?(0,m.jsxs)(rl,{$userVote:i,children:[(0,m.jsxs)(ha.P.button,{className:"vote-btn positive",onClick:function(){return v(1)},disabled:d,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,m.jsx)(qr,{}),1===i?"Убрать лайк":"Нравится"]}),(0,m.jsxs)(ha.P.button,{className:"vote-btn negative",onClick:function(){return v(-1)},disabled:d,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,m.jsx)(Hr,{}),-1===i?"Убрать дизлайк":"Не нравится"]})]}):(0,m.jsx)(al,{children:"self"===e?"Нельзя оценивать собственный профиль":"Войдите в систему, чтобы оценить пользователя"})]})};var ol,cl,ll,dl,ul,pl,xl,hl,fl=t(2284),ml=d.Ay.div(ol||(ol=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 20px;\n  margin: 15px 0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n"]))),gl=d.Ay.div(cl||(cl=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  \n  .title {\n    font-size: 18px;\n    font-weight: 600;\n    color: #2d3748;\n  }\n  \n  .count {\n    background: #dc3522;\n    color: white;\n    padding: 4px 12px;\n    border-radius: 20px;\n    font-size: 12px;\n    font-weight: 600;\n  }\n"]))),vl=(0,d.Ay)(Cr)(ll||(ll=(0,a.A)(["\n  margin-bottom: 20px;\n  \n  .form-row {\n    display: flex;\n    gap: 10px;\n    align-items: flex-end;\n  }\n  \n  .comment-input {\n    flex: 1;\n  }\n"]))),bl=d.Ay.div(dl||(dl=(0,a.A)(["\n  max-height: 400px;\n  overflow-y: auto;\n"]))),jl=(0,d.Ay)(ha.P.div)(ul||(ul=(0,a.A)(["\n  display: flex;\n  gap: 12px;\n  padding: 15px;\n  border-radius: 12px;\n  background: #f7fafc;\n  margin-bottom: 10px;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    background: #edf2f7;\n  }\n  \n  .comment-avatar {\n    flex-shrink: 0;\n  }\n  \n  .comment-content {\n    flex: 1;\n    min-width: 0;\n  }\n  \n  .comment-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 5px;\n  }\n  \n  .comment-author {\n    font-weight: 600;\n    color: #2d3748;\n    font-size: 14px;\n  }\n  \n  .comment-time {\n    font-size: 12px;\n    color: #718096;\n  }\n  \n  .comment-text {\n    color: #4a5568;\n    font-size: 14px;\n    line-height: 1.4;\n    margin-bottom: 8px;\n  }\n  \n  .comment-actions {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n  \n  .edit-indicator {\n    font-size: 11px;\n    color: #718096;\n    font-style: italic;\n  }\n"]))),yl=d.Ay.div(pl||(pl=(0,a.A)(["\n  margin-top: 10px;\n  \n  .edit-row {\n    display: flex;\n    gap: 8px;\n    align-items: flex-end;\n  }\n  \n  .edit-input {\n    flex: 1;\n  }\n"]))),wl=d.Ay.div(xl||(xl=(0,a.A)(["\n  text-align: center;\n  padding: 40px 20px;\n  color: #718096;\n  \n  .icon {\n    font-size: 48px;\n    margin-bottom: 15px;\n    opacity: 0.5;\n  }\n  \n  h3 {\n    margin: 0 0 8px 0;\n    font-size: 16px;\n    color: #2d3748;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 14px;\n  }\n"]))),Al=(0,d.Ay)(Dr)(hl||(hl=(0,a.A)(["\n  width: 100%;\n  margin-top: 15px;\n"])));const kl=function(n){var e,t=n.filename,i=n.currentUser;if(!t)return(0,m.jsx)(ml,{children:(0,m.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#718096"},children:"Ошибка: не указано имя файла для комментариев"})});var a=(0,r.useState)(""),s=(0,p.A)(a,2),o=s[0],d=s[1],x=(0,r.useState)(null),g=(0,p.A)(x,2),v=g[0],b=g[1],j=(0,r.useState)(""),y=(0,p.A)(j,2),w=y[0],A=y[1],k=(0,r.useState)(1),N=(0,p.A)(k,2),S=N[0],C=N[1],z=(0,c.useQueryClient)(),_=(0,c.useQuery)(["photo-comments",t,S],function(){return f.usersAPI.getPhotoComments(t,S,10)},{keepPreviousData:!0,enabled:!!t,onError:function(n){l.Ay.error("Ошибка при загрузке комментариев")}}),E=_.data,P=_.isLoading,L=(_.error,(0,c.useMutation)(function(){var n=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Mutation function called with data:",e),console.log("Data types:",{filename:(0,fl.A)(e.filename),commentText:(0,fl.A)(e.commentText)}),"string"==typeof e.filename){n.next=1;break}throw new Error("Filename must be string, got ".concat((0,fl.A)(e.filename),": ").concat(e.filename));case 1:return n.next=2,f.usersAPI.createPhotoComment(e.filename,e.commentText);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),{onSuccess:function(){l.Ay.success("Комментарий добавлен"),d(""),z.invalidateQueries(["photo-comments",t]),C(1)},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при добавлении комментария")}})),O=(0,c.useMutation)(function(n){return f.usersAPI.updatePhotoComment(n.commentId,n.commentText)},{onSuccess:function(){l.Ay.success("Комментарий обновлен"),b(null),A(""),z.invalidateQueries(["photo-comments",t])},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при обновлении комментария")}}),D=(0,c.useMutation)(function(n){return f.usersAPI.deletePhotoComment(n.commentId)},{onSuccess:function(){l.Ay.success("Комментарий удален"),z.invalidateQueries(["photo-comments",t])},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при удалении комментария")}}),$=function(){w.trim()?O.mutate({commentId:v,commentText:w.trim()}):l.Ay.error("Введите текст комментария")},M=function(n){var e;return i&&(null===(e=n.user)||void 0===e?void 0:e.login)===i},I=function(n){var e;return i&&(null===(e=n.user)||void 0===e?void 0:e.login)===i};if(P&&1===S)return(0,m.jsx)(ml,{children:(0,m.jsx)(Qr,{})});var U=(null==E?void 0:E.comments)||[],T=(null==E||null===(e=E.pagination)||void 0===e?void 0:e.total)||(null==E?void 0:E.total)||0,R=U.length<T;return(0,m.jsxs)(ml,{children:[(0,m.jsxs)(gl,{children:[(0,m.jsx)("div",{className:"title",children:"Комментарии"}),(0,m.jsx)("div",{className:"count",children:T})]}),i&&(0,m.jsxs)(vl,{onSubmit:function(n){if(n.preventDefault(),console.log("Submitting comment:",{commentText:o,trimmed:o.trim(),length:o.length,trimmedLength:o.trim().length}),o&&0!==o.trim().length){var e={filename:t,commentText:o.trim()};if(console.log("Calling createCommentMutation with:",e),console.log("CommentData types:",{filename:(0,fl.A)(e.filename),commentText:(0,fl.A)(e.commentText)}),console.log("Filename value:",e.filename),"string"!=typeof e.filename)return console.error("Filename is not a string in commentData:",e.filename),void l.Ay.error("Ошибка: неправильный формат имени файла");L.mutate(e)}else l.Ay.error("Введите текст комментария")},children:[(0,m.jsxs)(zr,{className:"comment-input",children:[(0,m.jsx)(_r,{children:"Добавить комментарий"}),(0,m.jsx)(Or,{placeholder:"Напишите ваш комментарий...",value:o,onChange:function(n){return d(n.target.value)},$minHeight:"80px",maxLength:1e3})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#718096"},children:[o.length,"/1000 символов"]}),(0,m.jsxs)(Dr,{type:"submit",disabled:L.isLoading||!o.trim(),$size:"small",children:[(0,m.jsx)(ir,{}),L.isLoading?"Отправка...":"Отправить"]})]})]}),(0,m.jsx)(bl,{children:U.length>0?(0,m.jsx)(fa.N,{children:U.map(function(n){var e,t,r,i,a,s,o;return(0,m.jsxs)(jl,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[(0,m.jsx)("div",{className:"comment-avatar",children:(0,m.jsx)(Ur,{src:null!==(e=n.user)&&void 0!==e&&e.avatar?"/uploads/".concat(n.user.avatar):null,alt:(null===(t=n.user)||void 0===t?void 0:t.name)||(null===(r=n.user)||void 0===r?void 0:r.login),size:"40px"})}),(0,m.jsxs)("div",{className:"comment-content",children:[(0,m.jsxs)("div",{className:"comment-header",children:[(0,m.jsx)("span",{className:"comment-author",children:(null===(i=n.user)||void 0===i?void 0:i.name)||(null===(a=n.user)||void 0===a?void 0:a.login)}),(0,m.jsx)("span",{className:"comment-time",children:(null===(s=f.usersAPI.utils)||void 0===s||null===(o=s.formatTimeAgo)||void 0===o?void 0:o.call(s,n.created_at))||new Date(n.created_at).toLocaleDateString()}),n.is_edited&&(0,m.jsx)("span",{className:"edit-indicator",children:"(отредактировано)"})]}),v===n.id?(0,m.jsxs)(yl,{children:[(0,m.jsx)(Or,{value:w,onChange:function(n){return A(n.target.value)},$minHeight:"60px",maxLength:1e3}),(0,m.jsxs)("div",{className:"edit-row",children:[(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#718096"},children:[w.length,"/1000 символов"]}),(0,m.jsx)(Dr,{onClick:$,disabled:O.isLoading||!w.trim(),$size:"small",children:"Сохранить"}),(0,m.jsx)(Dr,{onClick:function(){return b(null)},$variant:"secondary",$size:"small",children:"Отмена"})]})]}):(0,m.jsx)("div",{className:"comment-text",children:n.text}),(0,m.jsxs)("div",{className:"comment-actions",children:[M(n)&&v!==n.id&&(0,m.jsx)($r,{onClick:function(){return function(n){b(n.id),A(n.text)}(n)},$size:"small",$variant:"secondary",children:(0,m.jsx)(lr,{})}),I(n)&&(0,m.jsx)($r,{onClick:function(){return e=n.id,void(window.confirm("Вы уверены, что хотите удалить этот комментарий?")&&D.mutate(e));var e},$size:"small",$variant:"danger",children:(0,m.jsx)(pr,{})})]})]})]},n.id)})}):(0,m.jsxs)(wl,{children:[(0,m.jsx)("div",{className:"icon",children:"💬"}),(0,m.jsx)("h3",{children:"Нет комментариев"}),(0,m.jsx)("p",{children:"Будьте первым, кто оставит комментарий к этой фотографии"})]})}),R&&(0,m.jsx)(Al,{onClick:function(){C(function(n){return n+1})},disabled:P,$variant:"secondary",children:P?"Загрузка...":"Загрузить еще"})]})};var Nl,Sl,Cl,zl,_l,El,Pl,Ll,Ol=d.Ay.div(Nl||(Nl=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 20px;\n  margin: 15px 0;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n"]))),Dl=d.Ay.div(Sl||(Sl=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  \n  .title {\n    font-size: 18px;\n    font-weight: 600;\n    color: #2d3748;\n  }\n  \n  .count {\n    background: #dc3522;\n    color: white;\n    padding: 4px 12px;\n    border-radius: 20px;\n    font-size: 12px;\n    font-weight: 600;\n  }\n"]))),$l=(0,d.Ay)(Cr)(Cl||(Cl=(0,a.A)(['\n  margin-bottom: 20px;\n  \n  .form-row {\n    display: flex;\n    gap: 10px;\n    align-items: flex-end;\n  }\n  \n  .comment-input {\n    flex: 1;\n  }\n  \n  .form-options {\n    display: flex;\n    gap: 15px;\n    align-items: center;\n    margin-top: 10px;\n  }\n  \n  .privacy-toggle {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    cursor: pointer;\n    \n    input[type="checkbox"] {\n      margin: 0;\n    }\n    \n    .toggle-label {\n      font-size: 14px;\n      color: #4a5568;\n    }\n  }\n']))),Ml=d.Ay.div(zl||(zl=(0,a.A)(["\n  max-height: 400px;\n  overflow-y: auto;\n"]))),Il=(0,d.Ay)(ha.P.div)(_l||(_l=(0,a.A)(["\n  display: flex;\n  gap: 12px;\n  padding: 15px;\n  border-radius: 12px;\n  background: #f7fafc;\n  margin-bottom: 10px;\n  transition: all 0.2s ease;\n  border-left: 4px solid ",";\n  \n  &:hover {\n    background: #edf2f7;\n  }\n  \n  .comment-avatar {\n    flex-shrink: 0;\n  }\n  \n  .comment-content {\n    flex: 1;\n    min-width: 0;\n  }\n  \n  .comment-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 5px;\n  }\n  \n  .comment-author {\n    font-weight: 600;\n    color: #2d3748;\n    font-size: 14px;\n  }\n  \n  .comment-time {\n    font-size: 12px;\n    color: #718096;\n  }\n  \n  .comment-text {\n    color: #4a5568;\n    font-size: 14px;\n    line-height: 1.4;\n    margin-bottom: 8px;\n  }\n  \n  .comment-actions {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n  }\n  \n  .edit-indicator {\n    font-size: 11px;\n    color: #718096;\n    font-style: italic;\n  }\n  \n  .privacy-badge {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 11px;\n    padding: 2px 6px;\n    border-radius: 10px;\n    background: ",";\n    color: ",";\n  }\n"])),function(n){return n.$isPublic?"#38a169":"#805ad5"},function(n){return n.$isPublic?"#c6f6d5":"#e9d8fd"},function(n){return n.$isPublic?"#22543d":"#553c9a"}),Ul=d.Ay.div(El||(El=(0,a.A)(["\n  margin-top: 10px;\n  \n  .edit-row {\n    display: flex;\n    gap: 8px;\n    align-items: flex-end;\n  }\n  \n  .edit-input {\n    flex: 1;\n  }\n"]))),Tl=d.Ay.div(Pl||(Pl=(0,a.A)(["\n  text-align: center;\n  padding: 40px 20px;\n  color: #718096;\n  \n  .icon {\n    font-size: 48px;\n    margin-bottom: 15px;\n    opacity: 0.5;\n  }\n  \n  h3 {\n    margin: 0 0 8px 0;\n    font-size: 16px;\n    color: #2d3748;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 14px;\n  }\n"]))),Rl=(0,d.Ay)(Dr)(Ll||(Ll=(0,a.A)(["\n  width: 100%;\n  margin-top: 15px;\n"])));const Bl=function(n){var e,t=n.username,i=n.currentUser,a=n.isOwnProfile,s=void 0!==a&&a;if(!t)return(0,m.jsx)(Ol,{children:(0,m.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"#718096"},children:"Ошибка: не указан пользователь для комментариев"})});var o=(0,r.useState)(""),d=(0,p.A)(o,2),x=d[0],g=d[1],v=(0,r.useState)(!0),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)(null),A=(0,p.A)(w,2),k=A[0],N=A[1],S=(0,r.useState)(""),C=(0,p.A)(S,2),z=C[0],_=C[1],E=(0,r.useState)(1),P=(0,p.A)(E,2),L=P[0],O=P[1],D=(0,r.useState)(!1),$=(0,p.A)(D,2),M=$[0],I=$[1],U=(0,c.useQueryClient)(),T=(0,c.useQuery)(["profile-comments",t,L,M],function(){return f.usersAPI.getProfileComments(t,L,10,M)},{keepPreviousData:!0,enabled:!!t,onError:function(n){l.Ay.error("Ошибка при загрузке комментариев")}}),R=T.data,B=T.isLoading,W=(T.error,(0,c.useMutation)(function(){var n=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("Mutation function called with data:",e),console.log("Data types:",{username:(0,fl.A)(e.username),commentText:(0,fl.A)(e.commentText),isPublic:(0,fl.A)(e.isPublic)}),"string"==typeof e.username){n.next=1;break}throw new Error("Username must be string, got ".concat((0,fl.A)(e.username),": ").concat(e.username));case 1:return n.next=2,f.usersAPI.createProfileComment(e.username,e.commentText,e.isPublic);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),{onSuccess:function(){l.Ay.success("Комментарий добавлен"),g(""),U.invalidateQueries(["profile-comments",t]),O(1)},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при добавлении комментария")}})),F=(0,c.useMutation)(function(n){return f.usersAPI.updateProfileComment(n.commentId,n.commentText)},{onSuccess:function(){l.Ay.success("Комментарий обновлен"),N(null),_(""),U.invalidateQueries(["profile-comments",t])},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при обновлении комментария")}}),Q=(0,c.useMutation)(function(n){return f.usersAPI.deleteProfileComment(n.commentId)},{onSuccess:function(){l.Ay.success("Комментарий удален"),U.invalidateQueries(["profile-comments",t])},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при удалении комментария")}}),q=function(){z.trim()?F.mutate({commentId:k,commentText:z.trim()}):l.Ay.error("Введите текст комментария")},H=function(n){var e;return i&&(null===(e=n.author)||void 0===e?void 0:e.login)===i},V=function(n){var e;return i&&((null===(e=n.author)||void 0===e?void 0:e.login)===i||t===i)};if(B&&1===L)return(0,m.jsx)(Ol,{children:(0,m.jsx)(Qr,{})});var X=(null==R?void 0:R.comments)||[],Y=(null==R||null===(e=R.pagination)||void 0===e?void 0:e.total)||(null==R?void 0:R.total)||0,K=X.length<Y;return(0,m.jsxs)(Ol,{children:[(0,m.jsxs)(Dl,{children:[(0,m.jsx)("div",{className:"title",children:"Комментарии к профилю"}),(0,m.jsx)("div",{className:"count",children:Y})]}),i&&!s&&(0,m.jsxs)($l,{onSubmit:function(n){if(n.preventDefault(),console.log("Submitting profile comment:",{commentText:x,trimmed:x.trim(),length:x.length,trimmedLength:x.trim().length,username:t,isPublic:j}),x&&0!==x.trim().length){var e={username:t,commentText:x.trim(),isPublic:j};if(console.log("Calling createProfileCommentMutation with:",e),console.log("CommentData types:",{username:(0,fl.A)(e.username),commentText:(0,fl.A)(e.commentText),isPublic:(0,fl.A)(e.isPublic)}),console.log("Username value:",e.username),"string"!=typeof e.username)return console.error("Username is not a string in commentData:",e.username),void l.Ay.error("Ошибка: неправильный формат имени пользователя");W.mutate(e)}else l.Ay.error("Введите текст комментария")},children:[(0,m.jsxs)(zr,{className:"comment-input",children:[(0,m.jsx)(_r,{children:"Добавить комментарий"}),(0,m.jsx)(Or,{placeholder:"Напишите ваш комментарий к профилю...",value:x,onChange:function(n){return g(n.target.value)},$minHeight:"80px",maxLength:1e3})]}),(0,m.jsxs)("div",{className:"form-options",children:[(0,m.jsxs)("div",{className:"privacy-toggle",children:[(0,m.jsx)("input",{type:"checkbox",id:"comment-privacy",checked:j,onChange:function(n){return y(n.target.checked)}}),(0,m.jsx)("label",{htmlFor:"comment-privacy",className:"toggle-label",children:j?"Публичный комментарий":"Приватный комментарий"})]}),(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#718096"},children:[x.length,"/1000 символов"]})]}),(0,m.jsx)("div",{className:"form-row",children:(0,m.jsxs)(Dr,{type:"submit",disabled:W.isLoading||!x.trim(),$size:"small",children:[(0,m.jsx)(ir,{}),W.isLoading?"Отправка...":"Отправить"]})})]}),s&&(0,m.jsx)("div",{style:{marginBottom:"15px"},children:(0,m.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[(0,m.jsx)("input",{type:"checkbox",checked:M,onChange:function(n){return I(n.target.checked)}}),(0,m.jsx)("span",{style:{fontSize:"14px",color:"#4a5568"},children:"Показать приватные комментарии"})]})}),(0,m.jsx)(Ml,{children:X.length>0?(0,m.jsx)(fa.N,{children:X.map(function(n){var e,t,r,i,a,s,o;return(0,m.jsxs)(Il,{$isPublic:n.is_public,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:[(0,m.jsx)("div",{className:"comment-avatar",children:(0,m.jsx)(Ur,{src:null!==(e=n.author)&&void 0!==e&&e.avatar?"/uploads/".concat(n.author.avatar):null,alt:(null===(t=n.author)||void 0===t?void 0:t.name)||(null===(r=n.author)||void 0===r?void 0:r.login),size:"40px"})}),(0,m.jsxs)("div",{className:"comment-content",children:[(0,m.jsxs)("div",{className:"comment-header",children:[(0,m.jsx)("span",{className:"comment-author",children:(null===(i=n.author)||void 0===i?void 0:i.name)||(null===(a=n.author)||void 0===a?void 0:a.login)}),(0,m.jsx)("span",{className:"comment-time",children:(null===(s=f.usersAPI.utils)||void 0===s||null===(o=s.formatTimeAgo)||void 0===o?void 0:o.call(s,n.created_at))||new Date(n.created_at).toLocaleDateString()}),n.is_edited&&(0,m.jsx)("span",{className:"edit-indicator",children:"(отредактировано)"}),(0,m.jsx)("div",{className:"privacy-badge",children:n.is_public?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(er,{}),"Публичный"]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Vr,{}),"Приватный"]})})]}),k===n.id?(0,m.jsxs)(Ul,{children:[(0,m.jsx)(Or,{value:z,onChange:function(n){return _(n.target.value)},$minHeight:"60px",maxLength:1e3}),(0,m.jsxs)("div",{className:"edit-row",children:[(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#718096"},children:[z.length,"/1000 символов"]}),(0,m.jsx)(Dr,{onClick:q,disabled:F.isLoading||!z.trim(),$size:"small",children:"Сохранить"}),(0,m.jsx)(Dr,{onClick:function(){return N(null)},$variant:"secondary",$size:"small",children:"Отмена"})]})]}):(0,m.jsx)("div",{className:"comment-text",children:n.text}),(0,m.jsxs)("div",{className:"comment-actions",children:[H(n)&&k!==n.id&&(0,m.jsx)($r,{onClick:function(){return function(n){N(n.id),_(n.text)}(n)},$size:"small",$variant:"secondary",children:(0,m.jsx)(lr,{})}),V(n)&&(0,m.jsx)($r,{onClick:function(){return e=n.id,void(window.confirm("Вы уверены, что хотите удалить этот комментарий?")&&Q.mutate(e));var e},$size:"small",$variant:"danger",children:(0,m.jsx)(pr,{})})]})]})]},n.id)})}):(0,m.jsxs)(Tl,{children:[(0,m.jsx)("div",{className:"icon",children:"💬"}),(0,m.jsx)("h3",{children:"Нет комментариев"}),(0,m.jsx)("p",{children:"Будьте первым, кто оставит комментарий к этому профилю"})]})}),K&&(0,m.jsx)(Rl,{onClick:function(){O(function(n){return n+1})},disabled:B,$variant:"secondary",children:B?"Загрузка...":"Загрузить еще"})]})};var Wl,Fl,Ql,ql,Hl,Vl,Xl,Yl,Kl,Gl=d.Ay.div(Wl||(Wl=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),Jl=d.Ay.div(Fl||(Fl=(0,a.A)(["\n  display: flex;\n  gap: 8px;\n  align-items: center;\n"]))),Zl=(0,d.Ay)(ha.P.button)(Ql||(Ql=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 12px;\n  border: 2px solid ",";\n  border-radius: 20px;\n  background: ",";\n  color: ",";\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n  \n  .emoji {\n    font-size: 16px;\n  }\n  \n  .count {\n    font-size: 12px;\n    opacity: 0.9;\n  }\n"])),function(n){return n.$isActive?n.$activeColor:"#e2e8f0"},function(n){return n.$isActive?n.$activeColor:"white"},function(n){return n.$isActive?"white":n.$textColor}),nd=d.Ay.div(ql||(ql=(0,a.A)(["\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  align-items: center;\n  \n  .stat-item {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    font-size: 12px;\n    color: #718096;\n    padding: 4px 8px;\n    background: #f7fafc;\n    border-radius: 12px;\n    \n    .emoji {\n      font-size: 14px;\n    }\n  }\n"]))),ed=(0,d.Ay)(ha.P.div)(Hl||(Hl=(0,a.A)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n"]))),td=d.Ay.div(Vl||(Vl=(0,a.A)(["\n  background: white;\n  border-radius: 20px;\n  padding: 30px;\n  max-width: 400px;\n  width: 90%;\n  text-align: center;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n"]))),rd=d.Ay.div(Xl||(Xl=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 15px;\n  margin: 20px 0;\n"]))),id=(0,d.Ay)(ha.P.button)(Yl||(Yl=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 8px;\n  padding: 20px 15px;\n  border: 2px solid #e2e8f0;\n  border-radius: 15px;\n  background: white;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    border-color: ",";\n    transform: translateY(-3px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n  }\n  \n  .emoji {\n    font-size: 32px;\n  }\n  \n  .label {\n    font-size: 12px;\n    font-weight: 600;\n    color: #4a5568;\n  }\n"])),function(n){return n.$color}),ad=d.Ay.button(Kl||(Kl=(0,a.A)(["\n  position: absolute;\n  top: 15px;\n  right: 20px;\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n  color: #718096;\n  \n  &:hover {\n    color: #2d3748;\n  }\n"]))),sd={like:{emoji:"👍",label:"Нравится",color:"#4caf50",textColor:"#4caf50"},love:{emoji:"❤️",label:"Любовь",color:"#e91e63",textColor:"#e91e63"},laugh:{emoji:"😂",label:"Смех",color:"#ff9800",textColor:"#ff9800"},wow:{emoji:"😮",label:"Удивление",color:"#9c27b0",textColor:"#9c27b0"},sad:{emoji:"😢",label:"Грусть",color:"#2196f3",textColor:"#2196f3"},angry:{emoji:"😠",label:"Гнев",color:"#f44336",textColor:"#f44336"}};const od=function(n){var e,t,i,a=n.objectType,s=n.objectId,o=n.currentUser,d=n.showStats,u=void 0===d||d;if(!a||!s)return(0,m.jsx)(Gl,{children:(0,m.jsx)("div",{style:{textAlign:"center",padding:"10px",color:"#718096",fontSize:"14px"},children:"Ошибка: не указаны параметры для реакций"})});var x=(0,r.useState)(!1),h=(0,p.A)(x,2),g=h[0],v=h[1],b=(0,r.useState)(null),j=(0,p.A)(b,2),y=(j[0],j[1],(0,c.useQueryClient)()),w=(0,c.useQuery)(["reactions",a,s],function(){return f.reactionsAPI.getObjectReactions(a,s)},{enabled:!(!a||!s),onError:function(n){console.error("Error fetching reactions:",n)}}),A=w.data,k=w.isLoading,N=(0,c.useMutation)(function(n){return f.reactionsAPI.setReaction(a,s,n.reactionType,n.value)},{onSuccess:function(){y.invalidateQueries(["reactions",a,s]),l.Ay.success("Реакция добавлена")},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при установке реакции")}}),S=(0,c.useMutation)(function(){return f.reactionsAPI.removeReaction(a,s)},{onSuccess:function(){y.invalidateQueries(["reactions",a,s]),l.Ay.success("Реакция удалена")},onError:function(n){var e;l.Ay.error((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Ошибка при удалении реакции")}}),C=function(n){if(o){var e=null==A?void 0:A.user_reaction;e&&e.type===n?S.mutate():N.mutate({reactionType:n,value:1}),v(!1)}else l.Ay.error("Войдите в систему, чтобы оставить реакцию")},z=function(){v(!1)};if(k)return(0,m.jsx)(Gl,{children:"Загрузка реакций..."});var _=(null==A?void 0:A.reactions)||{},E=null==A?void 0:A.user_reaction,P=_.total||0,L=Object.entries(_).filter(function(n){var e=(0,p.A)(n,2),t=e[0],r=e[1];return"total"!==t&&"users"!==t&&r>0}).sort(function(n,e){var t=(0,p.A)(n,2)[1];return(0,p.A)(e,2)[1]-t}).slice(0,3);return(0,m.jsxs)(Gl,{children:[(0,m.jsxs)(Jl,{children:[(0,m.jsxs)(Zl,{onClick:function(){o?v(!0):l.Ay.error("Войдите в систему, чтобы оставить реакцию")},$isActive:!!E,$activeColor:E?null===(e=sd[E.type])||void 0===e?void 0:e.color:"#e2e8f0",$textColor:E?"white":"#4a5568",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,m.jsx)("span",{className:"emoji",children:E?null===(t=sd[E.type])||void 0===t?void 0:t.emoji:"😊"}),(0,m.jsx)("span",{className:"label",children:E?null===(i=sd[E.type])||void 0===i?void 0:i.label:"Реагировать"}),P>0&&(0,m.jsx)("span",{className:"count",children:P})]}),L.map(function(n){var e,t,r,i=(0,p.A)(n,2),a=i[0],s=i[1];return(0,m.jsxs)(Zl,{onClick:function(){return C(a)},$isActive:(null==E?void 0:E.type)===a,$activeColor:null===(e=sd[a])||void 0===e?void 0:e.color,$textColor:null===(t=sd[a])||void 0===t?void 0:t.textColor,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,m.jsx)("span",{className:"emoji",children:null===(r=sd[a])||void 0===r?void 0:r.emoji}),(0,m.jsx)("span",{className:"count",children:s})]},a)})]}),u&&P>0&&(0,m.jsx)(nd,{children:Object.entries(_).map(function(n){var e,t=(0,p.A)(n,2),r=t[0],i=t[1];return"total"===r||"users"===r||0===i?null:(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"emoji",children:null===(e=sd[r])||void 0===e?void 0:e.emoji}),(0,m.jsx)("span",{children:i})]},r)})}),(0,m.jsx)(fa.N,{children:g&&(0,m.jsx)(ed,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:z,children:(0,m.jsxs)(td,{onClick:function(n){return n.stopPropagation()},children:[(0,m.jsx)(ad,{onClick:z,children:"×"}),(0,m.jsx)("h3",{style:{margin:"0 0 20px 0",color:"#2d3748"},children:"Выберите реакцию"}),(0,m.jsx)(rd,{children:Object.entries(sd).map(function(n){var e=(0,p.A)(n,2),t=e[0],r=e[1];return(0,m.jsxs)(id,{onClick:function(){return C(t)},$color:r.color,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,m.jsx)("div",{className:"emoji",children:r.emoji}),(0,m.jsx)("div",{className:"label",children:r.label})]},t)})}),(0,m.jsx)("p",{style:{margin:"20px 0 0 0",fontSize:"14px",color:"#718096"},children:"Нажмите на реакцию, чтобы поставить её"})]})})})]})};var cd,ld,dd,ud,pd,xd,hd,fd,md,gd,vd,bd,jd,yd,wd,Ad,kd,Nd,Sd,Cd,zd,_d,Ed,Pd,Ld,Od,Dd,$d,Md,Id,Ud,Td,Rd,Bd;function Wd(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Fd(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Wd(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wd(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var Qd=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),(0,m.jsx)("circle",{cx:"12",cy:"13",r:"4"})]})},qd=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,m.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2 2h4a2 2 0 0 1 2 2v2"}),(0,m.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,m.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})},Hd={1:{emoji:"🌹",name:"Роза",cost:50},2:{emoji:"💐",name:"Букет цветов",cost:100},3:{emoji:"🍾",name:"Шампанское",cost:200},4:{emoji:"🎁",name:"Подарок",cost:150},5:{emoji:"🍽️",name:"Романтический ужин",cost:500},6:{emoji:"✈️",name:"Путешествие",cost:1e3},7:{emoji:"💎",name:"Украшение",cost:800},10:{emoji:"🏆",name:"Эксклюзивный подарок",cost:3e3}},Vd=(0,d.Ay)(jr)(cd||(cd=(0,a.A)(["\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n"]))),Xd=d.Ay.div(ld||(ld=(0,a.A)(["\n  position: relative;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  padding: 60px 40px 40px;\n  border-radius: 25px 25px 0 0;\n  color: white;\n  text-align: center;\n  overflow: hidden;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\") repeat;\n    opacity: 0.3;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 40px 20px 30px;\n  }\n"]))),Yd=d.Ay.div(dd||(dd=(0,a.A)(["\n  position: relative;\n  display: inline-block;\n  margin-bottom: 20px;\n  z-index: 1;\n  text-align: center;\n  \n  /* Центрируем аватарку */\n  .avatar-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0 auto;\n  }\n"]))),Kd=d.Ay.div(ud||(ud=(0,a.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  cursor: pointer;\n  opacity: 0;\n  transition: all 0.3s ease;\n  z-index: 2;\n  \n  &:hover {\n    opacity: 1;\n    background: rgba(220, 53, 34, 0.8);\n  }\n  \n  svg {\n    color: white;\n    width: 24px;\n    height: 24px;\n  }\n  \n  @media (max-width: 768px) {\n    svg {\n      width: 20px;\n      height: 20px;\n    }\n  }\n"]))),Gd=d.Ay.div(pd||(pd=(0,a.A)(["\n  position: relative;\n  z-index: 1;\n  \n  h2 {\n    margin: 0 0 8px 0;\n    font-size: 32px;\n    font-weight: 700;\n    text-shadow: 0 2px 4px rgba(0,0,0,0.1);\n  }\n  \n  p {\n    margin: 0;\n    opacity: 0.9;\n    font-size: 16px;\n  }\n  \n  @media (max-width: 768px) {\n    h2 {\n      font-size: 28px;\n    }\n    \n    p {\n      font-size: 14px;\n    }\n  }\n"]))),Jd=d.Ay.div(xd||(xd=(0,a.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  padding: 30px 40px;\n  background: white;\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n    gap: 10px;\n    flex-wrap: wrap;\n  }\n"]))),Zd=(0,d.Ay)(Dr)(hd||(hd=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 20px;\n  border-radius: 12px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  border: none;\n  \n  &.like {\n    background: linear-gradient(135deg, #e91e63 0%, #f06292 100%);\n    color: white;\n  }\n  \n  &.gift {\n    background: linear-gradient(135deg, #ff9800 0%, #ffb74d 100%);\n    color: white;\n  }\n  \n  &.chat {\n    background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);\n    color: white;\n  }\n  \n  &.superlike {\n    background: linear-gradient(135deg, #2196f3 0%, #42a5f5 100%);\n    color: white;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 10px 16px;\n    font-size: 14px;\n  }\n"]))),nu=d.Ay.div(fd||(fd=(0,a.A)(["\n  display: flex;\n  background: white;\n  border-radius: 0;\n  overflow: hidden;\n  box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n"]))),eu=d.Ay.button(md||(md=(0,a.A)(["\n  flex: 1;\n  padding: 20px;\n  border: none;\n  background: ",";\n  color: ",";\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  border-bottom: ",";\n  \n  &:hover:not(:disabled) {\n    background: ",";\n    color: ",";\n  }\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n    font-size: 14px;\n  }\n"])),function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"white"},function(n){return n.$active?"white":"#4a5568"},function(n){return n.$active?"none":"1px solid #e2e8f0"},function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%)"},function(n){return n.$active?"white":"#dc3522"}),tu=d.Ay.div(gd||(gd=(0,a.A)(["\n  padding: 40px;\n  background: white;\n  border-radius: 0 0 25px 25px;\n  min-height: 400px;\n  \n  @media (max-width: 768px) {\n    padding: 25px 20px;\n  }\n"]))),ru=d.Ay.div(vd||(vd=(0,a.A)(["\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  border-radius: 15px;\n  padding: 20px;\n  margin: 20px 40px;\n  border: 1px solid #dee2e6;\n  \n  @media (max-width: 768px) {\n    margin: 20px 20px;\n  }\n"]))),iu=d.Ay.div(bd||(bd=(0,a.A)(["\n  margin-bottom: 30px;\n  \n  h3 {\n    margin: 0 0 15px 0;\n    font-size: 20px;\n    font-weight: 600;\n    color: #2d3748;\n    border-bottom: 2px solid #e2e8f0;\n    padding-bottom: 8px;\n  }\n"]))),au=d.Ay.p(jd||(jd=(0,a.A)(["\n  margin: 0 0 8px 0;\n  color: #4a5568;\n  font-size: 15px;\n  \n  strong {\n    color: #2d3748;\n    font-weight: 600;\n  }\n"]))),su=(0,d.Ay)(Fr)(yd||(yd=(0,a.A)(["\n  margin-top: 30px;\n"]))),ou=(0,d.Ay)(Ir)(wd||(wd=(0,a.A)(["\n  position: relative;\n  aspect-ratio: 1;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);\n  }\n"]))),cu=d.Ay.img(Ad||(Ad=(0,a.A)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.3s ease;\n  \n  ",":hover & {\n    transform: scale(1.1);\n  }\n"])),ou),lu=d.Ay.div(kd||(kd=(0,a.A)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg, rgba(220, 53, 34, 0.8) 0%, rgba(255, 107, 88, 0.8) 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  \n  ",":hover & {\n    opacity: 1;\n  }\n"])),ou),du=d.Ay.div(Nd||(Nd=(0,a.A)(["\n  border: 3px dashed #cbd5e0;\n  border-radius: 15px;\n  padding: 60px 30px;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);\n  \n  &:hover {\n    border-color: #dc3522;\n    background: linear-gradient(135deg, rgba(220, 53, 34, 0.05) 0%, rgba(255, 107, 88, 0.05) 100%);\n  }\n"]))),uu=d.Ay.input(Sd||(Sd=(0,a.A)(["\n  display: none;\n"]))),pu=(0,d.Ay)(Fr)(Cd||(Cd=(0,a.A)(["\n  margin-bottom: 20px;\n"]))),xu=(0,d.Ay)(ha.P.div)(zd||(zd=(0,a.A)(["\n  background: white;\n  border: 2px solid ",";\n  border-radius: 15px;\n  padding: 15px;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    border-color: #dc3522;\n    transform: translateY(-2px);\n  }\n  \n  .emoji {\n    font-size: 32px;\n    margin-bottom: 8px;\n    display: block;\n  }\n  \n  .name {\n    font-size: 14px;\n    font-weight: 600;\n    color: #2d3748;\n    margin-bottom: 4px;\n  }\n  \n  .cost {\n    font-size: 12px;\n    color: #dc3522;\n    font-weight: 600;\n  }\n"])),function(n){return n.$selected?"#dc3522":"#e2e8f0"}),hu=(0,d.Ay)(Ir)(_d||(_d=(0,a.A)(["\n  background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);\n  border: 2px solid #fed7d7;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 8px 25px rgba(220, 53, 34, 0.15);\n    border-color: #dc3522;\n  }\n"]))),fu=d.Ay.div(Ed||(Ed=(0,a.A)(["\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 15px;\n  padding: 25px;\n  margin: 20px 40px;\n  color: white;\n  text-align: center;\n  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);\n  \n  @media (max-width: 768px) {\n    margin: 20px 20px;\n    padding: 20px;\n  }\n"]))),mu=d.Ay.h3(Pd||(Pd=(0,a.A)(["\n  margin: 0 0 15px 0;\n  font-size: 20px;\n  font-weight: 600;\n  color: white;\n"]))),gu=d.Ay.div(Ld||(Ld=(0,a.A)(["\n  font-size: 32px;\n  font-weight: bold;\n  margin-bottom: 20px;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n"]))),vu=(0,d.Ay)(Dr)(Od||(Od=(0,a.A)(["\n  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);\n  color: #2d3748;\n  font-weight: 600;\n  padding: 12px 24px;\n  border-radius: 25px;\n  box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);\n  }\n"]))),bu=d.Ay.div(Dd||(Dd=(0,a.A)(["\n  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);\n  border-radius: 15px;\n  padding: 25px;\n  margin: 20px 40px;\n  text-align: center;\n  box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);\n  border: 2px solid #ffd700;\n  \n  @media (max-width: 768px) {\n    margin: 20px 20px;\n    padding: 20px;\n  }\n"]))),ju=d.Ay.h3($d||($d=(0,a.A)(["\n  margin: 0 0 15px 0;\n  font-size: 22px;\n  font-weight: 700;\n  color: #2d3748;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n"]))),yu=d.Ay.p(Md||(Md=(0,a.A)(["\n  margin: 0 0 20px 0;\n  font-size: 16px;\n  color: #4a5568;\n  line-height: 1.6;\n"]))),wu=(0,d.Ay)(Dr)(Id||(Id=(0,a.A)(["\n  background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);\n  color: white;\n  font-weight: 600;\n  padding: 12px 30px;\n  border-radius: 25px;\n  box-shadow: 0 4px 15px rgba(45, 55, 72, 0.4);\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(45, 55, 72, 0.6);\n  }\n"]))),Au=d.Ay.div(Ud||(Ud=(0,a.A)(["\n  font-size: 48px;\n  margin-bottom: 15px;\n  text-align: center;\n"]))),ku=d.Ay.div(Td||(Td=(0,a.A)(["\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  color: white;\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  font-weight: 600;\n  margin: 10px 0;\n  display: inline-block;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 4px 15px rgba(220, 53, 34, 0.3);\n  }\n"]))),Nu=d.Ay.div(Rd||(Rd=(0,a.A)(["\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 10px;\n  padding: 12px;\n  margin: 10px 0;\n  font-style: italic;\n  color: #4a5568;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Su=d.Ay.div(Bd||(Bd=(0,a.A)(["\n  position: absolute;\n  bottom: -30px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 8px;\n  font-size: 12px;\n  white-space: nowrap;\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  z-index: 3;\n  \n  ",":hover & {\n    opacity: 1;\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 11px;\n    padding: 6px 10px;\n    bottom: -25px;\n  }\n"])),Yd);const Cu=function(){var n,e,t,i,a,s,d,x,g,v,b,j,y,w,A,k=(0,o.g)().login,N=(0,o.Zp)(),S=(0,o.zy)(),C=(0,c.useQueryClient)(),z=new URLSearchParams(S.search).get("tab"),_=(0,r.useState)("profile"),E=(0,p.A)(_,2),P=E[0],L=E[1],O=(0,r.useState)(!1),D=(0,p.A)(O,2),$=D[0],M=D[1],I=(0,r.useState)(null),U=(0,p.A)(I,2),T=U[0],R=U[1],B=(0,r.useState)(!1),W=(0,p.A)(B,2),F=W[0],Q=W[1],q=(0,r.useState)(null),H=(0,p.A)(q,2),V=H[0],X=H[1],Y=(0,r.useState)(""),K=(0,p.A)(Y,2),G=K[0],J=K[1],Z=(0,r.useState)(!1),nn=(0,p.A)(Z,2),en=nn[0],tn=nn[1],rn=(0,r.useState)(""),an=(0,p.A)(rn,2),sn=an[0],on=an[1];(0,r.useEffect)(function(){z&&["profile","photos","gifts","settings"].includes(z)&&L(z)},[z]);var cn=f.apiUtils.getCurrentUser(),ln=!k||cn&&cn.login===k,dn=ln?null==cn?void 0:cn.login:k;(0,r.useEffect)(function(){console.log("Profile component debug:",{login:k,currentUser:f.apiUtils.getCurrentUser()?{login:f.apiUtils.getCurrentUser().login,hasLogin:!!f.apiUtils.getCurrentUser().login}:null,isOwnProfile:ln,targetLogin:dn,hasTargetLogin:!!dn})},[k,cn,ln,dn]);var un=(0,c.useQuery)(["receivedGifts",dn],function(){return f.giftsAPI.getReceivedGifts(20,0,dn)},{enabled:!!dn,onError:function(n){console.error("Ошибка при получении подарков:",n)}}),pn=un.data,xn=void 0===pn?{gifts:[]}:pn,hn=(0,c.useQuery)(["privacySettings"],function(){return f.privacyAPI.getSettings()},{enabled:ln,onError:function(n){console.error("Ошибка при получении настроек приватности:",n)}}),fn=hn.data;(0,r.useEffect)(function(){xn&&(console.log("Received gifts data:",xn),console.log("Received gifts:",xn.gifts))},[xn]),(0,r.useEffect)(function(){On&&console.log("Subscription status:",On)},[On]);var mn=(0,r.useRef)(),gn=(0,r.useRef)(),vn=(0,r.useState)(!1),bn=(0,p.A)(vn,2),jn=bn[0],yn=bn[1],wn=(0,r.useState)(null),An=(0,p.A)(wn,2),kn=An[0],Nn=An[1];if(!cn)return(0,m.jsx)(o.C5,{to:"/login",replace:!0});if(!dn)return console.warn("Profile: targetLogin is undefined",{login:k,currentUser:cn,isOwnProfile:ln}),(0,m.jsx)(Vd,{children:(0,m.jsx)(yr,{$maxWidth:"600px",children:(0,m.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px"},children:[(0,m.jsx)("h2",{children:"Ошибка"}),(0,m.jsx)("p",{children:"Не удалось определить профиль для просмотра"}),(0,m.jsxs)("p",{style:{fontSize:"14px",color:"#718096",marginTop:"10px"},children:["Debug: login=",String(k),", currentUser=",cn?"exists":"null",", isOwnProfile=",String(ln)]}),(0,m.jsx)(Dr,{onClick:function(){return N("/catalog")},children:"Вернуться к каталогу"})]})})});var Sn=(0,c.useQuery)(["profile",dn],function(){return f.usersAPI.getProfile(dn)},{enabled:!!dn,onError:function(n){var e,t,r;console.error("Profile API error:",{targetLogin:dn,error:n.message,status:null===(e=n.response)||void 0===e?void 0:e.status,data:null===(t=n.response)||void 0===t?void 0:t.data}),404===(null===(r=n.response)||void 0===r?void 0:r.status)?(l.Ay.error("Пользователь не найден"),N("/catalog")):l.Ay.error("Ошибка загрузки профиля: ".concat(n.message))}}),Cn=Sn.data,zn=Sn.isLoading,_n=Sn.error,En=(0,c.useQuery)(["match-status",dn],function(){return f.chatAPI.getMatchStatus(dn)},{enabled:!ln&&!!dn,retry:!1,onError:function(n){var e,t;console.error("Match status API error:",{targetLogin:dn,error:n.message,status:null===(e=n.response)||void 0===e?void 0:e.status,data:null===(t=n.response)||void 0===t?void 0:t.data})}}),Pn=En.data,Ln=(0,c.useQuery)(["subscription-status"],f.subscriptionsAPI.getStatus,{enabled:ln,onError:function(n){var e,t;console.error("Subscription status API error:",{error:n.message,status:null===(e=n.response)||void 0===e?void 0:e.status,data:null===(t=n.response)||void 0===t?void 0:t.data})}}),On=Ln.data,Dn=Ln.isLoading,$n=(0,Ua.mN)({values:Cn}),Mn=$n.register,In=$n.handleSubmit,Un=$n.watch,Tn=$n.setValue,Bn=$n.clearErrors,Wn=$n.formState.errors,Fn=(0,c.useMutation)(f.usersAPI.updateProfile,{onSuccess:function(){l.Ay.success("Профиль обновлен!"),C.invalidateQueries(["profile"]),dn&&C.invalidateQueries(["profile",dn]),window.refreshNavigation&&window.refreshNavigation()},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),Qn=(0,c.useMutation)(f.usersAPI.uploadAvatar,{onSuccess:function(){l.Ay.success("Аватар обновлен!"),C.invalidateQueries(["profile"]),dn&&C.invalidateQueries(["profile",dn]),window.refreshNavigation&&window.refreshNavigation()},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),qn=(0,c.useMutation)(f.usersAPI.uploadImages,{onSuccess:function(n){console.log("Upload success:",n),l.Ay.success("Фото добавлено!"),C.invalidateQueries(["profile"]),dn&&C.invalidateQueries(["profile",dn]),ln&&C.invalidateQueries(["profile",null==cn?void 0:cn.login])},onError:function(n){console.error("Upload error:",n),l.Ay.error(f.apiUtils.handleError(n))}}),Hn=(0,c.useMutation)(f.usersAPI.deleteImage,{onSuccess:function(){l.Ay.success("Фото удалено!"),C.invalidateQueries(["profile"]),dn&&C.invalidateQueries(["profile",dn])},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),Vn=(0,c.useMutation)(f.swipeAPI.like,{onSuccess:function(n){"reciprocal_like"===n.result?(l.Ay.success("🎉 Взаимная симпатия! Теперь можете общаться"),dn&&C.invalidateQueries(["match-status",dn])):l.Ay.success("Лайк отправлен!")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),Xn=(0,c.useMutation)(f.swipeAPI.superlike,{onSuccess:function(){l.Ay.success("Суперлайк отправлен!"),tn(!1),on(""),dn&&C.invalidateQueries(["match-status",dn])},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),Yn=(0,c.useMutation)(f.giftsAPI.sendGift,{onSuccess:function(n){l.Ay.success("Подарок успешно отправлен!"),Q(!1),X(null),J(""),dn&&C.invalidateQueries(["profile",dn])},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),Kn=(0,c.useMutation)(f.privacyAPI.updateSettings,{onSuccess:function(n){l.Ay.success("Настройки приватности обновлены"),C.invalidateQueries(["currentUser"])},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),Gn=(0,c.useMutation)(f.usersAPI.registerVisit,{onSuccess:function(){dn&&C.invalidateQueries(["profile",dn])},onError:function(n){console.warn("Visit registration failed:",n)}});(0,r.useEffect)(function(){!ln&&dn&&Cn&&Gn.mutate(dn)},[dn,Cn,ln]);var Jn=function(){var n=(0,u.A)(h().mark(function n(){var e;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(V){n.next=1;break}return l.Ay.error("Выберите подарок"),n.abrupt("return");case 1:return n.prev=1,n.next=2,Yn.mutateAsync({to_user:dn,gift_type:V,message:G});case 2:n.next=4;break;case 3:n.prev=3,e=n.catch(1),console.error("Ошибка при отправке подарка:",e);case 4:case"end":return n.stop()}},n,null,[[1,3]])}));return function(){return n.apply(this,arguments)}}(),Zn=function(){var n=(0,u.A)(h().mark(function n(e){var t,r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),n.prev=1,!(t=C.getQueryData(["privacySettings"]))){n.next=2;break}return n.next=2,Kn.mutateAsync({privacy:t.privacy,notifications:t.notifications});case 2:n.next=4;break;case 3:n.prev=3,r=n.catch(1),console.error("Ошибка при сохранении настроек:",r);case 4:case"end":return n.stop()}},n,null,[[1,3]])}));return function(e){return n.apply(this,arguments)}}();if(zn)return(0,m.jsx)(Vd,{children:(0,m.jsx)(Qr,{})});if(_n||!Cn)return(0,m.jsx)(Vd,{children:(0,m.jsx)(yr,{$maxWidth:"600px",children:(0,m.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px"},children:[(0,m.jsx)("h2",{children:"Профиль не найден"}),(0,m.jsxs)("p",{children:["Пользователь ",dn," не существует или был удален"]}),(0,m.jsx)(Dr,{onClick:function(){return N("/catalog")},children:"Вернуться к каталогу"})]})})});var ne=(null==Pn?void 0:Pn.hasMatch)||!1,ee=(null==Pn?void 0:Pn.userHasLiked)||!1;return(0,m.jsxs)(Vd,{children:[(0,m.jsxs)(yr,{$maxWidth:"1000px",$padding:"0",children:[(0,m.jsxs)(Xd,{children:[(0,m.jsx)(Yd,{children:(0,m.jsxs)("div",{className:"avatar-container",children:[(0,m.jsx)(Ur,{$src:Cn.ava?"/uploads/".concat(Cn.ava):"",$size:"120px",$fontSize:"48px",$clickable:ln,children:!Cn.ava&&(null===(n=Cn.login)||void 0===n?void 0:n.charAt(0).toUpperCase())}),ln&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Kd,{onClick:function(){var n;return null===(n=mn.current)||void 0===n?void 0:n.click()},children:(0,m.jsx)(Qd,{})}),(0,m.jsx)(uu,{ref:mn,type:"file",accept:"image/*",onChange:function(n){var e=n.target.files[0];if(e){if(!e.type.startsWith("image/"))return void l.Ay.error("Пожалуйста, выберите файл изображения");Nn(e),yn(!0),n.target.value=""}}}),(0,m.jsx)(Su,{children:"Нажмите для загрузки аватарки"})]})]})}),(0,m.jsxs)(Gd,{children:[(0,m.jsxs)("h2",{children:["@",Cn.login]}),(0,m.jsxs)("p",{children:[Cn.city," • ",Cn.status," ",Cn.distance>0&&"• ".concat(Cn.distance,"км от вас")]})]})]}),ln&&(0,m.jsxs)(fu,{children:[(0,m.jsx)(mu,{children:"💰 Ваш баланс"}),(0,m.jsxs)(gu,{children:[Cn.balance||0," 🦊"]}),(0,m.jsx)(vu,{onClick:function(){return N("/balance-topup")},children:"Пополнить баланс"})]}),!ln&&(0,m.jsxs)(Jd,{children:[(0,m.jsxs)(Zd,{className:"gift",onClick:function(){return Q(!0)},children:[(0,m.jsx)(xr,{}),"Подарок"]}),ne?(0,m.jsxs)(Zd,{className:"chat",onClick:function(){dn?N("/chat/".concat(dn)):l.Ay.error("Ошибка: не указан пользователь для чата")},children:[(0,m.jsx)(sr,{}),"Написать"]}):ee?null:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Zd,{className:"like",onClick:function(){Vn.isLoading||(dn?Vn.mutate(dn):l.Ay.error("Ошибка: не указан получатель лайка"))},disabled:Vn.isLoading,children:[(0,m.jsx)(ar,{}),Vn.isLoading?"Отправляем...":"Лайк"]}),(0,m.jsxs)(Zd,{className:"superlike",onClick:function(){return tn(!0)},children:[(0,m.jsx)(hr,{}),"Суперлайк"]})]})]}),!ln&&(0,m.jsx)(ru,{children:(0,m.jsx)(sl,{targetUser:dn,onRatingSubmit:function(){dn&&C.invalidateQueries(["profile",dn])}})}),(0,m.jsxs)(nu,{children:[(0,m.jsx)(eu,{$active:"profile"===P,onClick:function(){return L("profile")},children:"Профиль"}),(0,m.jsx)(eu,{$active:"photos"===P,onClick:function(){return L("photos")},children:"Фотографии"}),(0,m.jsxs)(eu,{$active:"gifts"===P,onClick:function(){return L("gifts")},children:["🎁 Подарки ",xn.gifts&&xn.gifts.length>0&&"(".concat(xn.gifts.length,")")]}),ln&&(0,m.jsx)(eu,{$active:"settings"===P,onClick:function(){return L("settings")},children:"Настройки"})]}),(0,m.jsxs)(tu,{children:["profile"===P&&(0,m.jsx)("div",{children:ln?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Cr,{onSubmit:In(function(n){Fn.mutate(n)}),children:[(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Имя"}),(0,m.jsx)(Pr,Fd(Fd({},Mn("name")),{},{placeholder:"Ваше имя"}))]}),(0,m.jsx)(vs,{countryValue:Un("country"),cityValue:Un("city"),onCountryChange:function(n){Tn("country",n),Bn("country"),Un("city")&&(Tn("city",""),Bn("city"))},onCityChange:function(n){Tn("city",n),Bn("city")},countryError:null===(e=Wn.country)||void 0===e?void 0:e.message,cityError:null===(t=Wn.city)||void 0===t?void 0:t.message,required:!0,showValidation:!0,layout:"side-by-side"}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"О себе"}),(0,m.jsx)(Or,Fd(Fd({},Mn("info")),{},{placeholder:"Расскажите о себе...",$minHeight:"120px"}))]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Что ищете"}),(0,m.jsx)(Or,Fd(Fd({},Mn("looking_for")),{},{placeholder:"Опишите, кого или что вы ищете...",$minHeight:"120px"}))]}),(0,m.jsx)(Dr,{type:"submit",disabled:Fn.isLoading,children:Fn.isLoading?"Сохранение...":"Сохранить изменения"})]}),!Dn&&(!(null!=On&&On.has_subscription)||"free"===(null==On?void 0:On.plan))&&(0,m.jsxs)(bu,{children:[(0,m.jsx)(ju,{children:"👑 Переходите на подписку!"}),(0,m.jsx)(yu,{children:"Получите эксклюзивные возможности: больше лайков, приоритет в поиске, расширенная статистика и многое другое! Доступны планы VIP и PREMIUM."}),(0,m.jsx)(wu,{onClick:function(){return N("/subscriptions")},children:"Перейти к подписке"})]}),!Dn&&(null==On?void 0:On.has_subscription)&&"free"!==(null==On?void 0:On.plan)&&(0,m.jsxs)(bu,{style:{background:"linear-gradient(135deg, #48bb78 0%, #38a169 100%)",borderColor:"#48bb78"},children:[(0,m.jsxs)(ju,{style:{color:"white"},children:["👑 У вас активна ","vip"===On.plan?"VIP":"PREMIUM"," подписка!"]}),(0,m.jsxs)(yu,{style:{color:"white"},children:["Ваша подписка активна до ",new Date(On.expires_at).toLocaleDateString("ru-RU"),".",On.auto_renew&&" Автопродление включено."]}),(0,m.jsx)(wu,{onClick:function(){return N("/subscriptions")},style:{background:"linear-gradient(135deg, #2d3748 0%, #4a5568 100%)",color:"white"},children:"Управление подпиской"})]}),Dn&&(0,m.jsxs)(bu,{style:{background:"linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%)",borderColor:"#cbd5e0"},children:[(0,m.jsx)(ju,{style:{color:"#4a5568"},children:"⏳ Проверяем статус подписки..."}),(0,m.jsx)(yu,{style:{color:"#718096"},children:"Загружаем информацию о вашей подписке"})]})]}):(0,m.jsxs)("div",{children:[(0,m.jsxs)(iu,{children:[(0,m.jsx)("h3",{children:"Основная информация"}),(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Страна:"})," ",Cn.country]}),(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Город:"})," ",Cn.city]}),(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Статус:"})," ",Cn.status]}),Cn.distance>0&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Расстояние:"})," ",Cn.distance," км от вас"]})]}),Cn.isCouple&&Cn.partnerData&&(0,m.jsxs)(iu,{children:[(0,m.jsx)("h3",{children:"👫 Данные пары"}),(0,m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",padding:"15px",background:"rgba(220, 53, 34, 0.05)",borderRadius:"10px",border:"1px solid rgba(220, 53, 34, 0.1)"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#dc3522",fontSize:"16px"},children:"👨 Мужчина"}),Cn.partnerData.manDate&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Дата рождения:"})," ",new Date(Cn.partnerData.manDate).toLocaleDateString("ru-RU")]}),Cn.partnerData.manHeight&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Рост:"})," ",Cn.partnerData.manHeight," см"]}),Cn.partnerData.manWeight&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Вес:"})," ",Cn.partnerData.manWeight," кг"]}),Cn.partnerData.manSmoking&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Курение:"})," ",Cn.partnerData.manSmoking]}),Cn.partnerData.manAlko&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Алкоголь:"})," ",Cn.partnerData.manAlko]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#dc3522",fontSize:"16px"},children:"👩 Женщина"}),Cn.partnerData.womanDate&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Дата рождения:"})," ",new Date(Cn.partnerData.womanDate).toLocaleDateString("ru-RU")]}),Cn.partnerData.womanHeight&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Рост:"})," ",Cn.partnerData.womanHeight," см"]}),Cn.partnerData.womanWeight&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Вес:"})," ",Cn.partnerData.womanWeight," кг"]}),Cn.partnerData.womanSmoking&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Курение:"})," ",Cn.partnerData.womanSmoking]}),Cn.partnerData.womanAlko&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Алкоголь:"})," ",Cn.partnerData.womanAlko]})]})]})]}),(Cn.height||Cn.weight||Cn.smoking||Cn.alko)&&(0,m.jsxs)(iu,{children:[(0,m.jsx)("h3",{children:"Дополнительная информация"}),Cn.height&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Рост:"})," ",Cn.height," см"]}),Cn.weight&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Вес:"})," ",Cn.weight," кг"]}),Cn.smoking&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Отношение к курению:"})," ",Cn.smoking]}),Cn.alko&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Отношение к алкоголю:"})," ",Cn.alko]})]}),(Cn.searchStatus||Cn.searchAge||Cn.location)&&(0,m.jsxs)(iu,{children:[(0,m.jsx)("h3",{children:"Что ищет"}),Cn.searchStatus&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Статус:"})," ",Cn.searchStatus]}),Cn.searchAge&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Возраст:"})," ",Cn.searchAge]}),Cn.location&&(0,m.jsxs)(au,{children:[(0,m.jsx)("strong",{children:"Места для встреч:"})," ",Cn.location]})]}),Cn.info&&(0,m.jsxs)(iu,{children:[(0,m.jsx)("h3",{children:"О пользователе"}),(0,m.jsx)(au,{children:Cn.info})]}),xn.gifts&&xn.gifts.length>0&&(0,m.jsxs)(iu,{children:[(0,m.jsx)("h3",{children:"🎁 Полученные подарки"}),(0,m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"15px"},children:[xn.gifts.slice(0,6).map(function(n,e){var t,r;return(0,m.jsxs)("div",{style:{background:"linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%)",border:"2px solid #fed7d7",borderRadius:"12px",padding:"15px",textAlign:"center",transition:"all 0.3s ease"},children:[(0,m.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px"},children:(null===(t=Hd[n.gift_type])||void 0===t?void 0:t.emoji)||"🎁"}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#dc3522",fontWeight:"600",marginBottom:"5px"},children:(null===(r=Hd[n.gift_type])||void 0===r?void 0:r.name)||"Подарок"}),n.message&&(0,m.jsxs)("div",{style:{fontSize:"11px",color:"#4a5568",fontStyle:"italic",marginBottom:"5px"},children:['"',n.message,'"']}),(0,m.jsx)("div",{style:{fontSize:"10px",color:"#718096"},children:new Date(n.created_at).toLocaleDateString("ru-RU")})]},e)}),xn.gifts&&xn.gifts.length>6&&(0,m.jsx)("div",{style:{background:"rgba(220, 53, 34, 0.1)",border:"2px dashed #dc3522",borderRadius:"12px",padding:"15px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:function(){return L("gifts")},children:(0,m.jsxs)("div",{style:{color:"#dc3522",fontSize:"14px",fontWeight:"600"},children:["+",xn.gifts.length-6," еще"]})})]})]}),(0,m.jsx)("div",{style:{marginTop:"30px"},children:(0,m.jsx)(Bl,{username:k,currentUser:null==cn?void 0:cn.login,isOwnProfile:ln})}),(0,m.jsx)("div",{style:{marginTop:"20px"},children:(0,m.jsx)(od,{objectType:"profile",objectId:k,currentUser:null==cn?void 0:cn.login})})]})}),"photos"===P&&(0,m.jsxs)("div",{children:[ln&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(du,{onClick:function(){var n;return null===(n=gn.current)||void 0===n?void 0:n.click()},children:[(0,m.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px",opacity:.6},children:"📸"}),(0,m.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#2d3748",fontSize:"18px"},children:"Загрузить фотографии"}),(0,m.jsx)("p",{style:{margin:0,color:"#718096",fontSize:"14px"},children:"Нажмите, чтобы выбрать файлы. Поддерживаются JPG, PNG. Максимум 5MB на файл."})]}),(0,m.jsx)(uu,{ref:gn,type:"file",accept:"image/*",multiple:!0,onChange:function(n){var e=Array.from(n.target.files);if(e.length>0){var t=new FormData;e.forEach(function(n){t.append("images",n)}),qn.mutate(t),n.target.value=""}}})]}),(0,m.jsx)(su,{$columns:"repeat(auto-fill, minmax(200px, 1fr))",$gap:"20px",children:(null==Cn?void 0:Cn.images)&&Array.isArray(Cn.images)&&Cn.images.map(function(n,e){return(0,m.jsxs)(ou,{onClick:function(){return function(n){R(n),M(!0)}(n)},children:[(0,m.jsx)(cu,{src:"/uploads/".concat(n),alt:"Фото ".concat(e+1)}),ln&&(0,m.jsx)(lu,{children:(0,m.jsx)($r,{$variant:"danger",onClick:function(e){var t;e.stopPropagation(),t=n,window.confirm("Удалить это фото?")&&Hn.mutate(t)},children:(0,m.jsx)(qd,{})})})]},e)})}),(null==Cn?void 0:Cn.images)&&Array.isArray(Cn.images)&&Cn.images.length>0&&(0,m.jsxs)("div",{style:{marginTop:"30px"},children:[(0,m.jsx)("h3",{style:{marginBottom:"20px",color:"#2d3748"},children:"Комментарии к фотографиям"}),Cn.images.map(function(n,e){return(0,m.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"15px",padding:"15px",background:"#f7fafc",borderRadius:"12px"},children:[(0,m.jsx)("img",{src:"/uploads/".concat(n),alt:"Фото ".concat(e+1),style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("h4",{style:{margin:"0 0 5px 0",color:"#2d3748"},children:["Фото ",e+1]}),(0,m.jsx)("p",{style:{margin:0,color:"#718096",fontSize:"14px"},children:"Нажмите на фото для просмотра"})]})]}),(0,m.jsx)(kl,{filename:n,currentUser:null==cn?void 0:cn.login}),(0,m.jsx)("div",{style:{marginTop:"20px"},children:(0,m.jsx)(od,{objectType:"image",objectId:n,currentUser:null==cn?void 0:cn.login})})]},e)})]})]}),"gifts"===P&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{style:{marginBottom:"20px",color:"#2d3748"},children:"🎁 Подарки"}),xn.gifts&&0===xn.gifts.length?(0,m.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#718096"},children:[(0,m.jsx)("div",{style:{fontSize:"64px",marginBottom:"20px",opacity:.5},children:"🎁"}),(0,m.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#2d3748"},children:ln?"Вы пока не получили подарков":"Пользователь пока не получил подарков"}),(0,m.jsx)("p",{style:{margin:0,fontSize:"14px"},children:ln?"Подарки появятся здесь, когда кто-то отправит их вам":"Подарки появятся здесь, когда кто-то отправит их пользователю"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{style:{background:"linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%)",border:"2px solid #fed7d7",borderRadius:"15px",padding:"20px",marginBottom:"25px",textAlign:"center"},children:[(0,m.jsx)("h4",{style:{margin:"0 0 15px 0",color:"#dc3522"},children:"📊 Статистика подарков"}),(0,m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"15px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3522"},children:xn.gifts?xn.gifts.length:0}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#4a5568"},children:"Всего получено"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3522"},children:xn.gifts?xn.gifts.filter(function(n){return n.message}).length:0}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#4a5568"},children:"С сообщениями"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3522"},children:xn.gifts?new Set(xn.gifts.map(function(n){return n.from_user})).size:0}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#4a5568"},children:"Отправителей"})]})]})]}),(0,m.jsx)(Fr,{$columns:"repeat(auto-fill, minmax(280px, 1fr))",$gap:"20px",children:xn.gifts&&xn.gifts.map(function(n,e){var t,r;return(0,m.jsxs)(hu,{children:[(0,m.jsx)(Au,{children:(null===(t=Hd[n.gift_type])||void 0===t?void 0:t.emoji)||"🎁"}),(0,m.jsx)(ku,{onClick:function(){var e;(e=n.from_user)&&e!==(null==cn?void 0:cn.login)&&N("/profile/".concat(e))},children:n.from_user}),(0,m.jsx)(Nu,{children:n.message||"Нет сообщения"}),(0,m.jsxs)("p",{style:{margin:"0 0 10px 0",color:"#4a5568",fontSize:"14px"},children:["Тип: ",(null===(r=Hd[n.gift_type])||void 0===r?void 0:r.name)||"Неизвестный подарок"]}),(0,m.jsxs)("p",{style:{margin:"0 0 10px 0",color:"#4a5568",fontSize:"14px"},children:["Дата: ",new Date(n.created_at).toLocaleDateString("ru-RU")]})]},e)})})]})]}),"settings"===P&&ln&&(0,m.jsx)("div",{children:(0,m.jsxs)(iu,{children:[(0,m.jsx)("h3",{children:"Настройки профиля"}),(0,m.jsxs)(Cr,{onSubmit:Zn,children:[(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Приватность"}),(0,m.jsx)(Rn,{label:"Анонимные посещения профилей",checked:(null==fn||null===(i=fn.privacy)||void 0===i?void 0:i.anonymous_visits)||!1,onChange:function(n){var e=Fd(Fd({},fn),{},{privacy:Fd(Fd({},null==fn?void 0:fn.privacy),{},{anonymous_visits:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Показывать статус онлайн",checked:!1!==(null==fn||null===(a=fn.privacy)||void 0===a?void 0:a.show_online_status),onChange:function(n){var e=Fd(Fd({},fn),{},{privacy:Fd(Fd({},null==fn?void 0:fn.privacy),{},{show_online_status:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Показывать время последнего посещения",checked:!1!==(null==fn||null===(s=fn.privacy)||void 0===s?void 0:s.show_last_seen),onChange:function(n){var e=Fd(Fd({},fn),{},{privacy:Fd(Fd({},null==fn?void 0:fn.privacy),{},{show_last_seen:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Разрешить сообщения от всех",checked:!1!==(null==fn||null===(d=fn.privacy)||void 0===d?void 0:d.allow_messages),onChange:function(n){var e=Fd(Fd({},fn),{},{privacy:Fd(Fd({},null==fn?void 0:fn.privacy),{},{allow_messages:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Разрешить подарки от всех",checked:!1!==(null==fn||null===(x=fn.privacy)||void 0===x?void 0:x.allow_gifts),onChange:function(n){var e=Fd(Fd({},fn),{},{privacy:Fd(Fd({},null==fn?void 0:fn.privacy),{},{allow_gifts:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Разрешить оценки профиля",checked:!1!==(null==fn||null===(g=fn.privacy)||void 0===g?void 0:g.allow_ratings),onChange:function(n){var e=Fd(Fd({},fn),{},{privacy:Fd(Fd({},null==fn?void 0:fn.privacy),{},{allow_ratings:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Разрешить комментарии",checked:!1!==(null==fn||null===(v=fn.privacy)||void 0===v?void 0:v.allow_comments),onChange:function(n){var e=Fd(Fd({},fn),{},{privacy:Fd(Fd({},null==fn?void 0:fn.privacy),{},{allow_comments:n.target.checked})});C.setQueryData(["privacySettings"],e)}})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Уведомления"}),(0,m.jsx)(Rn,{label:"Новые мэтчи",checked:!1!==(null==fn||null===(b=fn.notifications)||void 0===b?void 0:b.new_matches),onChange:function(n){var e=Fd(Fd({},fn),{},{notifications:Fd(Fd({},null==fn?void 0:fn.notifications),{},{new_matches:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Сообщения",checked:!1!==(null==fn||null===(j=fn.notifications)||void 0===j?void 0:j.messages),onChange:function(n){var e=Fd(Fd({},fn),{},{notifications:Fd(Fd({},null==fn?void 0:fn.notifications),{},{messages:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Лайки",checked:!1!==(null==fn||null===(y=fn.notifications)||void 0===y?void 0:y.likes),onChange:function(n){var e=Fd(Fd({},fn),{},{notifications:Fd(Fd({},null==fn?void 0:fn.notifications),{},{likes:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Подарки",checked:!1!==(null==fn||null===(w=fn.notifications)||void 0===w?void 0:w.gifts),onChange:function(n){var e=Fd(Fd({},fn),{},{notifications:Fd(Fd({},null==fn?void 0:fn.notifications),{},{gifts:n.target.checked})});C.setQueryData(["privacySettings"],e)}}),(0,m.jsx)(Rn,{label:"Посещения профиля",checked:!1!==(null==fn||null===(A=fn.notifications)||void 0===A?void 0:A.profile_visits),onChange:function(n){var e=Fd(Fd({},fn),{},{notifications:Fd(Fd({},null==fn?void 0:fn.notifications),{},{profile_visits:n.target.checked})});C.setQueryData(["privacySettings"],e)}})]}),(0,m.jsx)(Dr,{type:"submit",disabled:Kn.isLoading,children:Kn.isLoading?"Сохранение...":"Сохранить настройки"})]})]})})]})]}),$&&T&&(0,m.jsx)(Tr,{onClick:function(){return M(!1)},children:(0,m.jsxs)(Rr,{$maxWidth:"800px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"Просмотр фотографии"}),(0,m.jsx)($r,{$variant:"secondary",onClick:function(){return M(!1)},children:(0,m.jsx)(or,{})})]}),(0,m.jsx)("img",{src:"/uploads/".concat(T),alt:"Просмотр",style:{width:"100%",borderRadius:"15px",maxHeight:"70vh",objectFit:"contain"}})]})}),F&&(0,m.jsx)(Tr,{onClick:function(){return Q(!1)},children:(0,m.jsxs)(Rr,{$maxWidth:"600px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"Отправить подарок"}),(0,m.jsx)($r,{$variant:"secondary",onClick:function(){return Q(!1)},children:(0,m.jsx)(or,{})})]}),(0,m.jsx)(pu,{$columns:"repeat(auto-fit, minmax(120px, 1fr))",$gap:"15px",children:Object.entries(Hd).map(function(n){var e=(0,p.A)(n,2),t=e[0],r=e[1];return(0,m.jsxs)(xu,{$selected:V===t,onClick:function(){return X(t)},whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,m.jsx)("div",{className:"emoji",children:r.emoji}),(0,m.jsx)("div",{className:"name",children:r.name}),(0,m.jsxs)("div",{className:"cost",children:[r.cost," 🦊"]})]},t)})}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Сообщение (необязательно)"}),(0,m.jsx)(Or,{value:G,onChange:function(n){return J(n.target.value)},placeholder:"Добавьте личное сообщение к подарку...",$minHeight:"80px"})]}),(0,m.jsx)(Dr,{onClick:Jn,disabled:Yn.isLoading||!V,style:{width:"100%"},children:Yn.isLoading?"Отправляем...":"Отправить подарок"})]})}),en&&(0,m.jsx)(Tr,{onClick:function(){return tn(!1)},children:(0,m.jsxs)(Rr,{$maxWidth:"500px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"Отправить суперлайк"}),(0,m.jsx)($r,{$variant:"secondary",onClick:function(){return tn(!1)},children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Сообщение *"}),(0,m.jsx)(Or,{value:sn,onChange:function(n){return on(n.target.value)},placeholder:"Напишите сообщение для суперлайка...",$minHeight:"120px",required:!0})]}),(0,m.jsx)(Dr,{onClick:function(){sn.trim()?dn?Xn.mutate({targetUser:dn,message:sn?sn.trim():""}):l.Ay.error("Ошибка: не указан получатель суперлайка"):l.Ay.error("Введите сообщение для суперлайка")},disabled:Xn.isLoading||!sn.trim(),style:{width:"100%"},children:Xn.isLoading?"Отправляем...":"Отправить суперлайк"})]})}),jn&&(0,m.jsx)(dt,{isOpen:jn,onClose:function(){return yn(!1)},imageFile:kn,onCrop:function(n){var e=new FormData;e.append("avatar",n),Qn.mutate(e)},aspectRatio:1,minSize:100})]})};var zu,_u,Eu,Pu,Lu,Ou,Du,$u,Mu,Iu,Uu,Tu,Ru,Bu,Wu,Fu,Qu,qu,Hu,Vu,Xu,Yu,Ku,Gu=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M19 12H6m6-7l-7 7 7 7"})})},Ju=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66L9.64 16.2a2 2 0 0 1-2.83-2.83l8.49-8.49"})})},Zu=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,m.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,m.jsx)("circle",{cx:"5",cy:"12",r:"1"})]})},np=(0,d.Ay)(jr)(zu||(zu=(0,a.A)(["\n  display: flex;\n  height: 100vh;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  padding: 0;\n  overflow: hidden;\n"]))),ep=d.Ay.div(_u||(_u=(0,a.A)(["\n  width: 400px;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  border-right: 1px solid rgba(255, 255, 255, 0.2);\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  \n  @media (max-width: 768px) {\n    width: ",";\n    position: ",";\n    left: ",";\n    transition: all 0.3s ease;\n    z-index: 10;\n  }\n"])),function(n){return n.$selectedChat?"0":"100%"},function(n){return n.$selectedChat?"absolute":"relative"},function(n){return n.$selectedChat?"-100%":"0"}),tp=d.Ay.div(Eu||(Eu=(0,a.A)(["\n  padding: 30px 25px;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  color: white;\n  text-align: center;\n  \n  h3 {\n    margin: 0 0 8px 0;\n    font-size: 28px;\n    font-weight: 700;\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n  \n  p {\n    margin: 0;\n    opacity: 0.9;\n    font-size: 16px;\n    font-weight: 300;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 25px 20px;\n    \n    h3 {\n      font-size: 24px;\n    }\n  }\n"]))),rp=d.Ay.div(Pu||(Pu=(0,a.A)(["\n  padding: 20px 25px;\n  background: rgba(255, 255, 255, 0.8);\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n"]))),ip=d.Ay.div(Lu||(Lu=(0,a.A)(['\n  position: relative;\n  \n  input {\n    width: 100%;\n    padding: 15px 50px 15px 20px;\n    border: 2px solid rgba(220, 53, 34, 0.2);\n    border-radius: 25px;\n    font-size: 16px;\n    background: white;\n    transition: all 0.3s ease;\n    \n    &:focus {\n      outline: none;\n      border-color: #dc3522;\n      box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n    }\n    \n    &::placeholder {\n      color: #a0aec0;\n    }\n  }\n  \n  /* Используем псевдоэлемент для иконки */\n  &::after {\n    content: "🔍";\n    position: absolute;\n    right: 18px;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #a0aec0;\n    font-size: 18px;\n    z-index: 2;\n    cursor: pointer;\n    pointer-events: none;\n  }\n']))),ap=d.Ay.div(Ou||(Ou=(0,a.A)(["\n  flex: 1;\n  overflow-y: auto;\n  background: white;\n  \n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #c1c1c1;\n    border-radius: 3px;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: #a8a8a8;\n  }\n"]))),sp=d.Ay.div(Du||(Du=(0,a.A)(["\n  padding: 20px 25px;\n  border-bottom: 1px solid #f7fafc;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  position: relative;\n  \n  &:hover {\n    background: linear-gradient(135deg, rgba(220, 53, 34, 0.05) 0%, rgba(255, 107, 88, 0.05) 100%);\n  }\n  \n  &.active {\n    background: linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%);\n    border-right: 4px solid #dc3522;\n  }\n  \n  .chat-info {\n    flex: 1;\n    min-width: 0;\n    \n    .name {\n      font-weight: 600;\n      margin-bottom: 6px;\n      color: #2d3748;\n      font-size: 16px;\n    }\n    \n    .last-message {\n      color: #718096;\n      font-size: 14px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      line-height: 1.4;\n      \n              .new-match-indicator {\n          color: #dc3522;\n          font-weight: 600;\n        }\n    }\n    \n    .time {\n      font-size: 12px;\n      color: #a0aec0;\n      margin-top: 4px;\n    }\n  }\n  \n  .unread-badge {\n    background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n    color: white;\n    border-radius: 12px;\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 12px;\n    font-weight: bold;\n    position: absolute;\n    top: 15px;\n    right: 20px;\n  }\n  \n  .new-match-badge {\n    background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);\n    color: white;\n    border-radius: 12px;\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 12px;\n    position: absolute;\n    top: 15px;\n    right: 20px;\n    animation: pulse 2s infinite;\n  }\n  \n  @keyframes pulse {\n    0% { transform: scale(1); }\n    50% { transform: scale(1.1); }\n    100% { transform: scale(1); }\n  }\n  \n  @media (max-width: 768px) {\n    padding: 15px 20px;\n    \n    .chat-info {\n      .name {\n        font-size: 15px;\n      }\n      \n      .last-message {\n        font-size: 13px;\n      }\n    }\n  }\n"]))),op=d.Ay.div($u||($u=(0,a.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20px);\n  \n  @media (max-width: 768px) {\n    width: ",";\n    position: ",";\n    right: ",";\n    transition: all 0.3s ease;\n  }\n"])),function(n){return n.$selectedChat?"100%":"0"},function(n){return n.$selectedChat?"relative":"absolute"},function(n){return n.$selectedChat?"0":"-100%"}),cp=d.Ay.div(Mu||(Mu=(0,a.A)(["\n  padding: 20px 30px;\n  background: white;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n  \n  .back-button {\n    @media (min-width: 769px) {\n      display: none;\n    }\n  }\n  \n  .user-info {\n    flex: 1;\n    \n    .name {\n      font-weight: 600;\n      color: #2d3748;\n      font-size: 18px;\n      margin-bottom: 2px;\n    }\n    \n    .status {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      font-size: 14px;\n      color: #718096;\n      \n      .online-dot {\n        width: 8px;\n        height: 8px;\n        background: #48bb78;\n        border-radius: 50%;\n        animation: pulse 2s infinite;\n      }\n    }\n  }\n"]))),lp=d.Ay.div(Iu||(Iu=(0,a.A)(["\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);\n  \n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  &::-webkit-scrollbar-track {\n    background: #f1f1f1;\n  }\n  \n  &::-webkit-scrollbar-thumb {\n    background: #c1c1c1;\n    border-radius: 3px;\n  }\n  \n  &::-webkit-scrollbar-thumb:hover {\n    background: #a8a8a8;\n  }\n"]))),dp=d.Ay.div(Uu||(Uu=(0,a.A)(["\n  display: flex;\n  justify-content: ",";\n  margin-bottom: 20px;\n"])),function(n){return n.$isOwn?"flex-end":"flex-start"}),up=d.Ay.div(Tu||(Tu=(0,a.A)(["\n  max-width: 70%;\n  padding: 15px 20px;\n  border-radius: 20px;\n  background: ",";\n  color: ",";\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);\n  position: relative;\n  \n  .message-text {\n    font-size: 16px;\n    line-height: 1.5;\n    margin-bottom: 8px;\n  }\n  \n  .message-file {\n    margin-top: 10px;\n    \n    img {\n      border-radius: 10px;\n      max-width: 100%;\n      height: auto;\n    }\n  }\n  \n  .message-time {\n    font-size: 12px;\n    opacity: 0.7;\n    text-align: right;\n    margin-top: 5px;\n  }\n  \n  @media (max-width: 768px) {\n    max-width: 85%;\n    padding: 12px 16px;\n    \n    .message-text {\n      font-size: 15px;\n    }\n  }\n"])),function(n){return n.$isOwn?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"white"},function(n){return n.$isOwn?"white":"#2d3748"}),pp=d.Ay.div(Ru||(Ru=(0,a.A)(["\n  padding: 15px 20px;\n  background: white;\n  border-radius: 20px;\n  color: #718096;\n  font-style: italic;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n"]))),xp=d.Ay.div(Bu||(Bu=(0,a.A)(["\n  padding: 20px 30px;\n  background: white;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n  opacity: ",";\n  pointer-events: ",";\n"])),function(n){return n.$disabled?.5:1},function(n){return n.$disabled?"none":"auto"}),hp=d.Ay.div(Wu||(Wu=(0,a.A)(["\n  display: flex;\n  align-items: flex-end;\n  gap: 12px;\n  background: #f7fafc;\n  border-radius: 25px;\n  padding: 8px;\n  border: 2px solid transparent;\n  transition: all 0.3s ease;\n  \n  &:focus-within {\n    border-color: #dc3522;\n    box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n  }\n"]))),fp=d.Ay.div(Fu||(Fu=(0,a.A)(["\n  flex: 1;\n"]))),mp=d.Ay.textarea(Qu||(Qu=(0,a.A)(["\n  width: 100%;\n  min-height: 20px;\n  max-height: 120px;\n  padding: 12px 16px;\n  border: none;\n  background: transparent;\n  font-size: 16px;\n  resize: none;\n  outline: none;\n  font-family: inherit;\n  \n  &::placeholder {\n    color: #a0aec0;\n  }\n"]))),gp=d.Ay.button(qu||(qu=(0,a.A)(["\n  width: 40px;\n  height: 40px;\n  border: none;\n  border-radius: 50%;\n  background: ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover:not(:disabled) {\n    transform: scale(1.1);\n    box-shadow: 0 4px 15px rgba(220, 53, 34, 0.3);\n  }\n  \n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"])),function(n){return n.$primary?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"rgba(220, 53, 34, 0.1)"},function(n){return n.$primary?"white":"#dc3522"}),vp=d.Ay.input(Hu||(Hu=(0,a.A)(["\n  display: none;\n"]))),bp=d.Ay.div(Vu||(Vu=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  color: #718096;\n  padding: 40px 20px;\n  min-height: 400px;\n  \n  .content {\n    max-width: 400px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    \n    .icon {\n      font-size: 80px;\n      margin-bottom: 74px; /* Увеличиваем с 54px до 74px - поднимаем эмодзи еще на 20px выше */\n      opacity: 0.7;\n      line-height: 1;\n      display: block;\n      text-align: center;\n      width: 100%;\n      transform: translateX(-2px);\n    }\n    \n    h3 {\n      font-size: 28px;\n      font-weight: 700;\n      color: #2d3748;\n      margin: 0 0 16px 0;\n      line-height: 1.2;\n      text-align: center;\n      width: 100%;\n    }\n    \n    p {\n      font-size: 16px;\n      line-height: 1.6;\n      margin: 0;\n      max-width: 320px;\n      margin-left: auto;\n      margin-right: auto;\n    }\n  }\n  \n  @media (max-width: 768px) {\n    min-height: 300px;\n    padding: 30px 16px;\n    \n    .content {\n      .icon {\n        font-size: 64px;\n        margin-bottom: 70px; /* Увеличиваем с 50px до 70px */\n        transform: translateX(-1px);\n      }\n      \n      h3 {\n        font-size: 24px;\n        margin-bottom: 14px;\n      }\n      \n      p {\n        font-size: 15px;\n        max-width: 280px;\n      }\n    }\n  }\n  \n  @media (max-width: 480px) {\n    min-height: 250px;\n    padding: 25px 12px;\n    \n    .content {\n      .icon {\n        font-size: 56px;\n        margin-bottom: 68px; /* Увеличиваем с 48px до 68px */\n        transform: translateX(-1px);\n      }\n      \n      h3 {\n        font-size: 22px;\n        margin-bottom: 12px;\n      }\n      \n      p {\n        font-size: 14px;\n        max-width: 260px;\n      }\n    }\n  }\n"]))),jp=d.Ay.div(Xu||(Xu=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  color: #e53e3e;\n  padding: 40px 20px;\n  \n  p {\n    font-size: 18px;\n    margin-bottom: 20px;\n  }\n  \n      button {\n      padding: 12px 24px;\n      background: #dc3522;\n      color: white;\n      border: none;\n      border-radius: 8px;\n      cursor: pointer;\n      font-size: 16px;\n      \n      &:hover {\n        background: #b8291e;\n      }\n    }\n"]))),yp=d.Ay.div(Yu||(Yu=(0,a.A)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 40px 20px;\n  \n  .welcome-content {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 20px;\n    max-width: 500px;\n  }\n  \n  .match-icon {\n    font-size: 80px;\n    animation: bounce 2s infinite;\n  }\n  \n  @keyframes bounce {\n    0%, 20%, 50%, 80%, 100% {\n      transform: translateY(0);\n    }\n    40% {\n      transform: translateY(-10px);\n    }\n    60% {\n      transform: translateY(-5px);\n    }\n  }\n  \n      h3 {\n      font-size: 32px;\n      font-weight: 700;\n      color: #2d3748;\n      margin: 0;\n      background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n      -webkit-background-clip: text;\n      -webkit-text-fill-color: transparent;\n      background-clip: text;\n    }\n  \n  p {\n    font-size: 18px;\n    color: #718096;\n    margin: 0;\n  }\n  \n  .subtitle {\n    font-size: 16px;\n    color: #a0aec0;\n  }\n  \n  .suggestions {\n    margin-top: 30px;\n    width: 100%;\n    \n    h4 {\n      font-size: 18px;\n      font-weight: 600;\n      color: #2d3748;\n      margin: 0 0 20px 0;\n    }\n  }\n  \n  .suggestion-buttons {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  }\n  \n  .suggestion-btn {\n    padding: 15px 20px;\n    background: white;\n    border: 2px solid rgba(102, 126, 234, 0.2);\n    border-radius: 15px;\n    font-size: 15px;\n    color: #2d3748;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    \n    &:hover {\n      background: rgba(102, 126, 234, 0.05);\n      border-color: #667eea;\n      transform: translateY(-2px);\n      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);\n    }\n  }\n  \n  @media (max-width: 768px) {\n    padding: 30px 20px;\n    \n    .match-icon {\n      font-size: 60px;\n    }\n    \n    h3 {\n      font-size: 24px;\n    }\n    \n    p {\n      font-size: 16px;\n    }\n    \n    .subtitle {\n      font-size: 14px;\n    }\n    \n    .suggestion-btn {\n      padding: 12px 16px;\n      font-size: 14px;\n    }\n  }\n"]))),wp=d.Ay.div(Ku||(Ku=(0,a.A)(["\n  padding: 15px 20px;\n  margin: 0 20px 20px 20px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 14px;\n  font-weight: 500;\n  \n  background: ",";\n  color: white;\n  \n  .icon {\n    font-size: 16px;\n  }\n  \n  .message {\n    flex: 1;\n  }\n"])),function(n){switch(n.$status){case"match":return"linear-gradient(135deg, #48bb78 0%, #38a169 100%)";case"liked":return"linear-gradient(135deg, #ed8936 0%, #dd6b20 100%)";case"liked_by":return"linear-gradient(135deg, #e53e3e 0%, #c53030 100%)";default:return"linear-gradient(135deg, #a0aec0 0%, #718096 100%)"}});const Ap=function(){var n,e,t,i,a,s,d,u,x=(0,o.g)().username,h=(0,o.Zp)(),g=(0,r.useState)(x||null),v=(0,p.A)(g,2),b=v[0],j=v[1],y=(0,r.useState)(""),w=(0,p.A)(y,2),A=w[0],k=w[1],N=(0,r.useState)(!1),S=(0,p.A)(N,2),C=S[0],z=(S[1],(0,r.useState)("")),_=(0,p.A)(z,2),E=_[0],P=_[1],L=(0,r.useState)(null),O=(0,p.A)(L,2),D=O[0],$=O[1],M=(0,r.useRef)(null),I=(0,r.useRef)(null),U=(0,c.useQueryClient)(),T=(0,r.useRef)(null),R=f.apiUtils.getCurrentUser(),B=(0,c.useQuery)("conversations",function(){return f.chatAPI.getConversations(50,0)},{refetchInterval:5e3,refetchOnWindowFocus:!1,staleTime:3e3,onError:function(n){console.error("Ошибка при получении списка чатов:",n),l.Ay.error("Не удалось загрузить список чатов")}}),W=B.data,F=void 0===W?[]:W,Q=B.error,q=B.isLoading,H=null==F||null===(n=F.conversations)||void 0===n?void 0:n.find(function(n){return n.companion===x}),V=!x||H||q?null:{companion:x,last_message:null,last_message_date:null,last_message_by:null,unread_count:0,has_images:!1,companion_info:{login:x,ava:"no_photo.jpg",status:"Новый мэтч",online:null,viptype:"FREE"}},X=!x||q||null!=F&&F.conversations&&0!==F.conversations.length?null:{companion:x,last_message:null,last_message_date:null,last_message_by:null,unread_count:0,has_images:!1,companion_info:{login:x,ava:"no_photo.jpg",status:"Новый мэтч",online:null,viptype:"FREE"}},Y=V||X?[V||X].concat((0,pa.A)((null==F?void 0:F.conversations)||[])):(null==F?void 0:F.conversations)||[];(0,r.useEffect)(function(){console.log("Chat Debug:",{chatId:x,chats:null==F?void 0:F.conversations,existingChat:H,virtualChat:V,forceVirtualChat:X,allChats:Y,selectedChat:b,lastSelectedChatRef:T.current,chatsLoading:q,userInfo:en,timestamp:(new Date).toISOString()})},[x,null==F?void 0:F.conversations,b,q,en]);var K=(0,c.useQuery)(["messages",b],function(){return f.chatAPI.getMessages(b,100,0)},{enabled:!!b&&!q,refetchInterval:2e3,refetchOnWindowFocus:!1,staleTime:1e3,onError:function(n){console.error("Ошибка при получении сообщений:",n),l.Ay.error("Не удалось загрузить сообщения")},onSuccess:function(n){null!=n&&n.match_status&&$(n.match_status)}}),G=K.data,J=void 0===G?[]:G,Z=K.error,nn=K.isLoading,en=((0,c.useQuery)(["match-status",b],function(){return f.chatAPI.getMatchStatus(b)},{enabled:!!b&&!q,refetchOnWindowFocus:!1,staleTime:3e4,onError:function(n){console.error("Ошибка при получении статуса мэтча:",n)},onSuccess:function(n){n&&$(n)}}).data,(0,c.useQuery)(["user-info",x],function(){return f.apiUtils.getUserInfo(x)},{enabled:!!x&&!!V&&!q,refetchOnWindowFocus:!1,staleTime:6e4,onError:function(n){console.error("Ошибка при получении информации о пользователе:",n)}}).data);(0,r.useEffect)(function(){var n,e,t;V&&en&&en.login&&!q&&((null===(n=V.companion_info)||void 0===n?void 0:n.login)===en.login&&(null===(e=V.companion_info)||void 0===e?void 0:e.ava)===en.ava&&(null===(t=V.companion_info)||void 0===t?void 0:t.status)===en.status||(V.companion_info={login:en.login,ava:en.ava||"no_photo.jpg",status:en.status||"Новый мэтч",online:en.online,viptype:en.viptype||"FREE"}))},[V,en,q]);var tn=(0,c.useMutation)(f.chatAPI.sendMessage,{onSuccess:function(n){k(""),U.invalidateQueries(["messages",b]),U.invalidateQueries("conversations"),null!=n&&n.match_warning&&l.Ay.warning(n.match_warning)},onError:function(n){var e,t,r;console.error("Ошибка отправки сообщения:",n),"no_match"===(null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.error)?l.Ay.error("Для отправки сообщений нужен взаимный лайк! 💕"):404===(null===(t=n.response)||void 0===t?void 0:t.status)?l.Ay.error("Пользователь не найден или чат недоступен"):403===(null===(r=n.response)||void 0===r?void 0:r.status)?l.Ay.error("У вас нет прав для отправки сообщений в этот чат"):l.Ay.error(f.apiUtils.handleError(n)||"Ошибка отправки сообщения")}}),rn=(0,c.useMutation)(f.chatAPI.sendMessage,{onSuccess:function(){U.invalidateQueries(["messages",b]),U.invalidateQueries("conversations"),l.Ay.success("Файл успешно отправлен")},onError:function(n){var e,t;console.error("Ошибка отправки файла:",n),"no_match"===(null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.error)?l.Ay.error("Для отправки файлов нужен взаимный лайк! 💕"):413===(null===(t=n.response)||void 0===t?void 0:t.status)?l.Ay.error("Файл слишком большой"):l.Ay.error(f.apiUtils.handleError(n)||"Ошибка отправки файла")}});(0,r.useEffect)(function(){x&&x!==b&&x!==T.current&&!q&&(T.current=x,j(x))},[x,q]),(0,r.useEffect)(function(){!V&&!X||b||!x||x===T.current||q||(T.current=x,j(x))},[V,X,x,q]),(0,r.useEffect)(function(){var n;null===(n=M.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})},[J]),(0,r.useEffect)(function(){return function(){T.current=null}},[]);var an=Y.filter(function(n){return n.companion.toLowerCase().includes(E.toLowerCase())}),sn=function(n){n===b||n===T.current||q||(T.current=n,j(n),n!==x&&h("/chat/".concat(n)))},on=function(){if(A.trim()&&b){if(D&&!D.canChat&&"unknown"!==D.status)return void l.Ay.error("".concat(D.message," ").concat(D.icon));var n=new FormData;n.append("to_user",b),n.append("message",A.trim()),tn.mutate(n)}},cn=function(n){return new Date(n).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})},ln=Y.find(function(n){return n.companion===b});return(0,m.jsxs)(np,{children:[(0,m.jsxs)(ep,{$selectedChat:b,children:[(0,m.jsxs)(tp,{children:[(0,m.jsx)("h3",{children:"Сообщения"}),(0,m.jsx)("p",{children:"Найдите интересных собеседников"})]}),(0,m.jsx)(rp,{children:(0,m.jsx)(ip,{children:(0,m.jsx)("input",{type:"text",placeholder:"Поиск чатов...",value:E,onChange:function(n){return P(n.target.value)}})})}),(0,m.jsx)(ap,{children:Q?(0,m.jsxs)(jp,{children:[(0,m.jsx)("p",{children:"Ошибка загрузки чатов"}),(0,m.jsx)("button",{onClick:function(){return window.location.reload()},children:"Попробовать снова"})]}):q?(0,m.jsx)(bp,{children:(0,m.jsx)("p",{children:"Загрузка чатов..."})}):an.length>0||X?(0,m.jsxs)(m.Fragment,{children:[X&&!an.find(function(n){return n.companion===X.companion})&&(0,m.jsxs)(sp,{className:b===X.companion?"active":"",onClick:function(){return sn(X.companion)},children:[(0,m.jsx)(Ur,{$src:null!==(e=X.companion_info)&&void 0!==e&&e.ava?"/uploads/".concat(X.companion_info.ava):"",$size:"50px",$fontSize:"20px",$online:null===(t=X.companion_info)||void 0===t?void 0:t.online,children:!(null!==(i=X.companion_info)&&void 0!==i&&i.ava)&&X.companion.charAt(0).toUpperCase()}),(0,m.jsxs)("div",{className:"chat-info",children:[(0,m.jsxs)("div",{className:"name",children:["@",X.companion]}),(0,m.jsx)("div",{className:"last-message",children:(0,m.jsx)("span",{className:"new-match-indicator",children:"💕 Новый мэтч - начните общение"})}),(0,m.jsx)("div",{className:"time",children:"Сейчас"})]}),(0,m.jsx)("div",{className:"new-match-badge",children:"💕"})]},X.companion),an.map(function(n){var e,t,r;return(0,m.jsxs)(sp,{className:b===n.companion?"active":"",onClick:function(){return sn(n.companion)},children:[(0,m.jsx)(Ur,{$src:null!==(e=n.companion_info)&&void 0!==e&&e.ava?"/uploads/".concat(n.companion_info.ava):"",$size:"50px",$fontSize:"20px",$online:null===(t=n.companion_info)||void 0===t?void 0:t.online,children:!(null!==(r=n.companion_info)&&void 0!==r&&r.ava)&&n.companion.charAt(0).toUpperCase()}),(0,m.jsxs)("div",{className:"chat-info",children:[(0,m.jsxs)("div",{className:"name",children:["@",n.companion]}),(0,m.jsx)("div",{className:"last-message",children:n.last_message?n.last_message:(0,m.jsx)("span",{className:"new-match-indicator",children:"💕 Новый мэтч - начните общение"})}),(0,m.jsx)("div",{className:"time",children:n.last_message_date?cn(n.last_message_date):"Сейчас"})]}),n.unread_count>0?(0,m.jsx)("div",{className:"unread-badge",children:n.unread_count}):!n.last_message&&(0,m.jsx)("div",{className:"new-match-badge",children:"💕"})]},n.companion)})]}):(0,m.jsxs)(bp,{children:[(0,m.jsx)("p",{children:"Нет активных чатов"}),(0,m.jsx)("p",{children:"Найдите интересных собеседников в каталоге"})]})})]}),(0,m.jsx)(op,{$selectedChat:b,children:b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(cp,{children:[(0,m.jsx)($r,{className:"back-button",$variant:"secondary",onClick:function(){j(null),h("/chat")},children:(0,m.jsx)(Gu,{})}),(0,m.jsx)(Ur,{$src:null!=ln&&null!==(a=ln.companion_info)&&void 0!==a&&a.ava?"/uploads/".concat(ln.companion_info.ava):"",$size:"45px",$fontSize:"18px",children:!(null!=ln&&null!==(s=ln.companion_info)&&void 0!==s&&s.ava)&&b.charAt(0).toUpperCase()}),(0,m.jsxs)("div",{className:"user-info",children:[(0,m.jsxs)("div",{className:"name",children:["@",b]}),(0,m.jsxs)("div",{className:"status",children:[(null==ln||null===(d=ln.companion_info)||void 0===d?void 0:d.online)&&(0,m.jsx)("div",{className:"online-dot"}),null!=ln&&null!==(u=ln.companion_info)&&void 0!==u&&u.online?"онлайн":"не в сети"]})]}),(0,m.jsx)($r,{$variant:"secondary",children:(0,m.jsx)(Zu,{})})]}),D&&"unknown"!==D.status&&(0,m.jsxs)(wp,{$status:D.status,children:[(0,m.jsx)("span",{className:"icon",children:D.icon}),(0,m.jsx)("span",{className:"message",children:D.message})]}),(0,m.jsxs)(lp,{children:[Z?(0,m.jsxs)(jp,{children:[(0,m.jsx)("p",{children:"Ошибка загрузки сообщений"}),(0,m.jsx)("button",{onClick:function(){return window.location.reload()},children:"Попробовать снова"})]}):nn?(0,m.jsx)(bp,{children:(0,m.jsx)("p",{children:"Загрузка сообщений..."})}):((null==J?void 0:J.messages)||[]).length>0?((null==J?void 0:J.messages)||[]).map(function(n,e){var t=n.by_user===R.login,r=J.messages[e-1];return!r||r.by_user!==n.by_user||(new Date(n.date),new Date(r.date)),(0,m.jsx)(dp,{$isOwn:t,children:(0,m.jsxs)(up,{$isOwn:t,children:[n.message&&(0,m.jsx)("div",{className:"message-text",children:n.message}),n.images&&Array.isArray(n.images)&&n.images.length>0&&(0,m.jsx)("div",{className:"message-file",children:n.images.map(function(n,e){return(0,m.jsx)("img",{src:"/uploads/".concat(n),alt:"Вложение",style:{margin:"2px",maxWidth:"250px"}},e)})}),(0,m.jsx)("div",{className:"message-time",children:cn(n.date)})]})},n.id)}):(0,m.jsx)(yp,{children:(0,m.jsxs)("div",{className:"welcome-content",children:[(0,m.jsx)("div",{className:"match-icon",children:"💕"}),(0,m.jsx)("h3",{children:"Взаимная симпатия!"}),(0,m.jsxs)("p",{children:["У вас совпадение с @",b]}),(0,m.jsx)("p",{className:"subtitle",children:"Начните общение первым сообщением"}),(0,m.jsxs)("div",{className:"suggestions",children:[(0,m.jsx)("h4",{children:"Идеи для первого сообщения:"}),(0,m.jsxs)("div",{className:"suggestion-buttons",children:[(0,m.jsx)("button",{className:"suggestion-btn",onClick:function(){return k("Привет! Рад нашему совпадению 😊")},children:"Привет! Рад нашему совпадению 😊"}),(0,m.jsx)("button",{className:"suggestion-btn",onClick:function(){return k("Привет! Как дела?")},children:"Привет! Как дела?"}),(0,m.jsx)("button",{className:"suggestion-btn",onClick:function(){return k("Привет! Интересно познакомиться поближе")},children:"Интересно познакомиться поближе"}),(0,m.jsx)("button",{className:"suggestion-btn",onClick:function(){return k("Привет! Что планируешь на выходные?")},children:"Что планируешь на выходные?"})]})]})]})}),C&&(0,m.jsxs)(pp,{children:["@",b," печатает..."]}),(0,m.jsx)("div",{ref:M})]}),(0,m.jsx)(xp,{$disabled:D&&!D.canChat&&"unknown"!==D.status,children:(0,m.jsxs)(hp,{children:[(0,m.jsx)(fp,{children:(0,m.jsx)(mp,{value:A,onChange:function(n){return k(n.target.value)},onKeyPress:function(n){"Enter"!==n.key||n.shiftKey||(n.preventDefault(),on())},placeholder:"Напишите сообщение...",rows:1})}),(0,m.jsx)(gp,{className:"attach",onClick:function(){var n;return null===(n=I.current)||void 0===n?void 0:n.click()},children:(0,m.jsx)(Ju,{})}),(0,m.jsx)(gp,{onClick:on,disabled:!A.trim()||tn.isLoading||D&&!D.canChat&&"unknown"!==D.status,children:(0,m.jsx)(ir,{})}),(0,m.jsx)(vp,{ref:I,type:"file",onChange:function(n){var e=n.target.files[0];if(e&&b){if(D&&!D.canChat&&"unknown"!==D.status)return void l.Ay.error("".concat(D.message," ").concat(D.icon));var t=new FormData;t.append("images",e),t.append("to_user",b),rn.mutate(t)}}})]})})]}):(0,m.jsx)(bp,{children:(0,m.jsxs)("div",{className:"content",children:[(0,m.jsx)("div",{className:"icon",children:"💬"}),(0,m.jsx)("h3",{children:"Выберите чат"}),(0,m.jsx)("p",{children:"Выберите диалог из списка, чтобы начать общение, или найдите нового собеседника"})]})})})]})};var kp,Np,Sp,Cp,zp,_p,Ep,Pp,Lp,Op,Dp,$p,Mp,Ip,Up,Tp,Rp,Bp,Wp;function Fp(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Qp(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Fp(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fp(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var qp=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46 22,3"})})},Hp=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,m.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,m.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,m.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})},Vp=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,m.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},Xp=(0,d.Ay)(jr)(kp||(kp=(0,a.A)(["\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n"]))),Yp=d.Ay.div(Np||(Np=(0,a.A)(["\n  margin-bottom: 30px;\n"]))),Kp=d.Ay.div(Sp||(Sp=(0,a.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 15px;\n    align-items: stretch;\n  }\n"]))),Gp=d.Ay.h1(Cp||(Cp=(0,a.A)(["\n  margin: 0;\n  font-size: 32px;\n  font-weight: 700;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n  \n  @media (max-width: 768px) {\n    font-size: 28px;\n    text-align: center;\n  }\n"]))),Jp=(0,d.Ay)(yr)(zp||(zp=(0,a.A)(["\n  margin-bottom: 30px;\n  padding: 25px;\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n  }\n"]))),Zp=d.Ay.h3(_p||(_p=(0,a.A)(["\n  margin: 0 0 20px 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  color: #2d3748;\n  font-size: 18px;\n  font-weight: 600;\n  \n  @media (max-width: 768px) {\n    font-size: 16px;\n  }\n"]))),nx=(0,d.Ay)(Fr)(Ep||(Ep=(0,a.A)(["\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 20px;\n  \n  @media (max-width: 576px) {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n"]))),ex=(d.Ay.div(Pp||(Pp=(0,a.A)(["\n  position: relative;\n  \n  input {\n    padding-left: 45px;\n  }\n  \n  .search-icon {\n    position: absolute;\n    left: 15px;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #a0aec0;\n    z-index: 1;\n  }\n"]))),(0,d.Ay)(Fr)(Lp||(Lp=(0,a.A)(["\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  gap: 25px;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 20px;\n  }\n  \n  @media (max-width: 576px) {\n    grid-template-columns: 1fr;\n    gap: 15px;\n  }\n"])))),tx=(0,d.Ay)(Ir)(Op||(Op=(0,a.A)(["\n  overflow: hidden;\n  transition: all 0.3s ease;\n  border: 2px solid transparent;\n  \n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);\n    border-color: #dc3522;\n  }\n"]))),rx=d.Ay.div(Dp||(Dp=(0,a.A)(["\n  width: 100%;\n  height: 200px;\n  background-image: url(",");\n  background-size: cover;\n  background-position: center;\n  background-color: #f7fafc;\n  position: relative;\n  \n  ","\n"])),function(n){return n.$src},function(n){return!n.$src&&"\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%);\n    color: #a0aec0;\n    font-size: 48px;\n  "}),ix=d.Ay.div($p||($p=(0,a.A)(["\n  position: absolute;\n  top: 15px;\n  left: 15px;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  color: white;\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  box-shadow: 0 4px 15px rgba(220, 53, 34, 0.3);\n"]))),ax=d.Ay.div(Mp||(Mp=(0,a.A)(["\n  padding: 25px;\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n  }\n"]))),sx=d.Ay.div(Ip||(Ip=(0,a.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  \n  .author {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    font-weight: 600;\n    color: #dc3522;\n    font-size: 14px;\n  }\n  \n  .date {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 12px;\n    color: #718096;\n  }\n"]))),ox=d.Ay.h3(Up||(Up=(0,a.A)(["\n  margin: 0 0 12px 0;\n  color: #2d3748;\n  font-size: 20px;\n  font-weight: 700;\n  line-height: 1.3;\n  \n  @media (max-width: 768px) {\n    font-size: 18px;\n  }\n"]))),cx=d.Ay.p(Tp||(Tp=(0,a.A)(["\n  color: #4a5568;\n  margin: 0 0 20px 0;\n  font-size: 15px;\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  \n  @media (max-width: 768px) {\n    font-size: 14px;\n    -webkit-line-clamp: 2;\n  }\n"]))),lx=(0,d.Ay)(Wr)(Rp||(Rp=(0,a.A)(["\n  gap: 10px;\n  \n  .contact-btn {\n    flex: 1;\n  }\n  \n  @media (max-width: 576px) {\n    flex-direction: column;\n    \n    .contact-btn {\n      width: 100%;\n    }\n  }\n"]))),dx=d.Ay.div(Bp||(Bp=(0,a.A)(["\n  text-align: center;\n  color: #718096;\n  padding: 80px 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px; /* Добавляем как в других компонентах */\n  \n  .icon {\n    font-size: 72px; /* Увеличиваем с 64px до 72px */\n    margin-bottom: 54px; /* Увеличиваем с 20px до 54px для поднятия эмодзи на 30px */\n    opacity: 0.7; /* Увеличиваем с 0.5 до 0.7 */\n    line-height: 1;\n    display: block;\n    text-align: center;\n    width: 100%;\n    transform: translateX(-2px); /* Компенсация для визуального центра эмодзи */\n  }\n  \n  h3 {\n    margin: 0 0 16px 0; /* Увеличиваем с 15px до 16px */\n    font-size: 28px; /* Увеличиваем с 24px до 28px */\n    color: #2d3748;\n    font-weight: 700; /* Добавляем font-weight */\n    line-height: 1.2;\n    text-align: center;\n    width: 100%;\n  }\n  \n  p {\n    margin: 0 0 30px 0;\n    font-size: 16px;\n    line-height: 1.6;\n    max-width: 400px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  \n  @media (max-width: 768px) {\n    min-height: 300px;\n    padding: 60px 20px;\n    \n    .icon {\n      font-size: 56px; /* Увеличиваем с 48px до 56px */\n      margin-bottom: 50px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 24px; /* Увеличиваем с 20px до 24px */\n      margin-bottom: 14px;\n    }\n    \n    p {\n      font-size: 15px;\n      max-width: 350px;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    min-height: 250px;\n    padding: 40px 16px;\n    \n    .icon {\n      font-size: 48px;\n      margin-bottom: 48px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 22px;\n      margin-bottom: 12px;\n    }\n    \n    p {\n      font-size: 14px;\n      max-width: 300px;\n    }\n  }\n"]))),ux=(0,d.Ay)(Ir)(Wp||(Wp=(0,a.A)(["\n  text-align: center;\n  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);\n  padding: 20px;\n  \n  .number {\n    font-size: 28px;\n    font-weight: 700;\n    color: #dc3522;\n    margin-bottom: 5px;\n  }\n  \n  .label {\n    font-size: 14px;\n    color: #718096;\n    font-weight: 500;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n    \n    .number {\n      font-size: 24px;\n    }\n    \n    .label {\n      font-size: 13px;\n    }\n  }\n"]))),px=function(n){var e=n.image,t=n.onImageChange,i=n.error,a=(0,r.useRef)(null),s=(0,r.useState)(e?"/uploads/".concat(e):null),o=(0,p.A)(s,2),c=o[0],l=o[1];return(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Изображение объявления"}),(0,m.jsx)("div",{style:{marginBottom:"10px"},children:c&&(0,m.jsxs)("div",{style:{position:"relative",display:"inline-block",marginBottom:"10px"},children:[(0,m.jsx)("img",{src:c,alt:"Превью",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"8px",border:"2px solid #e2e8f0"}}),(0,m.jsx)(Dr,{type:"button",$variant:"danger",$size:"small",onClick:function(){l(null),t(null),a.current&&(a.current.value="")},style:{position:"absolute",top:"-8px",right:"-8px",borderRadius:"50%",width:"24px",height:"24px",padding:"0",fontSize:"12px"},children:"×"})]})}),(0,m.jsx)("input",{ref:a,type:"file",accept:"image/*",onChange:function(n){var e=n.target.files[0];if(e){var r=new FileReader;r.onload=function(n){return l(n.target.result)},r.readAsDataURL(e),t(e)}},style:{display:"none"}}),(0,m.jsx)(Dr,{type:"button",$variant:"secondary",onClick:function(){var n;return null===(n=a.current)||void 0===n?void 0:n.click()},style:{width:"100%"},children:c?"Изменить изображение":"Выбрать изображение"}),i&&(0,m.jsx)(Mr,{children:i}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#718096",marginTop:"5px"},children:"Поддерживаемые форматы: JPEG, PNG, WebP. Максимальный размер: 5MB."})]})};const xx=function(){var n,e,t,i=(0,o.Zp)(),a=(0,r.useState)(!1),s=(0,p.A)(a,2),d=s[0],u=s[1],x=(0,r.useState)(null),h=(0,p.A)(x,2),g=h[0],v=h[1],b=(0,r.useState)(null),j=(0,p.A)(b,2),y=j[0],w=j[1],A=(0,r.useState)({type:"",country:"",city:""}),k=(0,p.A)(A,2),N=k[0],S=k[1],C=(0,c.useQueryClient)(),z=f.apiUtils.getCurrentUser(),_=(0,c.useQuery)(["club-ownership"],f.clubsAPI.checkClubOwnership,{retry:!1,onError:function(n){console.log("Club ownership check failed:",n.message)},onSuccess:function(n){console.log("Club ownership check successful:",n)}}).data,E=(0,Ua.mN)({defaultValues:{country:"",city:""}}),P=E.register,L=E.handleSubmit,O=E.watch,D=E.setValue,$=E.clearErrors,M=E.formState.errors,I=E.reset,U=(0,c.useQuery)(["ads",N],function(){return f.adsAPI.getAds(N)},{keepPreviousData:!0}),T=U.data,R=U.isLoading,B=(0,r.useMemo)(function(){return null!=T&&T.ads?T.ads.map(function(n){var e,t;return Qp(Qp({},n),{},{author:(null===(e=n.author)||void 0===e?void 0:e.login)||n.author,author_avatar:(null===(t=n.author)||void 0===t?void 0:t.ava)||null,title:n.title||n.description,created_at:n.created_at})}):[]},[T]),W=(0,c.useMutation)(f.adsAPI.createAd,{onSuccess:function(){l.Ay.success("Объявление создано!"),u(!1),I(),C.invalidateQueries("ads")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),F=(0,c.useMutation)(function(n){var e=n.id,t=n.data;return f.adsAPI.updateAd(e,t)},{onSuccess:function(){l.Ay.success("Объявление обновлено!"),u(!1),v(null),I(),C.invalidateQueries("ads")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),Q=(0,c.useMutation)(f.adsAPI.deleteAd,{onSuccess:function(){l.Ay.success("Объявление удалено!"),C.invalidateQueries("ads")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),q=function(){u(!1),v(null),w(null),I()},H=(0,r.useMemo)(function(){var n=[{value:"Встречи",label:"Встречи",icon:"👥"},{value:"Знакомства",label:"Знакомства",icon:"💕"},{value:"Вечеринки",label:"Вечеринки",icon:"🎉"},{value:"Общение",label:"Общение",icon:"💬"}];return null!=_&&_.hasActiveClub&&n.push({value:"Мероприятия",label:"Мероприятия",icon:"🎪"}),n.push({value:"Все",label:"Все",icon:"📋"}),n},[_]),V=function(n){var e;return(null===(e=H.find(function(e){return e.value===n}))||void 0===e?void 0:e.label)||"Другое"},X={total:B.length,myAds:B.filter(function(n){return n.author===(null==z?void 0:z.login)}).length,parties:B.filter(function(n){return"Вечеринки"===n.type}).length,meetings:B.filter(function(n){return"Встречи"===n.type}).length};return R?(0,m.jsx)(Xp,{children:(0,m.jsx)(Qr,{})}):(0,m.jsxs)(Xp,{children:[(0,m.jsxs)(yr,{$maxWidth:"1200px",children:[(0,m.jsxs)(Yp,{children:[(0,m.jsxs)(Kp,{children:[(0,m.jsx)(Gp,{children:"Объявления"}),(0,m.jsxs)(Dr,{onClick:function(){return u(!0)},children:[(0,m.jsx)(cr,{}),"Создать объявление"]})]}),(0,m.jsxs)(Fr,{$columns:"repeat(auto-fit, minmax(120px, 1fr))",$gap:"15px",style:{marginBottom:"20px"},children:[(0,m.jsxs)(ux,{children:[(0,m.jsx)("div",{className:"number",children:X.total}),(0,m.jsx)("div",{className:"label",children:"Всего"})]}),(0,m.jsxs)(ux,{children:[(0,m.jsx)("div",{className:"number",children:X.myAds}),(0,m.jsx)("div",{className:"label",children:"Мои"})]}),(0,m.jsxs)(ux,{children:[(0,m.jsx)("div",{className:"number",children:X.parties}),(0,m.jsx)("div",{className:"label",children:"Вечеринки"})]}),(0,m.jsxs)(ux,{children:[(0,m.jsx)("div",{className:"number",children:X.meetings}),(0,m.jsx)("div",{className:"label",children:"Встречи"})]})]})]}),(0,m.jsxs)(Jp,{children:[(0,m.jsxs)(Zp,{children:[(0,m.jsx)(qp,{}),"Фильтры"]}),(0,m.jsxs)(nx,{children:[(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Тип объявления"}),(0,m.jsxs)(Lr,{value:N.type,onChange:function(n){return S(function(e){return Qp(Qp({},e),{},{type:n.target.value})})},children:[(0,m.jsx)("option",{value:"",children:"Все типы"}),H.map(function(n){return(0,m.jsxs)("option",{value:n.value,children:[n.icon," ",n.label]},n.value)})]})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Поиск по локации"}),(0,m.jsx)(vs,{countryValue:N.country,cityValue:N.city,onCountryChange:function(n){S(function(e){return Qp(Qp({},e),{},{country:n})}),N.city&&S(function(n){return Qp(Qp({},n),{},{city:""})})},onCityChange:function(n){S(function(e){return Qp(Qp({},e),{},{city:n})})},required:!1,showValidation:!1,layout:"side-by-side",countryPlaceholder:"Все страны",cityPlaceholder:"Все города"})]})]})]}),B.length>0?(0,m.jsx)(ex,{children:B.map(function(n){return(0,m.jsxs)(tx,{children:[(0,m.jsxs)(rx,{$src:n.image?"/uploads/".concat(n.image):"",children:[!n.image&&"📸",(0,m.jsxs)(ix,{children:[(t=n.type,(null===(r=H.find(function(n){return n.value===t}))||void 0===r?void 0:r.icon)||"📋")," ",V(n.type)]})]}),(0,m.jsxs)(ax,{children:[(0,m.jsxs)(sx,{children:[(0,m.jsxs)("div",{className:"author",children:[(0,m.jsx)(Ur,{$size:"24px",$fontSize:"12px",$src:n.author_avatar?"/uploads/".concat(n.author_avatar):"",children:!n.author_avatar&&n.author.charAt(0).toUpperCase()}),"@",n.author]}),(0,m.jsxs)("div",{className:"date",children:[(0,m.jsx)(Vp,{}),(e=n.created_at,new Date(e).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}))]})]}),(0,m.jsx)(ox,{children:n.title}),(0,m.jsx)(cx,{children:n.description}),(0,m.jsx)(lx,{children:n.author!==(null==z?void 0:z.login)?(0,m.jsxs)(Dr,{className:"contact-btn",onClick:function(){return e=n.author,void i("/chat/".concat(e));var e},children:[(0,m.jsx)(sr,{}),"Написать"]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Dr,{$variant:"secondary",onClick:function(){return function(n){v(n),w(null),I(n),u(!0)}(n)},style:{flex:1},children:[(0,m.jsx)(lr,{}),"Изменить"]}),(0,m.jsxs)(Dr,{$variant:"danger",onClick:function(){return e=n.id,void(window.confirm("Удалить объявление?")&&Q.mutate(e));var e},style:{flex:1},children:[(0,m.jsx)(Hp,{}),"Удалить"]})]})})]})]},n.id);var e,t,r})}):(0,m.jsxs)(dx,{children:[(0,m.jsx)("div",{className:"icon",children:"📢"}),(0,m.jsx)("h3",{children:"Объявлений пока нет"}),(0,m.jsx)("p",{children:N.type||N.city?"По вашим фильтрам ничего не найдено. Попробуйте изменить параметры поиска.":"Станьте первым, кто разместит объявление и найдет интересных людей!"}),!N.type&&!N.city&&(0,m.jsxs)(Dr,{onClick:function(){return u(!0)},children:[(0,m.jsx)(cr,{}),"Создать первое объявление"]})]})]}),d&&(0,m.jsx)(Tr,{onClick:q,children:(0,m.jsxs)(Rr,{$maxWidth:"600px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:g?"Редактировать объявление":"Новое объявление"}),(0,m.jsx)(Dr,{$variant:"secondary",$size:"small",onClick:q,children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)(Cr,{onSubmit:L(function(n){var e,t=!(e=y)||(e.size>5242880?"Размер файла не должен превышать 5MB":!!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)||"Поддерживаются только форматы: JPEG, PNG, WebP");if(!0===t){var r=Qp(Qp({},n),{},{image:y});g?F.mutate({id:g.id,data:r}):W.mutate(r)}else l.Ay.error(t)}),children:[(0,m.jsxs)(zr,{children:[(0,m.jsxs)(_r,{children:["Заголовок ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(Pr,Qp(Qp({},P("title",{required:"Заголовок обязателен",minLength:{value:5,message:"Заголовок должен содержать минимум 5 символов"},maxLength:{value:200,message:"Заголовок не должен превышать 200 символов"}})),{},{className:M.title?"error":"",placeholder:"Введите заголовок объявления"})),M.title&&(0,m.jsx)(Mr,{children:M.title.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsxs)(_r,{children:["Тип объявления ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsxs)(Lr,Qp(Qp({},P("type",{required:"Выберите тип"})),{},{className:M.type?"error":"",children:[(0,m.jsx)("option",{value:"",children:"Выберите тип"}),H.map(function(n){return(0,m.jsxs)("option",{value:n.value,children:[n.icon," ",n.label]},n.value)})]})),M.type&&(0,m.jsx)(Mr,{children:M.type.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsxs)(_r,{children:["Описание ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)(Or,Qp(Qp({},P("description",{required:"Описание обязательно",minLength:{value:20,message:"Описание должно содержать минимум 20 символов"},maxLength:{value:5e3,message:"Описание не должно превышать 5000 символов"}})),{},{className:M.description?"error":"",placeholder:"Подробно опишите ваше объявление...",$minHeight:"120px"})),M.description&&(0,m.jsx)(Mr,{children:M.description.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Цена (необязательно)"}),(0,m.jsx)(Pr,Qp(Qp({},P("price",{min:{value:0,message:"Цена не может быть отрицательной"},pattern:{value:/^\d+(\.\d{1,2})?$/,message:"Введите корректную цену (например: 100 или 100.50)"}})),{},{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:M.price?"error":""})),M.price&&(0,m.jsx)(Mr,{children:M.price.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Контактная информация (необязательно)"}),(0,m.jsx)(Or,Qp(Qp({},P("contact_info",{maxLength:{value:1e3,message:"Контактная информация не должна превышать 1000 символов"}})),{},{placeholder:"Телефон, email или другие способы связи...",$minHeight:"80px",className:M.contact_info?"error":""})),M.contact_info&&(0,m.jsx)(Mr,{children:M.contact_info.message})]}),(0,m.jsx)(vs,{countryValue:O("country"),cityValue:O("city"),onCountryChange:function(n){D("country",n),$("country"),O("city")&&(D("city",""),$("city"))},onCityChange:function(n){D("city",n),$("city")},countryError:null===(n=M.country)||void 0===n?void 0:n.message,cityError:null===(e=M.city)||void 0===e?void 0:e.message,required:!0,showValidation:!0,layout:"side-by-side"}),M.country&&(0,m.jsx)(Mr,{style:{marginTop:"-15px",marginBottom:"15px"},children:M.country.message}),M.city&&(0,m.jsx)(Mr,{style:{marginTop:"-15px",marginBottom:"15px"},children:M.city.message}),(0,m.jsx)("input",Qp({type:"hidden"},P("country",{required:"Страна обязательна"}))),(0,m.jsx)("input",Qp({type:"hidden"},P("city",{required:"Город обязателен"}))),(0,m.jsx)(px,{image:null==g?void 0:g.image,onImageChange:function(n){w(n)},error:null===(t=M.image)||void 0===t?void 0:t.message}),(0,m.jsxs)(Wr,{$gap:"15px",style:{marginTop:"30px"},children:[(0,m.jsx)(Dr,{type:"submit",disabled:W.isLoading||F.isLoading,style:{flex:1},children:g?F.isLoading?"Сохранение...":"Сохранить изменения":W.isLoading?"Создание...":"Создать объявление"}),(0,m.jsx)(Dr,{$variant:"secondary",type:"button",onClick:q,children:"Отмена"})]})]})]})})]})};var hx,fx,mx,gx,vx,bx,jx,yx,wx,Ax,kx,Nx,Sx,Cx,zx;function _x(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Ex(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?_x(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_x(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var Px=d.Ay.div(hx||(hx=(0,a.A)(["\n  min-height: 100vh;\n  background: ",";\n"])),function(n){return n.theme.colors.background}),Lx=d.Ay.div(fx||(fx=(0,a.A)(["\n  background: ",";\n  color: white;\n  padding: ",";\n  \n  h1 {\n    margin: 0;\n    font-size: ",";\n  }\n  \n  p {\n    margin: "," 0 0 0;\n    opacity: 0.9;\n  }\n"])),function(n){return n.theme.colors.primary},function(n){return n.theme.spacing.lg},function(n){return n.theme.fonts.sizes.xlarge},function(n){return n.theme.spacing.xs}),Ox=d.Ay.div(mx||(mx=(0,a.A)(["\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: ",";\n"])),function(n){return n.theme.spacing.lg}),Dx=d.Ay.div(gx||(gx=(0,a.A)(["\n  display: flex;\n  margin-bottom: ",";\n  background: white;\n  border-radius: ",";\n  overflow: hidden;\n  box-shadow: ",";\n"])),function(n){return n.theme.spacing.lg},function(n){return n.theme.borderRadius},function(n){return n.theme.shadow}),$x=d.Ay.button(vx||(vx=(0,a.A)(["\n  flex: 1;\n  padding: ",";\n  border: none;\n  background: none;\n  cursor: pointer;\n  font-weight: bold;\n  transition: all 0.2s ease;\n  \n  &.active {\n    background: ",";\n    color: white;\n  }\n  \n  &:hover:not(.active) {\n    background: ",";\n  }\n"])),function(n){return n.theme.spacing.md},function(n){return n.theme.colors.primary},function(n){return n.theme.colors.background}),Mx=d.Ay.div(bx||(bx=(0,a.A)(["\n  background: white;\n  border-radius: ",";\n  padding: ",";\n  box-shadow: ",";\n  margin-bottom: ",";\n"])),function(n){return n.theme.borderRadius},function(n){return n.theme.spacing.lg},function(n){return n.theme.shadow},function(n){return n.theme.spacing.lg}),Ix=d.Ay.h3(jx||(jx=(0,a.A)(["\n  margin: 0 0 "," 0;\n  color: ",";\n  font-size: ",";\n"])),function(n){return n.theme.spacing.md},function(n){return n.theme.colors.primary},function(n){return n.theme.fonts.sizes.large}),Ux=d.Ay.div(yx||(yx=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: ",";\n  margin-bottom: ",";\n"])),function(n){return n.theme.spacing.lg},function(n){return n.theme.spacing.lg}),Tx=d.Ay.div(wx||(wx=(0,a.A)(["\n  background: white;\n  border-radius: ",";\n  padding: ",";\n  box-shadow: ",";\n  text-align: center;\n  \n  .number {\n    font-size: 2rem;\n    font-weight: bold;\n    color: ",";\n    margin-bottom: ",";\n  }\n  \n  .label {\n    color: ",";\n    font-size: ",";\n  }\n"])),function(n){return n.theme.borderRadius},function(n){return n.theme.spacing.lg},function(n){return n.theme.shadow},function(n){return n.theme.colors.primary},function(n){return n.theme.spacing.xs},function(n){return n.theme.colors.textLight},function(n){return n.theme.fonts.sizes.small}),Rx=d.Ay.table(Ax||(Ax=(0,a.A)(["\n  width: 100%;\n  border-collapse: collapse;\n  \n  th, td {\n    text-align: left;\n    padding: ",";\n    border-bottom: 1px solid ",";\n  }\n  \n  th {\n    background: ",";\n    font-weight: bold;\n    color: ",";\n  }\n  \n  tr:hover {\n    background: ",";\n  }\n"])),function(n){return n.theme.spacing.sm},function(n){return n.theme.colors.border},function(n){return n.theme.colors.background},function(n){return n.theme.colors.text},function(n){return n.theme.colors.background}),Bx=d.Ay.button(kx||(kx=(0,a.A)(["\n  padding: "," ",";\n  border: none;\n  border-radius: ",";\n  cursor: pointer;\n  font-size: ",";\n  font-weight: bold;\n  transition: all 0.2s ease;\n  margin-right: ",";\n  \n  &.primary {\n    background: ",";\n    color: white;\n    \n    &:hover {\n      background: ",";\n    }\n  }\n  \n  &.danger {\n    background: ",";\n    color: white;\n    \n    &:hover {\n      background: #d32f2f;\n    }\n  }\n  \n  &.warning {\n    background: #ff9800;\n    color: white;\n    \n    &:hover {\n      background: #f57c00;\n    }\n  }\n  \n  &.success {\n    background: #4caf50;\n    color: white;\n    \n    &:hover {\n      background: #388e3c;\n    }\n  }\n  \n  &:disabled {\n    background: ",";\n    cursor: not-allowed;\n  }\n"])),function(n){return n.theme.spacing.xs},function(n){return n.theme.spacing.sm},function(n){return n.theme.borderRadius},function(n){return n.theme.fonts.sizes.small},function(n){return n.theme.spacing.xs},function(n){return n.theme.colors.primary},function(n){return n.theme.colors.primaryDark},function(n){return n.theme.colors.error},function(n){return n.theme.colors.border}),Wx=d.Ay.span(Nx||(Nx=(0,a.A)(["\n  padding: "," ",";\n  border-radius: 12px;\n  font-size: ",";\n  font-weight: bold;\n  \n  &.active {\n    background: #4caf50;\n    color: white;\n  }\n  \n  &.banned {\n    background: ",";\n    color: white;\n  }\n  \n  &.pending {\n    background: #ff9800;\n    color: white;\n  }\n"])),function(n){return n.theme.spacing.xs},function(n){return n.theme.spacing.sm},function(n){return n.theme.fonts.sizes.small},function(n){return n.theme.colors.error}),Fx=d.Ay.div(Sx||(Sx=(0,a.A)(["\n  display: flex;\n  gap: ",";\n  margin-bottom: ",";\n  align-items: center;\n"])),function(n){return n.theme.spacing.md},function(n){return n.theme.spacing.lg}),Qx=d.Ay.input(Cx||(Cx=(0,a.A)(["\n  padding: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  font-size: ",";\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"])),function(n){return n.theme.spacing.sm},function(n){return n.theme.colors.border},function(n){return n.theme.borderRadius},function(n){return n.theme.fonts.sizes.medium},function(n){return n.theme.colors.primary}),qx=d.Ay.select(zx||(zx=(0,a.A)(["\n  padding: ",";\n  border: 1px solid ",";\n  border-radius: ",";\n  font-size: ",";\n  background: white;\n  \n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"])),function(n){return n.theme.spacing.sm},function(n){return n.theme.colors.border},function(n){return n.theme.borderRadius},function(n){return n.theme.fonts.sizes.medium},function(n){return n.theme.colors.primary});const Hx=function(){var n,e=(0,r.useState)("dashboard"),t=(0,p.A)(e,2),i=t[0],a=t[1],s=(0,r.useState)({search:"",status:""}),o=(0,p.A)(s,2),d=o[0],u=o[1],x=(0,r.useState)({search:"",status:""}),h=(0,p.A)(x,2),g=h[0],v=h[1],b=(0,c.useQueryClient)(),j=f.apiUtils.getCurrentUser();if(null==j||!j.is_admin)return(0,m.jsx)(Px,{children:(0,m.jsx)(Ox,{children:(0,m.jsxs)(Mx,{children:[(0,m.jsx)(Ix,{children:"Доступ запрещен"}),(0,m.jsx)("p",{children:"У вас нет прав для доступа к административной панели."})]})})});var y=(0,c.useQuery)("admin-stats",f.adminAPI.getStats).data,w=(0,c.useQuery)(["admin-users",d],function(){return f.adminAPI.getUsers(d)},{enabled:"users"===i,keepPreviousData:!0}),A=w.data,k=void 0===A?[]:A,N=w.isLoading,S=(0,c.useQuery)(["admin-ads",g],function(){return f.adminAPI.getAds(g)},{enabled:"ads"===i,keepPreviousData:!0}),C=S.data,z=void 0===C?[]:C,_=S.isLoading,E=(0,c.useQuery)("admin-reports",f.adminAPI.getReports,{enabled:"reports"===i}).data,P=void 0===E?[]:E,L=(0,c.useMutation)(function(n){var e=n.userId,t=n.action;return f.adminAPI.userAction(e,t)},{onSuccess:function(n,e){l.Ay.success("Пользователь ".concat({ban:"заблокирован",unban:"разблокирован",delete:"удален",verify:"верифицирован"}[e.action],"!")),b.invalidateQueries("admin-users"),b.invalidateQueries("admin-stats")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),O=(0,c.useMutation)(function(n){var e=n.adId,t=n.action;return f.adminAPI.adAction(e,t)},{onSuccess:function(n,e){l.Ay.success("Объявление ".concat({approve:"одобрено",reject:"отклонено",delete:"удалено"}[e.action],"!")),b.invalidateQueries("admin-ads"),b.invalidateQueries("admin-stats")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),D=(0,c.useMutation)(function(n){var e=n.reportId,t=n.action;return f.adminAPI.reportAction(e,t)},{onSuccess:function(){l.Ay.success("Жалоба обработана!"),b.invalidateQueries("admin-reports")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),$=function(n,e){window.confirm({ban:"Заблокировать пользователя?",unban:"Разблокировать пользователя?",delete:"Удалить пользователя? Это действие необратимо!",verify:"Верифицировать пользователя?"}[e])&&L.mutate({userId:n,action:e})},M=function(n,e){window.confirm({approve:"Одобрить объявление?",reject:"Отклонить объявление?",delete:"Удалить объявление?"}[e])&&O.mutate({adId:n,action:e})},I=function(n){return new Date(n).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,m.jsxs)(Px,{children:[(0,m.jsxs)(Lx,{children:[(0,m.jsx)("h1",{children:"Административная панель"}),(0,m.jsx)("p",{children:"Управление платформой SwingFox"})]}),(0,m.jsxs)(Ox,{children:[(0,m.jsxs)(Dx,{children:[(0,m.jsx)($x,{className:"dashboard"===i?"active":"",onClick:function(){return a("dashboard")},children:"Дашборд"}),(0,m.jsx)($x,{className:"users"===i?"active":"",onClick:function(){return a("users")},children:"Пользователи"}),(0,m.jsx)($x,{className:"ads"===i?"active":"",onClick:function(){return a("ads")},children:"Объявления"}),(0,m.jsx)($x,{className:"reports"===i?"active":"",onClick:function(){return a("reports")},children:"Жалобы"})]}),"dashboard"===i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Ux,{children:[(0,m.jsxs)(Tx,{children:[(0,m.jsx)("div",{className:"number",children:(null==y?void 0:y.total_users)||0}),(0,m.jsx)("div",{className:"label",children:"Всего пользователей"})]}),(0,m.jsxs)(Tx,{children:[(0,m.jsx)("div",{className:"number",children:(null==y?void 0:y.active_users)||0}),(0,m.jsx)("div",{className:"label",children:"Активных пользователей"})]}),(0,m.jsxs)(Tx,{children:[(0,m.jsx)("div",{className:"number",children:(null==y?void 0:y.total_ads)||0}),(0,m.jsx)("div",{className:"label",children:"Всего объявлений"})]}),(0,m.jsxs)(Tx,{children:[(0,m.jsx)("div",{className:"number",children:(null==y?void 0:y.pending_reports)||0}),(0,m.jsx)("div",{className:"label",children:"Новых жалоб"})]})]}),(0,m.jsxs)(Mx,{children:[(0,m.jsx)(Ix,{children:"Последняя активность"}),(0,m.jsxs)(Rx,{children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Время"}),(0,m.jsx)("th",{children:"Пользователь"}),(0,m.jsx)("th",{children:"Действие"})]})}),(0,m.jsx)("tbody",{children:null==y||null===(n=y.recent_activity)||void 0===n?void 0:n.map(function(n,e){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:I(n.timestamp)}),(0,m.jsxs)("td",{children:["@",n.user]}),(0,m.jsx)("td",{children:n.action})]},e)})})]})]})]}),"users"===i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Fx,{children:[(0,m.jsx)(Qx,{type:"text",placeholder:"Поиск пользователей...",value:d.search,onChange:function(n){return u(function(e){return Ex(Ex({},e),{},{search:n.target.value})})}}),(0,m.jsxs)(qx,{value:d.status,onChange:function(n){return u(function(e){return Ex(Ex({},e),{},{status:n.target.value})})},children:[(0,m.jsx)("option",{value:"",children:"Все статусы"}),(0,m.jsx)("option",{value:"active",children:"Активные"}),(0,m.jsx)("option",{value:"banned",children:"Заблокированные"}),(0,m.jsx)("option",{value:"verified",children:"Верифицированные"})]})]}),(0,m.jsxs)(Mx,{children:[(0,m.jsx)(Ix,{children:"Пользователи"}),N?(0,m.jsx)("div",{children:"Загрузка..."}):(0,m.jsxs)(Rx,{children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Логин"}),(0,m.jsx)("th",{children:"Email"}),(0,m.jsx)("th",{children:"Регистрация"}),(0,m.jsx)("th",{children:"Статус"}),(0,m.jsx)("th",{children:"Последний вход"}),(0,m.jsx)("th",{children:"Действия"})]})}),(0,m.jsx)("tbody",{children:k.map(function(n){return(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{children:["@",n.login]}),(0,m.jsx)("td",{children:n.email}),(0,m.jsx)("td",{children:I(n.created_at)}),(0,m.jsxs)("td",{children:[(0,m.jsx)(Wx,{className:n.banned?"banned":"active",children:n.banned?"Заблокирован":"Активен"}),n.verified&&(0,m.jsx)(Wx,{className:"success",children:"Верифицирован"})]}),(0,m.jsx)("td",{children:n.last_seen?I(n.last_seen):"Никогда"}),(0,m.jsxs)("td",{children:[n.banned?(0,m.jsx)(Bx,{className:"success",onClick:function(){return $(n.id,"unban")},children:"Разблокировать"}):(0,m.jsx)(Bx,{className:"warning",onClick:function(){return $(n.id,"ban")},children:"Заблокировать"}),!n.verified&&(0,m.jsx)(Bx,{className:"primary",onClick:function(){return $(n.id,"verify")},children:"Верифицировать"}),(0,m.jsx)(Bx,{className:"danger",onClick:function(){return $(n.id,"delete")},children:"Удалить"})]})]},n.id)})})]})]})]}),"ads"===i&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(Fx,{children:[(0,m.jsx)(Qx,{type:"text",placeholder:"Поиск объявлений...",value:g.search,onChange:function(n){return v(function(e){return Ex(Ex({},e),{},{search:n.target.value})})}}),(0,m.jsxs)(qx,{value:g.status,onChange:function(n){return v(function(e){return Ex(Ex({},e),{},{status:n.target.value})})},children:[(0,m.jsx)("option",{value:"",children:"Все статусы"}),(0,m.jsx)("option",{value:"pending",children:"На модерации"}),(0,m.jsx)("option",{value:"approved",children:"Одобренные"}),(0,m.jsx)("option",{value:"rejected",children:"Отклоненные"})]})]}),(0,m.jsxs)(Mx,{children:[(0,m.jsx)(Ix,{children:"Объявления"}),_?(0,m.jsx)("div",{children:"Загрузка..."}):(0,m.jsxs)(Rx,{children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Заголовок"}),(0,m.jsx)("th",{children:"Автор"}),(0,m.jsx)("th",{children:"Тип"}),(0,m.jsx)("th",{children:"Создано"}),(0,m.jsx)("th",{children:"Статус"}),(0,m.jsx)("th",{children:"Действия"})]})}),(0,m.jsx)("tbody",{children:z.map(function(n){return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:n.title}),(0,m.jsxs)("td",{children:["@",n.author]}),(0,m.jsx)("td",{children:n.type}),(0,m.jsx)("td",{children:I(n.created_at)}),(0,m.jsx)("td",{children:(0,m.jsx)(Wx,{className:n.status||"pending",children:"approved"===n.status?"Одобрено":"rejected"===n.status?"Отклонено":"На модерации"})}),(0,m.jsxs)("td",{children:[(!n.status||"pending"===n.status)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Bx,{className:"success",onClick:function(){return M(n.id,"approve")},children:"Одобрить"}),(0,m.jsx)(Bx,{className:"warning",onClick:function(){return M(n.id,"reject")},children:"Отклонить"})]}),(0,m.jsx)(Bx,{className:"danger",onClick:function(){return M(n.id,"delete")},children:"Удалить"})]})]},n.id)})})]})]})]}),"reports"===i&&(0,m.jsxs)(Mx,{children:[(0,m.jsx)(Ix,{children:"Жалобы пользователей"}),(0,m.jsxs)(Rx,{children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"От кого"}),(0,m.jsx)("th",{children:"На кого"}),(0,m.jsx)("th",{children:"Причина"}),(0,m.jsx)("th",{children:"Время"}),(0,m.jsx)("th",{children:"Статус"}),(0,m.jsx)("th",{children:"Действия"})]})}),(0,m.jsx)("tbody",{children:P.map(function(n){return(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{children:["@",n.from_user]}),(0,m.jsxs)("td",{children:["@",n.target_user]}),(0,m.jsx)("td",{children:n.reason}),(0,m.jsx)("td",{children:I(n.created_at)}),(0,m.jsx)("td",{children:(0,m.jsx)(Wx,{className:n.status||"pending",children:"resolved"===n.status?"Решено":"Новая"})}),(0,m.jsx)("td",{children:(!n.status||"pending"===n.status)&&(0,m.jsx)(Bx,{className:"primary",onClick:function(){return e=n.id,void D.mutate({reportId:e,action:"resolve"});var e},children:"Закрыть"})})]},n.id)})})]})]})]})]})};var Vx,Xx,Yx,Kx,Gx,Jx,Zx,nh,eh,th,rh,ih,ah,sh,oh,ch=(0,d.i7)(Vx||(Vx=(0,a.A)(["\n  0% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n  100% { transform: scale(1); }\n"]))),lh=(0,d.i7)(Xx||(Xx=(0,a.A)(["\n  0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }\n  50% { opacity: 1; transform: scale(1) rotate(180deg); }\n"]))),dh=(0,d.Ay)(ha.P.div)(Yx||(Yx=(0,a.A)(["\n  background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 50%, #ffa8a8 100%);\n  border-radius: 20px;\n  padding: 25px;\n  margin: 15px 0;\n  color: white;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);\n    animation: "," 3s infinite;\n  }\n"])),lh),uh=d.Ay.div(Kx||(Kx=(0,a.A)(["\n  text-align: center;\n  margin-bottom: 20px;\n  position: relative;\n  z-index: 2;\n"]))),ph=d.Ay.div(Gx||(Gx=(0,a.A)(["\n  font-size: 48px;\n  margin-bottom: 10px;\n  animation: "," 2s infinite;\n  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));\n"])),ch),xh=d.Ay.h3(Jx||(Jx=(0,a.A)(["\n  margin: 0 0 5px 0;\n  font-size: 24px;\n  font-weight: bold;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  \n  @media (max-width: 768px) {\n    font-size: 20px;\n  }\n"]))),hh=d.Ay.p(Zx||(Zx=(0,a.A)(["\n  margin: 0;\n  font-size: 16px;\n  opacity: 0.9;\n  \n  @media (max-width: 768px) {\n    font-size: 14px;\n  }\n"]))),fh=d.Ay.div(nh||(nh=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 20px;\n  margin: 20px 0;\n  position: relative;\n  z-index: 2;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 15px;\n  }\n"]))),mh=d.Ay.div(eh||(eh=(0,a.A)(["\n  text-align: center;\n  flex: 1;\n"]))),gh=d.Ay.div(th||(th=(0,a.A)(["\n  font-size: 18px;\n  font-weight: 600;\n  margin-top: 10px;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  transition: all 0.2s ease;\n  \n  &:hover {\n    transform: scale(1.05);\n    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 16px;\n  }\n"]))),vh=d.Ay.div(rh||(rh=(0,a.A)(["\n  font-size: 32px;\n  animation: "," 1.5s infinite;\n  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));\n  \n  @media (max-width: 768px) {\n    transform: rotate(90deg);\n    font-size: 28px;\n  }\n"])),ch),bh=d.Ay.div(ih||(ih=(0,a.A)(["\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n  margin-top: 20px;\n  position: relative;\n  z-index: 2;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n"]))),jh=(0,d.Ay)(Dr)(ah||(ah=(0,a.A)(["\n  background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);\n  border: none;\n  padding: 12px 24px;\n  font-weight: 600;\n  box-shadow: 0 4px 15px rgba(68, 160, 141, 0.3);\n  \n  &:hover:not(:disabled) {\n    background: linear-gradient(135deg, #45b7b8 0%, #3d8b7a 100%);\n    transform: translateY(-2px);\n    box-shadow: 0 6px 20px rgba(68, 160, 141, 0.4);\n  }\n"]))),yh=(0,d.Ay)(Dr)(sh||(sh=(0,a.A)(["\n  background: rgba(255, 255, 255, 0.2);\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 12px 24px;\n  \n  &:hover:not(:disabled) {\n    background: rgba(255, 255, 255, 0.3);\n    border-color: rgba(255, 255, 255, 0.5);\n  }\n"]))),wh=d.Ay.div(oh||(oh=(0,a.A)(["\n  text-align: center;\n  margin-top: 15px;\n  font-size: 12px;\n  opacity: 0.8;\n  position: relative;\n  z-index: 2;\n"])));const Ah=function(n){var e,t,r,i,a,s=n.notification,c=n.onDismiss,l=n.onStartChat,d=n.isAnimatingOut,u=void 0!==d&&d,p=(0,o.Zp)(),x=(null==s||null===(e=s.data)||void 0===e?void 0:e.match_user)||(null==s?void 0:s.from_user),h=null==s?void 0:s.from_user_data,f=function(){p("/profile/".concat(x))};return(0,m.jsxs)(dh,{initial:{scale:.8,opacity:0},animate:{scale:u?.8:1,opacity:u?0:1,y:u?-20:0},exit:{scale:.8,opacity:0},transition:{type:"spring",duration:u?.3:.6,bounce:u?0:.4},children:[(0,m.jsxs)(uh,{children:[(0,m.jsx)(ph,{children:"💕"}),(0,m.jsx)(xh,{children:"Взаимная симпатия!"}),(0,m.jsx)(hh,{children:"У вас совпадение! Начните общение прямо сейчас"})]}),(0,m.jsxs)(fh,{children:[(0,m.jsxs)(mh,{children:[(0,m.jsx)(Ur,{$src:null!=h&&h.avatar?"/uploads/".concat(h.avatar):"",$size:"80px",$fontSize:"32px",$online:!0,children:!(null!=h&&h.avatar)&&"Я"}),(0,m.jsx)(gh,{children:"Вы"})]}),(0,m.jsx)(vh,{children:"💖"}),(0,m.jsxs)(mh,{children:[(0,m.jsx)(Ur,{$src:null!=h&&h.avatar?"/uploads/".concat(h.avatar):"",$size:"80px",$fontSize:"32px",$online:!0,children:!(null!=h&&h.avatar)&&(x?x.charAt(0).toUpperCase():"?")}),(0,m.jsxs)(gh,{style:{cursor:"pointer"},onClick:function(){return f()},title:"Кликните, чтобы перейти в профиль",children:["@",x||"Пользователь"]})]})]}),(0,m.jsxs)(bh,{children:[(0,m.jsx)(jh,{onClick:function(){l?l(x):p("/chat/".concat(x))},children:"💬 Начать чат"}),(0,m.jsx)(yh,{$variant:"secondary",onClick:f,children:"👀 Профиль"}),c&&(0,m.jsx)(yh,{$variant:"secondary",onClick:c,children:"✕ Закрыть"})]}),(0,m.jsx)(wh,{children:(t=s.created_at,r=new Date(t),i=new Date,a=Math.floor((i-r)/6e4),a<1?"только что":a<60?"".concat(a," мин назад"):a<1440?"".concat(Math.floor(a/60)," ч назад"):r.toLocaleDateString("ru-RU"))})]})};var kh,Nh,Sh,Ch,zh,_h,Eh,Ph,Lh,Oh,Dh,$h,Mh,Ih,Uh,Th,Rh,Bh,Wh,Fh,Qh,qh,Hh,Vh,Xh,Yh,Kh,Gh,Jh,Zh;function nf(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function ef(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?nf(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nf(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var tf=function(n){return{message:"#4299e1",like:"#e53e3e",visit:"#38a169",gift:"#d69e2e",match:"#e53e3e",event:"#805ad5",club:"#805ad5",subscription:"#d69e2e",admin:"#dc3522",system:"#4a5568",rating:"#ed8936",photo:"#38a169",comment:"#4299e1",invitation:"#805ad5",reminder:"#4a5568",warning:"#f56565",promotion:"#d69e2e"}[n]||"#4a5568"},rf=(0,d.Ay)(jr)(kh||(kh=(0,a.A)(["\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n"]))),af=d.Ay.div(Nh||(Nh=(0,a.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  flex-wrap: wrap;\n  gap: 15px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n"]))),sf=d.Ay.div(Sh||(Sh=(0,a.A)(["\n  display: flex;\n  background: white;\n  border-radius: 12px;\n  padding: 4px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  \n  @media (max-width: 768px) {\n    flex-wrap: wrap;\n  }\n"]))),of=d.Ay.button(Ch||(Ch=(0,a.A)(["\n  padding: 10px 20px;\n  border: none;\n  background: ",";\n  color: ",";\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  \n  &:hover:not(:disabled) {\n    background: ",";\n    color: ",";\n  }\n  \n  ","\n  \n  @media (max-width: 768px) {\n    padding: 8px 16px;\n    font-size: 13px;\n  }\n"])),function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"transparent"},function(n){return n.$active?"white":"#4a5568"},function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%)"},function(n){return n.$active?"white":"#dc3522"},function(n){return n.$count>0&&"\n    &::after {\n      content: '".concat(n.$count,"';\n      position: absolute;\n      top: -5px;\n      right: -5px;\n      background: #f56565;\n      color: white;\n      border-radius: 50%;\n      width: 18px;\n      height: 18px;\n      font-size: 10px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-weight: bold;\n    }\n  ")}),cf=d.Ay.div(zh||(zh=(0,a.A)(["\n  display: flex;\n  gap: 10px;\n  align-items: center;\n  flex-wrap: wrap;\n  \n  @media (max-width: 768px) {\n    justify-content: center;\n  }\n"]))),lf=d.Ay.div(_h||(_h=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n"]))),df=(0,d.Ay)(ha.P.div)(Eh||(Eh=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border-left: 4px solid ",";\n  transition: all 0.3s ease;\n  position: relative;\n  \n  ","\n  \n  &:hover {\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n    transform: translateY(-2px);\n  }\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n"])),function(n){return n.$color},function(n){return!n.$isRead&&(0,d.AH)(Ph||(Ph=(0,a.A)(["\n    background: linear-gradient(135deg, rgba(220, 53, 34, 0.02) 0%, rgba(255, 107, 88, 0.02) 100%);\n    border-left-color: #dc3522;\n    \n    &::before {\n      content: '';\n      position: absolute;\n      top: 15px;\n      right: 15px;\n      width: 8px;\n      height: 8px;\n      background: #dc3522;\n      border-radius: 50%;\n    }\n  "])))}),uf=d.Ay.div(Lh||(Lh=(0,a.A)(["\n  display: flex;\n  gap: 15px;\n  align-items: flex-start;\n"]))),pf=d.Ay.div(Oh||(Oh=(0,a.A)(["\n  width: 45px;\n  height: 45px;\n  border-radius: 12px;\n  background: ",";\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  \n  @media (max-width: 768px) {\n    width: 40px;\n    height: 40px;\n  }\n"])),function(n){return n.$color}),xf=d.Ay.div(Dh||(Dh=(0,a.A)(["\n  flex: 1;\n  min-width: 0;\n"]))),hf=d.Ay.h4($h||($h=(0,a.A)(["\n  margin: 0 0 5px 0;\n  color: #2d3748;\n  font-size: 16px;\n  font-weight: 600;\n  line-height: 1.3;\n  \n  @media (max-width: 768px) {\n    font-size: 15px;\n  }\n"]))),ff=d.Ay.p(Mh||(Mh=(0,a.A)(["\n  margin: 0 0 10px 0;\n  color: #4a5568;\n  font-size: 14px;\n  line-height: 1.4;\n  \n  @media (max-width: 768px) {\n    font-size: 13px;\n  }\n"]))),mf=d.Ay.div(Ih||(Ih=(0,a.A)(["\n  display: flex;\n  gap: 15px;\n  align-items: center;\n  flex-wrap: wrap;\n"]))),gf=d.Ay.span(Uh||(Uh=(0,a.A)(["\n  font-size: 12px;\n  color: #718096;\n"]))),vf=d.Ay.span(Th||(Th=(0,a.A)(["\n  padding: 3px 8px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 500;\n  text-transform: uppercase;\n  \n  ","\n"])),function(n){switch(n.$priority){case"high":return"background: #fed7d7; color: #c53030;";case"normal":return"background: #bee3f8; color: #2b6cb0;";default:return"background: #e2e8f0; color: #4a5568;"}}),bf=d.Ay.div(Rh||(Rh=(0,a.A)(["\n  display: flex;\n  gap: 8px;\n  align-items: center;\n"]))),jf=(0,d.Ay)($r)(Bh||(Bh=(0,a.A)(["\n  background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);\n  color: white;\n  border: 2px solid #3182ce;\n  transition: all 0.3s ease;\n  \n  &:hover:not(:disabled) {\n    background: linear-gradient(135deg, #3182ce 0%, #2c5aa0 100%);\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(66, 153, 225, 0.4);\n  }\n  \n  &:active {\n    transform: translateY(0);\n  }\n"]))),yf=d.Ay.div(Wh||(Wh=(0,a.A)(["\n  text-align: center;\n  padding: 60px 20px;\n  color: #718096;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px; /* Добавляем как в других компонентах */\n  \n  .icon {\n    font-size: 72px; /* Увеличиваем с 64px до 72px */\n    margin-bottom: 54px; /* Увеличиваем с 20px до 54px для поднятия эмодзи на 30px */\n    opacity: 0.7; /* Увеличиваем с 0.5 до 0.7 */\n    line-height: 1;\n    display: block;\n    text-align: center;\n    width: 100%;\n    transform: translateX(-2px); /* Компенсация для визуального центра эмодзи */\n  }\n  \n  h3 {\n    margin: 0 0 16px 0; /* Увеличиваем с 10px до 16px */\n    font-size: 28px; /* Увеличиваем с 20px до 28px */\n    color: #2d3748;\n    font-weight: 700; /* Добавляем font-weight */\n    line-height: 1.2;\n    text-align: center;\n    width: 100%;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 16px;\n    line-height: 1.6;\n    max-width: 320px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  \n  @media (max-width: 768px) {\n    min-height: 300px;\n    padding: 40px 20px;\n    \n    .icon {\n      font-size: 56px; /* Увеличиваем с 48px до 56px */\n      margin-bottom: 50px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 24px; /* Увеличиваем с 18px до 24px */\n      margin-bottom: 14px;\n    }\n    \n    p {\n      font-size: 15px;\n      max-width: 280px;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    min-height: 250px;\n    padding: 30px 16px;\n    \n    .icon {\n      font-size: 48px;\n      margin-bottom: 48px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 22px;\n      margin-bottom: 12px;\n    }\n    \n    p {\n      font-size: 14px;\n      max-width: 260px;\n    }\n  }\n"]))),wf=d.Ay.div(Fh||(Fh=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n"]))),Af=(0,d.Ay)(ha.P.div)(Qh||(Qh=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border-left: 4px solid #38a169;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);\n    transform: translateY(-2px);\n  }\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n"]))),kf=d.Ay.div(qh||(qh=(0,a.A)(["\n  display: flex;\n  gap: 15px;\n  align-items: center;\n"]))),Nf=d.Ay.div(Hh||(Hh=(0,a.A)(["\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #38a169 0%, #48bb78 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  font-size: 24px;\n  flex-shrink: 0;\n  \n  img {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n  \n  @media (max-width: 768px) {\n    width: 50px;\n    height: 50px;\n    font-size: 20px;\n  }\n"]))),Sf=d.Ay.div(Vh||(Vh=(0,a.A)(["\n  flex: 1;\n  min-width: 0;\n"]))),Cf=d.Ay.h4(Xh||(Xh=(0,a.A)(["\n  margin: 0 0 5px 0;\n  color: #2d3748;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: color 0.2s ease;\n  \n  &:hover {\n    color: #38a169;\n  }\n"]))),zf=d.Ay.div(Yh||(Yh=(0,a.A)(["\n  display: flex;\n  gap: 15px;\n  align-items: center;\n  flex-wrap: wrap;\n  margin-bottom: 8px;\n"]))),_f=d.Ay.span(Kh||(Kh=(0,a.A)(["\n  font-size: 12px;\n  color: #718096;\n  background: #f7fafc;\n  padding: 2px 8px;\n  border-radius: 12px;\n"]))),Ef=d.Ay.span(Gh||(Gh=(0,a.A)(["\n  font-size: 12px;\n  color: #718096;\n"]))),Pf=d.Ay.span(Jh||(Jh=(0,a.A)(["\n  font-size: 11px;\n  color: #a0aec0;\n"]))),Lf=d.Ay.div(Zh||(Zh=(0,a.A)(["\n  display: flex;\n  gap: 8px;\n  align-items: center;\n"])));const Of=function(){var n=(0,r.useState)("all"),e=(0,p.A)(n,2),t=e[0],i=e[1],a=(0,r.useState)([]),s=(0,p.A)(a,2),d=(s[0],s[1],(0,r.useState)(new Set)),u=(0,p.A)(d,2),x=u[0],h=u[1],g=(0,c.useQueryClient)(),v=(0,o.Zp)(),b=(0,c.useQuery)(["notifications",t],function(){if("guests"===t)return{notifications:[],unread_count:0};var n={};return"unread"===t&&(n.unread=!0),"all"!==t&&"unread"!==t&&(n.type=t),f.notificationsAPI.getNotifications(n)},{refetchInterval:3e4,enabled:"guests"!==t,onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),j=b.data,y=b.isLoading,w=b.refetch,A=(0,c.useQuery)(["guests",t],function(){return f.notificationsAPI.getGuests()},{enabled:"guests"===t&&f.apiUtils.isVip(S),onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),k=A.data,N=A.isLoading,S=(0,c.useQuery)(["currentUser"],function(){var n=localStorage.getItem("swingfox_token");if(!n)return null;try{var e=JSON.parse(atob(n.split(".")[1]));return{login:e.login,vipType:e.vipType||"FREE"}}catch(n){return console.error("Ошибка парсинга токена:",n),null}},{staleTime:3e5,cacheTime:6e5}).data,C=(null==j?void 0:j.notifications)||[],z=(null==j?void 0:j.unread_count)||0,_=(null==k?void 0:k.guests)||[],E=(0,r.useMemo)(function(){return"guests"===t?[]:C&&0!==C.length?"unread"===t?C.filter(function(n){return!n.is_read}):"all"!==t?C.filter(function(n){return n.type===t}):C:[]},[C,t]),P=(0,r.useMemo)(function(){return C&&0!==C.length?C.reduce(function(n,e){return n[e.type]=(n[e.type]||0)+1,n},{}):{}},[C]),L=(0,r.useMemo)(function(){return C&&0!==C.length?C.filter(function(n){return!n.is_read}).length:0},[C]),O=(0,c.useMutation)(f.notificationsAPI.markAsRead,{onSuccess:function(n,e){g.setQueryData(["notifications",t],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.map(function(n){return n.id===e?ef(ef({},n),{},{is_read:!0}):n}),unread_count:Math.max(0,(n.unread_count||0)-1)}):n}),g.setQueryData(["notifications","all"],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.map(function(n){return n.id===e?ef(ef({},n),{},{is_read:!0}):n}),unread_count:Math.max(0,(n.unread_count||0)-1)}):n}),l.Ay.success("Уведомление отмечено как прочитанное")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),D=(0,c.useMutation)(f.notificationsAPI.markAllAsRead,{onSuccess:function(){g.setQueryData(["notifications",t],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.map(function(n){return ef(ef({},n),{},{is_read:!0})}),unread_count:0}):n}),g.setQueryData(["notifications","all"],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.map(function(n){return ef(ef({},n),{},{is_read:!0})}),unread_count:0}):n}),l.Ay.success("Все уведомления отмечены как прочитанные")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),$=(0,c.useMutation)(f.notificationsAPI.deleteNotification,{onSuccess:function(n,e){g.setQueryData(["notifications",t],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.filter(function(n){return n.id!==e})}):n}),g.setQueryData(["notifications","all"],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.filter(function(n){return n.id!==e})}):n}),l.Ay.success("Уведомление удалено")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),M=(0,c.useMutation)(f.notificationsAPI.deleteReadNotifications,{onSuccess:function(){g.setQueryData(["notifications",t],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.filter(function(n){return!n.is_read})}):n}),g.setQueryData(["notifications","all"],function(n){return n?ef(ef({},n),{},{notifications:n.notifications.filter(function(n){return!n.is_read})}):n}),l.Ay.success("Прочитанные уведомления удалены")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),I=function(n){n&&v("/profile/".concat(n))},U=function(n){return n.from_user&&["like","superlike","gift","profile_visit","image_like","rating","comment"].includes(n.type)},T=function(n){h(function(e){return new Set(e).add(n)}),O.mutate(n),"unread"===t&&setTimeout(function(){h(function(e){var t=new Set(e);return t.delete(n),t})},300)},R=(0,r.useMemo)(function(){var n=[{key:"all",label:"Все",count:C.length},{key:"unread",label:"Непрочитанные",count:L},{key:"match",label:"💕 Мэтчи",count:P.match||0},{key:"message",label:"Сообщения",count:P.message||0},{key:"like",label:"Лайки",count:P.like||0},{key:"gift",label:"Подарки",count:P.gift||0},{key:"system",label:"Системные",count:P.system||0}];return f.apiUtils.isVip(S)&&n.splice(2,0,{key:"guests",label:"👥 Гости",count:_.length,vipOnly:!0}),n},[C.length,L,P,_.length,S]);return y?(0,m.jsx)(rf,{children:(0,m.jsx)(yr,{children:(0,m.jsx)(Qr,{})})}):(0,m.jsx)(rf,{children:(0,m.jsxs)(yr,{$maxWidth:"1000px",children:[(0,m.jsxs)(Wr,{$justify:"space-between",$align:"center",$wrap:!0,children:[(0,m.jsxs)(Sr,{children:[(0,m.jsx)(dr,{}),"Уведомления"]}),(0,m.jsx)(Dr,{$size:"small",onClick:function(){return w()},children:"Обновить"})]}),(0,m.jsxs)(af,{children:[(0,m.jsx)(sf,{children:R.map(function(n){return(0,m.jsx)(of,{$active:t===n.key,$count:"unread"===n.key?z:0,onClick:function(){return i(n.key)},children:n.label},n.key)})}),(0,m.jsxs)(cf,{children:[L>0&&(0,m.jsxs)(Dr,{$size:"small",$variant:"secondary",onClick:function(){window.confirm("Отметить все уведомления как прочитанные?")&&D.mutate()},disabled:D.isLoading,children:[(0,m.jsx)(ur,{}),"Отметить все"]}),(0,m.jsxs)(Dr,{$size:"small",$variant:"danger",onClick:function(){window.confirm("Удалить все прочитанные уведомления?")&&M.mutate()},disabled:M.isLoading,children:[(0,m.jsx)(pr,{}),"Удалить прочитанные"]})]})]}),"guests"===t?N?(0,m.jsxs)(yf,{children:[(0,m.jsx)("div",{className:"icon",children:"⏳"}),(0,m.jsx)("h3",{children:"Загрузка гостей..."}),(0,m.jsx)("p",{children:"Получаем информацию о посетителях вашего профиля"})]}):0===_.length?(0,m.jsxs)(yf,{children:[(0,m.jsx)("div",{className:"icon",children:"👥"}),(0,m.jsx)("h3",{children:"Нет гостей"}),(0,m.jsx)("p",{children:"Пока никто не посещал ваш профиль"})]}):(0,m.jsx)(wf,{children:(0,m.jsx)(fa.N,{children:_.map(function(n){return(0,m.jsx)(Af,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,m.jsxs)(kf,{children:[(0,m.jsxs)(Nf,{children:[n.avatar&&"no_photo.jpg"!==n.avatar?(0,m.jsx)("img",{src:"/uploads/".concat(n.avatar),alt:n.visitor,onError:function(n){n.target.style.display="none",n.target.nextSibling.style.display="flex"}}):null,(0,m.jsx)("span",{style:{display:n.avatar&&"no_photo.jpg"!==n.avatar?"none":"flex"},children:n.visitor.charAt(0).toUpperCase()})]}),(0,m.jsxs)(Sf,{children:[(0,m.jsx)(Cf,{onClick:function(){return I(n.visitor)},children:n.visitor}),(0,m.jsxs)(zf,{children:[(0,m.jsx)(_f,{children:n.status}),(0,m.jsxs)(Ef,{children:[n.city,", ",n.country]}),n.online&&(0,m.jsx)("span",{style:{color:"#38a169",fontSize:"12px"},children:"🟢 Онлайн"})]}),(0,m.jsxs)(Pf,{children:["Посетил ",f.apiUtils.formatTimeAgo(n.visited_at)]})]}),(0,m.jsx)(Lf,{children:(0,m.jsx)(jf,{$size:"35px",$variant:"secondary",onClick:function(){return I(n.visitor)},title:"Посмотреть профиль",children:"👤"})})]})},n.id)})})}):0===E.length?(0,m.jsxs)(yf,{children:[(0,m.jsx)("div",{className:"icon",children:"🔔"}),(0,m.jsx)("h3",{children:"Нет уведомлений"}),(0,m.jsx)("p",{children:"unread"===t?"У вас нет непрочитанных уведомлений":"Здесь будут отображаться ваши уведомления"})]}):(0,m.jsx)(lf,{children:(0,m.jsx)(fa.N,{children:E.map(function(n){var e,t,r,i;return"match"===n.type?(0,m.jsx)(Ah,{notification:n,onDismiss:function(){return T(n.id)},onStartChat:function(n){window.location.href="/chat/".concat(n)},isAnimatingOut:x.has(n.id)},n.id):(0,m.jsx)(df,{$color:tf(n.type),$isRead:n.is_read,initial:{opacity:0,y:20},animate:{opacity:x.has(n.id)?0:1,y:x.has(n.id)?-20:0,scale:x.has(n.id)?.8:1},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,m.jsxs)(uf,{children:[(0,m.jsx)(pf,{$color:tf(n.type),children:(r=n.type,i={message:sr,like:ar,visit:er,gift:xr,match:ar,event:fr,club:fr,subscription:mr,admin:dr,system:dr,rating:hr,photo:er,comment:sr,invitation:fr,reminder:dr,warning:dr,promotion:mr}[r]||dr,(0,m.jsx)(i,{}))}),(0,m.jsxs)(xf,{children:[(0,m.jsx)(hf,{children:n.title}),(0,m.jsxs)(ff,{children:["like"===n.type&&(0,m.jsxs)("span",{children:[(0,m.jsx)("strong",{style:{color:"#dc3522",cursor:"pointer",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:n.from_user})," лайкнул вашу анкету!"]}),"superlike"===n.type&&(0,m.jsxs)("span",{children:[(0,m.jsx)("strong",{style:{color:"#dc3522",cursor:"pointer",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:n.from_user})," отправил вам суперлайк",(null===(e=n.data)||void 0===e?void 0:e.message)&&(0,m.jsxs)("span",{children:[": ",(0,m.jsxs)("i",{children:["«",n.data.message,"»"]})]})]}),"gift"===n.type&&(0,m.jsxs)("span",{children:[(0,m.jsx)("strong",{style:{color:"#dc3522",cursor:"pointer",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:n.from_user})," отправил вам подарок",(null===(t=n.data)||void 0===t?void 0:t.gift_type)&&(0,m.jsxs)("span",{children:[": ",n.data.gift_type]})]}),"profile_visit"===n.type&&(0,m.jsxs)("span",{children:[(0,m.jsx)("strong",{style:{color:"#dc3522",cursor:"pointer",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:n.from_user})," посмотрел ваш профиль"]}),"image_like"===n.type&&(0,m.jsxs)("span",{children:[(0,m.jsx)("strong",{style:{color:"#dc3522",cursor:"pointer",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:n.from_user})," лайкнул ваше фото"]}),"rating"===n.type&&(0,m.jsxs)("span",{children:[(0,m.jsx)("strong",{style:{color:"#dc3522",cursor:"pointer",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:n.from_user})," оценил ваш профиль"]}),"comment"===n.type&&(0,m.jsxs)("span",{children:[(0,m.jsx)("strong",{style:{color:"#dc3522",cursor:"pointer",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:n.from_user})," оставил комментарий"]}),!["like","superlike","gift","profile_visit","image_like","rating","comment"].includes(n.type)&&n.message]}),(0,m.jsxs)(mf,{children:[(0,m.jsx)(gf,{children:f.apiUtils.formatTimeAgo(n.created_at)}),(0,m.jsx)(vf,{$priority:n.priority,children:n.priority}),n.from_user&&(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#dc3522",cursor:"pointer",textDecoration:"underline",fontWeight:"500",transition:"all 0.2s ease"},onClick:function(){return I(n.from_user)},title:"Кликните, чтобы перейти в профиль",onMouseEnter:function(n){n.target.style.transform="scale(1.05)",n.target.style.color="#ff6b58"},onMouseLeave:function(n){n.target.style.transform="scale(1)",n.target.style.color="#dc3522"},children:["от ",n.from_user]})]})]}),(0,m.jsxs)(bf,{children:[U(n)&&(0,m.jsx)(jf,{$size:"35px",$variant:"secondary",onClick:function(){return I(n.from_user)},title:"Посмотреть профиль",children:"👤"}),!n.is_read&&(0,m.jsx)($r,{$size:"35px",$variant:"secondary",onClick:function(){return T(n.id)},title:"Отметить как прочитанное",children:(0,m.jsx)(ur,{})}),(0,m.jsx)($r,{$size:"35px",$variant:"secondary",onClick:function(){return e=n.id,void(window.confirm("Удалить это уведомление?")&&$.mutate(e));var e},title:"Удалить уведомление",children:(0,m.jsx)(pr,{})})]})]})},n.id)})})})]})})};var Df,$f,Mf,If,Uf,Tf,Rf,Bf,Wf,Ff,Qf,qf,Hf,Vf,Xf,Yf,Kf,Gf=(0,d.Ay)(jr)(Df||(Df=(0,a.A)(["\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n"]))),Jf=d.Ay.div($f||($f=(0,a.A)(["\n  display: flex;\n  background: white;\n  border-radius: 12px;\n  padding: 4px;\n  margin-bottom: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 4px;\n  }\n"]))),Zf=d.Ay.button(Mf||(Mf=(0,a.A)(["\n  flex: 1;\n  padding: 15px 20px;\n  border: none;\n  background: ",";\n  color: ",";\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  \n  &:hover:not(:disabled) {\n    background: ",";\n    color: ",";\n  }\n  \n  @media (max-width: 768px) {\n    padding: 12px 16px;\n    font-size: 14px;\n  }\n"])),function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"transparent"},function(n){return n.$active?"white":"#4a5568"},function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%)"},function(n){return n.$active?"white":"#dc3522"}),nm=d.Ay.div(If||(If=(0,a.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n"]))),em=d.Ay.div(Uf||(Uf=(0,a.A)(["\n  display: grid;\n  grid-template-columns: 1fr auto auto;\n  gap: 15px;\n  align-items: end;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    gap: 12px;\n  }\n"]))),tm=d.Ay.div(Tf||(Tf=(0,a.A)(["\n  position: relative;\n  \n  input {\n    width: 100%;\n    padding: 12px 16px 12px 45px;\n    border: 2px solid #e2e8f0;\n    border-radius: 10px;\n    font-size: 15px;\n    transition: all 0.3s ease;\n    \n    &:focus {\n      outline: none;\n      border-color: #dc3522;\n      box-shadow: 0 0 0 3px rgba(220, 53, 34, 0.1);\n    }\n  }\n  \n  .search-icon {\n    position: absolute;\n    left: 15px;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #718096;\n  }\n"]))),rm=(0,d.Ay)(ha.P.div)(Rf||(Rf=(0,a.A)(["\n  background: white;\n  border-radius: 20px;\n  overflow: hidden;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  cursor: pointer;\n  \n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);\n  }\n"]))),im=d.Ay.div(Bf||(Bf=(0,a.A)(["\n  height: 160px;\n  background: ",";\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  position: relative;\n  padding: 20px;\n  color: white;\n  \n  &::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: ",";\n    border-radius: 20px 20px 0 0;\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 20px;\n    background: white;\n    border-radius: 20px 20px 0 0;\n  }\n  \n  > * {\n    position: relative;\n    z-index: 1;\n  }\n"])),function(n){return n.$avatarUrl?"url(".concat(n.$avatarUrl,")"):"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)"},function(n){return n.$avatarUrl?"rgba(0, 0, 0, 0.4)":"transparent"}),am=d.Ay.div(Wf||(Wf=(0,a.A)(["\n  padding: 20px;\n"]))),sm=d.Ay.h3(Ff||(Ff=(0,a.A)(["\n  margin: 0 0 8px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: #2d3748;\n  \n  @media (max-width: 768px) {\n    font-size: 16px;\n  }\n"]))),om=d.Ay.p(Qf||(Qf=(0,a.A)(["\n  margin: 0 0 15px 0;\n  color: #4a5568;\n  font-size: 14px;\n  line-height: 1.4;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]))),cm=d.Ay.div(qf||(qf=(0,a.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 10px;\n"]))),lm=d.Ay.div(Hf||(Hf=(0,a.A)(["\n  display: flex;\n  gap: 15px;\n  font-size: 12px;\n  color: #718096;\n  \n  span {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n  }\n"]))),dm=d.Ay.span(Vf||(Vf=(0,a.A)(["\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 11px;\n  font-weight: 500;\n  text-transform: uppercase;\n  \n  ","\n"])),function(n){return n.$isPrivate?"\n    background: #fed7d7;\n    color: #c53030;\n  ":"\n    background: #c6f6d5;\n    color: #276749;\n  "}),um=((0,d.Ay)(rm)(Xf||(Xf=(0,a.A)(["\n  border: 2px solid #dc3522;\n  \n  "," {\n    background: linear-gradient(135deg, #38a169 0%, #48bb78 100%);\n  }\n"])),im),d.Ay.div(Yf||(Yf=(0,a.A)(["\n  text-align: center;\n  padding: 60px 20px;\n  color: #718096;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 400px; /* Добавляем как в других компонентах */\n  \n  .icon {\n    font-size: 72px; /* Увеличиваем с 64px до 72px */\n    margin-bottom: 54px; /* Увеличиваем с 20px до 54px для поднятия эмодзи на 30px */\n    opacity: 0.7; /* Увеличиваем с 0.5 до 0.7 */\n    line-height: 1;\n    display: block;\n    text-align: center;\n    width: 100%;\n    transform: translateX(-2px); /* Компенсация для визуального центра эмодзи */\n  }\n  \n  h3 {\n    margin: 0 0 16px 0; /* Увеличиваем с 10px до 16px */\n    font-size: 28px; /* Увеличиваем с 20px до 28px */\n    color: #2d3748;\n    font-weight: 700; /* Добавляем font-weight */\n    line-height: 1.2;\n    text-align: center;\n    width: 100%;\n  }\n  \n  p {\n    margin: 0 0 20px 0;\n    font-size: 16px;\n    line-height: 1.6;\n    max-width: 320px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  \n  @media (max-width: 768px) {\n    min-height: 300px;\n    padding: 40px 20px;\n    \n    .icon {\n      font-size: 56px;\n      margin-bottom: 50px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 24px;\n      margin-bottom: 14px;\n    }\n    \n    p {\n      font-size: 15px;\n      max-width: 280px;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    min-height: 250px;\n    padding: 30px 16px;\n    \n    .icon {\n      font-size: 48px;\n      margin-bottom: 48px;\n      transform: translateX(-1px);\n    }\n    \n    h3 {\n      font-size: 22px;\n      margin-bottom: 12px;\n    }\n    \n    p {\n      font-size: 14px;\n      max-width: 260px;\n    }\n  }\n"]))));d.Ay.div(Kf||(Kf=(0,a.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  border-left: 4px solid #d69e2e;\n  margin-bottom: 15px;\n  \n  .header {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 15px;\n  }\n  \n  .applicant {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    \n    .name {\n      font-weight: 600;\n      color: #2d3748;\n    }\n    \n    .date {\n      font-size: 12px;\n      color: #718096;\n    }\n  }\n  \n  .message {\n    margin: 10px 0;\n    color: #4a5568;\n    font-size: 14px;\n    font-style: italic;\n  }\n  \n  .actions {\n    display: flex;\n    gap: 10px;\n  }\n"])));const pm=function(){var n,e,t,i,a,s,o,d,x=(0,r.useState)("clubs"),g=(0,p.A)(x,2),v=g[0],b=g[1],j=(0,r.useState)(!1),y=(0,p.A)(j,2),w=y[0],A=y[1],k=(0,r.useState)(null),N=(0,p.A)(k,2),S=N[0],C=N[1],z=(0,r.useState)(!1),_=(0,p.A)(z,2),E=_[0],P=_[1],L=(0,r.useState)(null),O=(0,p.A)(L,2),D=O[0],$=O[1],M=(0,r.useState)(!1),I=(0,p.A)(M,2),U=I[0],T=I[1],R=(0,r.useState)(null),B=(0,p.A)(R,2),W=B[0],F=B[1],Q=(0,r.useState)(""),q=(0,p.A)(Q,2),H=q[0],V=q[1],X=(0,r.useState)(""),Y=(0,p.A)(X,2),K=Y[0],G=Y[1],J=(0,r.useState)(""),Z=(0,p.A)(J,2),nn=Z[0],en=Z[1],tn=(0,c.useQueryClient)(),rn=(0,c.useQuery)(["clubs",H,K,nn],function(){return f.clubsAPI.getClubs({search:H,city:K,type:nn})},{enabled:"clubs"===v,onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),an=rn.data,sn=rn.isLoading,on=(0,c.useQuery)(["events",H,K],function(){return f.clubsAPI.getEvents({search:H,city:K})},{enabled:"events"===v,onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),cn=on.data,ln=on.isLoading,dn=(0,c.useMutation)(function(n){return f.clubsAPI.joinEvent(n)},{onSuccess:function(){l.Ay.success("Вы успешно записались на мероприятие!"),tn.invalidateQueries(["events"])},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),un=function(n){F(n),T(!0)},pn=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,dn.mutateAsync(W.id);case 1:l.Ay.success("Вы успешно записались на мероприятие!"),tn.invalidateQueries(["events"]),T(!1),F(null),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.error("Join event error:",t),l.Ay.error((null===(e=t.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.error)||"Ошибка при записи на мероприятие");case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),xn=(null==an?void 0:an.clubs)||[],hn=(null==cn?void 0:cn.events)||[];return(0,m.jsx)(Gf,{children:(0,m.jsxs)(yr,{$maxWidth:"1200px",children:[(0,m.jsx)(Wr,{$justify:"center",$align:"center",$wrap:!0,children:(0,m.jsxs)(Sr,{children:[(0,m.jsx)(fr,{}),"Клубы и мероприятия"]})}),(0,m.jsxs)(Jf,{children:[(0,m.jsxs)(Zf,{$active:"clubs"===v,onClick:function(){return b("clubs")},children:[(0,m.jsx)(fr,{}),"Клубы"]}),(0,m.jsxs)(Zf,{$active:"events"===v,onClick:function(){return b("events")},children:[(0,m.jsx)(rr,{}),"Мероприятия"]})]}),"clubs"===v&&(0,m.jsx)(nm,{children:(0,m.jsxs)(em,{children:[(0,m.jsxs)(tm,{children:[(0,m.jsx)("div",{className:"search-icon",children:(0,m.jsx)(rr,{})}),(0,m.jsx)("input",{type:"text",placeholder:"Поиск клубов...",value:H,onChange:function(n){return V(n.target.value)}})]}),(0,m.jsxs)(Lr,{value:K,onChange:function(n){return G(n.target.value)},style:{minWidth:"150px"},children:[(0,m.jsx)("option",{value:"",children:"Все города"}),(0,m.jsx)("option",{value:"Москва",children:"Москва"}),(0,m.jsx)("option",{value:"Санкт-Петербург",children:"Санкт-Петербург"}),(0,m.jsx)("option",{value:"Екатеринбург",children:"Екатеринбург"}),(0,m.jsx)("option",{value:"Новосибирск",children:"Новосибирск"})]}),(0,m.jsxs)(Lr,{value:nn,onChange:function(n){return en(n.target.value)},style:{minWidth:"120px"},children:[(0,m.jsx)("option",{value:"",children:"Все типы"}),(0,m.jsx)("option",{value:"public",children:"Открытые"}),(0,m.jsx)("option",{value:"private",children:"Приватные"})]})]})}),"events"===v&&(0,m.jsx)(nm,{children:(0,m.jsxs)(em,{children:[(0,m.jsxs)(tm,{children:[(0,m.jsx)("div",{className:"search-icon",children:(0,m.jsx)(rr,{})}),(0,m.jsx)("input",{type:"text",placeholder:"Поиск мероприятий...",value:H,onChange:function(n){return V(n.target.value)}})]}),(0,m.jsxs)(Lr,{value:K,onChange:function(n){return G(n.target.value)},style:{minWidth:"150px"},children:[(0,m.jsx)("option",{value:"",children:"Все города"}),(0,m.jsx)("option",{value:"Москва",children:"Москва"}),(0,m.jsx)("option",{value:"Санкт-Петербург",children:"Санкт-Петербург"}),(0,m.jsx)("option",{value:"Екатеринбург",children:"Екатеринбург"}),(0,m.jsx)("option",{value:"Новосибирск",children:"Новосибирск"})]})]})}),"clubs"===v&&(0,m.jsx)("div",{children:sn?(0,m.jsx)(Qr,{}):xn.length>0?(0,m.jsx)(Fr,{$columns:"repeat(auto-fill, minmax(300px, 1fr))",$gap:"25px",children:xn.map(function(n){return(0,m.jsxs)(rm,{onClick:function(){return function(n){C(n),A(!0)}(n)},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},children:[(0,m.jsx)(im,{$avatarUrl:n.avatar?"/uploads/".concat(n.avatar):null,children:(0,m.jsxs)(Wr,{$justify:"space-between",$align:"flex-start",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)(sm,{style:{color:"white",fontSize:"16px"},children:n.name}),(0,m.jsx)("div",{style:{fontSize:"12px",opacity:"0.9"},children:n.city})]}),(0,m.jsx)(dm,{$isPrivate:n.is_private,children:n.is_private?"Приватный":"Открытый"})]})}),(0,m.jsxs)(am,{children:[(0,m.jsx)(om,{children:n.description}),(0,m.jsxs)(cm,{children:[(0,m.jsxs)(lm,{children:[(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["📍 ",n.city]}),(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["👥 ",n.current_members||0," участников"]}),n.membership_fee&&(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["💰 ",n.membership_fee,"₽"]})]}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#718096",marginTop:"8px"},children:n.is_private?"🔒 Приватный клуб":"🌐 Открытый клуб"})]})]})]},n.id)})}):(0,m.jsxs)(um,{children:[(0,m.jsx)("div",{className:"icon",children:"🏛️"}),(0,m.jsx)("h3",{children:"Клубы не найдены"}),(0,m.jsx)("p",{children:"Попробуйте изменить параметры поиска"})]})}),"events"===v&&(0,m.jsx)("div",{children:ln?(0,m.jsx)(Qr,{}):hn.length>0?(0,m.jsx)(Fr,{$columns:"repeat(auto-fill, minmax(300px, 1fr))",$gap:"25px",children:hn.map(function(n){var e,t,r,i,a,s;return(0,m.jsxs)(rm,{onClick:function(){return function(n){$(n),P(!0)}(n)},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2},children:[(0,m.jsx)(im,{$avatarUrl:n.avatar?"/uploads/".concat(n.avatar):null,children:(0,m.jsxs)(Wr,{$justify:"space-between",$align:"flex-start",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)(sm,{style:{color:"white",fontSize:"16px"},children:n.title}),(0,m.jsx)("div",{style:{fontSize:"12px",opacity:"0.9"},children:(null===(e=n.club)||void 0===e?void 0:e.name)||"Клуб"})]}),(0,m.jsx)(dm,{$isPrivate:!1,children:new Date(n.date).toLocaleDateString()})]})}),(0,m.jsxs)(am,{children:[(0,m.jsx)(om,{children:n.description}),(0,m.jsxs)(cm,{children:[(0,m.jsxs)(lm,{children:[(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["📅 ",new Date(n.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]}),(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["🕐 ",n.time||"Время уточняется"]}),(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["📍 ",n.location||(null===(t=n.club)||void 0===t?void 0:t.location)||"Место уточняется"]}),(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["👥 ",(null===(r=n.participants)||void 0===r?void 0:r.length)||0,"/",n.max_participants||"∞"]}),n.price&&(0,m.jsxs)("span",{style:{fontSize:"12px",color:"#718096"},children:["💰 ",n.price,"₽"]})]}),(0,m.jsx)(Dr,{$size:"small",onClick:function(e){var t;e.stopPropagation(),null!==(t=n.user_participation)&&void 0!==t&&t.is_participating||un(n)},disabled:dn.isLoading||(null===(i=n.user_participation)||void 0===i?void 0:i.is_participating),$variant:null!==(a=n.user_participation)&&void 0!==a&&a.is_participating?"secondary":"primary",children:dn.isLoading?"Записываемся...":null!==(s=n.user_participation)&&void 0!==s&&s.is_participating?"Вы участвуете":"Участвовать"})]})]})]},n.id)})}):(0,m.jsxs)(um,{children:[(0,m.jsx)("div",{className:"icon",children:"🎉"}),(0,m.jsx)("h3",{children:"Мероприятия не найдены"}),(0,m.jsx)("p",{children:"Попробуйте изменить параметры поиска"})]})}),w&&S&&(0,m.jsx)(Tr,{onClick:function(){return A(!1)},children:(0,m.jsxs)(Rr,{$maxWidth:"700px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:S.name}),(0,m.jsx)($r,{onClick:function(){return A(!1)},children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,m.jsx)("p",{style:{color:"#4a5568",lineHeight:1.6,fontSize:"16px",marginBottom:"20px"},children:S.description}),(0,m.jsxs)("div",{style:{background:"#f7fafc",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:"📋 Информация о клубе"}),(0,m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"📍 Местоположение:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:S.city})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"👥 Участники:"}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{style:{color:"#4a5568"},children:[S.current_members||0," из ",S.max_members||"∞"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"🔐 Тип:"}),(0,m.jsx)("br",{}),(0,m.jsx)(dm,{$isPrivate:S.is_private,style:{margin:"5px 0"},children:S.is_private?"Приватный":"Открытый"})]}),S.membership_fee&&(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"💰 Взнос:"}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{style:{color:"#4a5568"},children:[S.membership_fee,"₽"]})]}),S.website&&(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"🌐 Сайт:"}),(0,m.jsx)("br",{}),(0,m.jsx)("a",{href:S.website,target:"_blank",rel:"noopener noreferrer",style:{color:"#3182ce",textDecoration:"none"},children:S.website})]}),S.email&&(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"📧 Email:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:S.email})]})]})]}),S.rules&&(0,m.jsxs)("div",{style:{background:"#fff5f5",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:"📜 Правила клуба"}),(0,m.jsx)("p",{style:{color:"#4a5568",lineHeight:1.6,margin:0},children:S.rules})]}),S.tags&&S.tags.length>0&&(0,m.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:"🏷️ Теги"}),(0,m.jsx)(Wr,{$gap:"8px",$wrap:!0,children:S.tags.map(function(n,e){return(0,m.jsx)("span",{style:{background:"#e2e8f0",color:"#4a5568",padding:"6px 12px",borderRadius:"20px",fontSize:"14px"},children:n},e)})})]})]}),(0,m.jsx)(Wr,{$justify:"center",children:(0,m.jsxs)("div",{style:{textAlign:"center",color:"#718096",background:"#f7fafc",padding:"20px",borderRadius:"12px",border:"2px dashed #cbd5e0"},children:[(0,m.jsx)("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"🎉"}),(0,m.jsx)("p",{style:{margin:"0 0 10px 0",fontSize:"16px"},children:"Для участия в мероприятиях клуба"}),(0,m.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#2d3748"},children:'перейдите во вкладку "Мероприятия"'})]})})]})}),E&&D&&(0,m.jsx)(Tr,{onClick:function(){return P(!1)},children:(0,m.jsxs)(Rr,{$maxWidth:"700px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsxs)("h2",{children:["🎉 ",D.title]}),(0,m.jsx)($r,{onClick:function(){return P(!1)},children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,m.jsxs)("div",{style:{background:"#f7fafc",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:"📋 Информация о мероприятии"}),(0,m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"🏛️ Клуб:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:(null===(n=D.club)||void 0===n?void 0:n.name)||"Не указан"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"📅 Дата:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:new Date(D.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"🕐 Время:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:D.time||"Время уточняется"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"📍 Место:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:D.location||(null===(e=D.club)||void 0===e?void 0:e.location)||"Место уточняется"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"👥 Участники:"}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{style:{color:"#4a5568"},children:[(null===(t=D.participants)||void 0===t?void 0:t.length)||0," из ",D.max_participants||"∞"]})]}),D.price&&(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"💰 Стоимость:"}),(0,m.jsx)("br",{}),(0,m.jsxs)("span",{style:{color:"#4a5568"},children:[D.price,"₽"]})]}),D.event_type&&(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"🏷️ Тип:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:D.event_type})]})]})]}),D.description&&(0,m.jsxs)("div",{style:{background:"#fff5f5",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:"📝 Описание мероприятия"}),(0,m.jsx)("p",{style:{color:"#4a5568",lineHeight:1.6,margin:0},children:D.description})]}),D.images&&D.images.length>0&&(0,m.jsxs)("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsxs)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:["📸 Фотографии мероприятия (",D.images.length,")"]}),(0,m.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},children:D.images.map(function(n,e){return(0,m.jsx)("div",{style:{aspectRatio:"4/3",borderRadius:"8px",overflow:"hidden",background:"#e2e8f0",cursor:"pointer",transition:"transform 0.2s ease"},onMouseEnter:function(n){return n.target.style.transform="scale(1.02)"},onMouseLeave:function(n){return n.target.style.transform="scale(1)"},onClick:function(){window.open("/uploads/".concat(n),"_blank")},children:(0,m.jsx)("img",{src:"/uploads/".concat(n),alt:"Фото мероприятия ".concat(e+1),style:{width:"100%",height:"100%",objectFit:"cover"},onError:function(n){n.target.style.display="none",n.target.parentElement.innerHTML='<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #718096; font-size: 12px;">Ошибка загрузки</div>'}})},e)})})]}),D.club&&(0,m.jsxs)("div",{style:{background:"#e6fffa",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:"🏛️ Информация о клубе"}),(0,m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Название:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:D.club.name})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Местоположение:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:D.club.location})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Тип:"}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:D.club.type})]})]})]})]}),(0,m.jsxs)(Wr,{$gap:"15px",$justify:"center",children:[(0,m.jsx)(Dr,{$variant:"secondary",onClick:function(){return P(!1)},children:"Закрыть"}),!(null!==(i=D.user_participation)&&void 0!==i&&i.is_participating)&&(0,m.jsx)(Dr,{onClick:function(){P(!1),un(D)},children:"Записаться на мероприятие"}),(null===(a=D.user_participation)||void 0===a?void 0:a.is_participating)&&(0,m.jsx)(Dr,{$variant:"secondary",disabled:!0,children:"Вы уже участвуете"})]})]})}),U&&W&&(0,m.jsx)(Tr,{onClick:function(){return T(!1)},children:(0,m.jsxs)(Rr,{$maxWidth:"500px",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"🎉 Записаться на мероприятие"}),(0,m.jsx)($r,{onClick:function(){return T(!1)},children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,m.jsxs)("div",{style:{background:"#f7fafc",padding:"20px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#2d3748",fontSize:"18px"},children:W.title}),(0,m.jsxs)("div",{style:{display:"grid",gap:"10px"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px"},children:"🏛️"}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:(null===(s=W.club)||void 0===s?void 0:s.name)||"Клуб"})]}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px"},children:"📅"}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:new Date(W.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]}),W.time&&(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px"},children:"🕐"}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:W.time})]}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px"},children:"📍"}),(0,m.jsx)("span",{style:{color:"#4a5568"},children:W.location||(null===(o=W.club)||void 0===o?void 0:o.location)||"Место уточняется"})]}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px"},children:"👥"}),(0,m.jsxs)("span",{style:{color:"#4a5568"},children:[(null===(d=W.participants)||void 0===d?void 0:d.length)||0," из ",W.max_participants||"∞"," участников"]})]}),W.price&&(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px"},children:"💰"}),(0,m.jsxs)("span",{style:{color:"#4a5568"},children:[W.price,"₽"]})]})]})]}),W.description&&(0,m.jsxs)("div",{style:{background:"#fff5f5",padding:"15px",borderRadius:"12px",marginBottom:"20px"},children:[(0,m.jsx)("h4",{style:{margin:"0 0 10px 0",color:"#2d3748",fontSize:"16px"},children:"📝 Описание"}),(0,m.jsx)("p",{style:{color:"#4a5568",lineHeight:1.5,margin:0},children:W.description})]}),(0,m.jsxs)("div",{style:{background:"#e6fffa",padding:"15px",borderRadius:"12px",border:"1px solid #81e6d9"},children:[(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,m.jsx)("span",{style:{fontSize:"16px"},children:"ℹ️"}),(0,m.jsx)("strong",{style:{color:"#2d3748"},children:"Важно знать:"})]}),(0,m.jsxs)("ul",{style:{color:"#4a5568",margin:0,paddingLeft:"20px"},children:[(0,m.jsx)("li",{children:"После записи вы получите уведомление"}),(0,m.jsx)("li",{children:"Организатор может связаться с вами"}),(0,m.jsx)("li",{children:"Вы можете отменить участие в любое время"})]})]})]}),(0,m.jsxs)(Wr,{$gap:"15px",$justify:"flex-end",children:[(0,m.jsx)(Dr,{$variant:"secondary",onClick:function(){return T(!1)},disabled:dn.isLoading,children:"Отмена"}),(0,m.jsx)(Dr,{onClick:pn,disabled:dn.isLoading,children:dn.isLoading?"Записываемся...":"Записаться на мероприятие"})]})]})})]})})};var xm,hm,fm,mm,gm,vm,bm,jm,ym,wm,Am,km,Nm,Sm=(0,d.Ay)(jr)(xm||(xm=(0,a.A)(["\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n"]))),Cm=d.Ay.div(hm||(hm=(0,a.A)(["\n  display: flex;\n  background: white;\n  border-radius: 12px;\n  padding: 4px;\n  margin-bottom: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 4px;\n  }\n"]))),zm=d.Ay.button(fm||(fm=(0,a.A)(["\n  flex: 1;\n  padding: 15px 20px;\n  border: none;\n  background: ",";\n  color: ",";\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  \n  &:hover:not(:disabled) {\n    background: ",";\n    color: ",";\n  }\n  \n  @media (max-width: 768px) {\n    padding: 12px 16px;\n    font-size: 14px;\n  }\n"])),function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"transparent"},function(n){return n.$active?"white":"#4a5568"},function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%)"},function(n){return n.$active?"white":"#dc3522"}),_m=(0,d.Ay)(ha.P.div)(mm||(mm=(0,a.A)(["\n  background: white;\n  border-radius: 25px;\n  padding: 35px;\n  text-align: center;\n  box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s ease;\n  \n  ","\n  \n  &:hover {\n    transform: ",";\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n  }\n  \n  @media (max-width: 768px) {\n    padding: 25px;\n    transform: none !important;\n    \n    &:hover {\n      transform: none !important;\n    }\n  }\n"])),function(n){return n.$featured&&"\n    transform: scale(1.05);\n    border: 3px solid #ffd700;\n    box-shadow: 0 20px 60px rgba(255, 215, 0, 0.3);\n    \n    &::before {\n      content: 'ПОПУЛЯРНЫЙ';\n      position: absolute;\n      top: 15px;\n      right: -30px;\n      background: linear-gradient(135deg, #ffd700 0%, #ffed4a 100%);\n      color: #2d3748;\n      padding: 8px 40px;\n      font-size: 12px;\n      font-weight: 700;\n      transform: rotate(45deg);\n      box-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);\n    }\n  "},function(n){return n.$featured?"scale(1.08)":"scale(1.02)"}),Em=d.Ay.div(gm||(gm=(0,a.A)(["\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 20px;\n  border-radius: 20px;\n  background: ",";\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 36px;\n  box-shadow: 0 10px 30px ","40;\n  \n  @media (max-width: 768px) {\n    width: 60px;\n    height: 60px;\n    font-size: 28px;\n  }\n"])),function(n){return n.$color},function(n){return n.$color}),Pm=d.Ay.h3(vm||(vm=(0,a.A)(["\n  margin: 0 0 10px 0;\n  font-size: 28px;\n  font-weight: 700;\n  color: #2d3748;\n  \n  @media (max-width: 768px) {\n    font-size: 24px;\n  }\n"]))),Lm=d.Ay.div(bm||(bm=(0,a.A)(["\n  margin-bottom: 25px;\n  \n  .price {\n    font-size: 48px;\n    font-weight: 700;\n    color: ",";\n    line-height: 1;\n  }\n  \n  .currency {\n    font-size: 24px;\n    margin-left: 5px;\n  }\n  \n  .period {\n    font-size: 14px;\n    color: #718096;\n    margin-top: 5px;\n  }\n  \n  @media (max-width: 768px) {\n    .price {\n      font-size: 36px;\n    }\n    \n    .currency {\n      font-size: 18px;\n    }\n  }\n"])),function(n){return n.$color}),Om=d.Ay.ul(jm||(jm=(0,a.A)(["\n  list-style: none;\n  padding: 0;\n  margin: 0 0 30px 0;\n  text-align: left;\n"]))),Dm=d.Ay.li(ym||(ym=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 8px 0;\n  color: #4a5568;\n  font-size: 15px;\n  \n  .icon {\n    color: #4caf50;\n    flex-shrink: 0;\n  }\n  \n  @media (max-width: 768px) {\n    font-size: 14px;\n  }\n"]))),$m=d.Ay.div(wm||(wm=(0,a.A)(["\n  background: white;\n  border-radius: 20px;\n  padding: 30px;\n  margin-bottom: 30px;\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  \n  .status-icon {\n    width: 80px;\n    height: 80px;\n    margin: 0 auto 20px;\n    border-radius: 20px;\n    background: ",";\n    color: white;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 36px;\n  }\n  \n  .status-title {\n    font-size: 24px;\n    font-weight: 700;\n    color: #2d3748;\n    margin-bottom: 10px;\n  }\n  \n  .status-info {\n    color: #4a5568;\n    font-size: 16px;\n    margin-bottom: 20px;\n    line-height: 1.5;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n    \n    .status-icon {\n      width: 60px;\n      height: 60px;\n      font-size: 28px;\n    }\n    \n    .status-title {\n      font-size: 20px;\n    }\n    \n    .status-info {\n      font-size: 14px;\n    }\n  }\n"])),function(n){return n.$statusColor}),Mm=d.Ay.div(Am||(Am=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 20px;\n  margin-bottom: 15px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  .payment-info {\n    .plan {\n      font-weight: 600;\n      color: #2d3748;\n      margin-bottom: 5px;\n    }\n    \n    .date {\n      font-size: 12px;\n      color: #718096;\n    }\n  }\n  \n  .payment-amount {\n    font-size: 18px;\n    font-weight: 700;\n    color: #4caf50;\n  }\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n    \n    .payment-amount {\n      font-size: 16px;\n    }\n  }\n"]))),Im=d.Ay.div(km||(km=(0,a.A)(["\n  background: linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%);\n  border-radius: 15px;\n  padding: 20px;\n  margin-bottom: 20px;\n  \n  .promo-title {\n    font-size: 16px;\n    font-weight: 600;\n    color: #2d3748;\n    margin-bottom: 10px;\n  }\n  \n  .promo-input {\n    display: flex;\n    gap: 10px;\n    \n    input {\n      flex: 1;\n      padding: 10px 15px;\n      border: 2px solid #e2e8f0;\n      border-radius: 8px;\n      font-size: 14px;\n      \n      &:focus {\n        outline: none;\n        border-color: #dc3522;\n      }\n    }\n  }\n"]))),Um=d.Ay.div(Nm||(Nm=(0,a.A)(["\n  text-align: center;\n  padding: 60px 20px;\n  color: #718096;\n  \n  .icon {\n    font-size: 64px;\n    margin-bottom: 20px;\n    opacity: 0.5;\n  }\n  \n  h3 {\n    margin: 0 0 10px 0;\n    font-size: 20px;\n    color: #2d3748;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 16px;\n  }\n"]))),Tm={VIP:{icon:"👑",color:"#ffd700",price:299,features:["Безлимитные лайки","Просмотр всех профилей","Суперлайки (5 в день)","Приоритет в поиске","Скрытие рекламы","Расширенные фильтры"]},PREMIUM:{icon:"💎",color:"#9b59b6",price:599,featured:!0,features:["Все возможности VIP","Безлимитные суперлайки","Просмотр лайков","Невидимый режим","Приоритетная поддержка","Эксклюзивные события","Расширенная статистика"]}};const Rm=function(){var n,e=(0,r.useState)("plans"),t=(0,p.A)(e,2),i=t[0],a=t[1],s=(0,r.useState)(!1),o=(0,p.A)(s,2),d=o[0],x=o[1],g=(0,r.useState)(null),v=(0,p.A)(g,2),b=v[0],j=v[1],y=(0,r.useState)(""),w=(0,p.A)(y,2),A=w[0],k=w[1],N=(0,c.useQueryClient)(),S=(0,c.useQuery)("subscription-status",f.subscriptionsAPI.getStatus,{onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),C=S.data,z=S.isLoading,_=(0,c.useQuery)("subscription-history",f.subscriptionsAPI.getHistory,{enabled:"history"===i,onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),E=_.data,P=_.isLoading,L=(0,c.useMutation)(f.subscriptionsAPI.subscribe,{onSuccess:function(){l.Ay.success("Подписка успешно оформлена!"),x(!1),j(null),N.invalidateQueries("subscription-status")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),O=((0,c.useMutation)(f.subscriptionsAPI.cancel,{onSuccess:function(){l.Ay.success("Подписка отменена"),N.invalidateQueries("subscription-status")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),(0,c.useMutation)(f.subscriptionsAPI.usePromoCode,{onSuccess:function(n){l.Ay.success("Промокод применен! Скидка: ".concat(n.discount,"%")),k("")},onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}})),D=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Вы уверены, что хотите отменить подписку?")){n.next=4;break}return e=prompt("Причина отмены (необязательно):"),n.prev=1,n.next=2,f.subscriptionsAPI.cancel(e||"");case 2:l.Ay.success("Подписка отменена"),N.invalidateQueries("subscription-status"),n.next=4;break;case 3:n.prev=3,t=n.catch(1),l.Ay.error(f.apiUtils.handleError(t));case 4:case"end":return n.stop()}},n,null,[[1,3]])}));return function(){return n.apply(this,arguments)}}();return z?(0,m.jsx)(Sm,{children:(0,m.jsx)(yr,{children:(0,m.jsx)(Qr,{})})}):(0,m.jsx)(Sm,{children:(0,m.jsxs)(yr,{$maxWidth:"1200px",children:[(0,m.jsx)(Wr,{$justify:"center",$align:"center",$wrap:!0,children:(0,m.jsxs)(Sr,{style:{color:"white",textAlign:"center",marginBottom:"10px"},children:[(0,m.jsx)(mr,{}),"VIP & PREMIUM подписки"]})}),(0,m.jsx)("p",{style:{textAlign:"center",color:"rgba(255,255,255,0.9)",marginBottom:"30px"},children:"Получите максимум от SwingFox с премиум возможностями"}),(0,m.jsxs)(Cm,{children:[(0,m.jsxs)(zm,{$active:"plans"===i,onClick:function(){return a("plans")},children:[(0,m.jsx)(mr,{}),"Планы"]}),(0,m.jsxs)(zm,{$active:"status"===i,onClick:function(){return a("status")},children:[(0,m.jsx)(hr,{}),"Мой статус"]}),(0,m.jsx)(zm,{$active:"history"===i,onClick:function(){return a("history")},children:"📋 История"})]}),"plans"===i&&(0,m.jsx)("div",{children:(0,m.jsx)(Fr,{$columns:"repeat(auto-fit, minmax(300px, 1fr))",$gap:"30px",children:Object.entries(Tm).map(function(n){var e=(0,p.A)(n,2),t=e[0],r=e[1];return(0,m.jsxs)(_m,{$featured:r.featured,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,m.jsx)(Em,{$color:r.color,children:r.icon}),(0,m.jsx)(Pm,{children:t}),(0,m.jsxs)(Lm,{$color:r.color,children:[(0,m.jsxs)("div",{className:"price",children:[r.price,(0,m.jsx)("span",{className:"currency",children:"🦊"})]}),(0,m.jsx)("div",{className:"period",children:"в месяц"})]}),(0,m.jsx)(Om,{children:r.features.map(function(n,e){return(0,m.jsxs)(Dm,{children:[(0,m.jsx)("div",{className:"icon",children:(0,m.jsx)(ur,{})}),n]},e)})}),(0,m.jsx)(Dr,{onClick:function(){return function(n){j(n),x(!0)}(t)},disabled:(null==C?void 0:C.plan)===t.toLowerCase(),style:{background:(null==C?void 0:C.plan)===t.toLowerCase()?"#e2e8f0":"linear-gradient(135deg, ".concat(r.color," 0%, ").concat(r.color,"dd 100%)"),width:"100%"},children:(null==C?void 0:C.plan)===t.toLowerCase()?"Текущий план":"Выбрать план"})]},t)})})}),"status"===i&&(0,m.jsxs)("div",{children:[(0,m.jsxs)($m,{$statusColor:function(n){switch(null==n?void 0:n.toLowerCase()){case"vip":return"#ffd700";case"premium":return"#9b59b6";default:return"#4a5568"}}(null==C?void 0:C.plan),children:[(0,m.jsx)("div",{className:"status-icon",children:function(n){switch(null==n?void 0:n.toLowerCase()){case"vip":return"👑";case"premium":return"💎";default:return"👤"}}(null==C?void 0:C.plan)}),(0,m.jsx)("div",{className:"status-title",children:null!=C&&C.has_subscription&&"free"!==(null==C?void 0:C.plan)?"".concat(C.plan.toUpperCase()," план"):"БАЗОВЫЙ план"}),(0,m.jsx)("div",{className:"status-info",children:null!=C&&C.has_subscription&&"free"!==(null==C?void 0:C.plan)?(0,m.jsxs)(m.Fragment,{children:["Активна до: ",C.expires_at?f.apiUtils.formatDate(C.expires_at):"Не определено",(0,m.jsx)("br",{}),"Автопродление: Включено (по умолчанию)"]}):"У вас базовый план. Оформите премиум подписку для получения дополнительных возможностей!"}),null!=C&&C.has_subscription&&"free"!==(null==C?void 0:C.plan)?(0,m.jsxs)(Wr,{$gap:"15px",$justify:"center",children:[(0,m.jsx)(Dr,{$variant:"secondary",children:"Изменить план"}),(0,m.jsx)(Dr,{$variant:"danger",onClick:D,children:"Отменить подписку"})]}):(0,m.jsx)(Wr,{$gap:"15px",$justify:"center",children:(0,m.jsx)(Dr,{$variant:"primary",onClick:function(){return a("plans")},children:"Оформить подписку"})})]}),(0,m.jsxs)(Im,{children:[(0,m.jsx)("div",{className:"promo-title",children:"Есть промокод?"}),(0,m.jsxs)("div",{className:"promo-input",children:[(0,m.jsx)("input",{type:"text",placeholder:"Введите промокод",value:A,onChange:function(n){return k(n.target.value.toUpperCase())}}),(0,m.jsx)(Dr,{$size:"small",onClick:function(){A.trim()?O.mutate(A.trim()):l.Ay.error("Введите промокод")},disabled:O.isLoading||!A.trim(),children:"Применить"})]})]})]}),"history"===i&&(0,m.jsx)("div",{children:P?(0,m.jsx)(Qr,{}):(null==E||null===(n=E.payments)||void 0===n?void 0:n.length)>0?(0,m.jsx)("div",{children:E.payments.map(function(n){var e;return(0,m.jsxs)(Mm,{children:[(0,m.jsxs)("div",{className:"payment-info",children:[(0,m.jsxs)("div",{className:"plan",children:[null===(e=n.plan)||void 0===e?void 0:e.toUpperCase()," подписка"]}),(0,m.jsx)("div",{className:"date",children:f.apiUtils.formatDate(n.created_at)})]}),(0,m.jsxs)("div",{className:"payment-amount",children:["+",n.amount,"🦊"]})]},n.id)})}):(0,m.jsxs)(Um,{children:[(0,m.jsx)("div",{className:"icon",children:"💳"}),(0,m.jsx)("h3",{children:"Нет истории платежей"}),(0,m.jsx)("p",{children:"Здесь будет отображаться история ваших подписок"})]})}),d&&b&&(0,m.jsx)(Tr,{onClick:function(){return x(!1)},children:(0,m.jsxs)(Rr,{onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)(Br,{children:[(0,m.jsxs)("h2",{children:["Оформление ",b," подписки"]}),(0,m.jsx)($r,{onClick:function(){return x(!1)},children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)("div",{style:{textAlign:"center",marginBottom:"25px"},children:[(0,m.jsx)(Em,{$color:Tm[b].color,children:Tm[b].icon}),(0,m.jsxs)("h3",{style:{margin:"15px 0 5px 0",color:"#2d3748"},children:[b," подписка"]}),(0,m.jsxs)("div",{style:{fontSize:"24px",fontWeight:"700",color:Tm[b].color},children:[Tm[b].price,"🦊/месяц"]})]}),(0,m.jsxs)(Cr,{onSubmit:function(n){if(n.preventDefault(),b){var e={subscription_type:b.toUpperCase(),duration_months:1,payment_method:"balance",auto_renewal:!0};A.trim()&&(e.promo_code=A.trim()),L.mutate(e)}},children:[(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{children:"Промокод (необязательно)"}),(0,m.jsx)(Pr,{type:"text",placeholder:"Введите промокод для скидки",value:A,onChange:function(n){return k(n.target.value.toUpperCase())}})]}),(0,m.jsxs)("div",{style:{background:"#f7fafc",padding:"15px",borderRadius:"10px",marginBottom:"20px",fontSize:"14px",color:"#4a5568"},children:[(0,m.jsx)("strong",{children:"Условия:"}),(0,m.jsxs)("ul",{style:{margin:"10px 0 0 20px",paddingLeft:0},children:[(0,m.jsx)("li",{children:"Подписка активируется сразу после оплаты"}),(0,m.jsx)("li",{children:"Автопродление можно отключить в любое время"}),(0,m.jsx)("li",{children:"Возврат средств в течение 7 дней"})]})]}),(0,m.jsxs)(Wr,{$gap:"10px",$justify:"flex-end",children:[(0,m.jsx)(Dr,{$variant:"secondary",onClick:function(){return x(!1)},type:"button",children:"Отмена"}),(0,m.jsx)(Dr,{type:"submit",disabled:L.isLoading,children:L.isLoading?"Обработка...":"Оплатить"})]})]})]})})]})})};var Bm,Wm,Fm,Qm,qm,Hm,Vm,Xm,Ym,Km,Gm,Jm;function Zm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function ng(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Zm(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zm(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var eg=(0,d.Ay)(jr)(Bm||(Bm=(0,a.A)(["\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n"]))),tg=d.Ay.div(Wm||(Wm=(0,a.A)(["\n  display: flex;\n  background: white;\n  border-radius: 12px;\n  padding: 4px;\n  margin-bottom: 30px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 4px;\n  }\n"]))),rg=d.Ay.button(Fm||(Fm=(0,a.A)(["\n  flex: 1;\n  padding: 15px 20px;\n  border: none;\n  background: ",";\n  color: ",";\n  border-radius: 8px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  \n  &:hover:not(:disabled) {\n    background: ",";\n    color: ",";\n  }\n  \n  @media (max-width: 768px) {\n    padding: 12px 16px;\n    font-size: 14px;\n  }\n"])),function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"transparent"},function(n){return n.$active?"white":"#4a5568"},function(n){return n.$active?"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)":"linear-gradient(135deg, rgba(220, 53, 34, 0.1) 0%, rgba(255, 107, 88, 0.1) 100%)"},function(n){return n.$active?"white":"#dc3522"}),ig=(0,d.Ay)(ha.P.div)(Qm||(Qm=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 20px;\n  margin-bottom: 15px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s ease;\n  \n  ","\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);\n  }\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    text-align: center;\n    gap: 15px;\n    \n    &:hover {\n      transform: none;\n    }\n  }\n"])),function(n){return n.$rank<=3&&"\n    &::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 4px;\n      background: ".concat(1===n.$rank?"#ffd700":2===n.$rank?"#c0c0c0":"#cd7f32",";\n    }\n  ")}),ag=d.Ay.div(qm||(qm=(0,a.A)(["\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  font-weight: 700;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n  flex-shrink: 0;\n  \n  @media (max-width: 768px) {\n    width: 50px;\n    height: 50px;\n    font-size: 16px;\n  }\n"])),function(n){return 1===n.$rank?"linear-gradient(135deg, #ffd700 0%, #ffed4a 100%)":2===n.$rank?"linear-gradient(135deg, #c0c0c0 0%, #e8e8e8 100%)":3===n.$rank?"linear-gradient(135deg, #cd7f32 0%, #deb887 100%)":"linear-gradient(135deg, #4a5568 0%, #718096 100%)"},function(n){return n.$rank<=3?"#2d3748":"white"}),sg=d.Ay.div(Hm||(Hm=(0,a.A)(["\n  flex: 1;\n  \n  .name {\n    font-size: 18px;\n    font-weight: 600;\n    color: #2d3748;\n    margin-bottom: 5px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  \n  .stats {\n    display: flex;\n    gap: 20px;\n    color: #4a5568;\n    font-size: 14px;\n    \n    .stat {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n    }\n  }\n  \n  @media (max-width: 768px) {\n    .stats {\n      justify-content: center;\n      gap: 15px;\n    }\n  }\n"]))),og=d.Ay.div(Vm||(Vm=(0,a.A)(["\n  text-align: right;\n  \n  .rating {\n    font-size: 24px;\n    font-weight: 700;\n    color: #dc3522;\n    display: flex;\n    align-items: center;\n    gap: 5px;\n  }\n  \n  .change {\n    font-size: 12px;\n    margin-top: 2px;\n    display: flex;\n    align-items: center;\n    gap: 2px;\n    \n    &.positive {\n      color: #4caf50;\n    }\n    \n    &.negative {\n      color: #f44336;\n    }\n  }\n  \n  @media (max-width: 768px) {\n    text-align: center;\n    \n    .rating {\n      justify-content: center;\n    }\n  }\n"]))),cg=(0,d.Ay)(Fr)(Xm||(Xm=(0,a.A)(["\n  margin-bottom: 30px;\n"]))),lg=d.Ay.div(Ym||(Ym=(0,a.A)(["\n  background: white;\n  border-radius: 15px;\n  padding: 25px;\n  text-align: center;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);\n  position: relative;\n  overflow: hidden;\n  \n  .icon {\n    width: 60px;\n    height: 60px;\n    margin: 0 auto 15px;\n    border-radius: 15px;\n    background: ",";\n    color: white;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 24px;\n  }\n  \n  .value {\n    font-size: 28px;\n    font-weight: 700;\n    color: #2d3748;\n    margin-bottom: 5px;\n  }\n  \n  .label {\n    color: #4a5568;\n    font-size: 14px;\n  }\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n    \n    .icon {\n      width: 50px;\n      height: 50px;\n      font-size: 20px;\n    }\n    \n    .value {\n      font-size: 24px;\n    }\n  }\n"])),function(n){return n.$color}),dg=d.Ay.div(Km||(Km=(0,a.A)(["\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  \n  .filter-row {\n    display: flex;\n    gap: 15px;\n    align-items: center;\n    flex-wrap: wrap;\n  }\n  \n  .filter-group {\n    flex: 1;\n    min-width: 200px;\n  }\n  \n  @media (max-width: 768px) {\n    .filter-row {\n      flex-direction: column;\n      gap: 10px;\n    }\n    \n    .filter-group {\n      width: 100%;\n      min-width: auto;\n    }\n  }\n"]))),ug=d.Ay.div(Gm||(Gm=(0,a.A)(["\n  text-align: center;\n  padding: 60px 20px;\n  color: #718096;\n  \n  .icon {\n    font-size: 64px;\n    margin-bottom: 20px;\n    opacity: 0.5;\n  }\n  \n  h3 {\n    margin: 0 0 10px 0;\n    font-size: 20px;\n    color: #2d3748;\n  }\n  \n  p {\n    margin: 0;\n    font-size: 16px;\n  }\n"]))),pg=d.Ay.span(Jm||(Jm=(0,a.A)(["\n  background: ",";\n  color: white;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 10px;\n  font-weight: 600;\n  text-transform: uppercase;\n"])),function(n){return f.apiUtils.getVipBadgeColor(n.$vipLevel)});const xg=function(){var n,e,t=(0,r.useState)("leaderboard"),i=(0,p.A)(t,2),a=i[0],s=i[1],o=(0,r.useState)({period:"month",category:"overall",city:""}),d=(0,p.A)(o,2),u=d[0],x=d[1],h=((0,c.useQueryClient)(),(0,c.useQuery)(["leaderboard",u],function(){return f.ratingAPI.getLeaderboard(u)},{enabled:"leaderboard"===a,onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}})),g=h.data,v=h.isLoading,j=(0,c.useQuery)(["my-rating-stats"],f.ratingAPI.getMyStats,{enabled:"my-rating"===a,onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),y=j.data,w=j.isLoading,A=(0,c.useQuery)(["top-users",u.period],function(){return f.ratingAPI.getTopUsers({period:u.period})},{enabled:"top-users"===a,onError:function(n){l.Ay.error(f.apiUtils.handleError(n))}}),k=A.data,N=A.isLoading,S=function(n,e){x(function(t){return ng(ng({},t),{},(0,b.A)({},n,e))})},C=function(n){return n>0?(0,m.jsx)(gr,{}):n<0?(0,m.jsx)(vr,{}):null};return"leaderboard"===a&&v||"my-rating"===a&&w||"top-users"===a&&N?(0,m.jsx)(eg,{children:(0,m.jsx)(yr,{children:(0,m.jsx)(Qr,{})})}):(0,m.jsx)(eg,{children:(0,m.jsxs)(yr,{$maxWidth:"1200px",children:[(0,m.jsx)(Wr,{$justify:"center",$align:"center",$wrap:!0,children:(0,m.jsxs)(Sr,{style:{color:"white",textAlign:"center",marginBottom:"10px"},children:[(0,m.jsx)(br,{}),"Система рейтинга"]})}),(0,m.jsx)("p",{style:{textAlign:"center",color:"rgba(255,255,255,0.9)",marginBottom:"30px"},children:"Следите за рейтингом пользователей и своими достижениями"}),(0,m.jsxs)(tg,{children:[(0,m.jsxs)(rg,{$active:"leaderboard"===a,onClick:function(){return s("leaderboard")},children:[(0,m.jsx)(br,{}),"Рейтинг"]}),(0,m.jsxs)(rg,{$active:"my-rating"===a,onClick:function(){return s("my-rating")},children:[(0,m.jsx)(hr,{}),"Мой рейтинг"]}),(0,m.jsxs)(rg,{$active:"top-users"===a,onClick:function(){return s("top-users")},children:[(0,m.jsx)(mr,{}),"Топ пользователи"]})]}),"leaderboard"===a&&(0,m.jsxs)("div",{children:[(0,m.jsx)(dg,{children:(0,m.jsxs)("div",{className:"filter-row",children:[(0,m.jsxs)("div",{className:"filter-group",children:[(0,m.jsx)(_r,{children:"Период"}),(0,m.jsxs)("select",{value:u.period,onChange:function(n){return S("period",n.target.value)},style:{width:"100%",padding:"10px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[(0,m.jsx)("option",{value:"week",children:"Неделя"}),(0,m.jsx)("option",{value:"month",children:"Месяц"}),(0,m.jsx)("option",{value:"year",children:"Год"}),(0,m.jsx)("option",{value:"all",children:"Все время"})]})]}),(0,m.jsxs)("div",{className:"filter-group",children:[(0,m.jsx)(_r,{children:"Категория"}),(0,m.jsxs)("select",{value:u.category,onChange:function(n){return S("category",n.target.value)},style:{width:"100%",padding:"10px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[(0,m.jsx)("option",{value:"overall",children:"Общий"}),(0,m.jsx)("option",{value:"activity",children:"Активность"}),(0,m.jsx)("option",{value:"popularity",children:"Популярность"}),(0,m.jsx)("option",{value:"engagement",children:"Вовлеченность"})]})]}),(0,m.jsxs)("div",{className:"filter-group",children:[(0,m.jsx)(_r,{children:"Город"}),(0,m.jsx)(Pr,{type:"text",placeholder:"Фильтр по городу",value:u.city,onChange:function(n){return S("city",n.target.value)}})]})]})}),(null==g||null===(n=g.users)||void 0===n?void 0:n.length)>0?(0,m.jsx)("div",{children:g.users.map(function(n,e){return(0,m.jsxs)(ig,{$rank:e+1,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*e},children:[(0,m.jsx)(ag,{$rank:e+1,children:(r=e+1,1===r?"🥇":2===r?"🥈":3===r?"🥉":r)}),(0,m.jsxs)(sg,{children:[(0,m.jsxs)("div",{className:"name",children:[n.name,n.vip_level&&(0,m.jsx)(pg,{$vipLevel:n.vip_level,children:n.vip_level})]}),(0,m.jsxs)("div",{className:"stats",children:[(0,m.jsxs)("div",{className:"stat",children:["👁️ ",n.profile_views||0]}),(0,m.jsxs)("div",{className:"stat",children:["❤️ ",n.likes_received||0]}),(0,m.jsxs)("div",{className:"stat",children:["📍 ",n.city||"Не указан"]})]})]}),(0,m.jsxs)(og,{children:[(0,m.jsxs)("div",{className:"rating",children:[(0,m.jsx)(hr,{}),n.rating_score||0]}),void 0!==n.rating_change&&(0,m.jsxs)("div",{className:"change ".concat((t=n.rating_change,t>0?"positive":t<0?"negative":"")),children:[C(n.rating_change),Math.abs(n.rating_change)]})]})]},n.id);var t,r})}):(0,m.jsxs)(ug,{children:[(0,m.jsx)("div",{className:"icon",children:"🏆"}),(0,m.jsx)("h3",{children:"Нет данных рейтинга"}),(0,m.jsx)("p",{children:"Рейтинг пользователей пока не сформирован"})]})]}),"my-rating"===a&&(0,m.jsxs)("div",{children:[(0,m.jsxs)(cg,{$columns:"repeat(auto-fit, minmax(250px, 1fr))",$gap:"20px",children:[(0,m.jsxs)(lg,{$color:"linear-gradient(135deg, #dc3522 0%, #ff6b58 100%)",children:[(0,m.jsx)("div",{className:"icon",children:(0,m.jsx)(hr,{})}),(0,m.jsx)("div",{className:"value",children:(null==y?void 0:y.current_rating)||0}),(0,m.jsx)("div",{className:"label",children:"Текущий рейтинг"})]}),(0,m.jsxs)(lg,{$color:"linear-gradient(135deg, #4caf50 0%, #66bb6a 100%)",children:[(0,m.jsx)("div",{className:"icon",children:(0,m.jsx)(br,{})}),(0,m.jsxs)("div",{className:"value",children:["#",(null==y?void 0:y.current_position)||"-"]}),(0,m.jsx)("div",{className:"label",children:"Позиция в рейтинге"})]}),(0,m.jsxs)(lg,{$color:"linear-gradient(135deg, #ff9800 0%, #ffb74d 100%)",children:[(0,m.jsx)("div",{className:"icon",children:"📈"}),(0,m.jsxs)("div",{className:"value",children:[(null==y?void 0:y.rating_change)>0?"+":"",(null==y?void 0:y.rating_change)||0]}),(0,m.jsx)("div",{className:"label",children:"Изменение за месяц"})]}),(0,m.jsxs)(lg,{$color:"linear-gradient(135deg, #9c27b0 0%, #ba68c8 100%)",children:[(0,m.jsx)("div",{className:"icon",children:"🎯"}),(0,m.jsx)("div",{className:"value",children:(null==y?void 0:y.max_rating)||0}),(0,m.jsx)("div",{className:"label",children:"Максимальный рейтинг"})]})]}),(null==y||null===(e=y.rating_history)||void 0===e?void 0:e.length)>0&&(0,m.jsxs)(yr,{children:[(0,m.jsx)("h3",{style:{marginBottom:"20px",color:"#2d3748"},children:"История рейтинга"}),(0,m.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"10px"},children:y.rating_history.map(function(n,e){return(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 0",borderBottom:"1px solid #e2e8f0"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:n.reason||"Обновление рейтинга"}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#718096"},children:f.apiUtils.formatDate(n.created_at)})]}),(0,m.jsxs)("div",{style:{color:n.change>0?"#4caf50":"#f44336",fontWeight:"600"},children:[n.change>0?"+":"",n.change]})]},e)})})]})]}),"top-users"===a&&(0,m.jsxs)("div",{children:[(0,m.jsx)(dg,{children:(0,m.jsx)("div",{className:"filter-row",children:(0,m.jsxs)("div",{className:"filter-group",children:[(0,m.jsx)(_r,{children:"Период"}),(0,m.jsxs)("select",{value:u.period,onChange:function(n){return S("period",n.target.value)},style:{width:"100%",padding:"10px",border:"1px solid #e2e8f0",borderRadius:"8px"},children:[(0,m.jsx)("option",{value:"week",children:"Неделя"}),(0,m.jsx)("option",{value:"month",children:"Месяц"}),(0,m.jsx)("option",{value:"year",children:"Год"})]})]})})}),(0,m.jsx)(Fr,{$columns:"repeat(auto-fit, minmax(300px, 1fr))",$gap:"20px",children:["most_active","most_popular","most_gifts"].map(function(n,e){var t=(null==k?void 0:k[n])||[];return(0,m.jsxs)(yr,{children:[(0,m.jsx)("h3",{style:{marginBottom:"20px",color:"#2d3748",textAlign:"center"},children:{most_active:"Самые активные",most_popular:"Самые популярные",most_gifts:"Больше всего подарков"}[n]}),t.length>0?(0,m.jsx)("div",{children:t.slice(0,5).map(function(e,t){return(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"15px",padding:"10px 0",borderBottom:t<4?"1px solid #e2e8f0":"none"},children:[(0,m.jsx)("div",{style:{width:"30px",height:"30px",borderRadius:"50%",background:0===t?"#ffd700":1===t?"#c0c0c0":2===t?"#cd7f32":"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"600",color:t<=2?"#2d3748":"#718096"},children:t+1}),(0,m.jsxs)("div",{style:{flex:1},children:[(0,m.jsxs)("div",{style:{fontWeight:"600",color:"#2d3748"},children:[e.name,e.vip_level&&(0,m.jsx)(pg,{$vipLevel:e.vip_level,style:{marginLeft:"8px"},children:e.vip_level})]}),(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#718096"},children:[e.score||0," ","most_active"===n?"действий":"most_popular"===n?"лайков":"подарков"]})]})]},e.id)})}):(0,m.jsx)("div",{style:{textAlign:"center",color:"#718096",padding:"20px"},children:"Нет данных"})]},n)})})]})]})})};var hg,fg,mg=d.Ay.div(hg||(hg=(0,a.A)(["\n  min-height: 100vh;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n"]))),gg=d.Ay.div(fg||(fg=(0,a.A)(["\n  width: 100%;\n  max-width: 600px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"])));const vg=function(){var n=(0,c.useQuery)({queryKey:["user"],queryFn:function(){return f.api.get("/auth/me")},staleTime:3e5}),e=n.data;return n.isLoading?(0,m.jsx)(mg,{children:(0,m.jsx)(Qr,{})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(mg,{children:(0,m.jsx)(gg,{children:(0,m.jsx)(Ye,{onClose:function(){navigate(-1)},currentBalance:(null==e?void 0:e.balance)||0,onSuccess:function(){window.location.reload()}})})})]})};function bg(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function jg(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?bg(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bg(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}const yg=function(){var n=(0,o.Zp)(),e=(0,r.useState)(!1),t=(0,p.A)(e,2),i=t[0],a=t[1],c=(0,r.useState)(!1),d=(0,p.A)(c,2),x=d[0],f=d[1],g=(0,Ua.mN)(),v=g.register,b=g.handleSubmit,j=g.formState.errors;r.useEffect(function(){var e=function(){var e=(0,u.A)(h().mark(function e(){return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Cn()){e.next=4;break}return e.prev=1,e.next=2,Sn.getProfile();case 2:n("/club/dashboard",{replace:!0}),e.next=4;break;case 3:e.prev=3,e.catch(1),console.warn("Токен клуба невалиден при входе в ClubLogin"),zn();case 4:case"end":return e.stop()}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();e()},[n]);var y=function(){var e=(0,u.A)(h().mark(function e(t){var r,i;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=2,Sn.login({login:t.login,password:t.password});case 2:e.sent.token&&(l.Ay.success("Успешная авторизация клуба!"),n("/club/dashboard",{replace:!0})),e.next=4;break;case 3:e.prev=3,i=e.catch(1),r=i.message||"Ошибка авторизации",l.Ay.error(r);case 4:return e.prev=4,a(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)(jr,{$gradient:!0,children:[(0,m.jsx)("div",{className:"auth-decoration auth-decoration-top-right"}),(0,m.jsx)("div",{className:"auth-decoration auth-decoration-bottom-left"}),(0,m.jsxs)(yr,{$maxWidth:"450px",children:[(0,m.jsxs)(wr,{children:[(0,m.jsx)(Ar,{children:"CF"}),(0,m.jsx)(kr,{children:"SwingFox Club"}),(0,m.jsx)(Nr,{children:"Добро пожаловать! Войдите в аккаунт клуба"})]}),(0,m.jsxs)(Cr,{onSubmit:b(y),children:[(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"login",children:"Логин или Email"}),(0,m.jsx)(Pr,jg(jg({type:"text",id:"login",placeholder:"Введите логин или email клуба",autoComplete:"username"},v("login",{required:"Логин или email обязателен",minLength:{value:3,message:"Минимум 3 символа"}})),{},{className:j.login?"error":""})),j.login&&(0,m.jsx)(Mr,{children:j.login.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"password",children:"Пароль"}),(0,m.jsxs)(Er,{children:[(0,m.jsx)(Pr,jg(jg({type:x?"text":"password",id:"password",placeholder:"Введите пароль",autoComplete:"current-password"},v("password",{required:"Пароль обязателен",minLength:{value:6,message:"Минимум 6 символов"}})),{},{className:j.password?"error":""})),(0,m.jsx)($r,{type:"button",$variant:"secondary",onClick:function(){return f(!x)},style:{position:"absolute",right:"12px",background:"none",color:"#718096"},children:x?(0,m.jsx)(tr,{}):(0,m.jsx)(er,{})})]}),j.password&&(0,m.jsx)(Mr,{children:j.password.message})]}),(0,m.jsx)(Dr,{type:"submit",disabled:i,style:{width:"100%"},children:i?"Вход...":"Войти в клуб"})]}),(0,m.jsxs)(Wr,{$justify:"center",$gap:"20px",style:{marginTop:"25px"},children:[(0,m.jsx)(s.N_,{to:"/club/register",style:{color:"#dc3522",textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:"Регистрация клуба"}),(0,m.jsx)("span",{style:{color:"#cbd5e0"},children:"|"}),(0,m.jsx)(s.N_,{to:"/club/forgot-password",style:{color:"#dc3522",textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:"Забыли пароль?"})]}),(0,m.jsx)(Wr,{$justify:"center",style:{marginTop:"20px"},children:(0,m.jsx)(s.N_,{to:"/login",style:{color:"#718096",textDecoration:"none",fontWeight:"500",fontSize:"13px"},children:"← Вернуться к входу пользователей"})})]})]})};function wg(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Ag(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?wg(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wg(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}const kg=function(){var n=(0,o.Zp)(),e=(0,r.useState)(!1),t=(0,p.A)(e,2),i=(t[0],t[1],(0,r.useState)(!1)),a=(0,p.A)(i,2),d=a[0],x=a[1],g=(0,r.useState)(!1),v=(0,p.A)(g,2),b=v[0],j=v[1],y=(0,r.useState)(""),w=(0,p.A)(y,2),A=w[0],k=w[1],N=(0,r.useState)(0),S=(0,p.A)(N,2),C=S[0],z=S[1],_=(0,r.useState)(!1),E=(0,p.A)(_,2),P=E[0],L=E[1],O=(0,Ua.mN)(),D=O.register,$=O.handleSubmit,M=O.watch,I=O.formState.errors,U=M("password"),T=M("email"),R=(0,c.useMutation)(f.authAPI.sendCode,{onSuccess:function(){l.Ay.success("Код подтверждения отправлен на ваш email"),L(!0),z(60);var n=setInterval(function(){z(function(e){return e<=1?(clearInterval(n),0):e-1})},1e3)},onError:function(n){l.Ay.error("Ошибка отправки кода: "+(n.message||"Неизвестная ошибка"))}}),B=(0,c.useMutation)(Sn.register,{onSuccess:function(e){(e.success||e.token)&&(l.Ay.success("Клуб успешно зарегистрирован!"),n("/club/login"))},onError:function(n){var e=n.message||"Ошибка регистрации";l.Ay.error(e)}}),W=function(){var n=(0,u.A)(h().mark(function n(e){return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(A){n.next=1;break}return l.Ay.error("Введите код подтверждения из email"),n.abrupt("return");case 1:B.mutate({name:e.name,login:e.login,email:e.email,password:e.password,description:e.description,location:e.location,contact_info:e.contact_info,website:e.website,type:"general",mail_code:A});case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();return(0,m.jsxs)(jr,{$gradient:!0,children:[(0,m.jsx)("div",{className:"auth-decoration auth-decoration-top-right"}),(0,m.jsx)("div",{className:"auth-decoration auth-decoration-bottom-left"}),(0,m.jsxs)(yr,{$maxWidth:"600px",children:[(0,m.jsxs)(wr,{children:[(0,m.jsx)(Ar,{children:"CF"}),(0,m.jsx)(kr,{children:"Регистрация клуба"}),(0,m.jsx)(Nr,{children:"Создайте аккаунт клуба для управления мероприятиями"})]}),(0,m.jsxs)(Cr,{onSubmit:$(W),children:[(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"name",children:"Название клуба *"}),(0,m.jsx)(Pr,Ag(Ag({type:"text",id:"name",placeholder:"Введите название клуба"},D("name",{required:"Название клуба обязательно",minLength:{value:2,message:"Минимум 2 символа"},maxLength:{value:100,message:"Максимум 100 символов"}})),{},{className:I.name?"error":""})),I.name&&(0,m.jsx)(Mr,{children:I.name.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"login",children:"Логин *"}),(0,m.jsx)(Pr,Ag(Ag({type:"text",id:"login",placeholder:"Введите логин клуба"},D("login",{required:"Логин обязателен",minLength:{value:3,message:"Минимум 3 символа"},maxLength:{value:50,message:"Максимум 50 символов"},pattern:{value:/^[a-zA-Z0-9_-]+$/,message:"Только буквы, цифры, дефис и подчеркивание"}})),{},{className:I.login?"error":""})),I.login&&(0,m.jsx)(Mr,{children:I.login.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"email",children:"Email *"}),(0,m.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,m.jsx)("div",{style:{flex:1},children:(0,m.jsx)(Pr,Ag(Ag({type:"email",id:"email",placeholder:"Введите email клуба"},D("email",{required:"Email обязателен",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Некорректный email"}})),{},{className:I.email?"error":""}))}),(0,m.jsx)("button",{type:"button",onClick:function(){T?R.mutate(T):l.Ay.error("Сначала введите email")},disabled:!T||R.isLoading||C>0,style:{background:C>0?"#e2e8f0":"#dc3522",color:"white",border:"none",borderRadius:"8px",padding:"12px 16px",fontSize:"14px",fontWeight:"600",cursor:C>0?"not-allowed":"pointer",transition:"all 0.3s ease",whiteSpace:"nowrap"},children:R.isLoading?"Отправка...":C>0?"".concat(C,"с"):"Код"})]}),I.email&&(0,m.jsx)(Mr,{children:I.email.message}),C>0&&(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#718096",marginTop:"5px"},children:["Повторная отправка через ",C," секунд"]})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"emailCode",children:"Код из email *"}),(0,m.jsx)(Pr,{type:"text",id:"emailCode",placeholder:"Введите 6-значный код",value:A,onChange:function(n){var e=n.target.value.replace(/\D/g,"").slice(0,6);k(e)},style:{fontFamily:"monospace",fontSize:"18px",letterSpacing:"2px",textAlign:"center"}}),A.length>0&&A.length<6&&P&&(0,m.jsx)(Mr,{children:"Код должен содержать 6 цифр"}),!P&&A.length>0&&(0,m.jsx)(Mr,{children:"Сначала отправьте код на email"})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"location",children:"Местоположение (необязательно)"}),(0,m.jsx)(Pr,Ag(Ag({type:"text",id:"location",placeholder:"Город, адрес или оставьте пустым"},D("location",{maxLength:{value:200,message:"Максимум 200 символов"}})),{},{className:I.location?"error":""})),I.location&&(0,m.jsx)(Mr,{children:I.location.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"website",children:"Веб-сайт (необязательно)"}),(0,m.jsx)(Pr,Ag(Ag({type:"text",id:"website",placeholder:"Адрес сайта или оставьте пустым"},D("website")),{},{className:I.website?"error":""})),I.website&&(0,m.jsx)(Mr,{children:I.website.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"contact_info",children:"Контактная информация (необязательно)"}),(0,m.jsx)(Or,Ag(Ag({id:"contact_info",placeholder:"Телефон, социальные сети, дополнительная информация или оставьте пустым",$minHeight:"80px"},D("contact_info",{maxLength:{value:500,message:"Максимум 500 символов"}})),{},{className:I.contact_info?"error":""})),I.contact_info&&(0,m.jsx)(Mr,{children:I.contact_info.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"description",children:"Описание клуба *"}),(0,m.jsx)(Or,Ag(Ag({id:"description",placeholder:"Расскажите о вашем клубе, мероприятиях, правилах",$minHeight:"120px"},D("description",{required:"Описание клуба обязательно",maxLength:{value:1e3,message:"Максимум 1000 символов"}})),{},{className:I.description?"error":""})),I.description&&(0,m.jsx)(Mr,{children:I.description.message})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"password",children:"Пароль *"}),(0,m.jsxs)(Er,{children:[(0,m.jsx)(Pr,Ag(Ag({type:d?"text":"password",id:"password",placeholder:"Введите пароль (минимум 8 символов)"},D("password",{required:"Пароль обязателен",minLength:{value:8,message:"Минимум 8 символов"}})),{},{className:I.password?"error":""})),(0,m.jsx)($r,{type:"button",$variant:"secondary",onClick:function(){return x(!d)},style:{position:"absolute",right:"12px",background:"none",color:"#718096"},children:d?(0,m.jsx)(tr,{}):(0,m.jsx)(er,{})})]}),I.password&&(0,m.jsx)(Mr,{children:I.password.message}),(0,m.jsx)("div",{style:{fontSize:"12px",color:"#718096",marginTop:"5px"},children:"Рекомендуется: буквы и цифры для большей безопасности"})]}),(0,m.jsxs)(zr,{children:[(0,m.jsx)(_r,{htmlFor:"confirmPassword",children:"Подтвердите пароль *"}),(0,m.jsxs)(Er,{children:[(0,m.jsx)(Pr,Ag(Ag({type:b?"text":"password",id:"confirmPassword",placeholder:"Повторите пароль"},D("confirmPassword",{required:"Подтвердите пароль",validate:function(n){return n===U||"Пароли не совпадают"}})),{},{className:I.confirmPassword?"error":""})),(0,m.jsx)($r,{type:"button",$variant:"secondary",onClick:function(){return j(!b)},style:{position:"absolute",right:"12px",background:"none",color:"#718096"},children:b?(0,m.jsx)(tr,{}):(0,m.jsx)(er,{})})]}),I.confirmPassword&&(0,m.jsx)(Mr,{children:I.confirmPassword.message})]}),(0,m.jsx)(Dr,{type:"submit",disabled:B.isLoading||!A||6!==A.length,style:{width:"100%"},children:B.isLoading?"Регистрация...":"Зарегистрировать клуб"})]}),(0,m.jsx)(Wr,{$justify:"center",$gap:"20px",style:{marginTop:"25px"},children:(0,m.jsx)(s.N_,{to:"/club/login",style:{color:"#dc3522",textDecoration:"none",fontWeight:"600",fontSize:"14px"},children:"Уже есть аккаунт? Войти"})}),(0,m.jsx)(Wr,{$justify:"center",style:{marginTop:"20px"},children:(0,m.jsx)(s.N_,{to:"/register",style:{color:"#718096",textDecoration:"none",fontWeight:"500",fontSize:"13px"},children:"← Регистрация пользователя"})})]})]})};var Ng,Sg,Cg,zg,_g,Eg;function Pg(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Lg(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Pg(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Pg(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var Og=d.Ay.div(Ng||(Ng=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  width: 100%;\n  touch-action: none;\n  -webkit-overflow-scrolling: touch;\n  \n  @media (max-width: 768px) {\n    gap: 15px;\n  }\n"]))),Dg=d.Ay.div(Sg||(Sg=(0,a.A)(["\n  position: relative;\n  width: 100%;\n  max-width: 600px;\n  height: ",";\n  border: 2px solid #e2e8f0;\n  border-radius: 10px;\n  overflow: hidden;\n  background: #f7fafc;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  touch-action: none;\n  -webkit-overflow-scrolling: touch;\n  \n  img {\n    max-width: 100%;\n    max-height: 100%;\n    object-fit: contain;\n    pointer-events: none;\n  }\n  \n  @media (max-width: 768px) {\n    max-width: 100%;\n    height: ",";\n    border-radius: 8px;\n  }\n  \n  @media (max-width: 480px) {\n    height: ",";\n    border-radius: 6px;\n  }\n"])),function(n){return n.$height||"400px"},function(n){return n.$mobileHeight||"300px"},function(n){return n.$mobileHeight||"250px"}),$g=d.Ay.div(Cg||(Cg=(0,a.A)(["\n  position: absolute;\n  border: 2px solid #dc3522;\n  background: rgba(220, 53, 34, 0.1);\n  cursor: move;\n  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);\n  user-select: none;\n  touch-action: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  \n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background: #dc3522;\n  }\n  \n  &::before {\n    top: 50%;\n    left: -2px;\n    right: -2px;\n    height: 2px;\n    transform: translateY(-50%);\n  }\n  \n  &::after {\n    left: 50%;\n    top: -2px;\n    bottom: -2px;\n    width: 2px;\n    transform: translateX(-50%);\n  }\n  \n  @media (max-width: 768px) {\n    border-width: 3px;\n    \n    &::before,\n    &::after {\n      background: #dc3522;\n    }\n  }\n"]))),Mg=d.Ay.div(zg||(zg=(0,a.A)(["\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  background: #dc3522;\n  border: 2px solid white;\n  border-radius: 50%;\n  cursor: ",";\n  z-index: 10;\n  touch-action: none;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  \n  &.top-left { top: -6px; left: -6px; cursor: nw-resize; }\n  &.top-right { top: -6px; right: -6px; cursor: ne-resize; }\n  &.bottom-left { bottom: -6px; left: -6px; cursor: sw-resize; }\n  &.bottom-right { bottom: -6px; right: -6px; cursor: se-resize; }\n  \n  &:hover {\n    background: #ff6b58;\n    transform: scale(1.2);\n  }\n  \n  @media (max-width: 768px) {\n    width: 16px;\n    height: 16px;\n    border-width: 3px;\n    \n    &.top-left { top: -8px; left: -8px; }\n    &.top-right { top: -8px; right: -8px; }\n    &.bottom-left { bottom: -8px; left: -8px; }\n    &.bottom-right { bottom: -8px; right: -8px; }\n  }\n"])),function(n){return n.$cursor||"nw-resize"}),Ig=d.Ay.div(_g||(_g=(0,a.A)(["\n  display: flex;\n  gap: 15px;\n  flex-wrap: wrap;\n  justify-content: center;\n  \n  @media (max-width: 768px) {\n    gap: 10px;\n    flex-direction: column;\n    width: 100%;\n    max-width: 300px;\n  }\n"]))),Ug=d.Ay.div(Eg||(Eg=(0,a.A)(["\n  text-align: center;\n  color: #718096;\n  font-size: 14px;\n  line-height: 1.5;\n  max-width: 600px;\n  margin-bottom: 10px;\n  \n  @media (max-width: 768px) {\n    font-size: 13px;\n    margin-bottom: 15px;\n    padding: 0 10px;\n  }\n"])));const Tg=function(n){var e=n.isOpen,t=n.onClose,i=n.imageFile,a=n.onCrop,s=n.aspectRatio,o=void 0===s?3.6875:s,c=n.minSize,l=void 0===c?100:c,d=(0,r.useState)({x:0,y:0,width:295,height:80}),u=(0,p.A)(d,2),x=u[0],h=u[1],f=(0,r.useState)(!1),g=(0,p.A)(f,2),v=g[0],b=g[1],j=(0,r.useState)({x:0,y:0}),y=(0,p.A)(j,2),w=y[0],A=y[1],k=(0,r.useState)(!1),N=(0,p.A)(k,2),S=N[0],C=N[1],z=(0,r.useState)(null),_=(0,p.A)(z,2),E=_[0],P=_[1],L=(0,r.useState)({width:0,height:0}),O=(0,p.A)(L,2),D=O[0],$=O[1],M=(0,r.useState)(""),I=(0,p.A)(M,2),U=I[0],T=I[1],R=(0,r.useState)({width:400,height:400}),B=(0,p.A)(R,2),W=B[0],F=B[1],Q=(0,r.useState)(!1),q=(0,p.A)(Q,2),H=q[0],V=q[1],X=(0,r.useRef)(),Y=(0,r.useRef)();(0,r.useEffect)(function(){var n=function(){V(window.innerWidth<=768)};return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}},[]),(0,r.useEffect)(function(){if(i){var n=URL.createObjectURL(i);T(n);var e=new Image;return e.onload=function(){var n=e.width,t=e.height;$({width:n,height:t});var r,i,a=H?400:600;n>t?(r=a,i=t/n*a):(i=a,r=n/t*a),r=Math.max(r,H?250:300),i=Math.max(i,H?200:300),F({width:r,height:i});var s=Math.min(H?200:295,.8*r),c=s/o;h({x:(r-s)/2,y:(i-c)/2,width:s,height:c})},e.src=n,function(){return URL.revokeObjectURL(n)}}},[i,H,o]);var K=(0,r.useCallback)(function(n){return n.touches&&n.touches[0]?{x:n.touches[0].clientX,y:n.touches[0].clientY}:{x:n.clientX,y:n.clientY}},[]),G=(0,r.useCallback)(function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"move";n.type,n.preventDefault(),n.stopPropagation();var t=K(n);"move"===e?(b(!0),A({x:t.x-x.x,y:t.y-x.y})):(C(!0),P(e),A({x:t.x,y:t.y}))},[x.x,x.y,K]),J=(0,r.useCallback)(function(n){if(v||S){"touchmove"===n.type&&n.preventDefault();var e=K(n);if(v){var t=e.x-w.x,r=e.y-w.y,i=W.width-x.width,a=W.height-x.height;h(function(n){return Lg(Lg({},n),{},{x:Math.max(0,Math.min(t,i)),y:Math.max(0,Math.min(r,a))})})}else if(S){var s=e.x-w.x;e.y,w.y,h(function(n){var e=n.width,t=n.height,r=n.x,i=n.y;switch(E){case"top-left":t=(e=Math.max(l,n.width-s))/o,r=n.x+n.width-e,i=n.y+n.height-t;break;case"top-right":t=(e=Math.max(l,n.width+s))/o,i=n.y+n.height-t;break;case"bottom-left":t=(e=Math.max(l,n.width-s))/o,r=n.x+n.width-e;break;case"bottom-right":t=(e=Math.max(l,n.width+s))/o;break;default:return n}var a=W.width-e,c=W.height-t;return{x:Math.max(0,Math.min(r,a)),y:Math.max(0,Math.min(i,c)),width:e,height:t}}),A({x:e.x,y:e.y})}}},[v,S,x,w,E,W,l,o,K]),Z=(0,r.useCallback)(function(n){n&&"touchend"===n.type&&n.preventDefault(),b(!1),C(!1),P(null)},[]);(0,r.useEffect)(function(){var n=function(n){return J(n)},e=function(){return Z()},t=function(n){n.preventDefault(),J(n)},r=function(n){return Z(n)},i=function(n){(v||S)&&n.preventDefault()};return(v||S)&&(document.addEventListener("mousemove",n),document.addEventListener("mouseup",e),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",r,{passive:!1}),document.addEventListener("touchmove",i,{passive:!1}),document.body.style.overflow="hidden"),function(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",r),document.removeEventListener("touchmove",i),document.body.style.overflow=""}},[v,S,J,Z]),(0,r.useEffect)(function(){var n=Y.current;if(n){var e=function(n){n.preventDefault(),G(n,"move")},t=function(n){n.preventDefault(),G(n,"top-left")},r=function(n){n.preventDefault(),G(n,"top-right")},i=function(n){n.preventDefault(),G(n,"bottom-left")},a=function(n){n.preventDefault(),G(n,"bottom-right")},s=function(n){n.preventDefault()};n.addEventListener("touchstart",e,{passive:!1}),n.addEventListener("touchmove",s,{passive:!1});var o=n.querySelectorAll(".crop-handle");return o.forEach(function(n,e){var s=[t,r,i,a][e];n.addEventListener("touchstart",s,{passive:!1})}),function(){n.removeEventListener("touchstart",e),n.removeEventListener("touchmove",s),o.forEach(function(n,e){var s=[t,r,i,a][e];n.removeEventListener("touchstart",s)})}}},[G]),(0,r.useEffect)(function(){if(e)return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",function(){document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}},[e]);var nn=(0,r.useCallback)(function(){if(X.current){var n=D.width/W.width,e=D.height/W.height,r=Math.round(x.x*n),s=Math.round(x.y*e),o=Math.round(x.width*n),c=Math.round(x.height*e);a({file:i,cropParams:{x:r,y:s,width:o,height:c}}),t()}},[x,D,W,i,a,t]),en=(0,r.useCallback)(function(){var n=Math.min(H?200:295,.8*W.width),e=n/o;h({x:(W.width-n)/2,y:(W.height-e)/2,width:n,height:e})},[W,H,o]);return e&&i?(0,m.jsx)(Tr,{children:(0,m.jsxs)(Rr,{$maxWidth:H?"95vw":"800px",children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"Обрезка аватарки клуба"}),(0,m.jsx)(Dr,{$variant:"secondary",onClick:t,children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)(Og,{children:[(0,m.jsx)(Ug,{children:"Перетащите область выделения или используйте угловые маркеры для изменения размера. Аватарка будет в формате панорамы (590x160)."}),(0,m.jsxs)(Dg,{ref:Y,$height:"".concat(W.height,"px"),$mobileHeight:"".concat(Math.min(W.height,300),"px"),children:[(0,m.jsx)("img",{ref:X,src:U,alt:"Предварительный просмотр",draggable:!1}),(0,m.jsxs)($g,{style:{left:x.x,top:x.y,width:x.width,height:x.height},onMouseDown:function(n){return G(n,"move")},children:[(0,m.jsx)(Mg,{className:"crop-handle top-left",$cursor:"nw-resize",onMouseDown:function(n){return G(n,"top-left")}}),(0,m.jsx)(Mg,{className:"crop-handle top-right",$cursor:"ne-resize",onMouseDown:function(n){return G(n,"top-right")}}),(0,m.jsx)(Mg,{className:"crop-handle bottom-left",$cursor:"sw-resize",onMouseDown:function(n){return G(n,"bottom-left")}}),(0,m.jsx)(Mg,{className:"crop-handle bottom-right",$cursor:"se-resize",onMouseDown:function(n){return G(n,"bottom-right")}})]})]}),(0,m.jsxs)(Ig,{children:[(0,m.jsx)(Dr,{$variant:"secondary",onClick:en,children:"Сбросить"}),(0,m.jsx)(Dr,{onClick:nn,children:"Обрезать и сохранить"})]})]})]})}):null};var Rg,Bg,Wg,Fg,Qg,qg,Hg,Vg,Xg,Yg,Kg=d.Ay.div(Rg||(Rg=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n  padding: 20px;\n  border: 2px dashed #e2e8f0;\n  border-radius: 12px;\n  background: #f8fafc;\n  transition: all 0.3s ease;\n\n  &:hover {\n    border-color: #667eea;\n    background: #f0f4ff;\n  }\n\n  &.dragover {\n    border-color: #667eea;\n    background: #e6f3ff;\n  }\n"]))),Gg=d.Ay.div(Bg||(Bg=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  padding: 20px;\n  text-align: center;\n  cursor: pointer;\n"]))),Jg=d.Ay.div(Wg||(Wg=(0,a.A)(["\n  font-size: 2rem;\n  color: #667eea;\n"]))),Zg=d.Ay.div(Fg||(Fg=(0,a.A)(["\n  color: #4a5568;\n  font-size: 14px;\n"]))),nv=d.Ay.input(Qg||(Qg=(0,a.A)(["\n  display: none;\n"]))),ev=d.Ay.div(qg||(qg=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 10px;\n  margin-top: 15px;\n"]))),tv=d.Ay.div(Hg||(Hg=(0,a.A)(["\n  position: relative;\n  aspect-ratio: 4/3;\n  border-radius: 8px;\n  overflow: hidden;\n  background: #e2e8f0;\n"]))),rv=d.Ay.img(Vg||(Vg=(0,a.A)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n"]))),iv=d.Ay.button(Xg||(Xg=(0,a.A)(["\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  width: 24px;\n  height: 24px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(220, 53, 34, 0.8);\n  color: white;\n  font-size: 14px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s ease;\n\n  &:hover {\n    background: rgba(220, 53, 34, 1);\n  }\n"]))),av=(0,d.Ay)(Dr)(Yg||(Yg=(0,a.A)(["\n  margin-top: 10px;\n  align-self: center;\n"])));const sv=function(n){var e=n.eventId,t=n.onUpload,i=n.onRemove,a=n.existingImages,s=void 0===a?[]:a,o=n.maxFiles,c=void 0===o?10:o,d=(0,r.useState)([]),x=(0,p.A)(d,2),f=x[0],g=x[1],v=(0,r.useState)(!1),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)(!1),A=(0,p.A)(w,2),k=A[0],N=A[1],S=(0,r.useRef)(null),C=function(n){var e=Array.from(n).filter(function(n){return n.type.startsWith("image/")});0!==e.length?s.length+f.length+e.length>c?l.Ay.error("Максимум ".concat(c," изображений разрешено")):g(function(n){return[].concat((0,pa.A)(n),(0,pa.A)(e))}):l.Ay.error("Пожалуйста, выберите только изображения")},z=function(){var n=(0,u.A)(h().mark(function n(){var r,i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==f.length){n.next=1;break}return n.abrupt("return");case 1:return N(!0),n.prev=2,r=new FormData,f.forEach(function(n){r.append("images",n)}),n.next=3,t(e,r);case 3:n.sent.success&&(g([]),S.current&&(S.current.value="")),n.next=5;break;case 4:n.prev=4,i=n.catch(2),console.error("Upload error:",i),l.Ay.error("Ошибка при загрузке изображений");case 5:return n.prev=5,N(!1),n.finish(5);case 6:case"end":return n.stop()}},n,null,[[2,4,5,6]])}));return function(){return n.apply(this,arguments)}}(),_=function(){var n=(0,u.A)(h().mark(function n(t){var r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,i(e,t);case 1:n.next=3;break;case 2:n.prev=2,r=n.catch(0),console.error("Remove error:",r),l.Ay.error("Ошибка при удалении изображения");case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(e){return n.apply(this,arguments)}}();return(0,m.jsxs)(Kg,{className:j?"dragover":"",onDragOver:function(n){n.preventDefault(),y(!0)},onDragLeave:function(n){n.preventDefault(),y(!1)},onDrop:function(n){n.preventDefault(),y(!1);var e=n.dataTransfer.files;C(e)},children:[(0,m.jsxs)(Gg,{onClick:function(){var n;return null===(n=S.current)||void 0===n?void 0:n.click()},children:[(0,m.jsx)(Jg,{children:"📷"}),(0,m.jsx)(Zg,{children:j?"Отпустите файлы для загрузки":"Перетащите изображения сюда или нажмите для выбора"}),(0,m.jsxs)(Zg,{style:{fontSize:"12px",color:"#718096"},children:["Максимум ",c," изображений, до 10MB каждое"]})]}),(0,m.jsx)(nv,{ref:S,type:"file",multiple:!0,accept:"image/*",onChange:function(n){var e=n.target.files;C(e)}}),f.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("h4",{children:["Выбранные файлы (",f.length,"):"]}),(0,m.jsx)(ev,{children:f.map(function(n,e){return(0,m.jsxs)(tv,{children:[(0,m.jsx)(rv,{src:URL.createObjectURL(n),alt:"Preview ".concat(e+1)}),(0,m.jsx)(iv,{onClick:function(){return function(n){g(function(e){return e.filter(function(e,t){return t!==n})})}(e)},children:"×"})]},e)})}),(0,m.jsx)(av,{onClick:z,disabled:k,children:k?"Загрузка...":"Загрузить ".concat(f.length," изображений")})]}),s.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("h4",{children:["Загруженные изображения (",s.length,"):"]}),(0,m.jsx)(ev,{children:s.map(function(n,e){return(0,m.jsxs)(tv,{children:[(0,m.jsx)(rv,{src:"/uploads/".concat(n),alt:"Event image ".concat(e+1)}),(0,m.jsx)(iv,{onClick:function(){return _(n)},children:"×"})]},e)})})]})]})};function ov(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function cv(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ov(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ov(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}const lv=function(n){var e=n.event,t=n.onSave,i=n.onCancel,a=n.clubId,s=(0,r.useState)({title:"",description:"",date:"",time:"",location:"",price:"",max_participants:"",category:"party",age_restriction:"18+",dress_code:"",special_requirements:"",duration_hours:2}),o=(0,p.A)(s,2),c=o[0],d=o[1],x=(0,r.useState)(!1),f=(0,p.A)(x,2),g=f[0],v=f[1],j=(0,r.useState)({}),y=(0,p.A)(j,2),w=y[0],A=y[1],k=(0,r.useState)(!1),N=(0,p.A)(k,2),S=N[0],C=N[1],z=(0,r.useState)(null),_=(0,p.A)(z,2),E=_[0],P=_[1],L=(0,r.useState)([]),O=(0,p.A)(L,2),D=O[0],$=O[1];(0,r.useEffect)(function(){if(e){var n=new Date(e.date);d({title:e.title||"",description:e.description||"",date:n.toISOString().split("T")[0],time:n.toTimeString().slice(0,5),location:e.location||"",price:e.price||"",max_participants:e.max_participants||"",category:e.category||"party",age_restriction:e.age_restriction||"18+",dress_code:e.dress_code||"",special_requirements:e.special_requirements||"",avatar:e.avatar||"",duration_hours:e.duration_hours||2}),$(e.images||[])}},[e]);var M=function(n){var e=n.target,t=e.name,r=e.value;d(function(n){return cv(cv({},n),{},(0,b.A)({},t,r))}),w[t]&&A(function(n){return cv(cv({},n),{},(0,b.A)({},t,""))})},I=function(){var n={};return c.title.trim()||(n.title="Название события обязательно"),c.date?new Date("".concat(c.date,"T").concat(c.time))<=new Date&&(n.date="Дата события должна быть в будущем"):n.date="Дата события обязательна",c.time||(n.time="Время события обязательно"),c.price&&isNaN(parseFloat(c.price))&&(n.price="Цена должна быть числом"),c.max_participants&&(isNaN(parseInt(c.max_participants))||parseInt(c.max_participants)<1)&&(n.max_participants="Количество участников должно быть положительным числом"),c.duration_hours&&(isNaN(parseInt(c.duration_hours))||parseInt(c.duration_hours)<1||parseInt(c.duration_hours)>24)&&(n.duration_hours="Длительность должна быть от 1 до 24 часов"),A(n),0===Object.keys(n).length},U=function(){var n=(0,u.A)(h().mark(function n(t){var r,i,a;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=e&&e.id){n.next=1;break}return n.abrupt("return");case 1:return n.prev=1,(r=new FormData).append("avatar",t.file),t.cropParams&&(r.append("x",t.cropParams.x),r.append("y",t.cropParams.y),r.append("width",t.cropParams.width),r.append("height",t.cropParams.height)),n.next=2,Sn.uploadEventAvatar(e.id,r);case 2:(i=n.sent).success&&d(function(n){return cv(cv({},n),{},{avatar:i.filename})}),n.next=4;break;case 3:n.prev=3,a=n.catch(1),console.error("Ошибка загрузки аватара:",a),l.Ay.error("Ошибка при загрузке аватара мероприятия");case 4:case"end":return n.stop()}},n,null,[[1,3]])}));return function(e){return n.apply(this,arguments)}}(),T=function(){var n=(0,u.A)(h().mark(function n(e,t){var r,i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,Sn.uploadEventImages(e,t);case 1:return(r=n.sent).success&&$(function(n){return[].concat((0,pa.A)(n),(0,pa.A)(r.files.map(function(n){return n.filename})))}),n.abrupt("return",r);case 2:throw n.prev=2,i=n.catch(0),console.error("Ошибка загрузки изображений:",i),i;case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(e,t){return n.apply(this,arguments)}}(),R=function(){var n=(0,u.A)(h().mark(function n(e,t){var r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,Sn.deleteEventImage(e,t);case 1:$(function(n){return n.filter(function(n){return n!==t})}),n.next=3;break;case 2:throw n.prev=2,r=n.catch(0),console.error("Ошибка удаления изображения:",r),r;case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(e,t){return n.apply(this,arguments)}}(),B=function(){var n=(0,u.A)(h().mark(function n(r){var i,s;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),I()){n.next=1;break}return n.abrupt("return");case 1:if(v(!0),n.prev=2,i=cv(cv({},c),{},{club_id:a,date:new Date("".concat(c.date,"T").concat(c.time)).toISOString(),price:c.price?parseFloat(c.price):0,max_participants:c.max_participants?parseInt(c.max_participants):null,duration_hours:c.duration_hours?parseInt(c.duration_hours):2}),!e){n.next=4;break}return n.next=3,Sn.updateEvent(e.id,i);case 3:n.next=5;break;case 4:return n.next=5,Sn.createEvent(i);case 5:t(),n.next=7;break;case 6:n.prev=6,s=n.catch(2),console.error("Ошибка сохранения события:",s),A({submit:"Ошибка сохранения события"});case 7:return n.prev=7,v(!1),n.finish(7);case 8:case"end":return n.stop()}},n,null,[[2,6,7,8]])}));return function(e){return n.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"event-form-overlay",children:(0,m.jsxs)("div",{className:"event-form",children:[(0,m.jsxs)("div",{className:"event-form-header",children:[(0,m.jsx)("h2",{children:e?"Редактировать событие":"Создать событие"}),(0,m.jsx)("button",{type:"button",className:"close-button",onClick:i,children:"×"})]}),(0,m.jsxs)("form",{onSubmit:B,className:"event-form-content",children:[w.submit&&(0,m.jsx)("div",{className:"error-message",children:w.submit}),e&&(0,m.jsxs)("div",{className:"form-section",children:[(0,m.jsx)("h3",{children:"Аватар мероприятия"}),(0,m.jsxs)("div",{className:"event-avatar-upload",onClick:function(){var n=document.createElement("input");n.type="file",n.accept="image/*",n.onchange=function(n){var e=n.target.files[0];e&&(P(e),C(!0))},n.click()},style:{width:"200px",height:"80px",border:"2px dashed #e2e8f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:c.avatar?"transparent":"#f8fafc",backgroundImage:c.avatar?"url(/uploads/".concat(c.avatar,")"):"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative"},children:[!c.avatar&&(0,m.jsxs)("div",{style:{textAlign:"center",color:"#718096"},children:[(0,m.jsx)("div",{style:{fontSize:"1.5rem",marginBottom:"5px"},children:"📷"}),(0,m.jsx)("div",{style:{fontSize:"12px"},children:"Загрузить аватар"})]}),c.avatar&&(0,m.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.3s ease",color:"white",fontSize:"12px"},onMouseEnter:function(n){return n.target.style.opacity="1"},onMouseLeave:function(n){return n.target.style.opacity="0"},children:"Изменить"})]})]}),e&&(0,m.jsxs)("div",{className:"form-section",children:[(0,m.jsx)("h3",{children:"Галерея изображений"}),(0,m.jsx)(sv,{eventId:e.id,onUpload:T,onRemove:R,existingImages:D,maxFiles:10})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"title",children:"Название события *"}),(0,m.jsx)("input",{type:"text",id:"title",name:"title",value:c.title,onChange:M,className:w.title?"error":"",placeholder:"Введите название события"}),w.title&&(0,m.jsx)("span",{className:"field-error",children:w.title})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"category",children:"Категория"}),(0,m.jsx)("select",{id:"category",name:"category",value:c.category,onChange:M,children:[{value:"party",label:"Вечеринка"},{value:"concert",label:"Концерт"},{value:"workshop",label:"Мастер-класс"},{value:"networking",label:"Нетворкинг"},{value:"exhibition",label:"Выставка"},{value:"sports",label:"Спорт"},{value:"other",label:"Другое"}].map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"description",children:"Описание"}),(0,m.jsx)("textarea",{id:"description",name:"description",value:c.description,onChange:M,rows:"4",placeholder:"Опишите событие..."})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"date",children:"Дата события *"}),(0,m.jsx)("input",{type:"date",id:"date",name:"date",value:c.date,onChange:M,className:w.date?"error":"",min:(new Date).toISOString().split("T")[0]}),w.date&&(0,m.jsx)("span",{className:"field-error",children:w.date})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"time",children:"Время события *"}),(0,m.jsx)("input",{type:"time",id:"time",name:"time",value:c.time,onChange:M,className:w.time?"error":""}),w.time&&(0,m.jsx)("span",{className:"field-error",children:w.time})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"location",children:"Место проведения"}),(0,m.jsx)("input",{type:"text",id:"location",name:"location",value:c.location,onChange:M,placeholder:"Адрес или название места"})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"price",children:"Цена (₽)"}),(0,m.jsx)("input",{type:"number",id:"price",name:"price",value:c.price,onChange:M,className:w.price?"error":"",placeholder:"0",min:"0",step:"0.01"}),w.price&&(0,m.jsx)("span",{className:"field-error",children:w.price})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"max_participants",children:"Макс. участников"}),(0,m.jsx)("input",{type:"number",id:"max_participants",name:"max_participants",value:c.max_participants,onChange:M,className:w.max_participants?"error":"",placeholder:"Без ограничений",min:"1"}),w.max_participants&&(0,m.jsx)("span",{className:"field-error",children:w.max_participants})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"duration_hours",children:"Длительность (часы)"}),(0,m.jsx)("input",{type:"number",id:"duration_hours",name:"duration_hours",value:c.duration_hours,onChange:M,className:w.duration_hours?"error":"",placeholder:"2",min:"1",max:"24"}),w.duration_hours&&(0,m.jsx)("span",{className:"field-error",children:w.duration_hours})]})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"age_restriction",children:"Возрастные ограничения"}),(0,m.jsx)("select",{id:"age_restriction",name:"age_restriction",value:c.age_restriction,onChange:M,children:[{value:"16+",label:"16+"},{value:"18+",label:"18+"},{value:"21+",label:"21+"},{value:"all",label:"Все возрасты"}].map(function(n){return(0,m.jsx)("option",{value:n.value,children:n.label},n.value)})})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"dress_code",children:"Дресс-код"}),(0,m.jsx)("input",{type:"text",id:"dress_code",name:"dress_code",value:c.dress_code,onChange:M,placeholder:"Например: вечерний, casual"})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"special_requirements",children:"Особые требования"}),(0,m.jsx)("textarea",{id:"special_requirements",name:"special_requirements",value:c.special_requirements,onChange:M,rows:"3",placeholder:"Дополнительная информация для участников..."})]}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:g,children:"Отмена"}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Сохранение...":e?"Сохранить изменения":"Создать событие"})]})]}),(0,m.jsx)(Tg,{isOpen:S,onClose:function(){C(!1),P(null)},imageFile:E,onCrop:U,aspectRatio:3.6875})]})})};var dv,uv,pv,xv,hv,fv,mv,gv,vv,bv,jv,yv,wv,Av,kv,Nv,Sv,Cv=d.Ay.div(dv||(dv=(0,a.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  max-height: 80vh;\n  overflow-y: auto;\n"]))),zv=d.Ay.div(uv||(uv=(0,a.A)(["\n  display: flex;\n  gap: 20px;\n  align-items: flex-start;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n"]))),_v=d.Ay.div(pv||(pv=(0,a.A)(["\n  width: 200px;\n  height: 80px;\n  border-radius: 12px;\n  overflow: hidden;\n  background: linear-gradient(135deg, #dc3522 0%, #ff6b58 100%);\n  flex-shrink: 0;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  @media (max-width: 768px) {\n    width: 100%;\n    height: 120px;\n  }\n"]))),Ev=d.Ay.div(xv||(xv=(0,a.A)(["\n  flex: 1;\n"]))),Pv=d.Ay.h2(hv||(hv=(0,a.A)(["\n  margin: 0 0 10px 0;\n  color: #2d3748;\n  font-size: 24px;\n  font-weight: 700;\n"]))),Lv=d.Ay.div(fv||(fv=(0,a.A)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  margin-bottom: 15px;\n"]))),Ov=d.Ay.div(mv||(mv=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  color: #4a5568;\n  font-size: 14px;\n\n  .icon {\n    color: #667eea;\n  }\n"]))),Dv=d.Ay.div(gv||(gv=(0,a.A)(["\n  color: #4a5568;\n  line-height: 1.6;\n  margin-bottom: 20px;\n"]))),$v=d.Ay.div(vv||(vv=(0,a.A)(["\n  margin-top: 20px;\n"]))),Mv=d.Ay.h3(bv||(bv=(0,a.A)(["\n  margin: 0 0 15px 0;\n  color: #2d3748;\n  font-size: 18px;\n  font-weight: 600;\n"]))),Iv=d.Ay.div(jv||(jv=(0,a.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 15px;\n"]))),Uv=d.Ay.div(yv||(yv=(0,a.A)(["\n  position: relative;\n  aspect-ratio: 4/3;\n  border-radius: 12px;\n  overflow: hidden;\n  background: #e2e8f0;\n  cursor: pointer;\n  transition: transform 0.2s ease;\n\n  &:hover {\n    transform: scale(1.02);\n  }\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"]))),Tv=d.Ay.div(wv||(wv=(0,a.A)(["\n  margin-top: 20px;\n"]))),Rv=d.Ay.div(Av||(Av=(0,a.A)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n"]))),Bv=d.Ay.div(kv||(kv=(0,a.A)(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: #f7fafc;\n  border-radius: 20px;\n  font-size: 14px;\n  color: #4a5568;\n"]))),Wv=d.Ay.div(Nv||(Nv=(0,a.A)(["\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  overflow: hidden;\n  background: #e2e8f0;\n\n  img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n"]))),Fv=d.Ay.div(Sv||(Sv=(0,a.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n  color: #667eea;\n  font-size: 18px;\n"])));const Qv=function(n){var e=n.isOpen,t=n.onClose,i=n.eventId;console.log("EventDetailsModal render:",{isOpen:e,eventId:i});var a=(0,r.useState)(null),s=(0,p.A)(a,2),o=s[0],c=s[1],l=(0,r.useState)(!1),d=(0,p.A)(l,2),x=d[0],f=d[1],g=(0,r.useState)(null),v=(0,p.A)(g,2),b=v[0],j=v[1];(0,r.useEffect)(function(){console.log("EventDetailsModal useEffect:",{isOpen:e,eventId:i}),e&&i&&A()},[e,i]);var y,w,A=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f(!0),j(null),n.prev=1,n.next=2,Sn.getEvent(i);case 2:e=n.sent,c(e.event),n.next=4;break;case 3:n.prev=3,t=n.catch(1),console.error("Error loading event details:",t),j("Ошибка при загрузке деталей мероприятия");case 4:return n.prev=4,f(!1),n.finish(4);case 5:case"end":return n.stop()}},n,null,[[1,3,4,5]])}));return function(){return n.apply(this,arguments)}}();return e?(0,m.jsx)(Tr,{children:(0,m.jsxs)(Rr,{$maxWidth:"800px",children:[(0,m.jsxs)(Br,{children:[(0,m.jsx)("h2",{children:"Детали мероприятия"}),(0,m.jsx)(Dr,{$variant:"secondary",onClick:t,children:(0,m.jsx)(or,{})})]}),(0,m.jsxs)(Cv,{children:[x&&(0,m.jsx)(Fv,{children:"Загрузка..."}),b&&(0,m.jsx)("div",{style:{color:"#e53e3e",textAlign:"center",padding:"20px"},children:b}),o&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(zv,{children:[(0,m.jsx)(_v,{children:o.avatar?(0,m.jsx)("img",{src:"/uploads/".concat(o.avatar),alt:o.title,onError:function(n){n.target.style.display="none"}}):null}),(0,m.jsxs)(Ev,{children:[(0,m.jsx)(Pv,{children:o.title}),(0,m.jsxs)(Lv,{children:[(0,m.jsxs)(Ov,{children:[(0,m.jsx)("span",{className:"icon",children:"📅"}),(0,m.jsx)("span",{children:(w=o.date,new Date(w).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}))})]}),o.time&&(0,m.jsxs)(Ov,{children:[(0,m.jsx)("span",{className:"icon",children:"🕐"}),(0,m.jsx)("span",{children:(y=o.time,y?y.substring(0,5):"")})]}),o.location&&(0,m.jsxs)(Ov,{children:[(0,m.jsx)("span",{className:"icon",children:"📍"}),(0,m.jsx)("span",{children:o.location})]}),o.price>0&&(0,m.jsxs)(Ov,{children:[(0,m.jsx)("span",{className:"icon",children:"💰"}),(0,m.jsxs)("span",{children:[o.price," ₽"]})]}),o.max_participants&&(0,m.jsxs)(Ov,{children:[(0,m.jsx)("span",{className:"icon",children:"👥"}),(0,m.jsxs)("span",{children:[o.current_participants||0,"/",o.max_participants]})]})]}),o.description&&(0,m.jsx)(Dv,{children:o.description})]})]}),o.images&&o.images.length>0&&(0,m.jsxs)($v,{children:[(0,m.jsxs)(Mv,{children:["Фотографии (",o.images.length,")"]}),(0,m.jsx)(Iv,{children:o.images.map(function(n,e){return(0,m.jsx)(Uv,{children:(0,m.jsx)("img",{src:"/uploads/".concat(n),alt:"Event photo ".concat(e+1),onError:function(n){n.target.style.display="none"}})},e)})})]}),o.participants&&o.participants.length>0&&(0,m.jsxs)(Tv,{children:[(0,m.jsxs)(Mv,{children:["Участники (",o.participants.length,")"]}),(0,m.jsx)(Rv,{children:o.participants.map(function(n,e){var t,r,i;return(0,m.jsxs)(Bv,{children:[(0,m.jsx)(Wv,{children:null!==(t=n.user)&&void 0!==t&&t.ava?(0,m.jsx)("img",{src:"/uploads/".concat(n.user.ava),alt:n.user.name||n.user.login,onError:function(n){n.target.style.display="none"}}):null}),(0,m.jsx)("span",{children:(null===(r=n.user)||void 0===r?void 0:r.name)||(null===(i=n.user)||void 0===i?void 0:i.login)}),(0,m.jsx)("span",{style:{color:"confirmed"===n.status?"#38a169":"#ed8936",fontSize:"12px"},children:"confirmed"===n.status?"✓":"?"})]},e)})})]})]})]})]})}):null};var qv=function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new Date,a=new Date(n);return e=r?new Date(r):new Date(a.getTime()+60*t*60*1e3),a>i?"upcoming":i>=a&&i<=e?"ongoing":"completed"},Hv=function(n){return{upcoming:"Предстоит",ongoing:"Идет",completed:"Завершено"}[n]||"Неизвестно"};function Vv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Xv(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Vv(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vv(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var Yv=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,m.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},Kv=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,m.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,m.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},Gv=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M18 20V10"}),(0,m.jsx)("path",{d:"M12 20V4"}),(0,m.jsx)("path",{d:"M6 20v-6"})]})},Jv=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,m.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})},Zv=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,m.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})},nb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),(0,m.jsx)("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]})},eb=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})},tb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,m.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})},rb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,m.jsx)("polyline",{points:"12,6 12,12 16,14"})]})};const ib=function(){var n=(0,o.Zp)(),e=(0,r.useState)(null),t=(0,p.A)(e,2),i=t[0],a=t[1],c=(0,r.useState)({}),d=(0,p.A)(c,2),x=d[0],f=d[1],g=(0,r.useState)([]),v=(0,p.A)(g,2),b=v[0],j=v[1],y=(0,r.useState)(!0),w=(0,p.A)(y,2),A=w[0],k=w[1],N=(0,r.useState)(!1),S=(0,p.A)(N,2),C=S[0],z=S[1],_=(0,r.useState)(!1),E=(0,p.A)(_,2),P=E[0],L=E[1],O=(0,r.useState)(null),D=(0,p.A)(O,2),$=D[0],M=D[1],I=(0,r.useState)(!1),U=(0,p.A)(I,2),T=U[0],R=U[1],B=(0,r.useState)(null),W=(0,p.A)(B,2),F=W[0],Q=W[1],q=(0,r.useRef)(null);(0,r.useEffect)(function(){Cn()?H():n("/club/login")},[n]);var H=function(){var e=(0,u.A)(h().mark(function e(){var t,r,i,s,o,c;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,Promise.all([Sn.getProfile(),Sn.getAnalytics("overview"),Sn.getEvents({limit:5})]);case 1:t=e.sent,r=(0,p.A)(t,3),i=r[0],s=r[1],o=r[2],a(i.club||i),f(s.analytics||s),j(Array.isArray(o.events)?o.events:Array.isArray(o)?o:[]),e.next=4;break;case 2:if(e.prev=2,c=e.catch(0),console.error("Ошибка загрузки данных:",c),"Unauthorized"!==c.message&&!c.message.includes("токен")&&!c.message.includes("token")){e.next=3;break}return zn(),n("/club/login"),e.abrupt("return");case 3:a(null),f({}),j([]);case 4:return e.prev=4,k(!1),e.finish(4);case 5:case"end":return e.stop()}},e,null,[[0,2,4,5]])}));return function(){return e.apply(this,arguments)}}(),V=function(){z(!0)},X=function(){var n=(0,u.A)(h().mark(function n(e){var t,r,i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(t=new FormData).append("avatar",e.file),e.cropParams&&(t.append("x",e.cropParams.x),t.append("y",e.cropParams.y),t.append("width",e.cropParams.width),t.append("height",e.cropParams.height)),n.next=1,Sn.uploadClubAvatar(t);case 1:(r=n.sent).success&&a(function(n){return Xv(Xv({},n),{},{avatar:r.filename})}),n.next=3;break;case 2:n.prev=2,i=n.catch(0),console.error("Ошибка загрузки аватара:",i),l.Ay.error("Ошибка при загрузке аватара");case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(e){return n.apply(this,arguments)}}(),Y=function(n){console.log("=== handleShowEventDetails called ==="),console.log("Event ID:",n),console.log("Current showEventDetails state:",T),console.log("Current selectedEventId state:",F),Q(n),R(!0),console.log("States updated, showEventDetails should be true now")};return A?(0,m.jsxs)("div",{className:"club-dashboard-loading",children:[(0,m.jsx)("div",{className:"loading-spinner"}),(0,m.jsx)("p",{children:"Загрузка дашборда..."})]}):i?(0,m.jsxs)("div",{className:"club-dashboard",children:[(0,m.jsxs)("div",{className:"club-dashboard-header",children:[(0,m.jsxs)("div",{className:"club-info",children:[(0,m.jsxs)("div",{className:"club-avatar-panoramic",onClick:function(){var n;null===(n=q.current)||void 0===n||n.click()},children:[(0,m.jsx)("img",{src:null!=i&&i.avatar?"/uploads/".concat(i.avatar):"/uploads/no_photo.jpg",alt:null==i?void 0:i.name,onError:function(n){n.target.src="/uploads/no_photo.jpg"}}),(0,m.jsxs)("div",{className:"avatar-overlay",children:[(0,m.jsx)("span",{children:"📷"}),(0,m.jsx)("span",{children:"Изменить аватар"})]})]}),(0,m.jsxs)("div",{className:"club-details",children:[(0,m.jsx)("h1",{children:null==i?void 0:i.name}),(0,m.jsxs)("p",{className:"club-location",children:[(0,m.jsx)(tb,{className:"icon"}),null==i?void 0:i.location]}),(0,m.jsx)("p",{className:"club-type",children:null==i?void 0:i.type})]})]}),(0,m.jsxs)("div",{className:"club-actions",children:[(0,m.jsxs)("button",{className:"btn btn-primary",onClick:V,children:[(0,m.jsx)(Zv,{className:"icon"}),"Создать мероприятие"]}),(0,m.jsxs)("button",{className:"btn btn-secondary",onClick:function(){window.location.href="/club/settings"},children:[(0,m.jsx)(Jv,{className:"icon"}),"Настройки"]})]})]}),(0,m.jsx)("input",{ref:q,type:"file",accept:"image/*",onChange:function(n){var e=n.target.files[0];e&&(M(e),L(!0))},style:{display:"none"}}),(0,m.jsxs)("div",{className:"stats-grid",children:[(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("div",{className:"stat-icon events",children:(0,m.jsx)(Yv,{})}),(0,m.jsxs)("div",{className:"stat-content",children:[(0,m.jsx)("h3",{children:x.total_events||0}),(0,m.jsx)("p",{children:"Всего мероприятий"})]})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("div",{className:"stat-icon participants",children:(0,m.jsx)(Kv,{})}),(0,m.jsxs)("div",{className:"stat-content",children:[(0,m.jsx)("h3",{children:x.total_participants||0}),(0,m.jsx)("p",{children:"Участников"})]})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("div",{className:"stat-icon revenue",children:(0,m.jsx)(Gv,{})}),(0,m.jsxs)("div",{className:"stat-content",children:[(0,m.jsxs)("h3",{children:[x.total_revenue||0," ₽"]}),(0,m.jsx)("p",{children:"Доход"})]})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("div",{className:"stat-icon rating",children:(0,m.jsx)(eb,{})}),(0,m.jsxs)("div",{className:"stat-content",children:[(0,m.jsx)("h3",{children:x.average_rating||0}),(0,m.jsx)("p",{children:"Рейтинг"})]})]})]}),(0,m.jsxs)("div",{className:"quick-actions",children:[(0,m.jsx)("h2",{children:"Быстрые действия"}),(0,m.jsxs)("div",{className:"actions-grid",children:[(0,m.jsxs)("button",{className:"action-card",onClick:V,children:[(0,m.jsx)(Yv,{className:"icon"}),(0,m.jsx)("h3",{children:"Создать мероприятие"}),(0,m.jsx)("p",{children:"Организуйте новое событие"})]}),(0,m.jsxs)(s.N_,{to:"/club/events",className:"action-card",children:[(0,m.jsx)(nb,{className:"icon"}),(0,m.jsx)("h3",{children:"Мероприятия"}),(0,m.jsx)("p",{children:"Управление событиями"})]}),(0,m.jsxs)(s.N_,{to:"/club/analytics",className:"action-card",children:[(0,m.jsx)(Gv,{className:"icon"}),(0,m.jsx)("h3",{children:"Аналитика"}),(0,m.jsx)("p",{children:"Просмотр статистики"})]}),(0,m.jsxs)(s.N_,{to:"/club/participants",className:"action-card",children:[(0,m.jsx)(Kv,{className:"icon"}),(0,m.jsx)("h3",{children:"Участники"}),(0,m.jsx)("p",{children:"Управление участниками"})]})]})]}),(0,m.jsxs)("div",{className:"recent-events",children:[(0,m.jsxs)("div",{className:"section-header",children:[(0,m.jsx)("h2",{children:"Последние мероприятия"}),(0,m.jsx)(s.N_,{to:"/club/events",className:"view-all",children:"Посмотреть все"})]}),(0,m.jsx)("div",{className:"events-grid",children:(b||[]).map(function(n){return(0,m.jsxs)("div",{className:"event-card",children:[(0,m.jsxs)("div",{className:"event-header",children:[(0,m.jsx)("h3",{children:n.title}),(0,m.jsx)("span",{className:"event-status ".concat(qv(n.date,n.duration_hours||2,n.end_date)),children:Hv(qv(n.date,n.duration_hours||2,n.end_date))})]}),(0,m.jsxs)("div",{className:"event-details",children:[(0,m.jsxs)("p",{className:"event-date",children:[(0,m.jsx)(rb,{className:"icon"}),new Date(n.date).toLocaleDateString("ru-RU")]}),(0,m.jsxs)("p",{className:"event-location",children:[(0,m.jsx)(tb,{className:"icon"}),n.location]}),(0,m.jsxs)("p",{className:"event-participants",children:[(0,m.jsx)(Kv,{className:"icon"}),n.max_participants&&n.max_participants>0?"".concat(n.current_participants||0,"/").concat(n.max_participants," участников"):"".concat(n.current_participants||0," участников")]})]}),(0,m.jsxs)("div",{className:"event-actions",children:[(0,m.jsx)("div",{className:"btn btn-sm btn-outline",onClick:function(e){return console.log("=== EYE BUTTON CLICKED ==="),console.log("Event object:",e),console.log("Event target:",e.target),console.log("Event currentTarget:",e.currentTarget),console.log("Event ID:",n.id),e.preventDefault(),e.stopPropagation(),console.log("About to call handleShowEventDetails"),Y(n.id),console.log("handleShowEventDetails called"),!1},title:"Просмотр деталей",style:{cursor:"pointer",userSelect:"none"},children:"👁️"}),(0,m.jsx)("div",{className:"btn btn-sm btn-primary",onClick:function(e){return e.preventDefault(),e.stopPropagation(),console.log("Details button clicked for event:",n.id),Y(n.id),!1},title:"Подробнее",style:{cursor:"pointer",userSelect:"none"},children:"Подробнее"}),(0,m.jsx)(s.N_,{to:"/club/events",className:"btn btn-sm btn-secondary",onClick:function(n){return n.stopPropagation()},children:"Редактировать"})]})]},n.id)})})]}),(0,m.jsxs)("div",{className:"notifications-panel",children:[(0,m.jsx)("h2",{children:"Уведомления"}),(0,m.jsxs)("div",{className:"notifications-list",children:[(0,m.jsxs)("div",{className:"notification-item",children:[(0,m.jsx)("div",{className:"notification-icon",children:(0,m.jsx)(Kv,{})}),(0,m.jsxs)("div",{className:"notification-content",children:[(0,m.jsx)("p",{children:'Новый участник присоединился к мероприятию "Вечеринка в стиле 80-х"'}),(0,m.jsx)("span",{className:"notification-time",children:"2 минуты назад"})]})]}),(0,m.jsxs)("div",{className:"notification-item",children:[(0,m.jsx)("div",{className:"notification-icon",children:(0,m.jsx)(nb,{})}),(0,m.jsxs)("div",{className:"notification-content",children:[(0,m.jsx)("p",{children:"Заявка на вступление в клуб от пользователя @dancer123"}),(0,m.jsx)("span",{className:"notification-time",children:"15 минут назад"})]})]})]})]}),C&&(0,m.jsx)("div",{className:"modal-overlay",children:(0,m.jsx)("div",{className:"modal-content",children:(0,m.jsx)(lv,{onCancel:function(){z(!1)},onSave:function(){z(!1),H()}})})}),(0,m.jsx)(Tg,{isOpen:P,onClose:function(){L(!1),M(null),q.current&&(q.current.value="")},imageFile:$,onCrop:X,aspectRatio:3.6875}),(0,m.jsx)(Qv,{isOpen:T,onClose:function(){R(!1),Q(null)},eventId:F})]}):(0,m.jsxs)("div",{className:"club-dashboard-error",children:[(0,m.jsx)("h2",{children:"Ошибка загрузки данных клуба"}),(0,m.jsx)("p",{children:"Не удалось загрузить информацию о клубе. Проверьте подключение к интернету и попробуйте снова."}),(0,m.jsx)("button",{onClick:H,className:"btn btn-primary",children:"Попробовать снова"})]})};function ab(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function sb(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ab(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ab(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}const ob=function(n){var e=n.eventId,t=n.onClose,i=(0,r.useState)([]),a=(0,p.A)(i,2),s=a[0],o=a[1],c=(0,r.useState)(!0),d=(0,p.A)(c,2),x=d[0],f=d[1],g=(0,r.useState)(null),v=(0,p.A)(g,2),b=v[0],j=v[1],y=(0,r.useState)(""),w=(0,p.A)(y,2),A=w[0],k=w[1],N=(0,r.useState)("all"),S=(0,p.A)(N,2),C=S[0],z=S[1];(0,r.useEffect)(function(){e&&_()},[e]);var _=function(){var n=(0,u.A)(h().mark(function n(){var t,r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(!0),j(null),n.next=1,Sn.getEventParticipants(e);case 1:t=n.sent,o(t.participants||[]),n.next=3;break;case 2:n.prev=2,r=n.catch(0),console.error("Ошибка загрузки участников:",r),j("Не удалось загрузить список участников");case 3:return n.prev=3,f(!1),n.finish(3);case 4:case"end":return n.stop()}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),E=function(){var n=(0,u.A)(h().mark(function n(t,r){var i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,Sn.updateParticipantStatus(e,t,r);case 1:o(function(n){return n.map(function(n){return n.id===t?sb(sb({},n),{},{status:r}):n})}),n.next=3;break;case 2:n.prev=2,i=n.catch(0),console.error("Ошибка обновления статуса:",i),l.Ay.error("Не удалось обновить статус участника");case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(e,t){return n.apply(this,arguments)}}(),P=function(){var n=(0,u.A)(h().mark(function n(t){var r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("Вы уверены, что хотите удалить этого участника?")){n.next=1;break}return n.abrupt("return");case 1:return n.prev=1,n.next=2,Sn.removeParticipant(e,t);case 2:o(function(n){return n.filter(function(n){return n.id!==t})}),n.next=4;break;case 3:n.prev=3,r=n.catch(1),console.error("Ошибка удаления участника:",r),l.Ay.error("Не удалось удалить участника");case 4:case"end":return n.stop()}},n,null,[[1,3]])}));return function(e){return n.apply(this,arguments)}}(),L=function(n){return{pending:"Ожидает",approved:"Подтвержден",rejected:"Отклонен",cancelled:"Отменен"}[n]||n},O=s.filter(function(n){var e,t,r=(null===(e=n.user)||void 0===e||null===(e=e.name)||void 0===e?void 0:e.toLowerCase().includes(A.toLowerCase()))||(null===(t=n.user)||void 0===t||null===(t=t.email)||void 0===t?void 0:t.toLowerCase().includes(A.toLowerCase())),i="all"===C||n.status===C;return r&&i}),D=s.reduce(function(n,e){return n[e.status]=(n[e.status]||0)+1,n},{});return x?(0,m.jsx)("div",{className:"event-participants-overlay",children:(0,m.jsx)("div",{className:"event-participants",children:(0,m.jsxs)("div",{className:"participants-loading",children:[(0,m.jsx)("div",{className:"loading-spinner"}),(0,m.jsx)("p",{children:"Загрузка участников..."})]})})}):(0,m.jsx)("div",{className:"event-participants-overlay",children:(0,m.jsxs)("div",{className:"event-participants",children:[(0,m.jsxs)("div",{className:"participants-header",children:[(0,m.jsx)("h2",{children:"Участники события"}),(0,m.jsx)("button",{className:"close-button",onClick:t,children:"×"})]}),b&&(0,m.jsx)("div",{className:"error-message",children:b}),(0,m.jsxs)("div",{className:"participants-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-number",children:s.length}),(0,m.jsx)("span",{className:"stat-label",children:"Всего заявок"})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-number",children:D.approved||0}),(0,m.jsx)("span",{className:"stat-label",children:"Подтверждено"})]}),(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)("span",{className:"stat-number",children:D.pending||0}),(0,m.jsx)("span",{className:"stat-label",children:"Ожидает"})]})]}),(0,m.jsxs)("div",{className:"participants-filters",children:[(0,m.jsx)("div",{className:"filter-group",children:(0,m.jsx)("input",{type:"text",placeholder:"Поиск по имени или email...",value:A,onChange:function(n){return k(n.target.value)},className:"search-input"})}),(0,m.jsx)("div",{className:"filter-group",children:(0,m.jsxs)("select",{value:C,onChange:function(n){return z(n.target.value)},className:"status-filter",children:[(0,m.jsx)("option",{value:"all",children:"Все статусы"}),(0,m.jsx)("option",{value:"pending",children:"Ожидает"}),(0,m.jsx)("option",{value:"approved",children:"Подтвержден"}),(0,m.jsx)("option",{value:"rejected",children:"Отклонен"}),(0,m.jsx)("option",{value:"cancelled",children:"Отменен"})]})})]}),(0,m.jsx)("div",{className:"participants-list",children:0===O.length?(0,m.jsxs)("div",{className:"no-participants",children:[(0,m.jsx)("div",{className:"no-participants-icon",children:"👥"}),(0,m.jsx)("p",{children:"Участники не найдены"})]}):O.map(function(n){var e,t,r,i,a;return(0,m.jsxs)("div",{className:"participant-card",children:[(0,m.jsxs)("div",{className:"participant-info",children:[(0,m.jsx)("div",{className:"participant-avatar",children:(0,m.jsx)("img",{src:null!==(e=n.user)&&void 0!==e&&e.avatar?"/uploads/".concat(n.user.avatar):"/uploads/no_photo.jpg",alt:null===(t=n.user)||void 0===t?void 0:t.name,onError:function(n){n.target.src="/uploads/no_photo.jpg"}})}),(0,m.jsxs)("div",{className:"participant-details",children:[(0,m.jsx)("h4",{className:"participant-name",children:(null===(r=n.user)||void 0===r?void 0:r.name)||"Неизвестный пользователь"}),(0,m.jsx)("p",{className:"participant-email",children:null===(i=n.user)||void 0===i?void 0:i.email}),(0,m.jsxs)("p",{className:"participant-date",children:["Подал заявку: ",new Date(n.created_at).toLocaleDateString("ru-RU")]})]})]}),(0,m.jsxs)("div",{className:"participant-actions",children:[(0,m.jsx)("div",{className:"status-badge",style:{backgroundColor:(a=n.status,{pending:"#f59e0b",approved:"#10b981",rejected:"#ef4444",cancelled:"#6b7280"}[a]||"#6b7280")},children:L(n.status)}),(0,m.jsxs)("div",{className:"action-buttons",children:["pending"===n.status&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{className:"btn btn-success btn-sm",onClick:function(){return E(n.id,"approved")},children:"✓ Одобрить"}),(0,m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return E(n.id,"rejected")},children:"✗ Отклонить"})]}),"approved"===n.status&&(0,m.jsx)("button",{className:"btn btn-warning btn-sm",onClick:function(){return E(n.id,"cancelled")},children:"Отменить"}),(0,m.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return P(n.id)},children:"🗑️ Удалить"})]})]})]},n.id)})})]})})};var cb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,m.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})},lb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,m.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},db=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,m.jsx)("circle",{cx:"12",cy:"10",r:"3"})]})},ub=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,m.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,m.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},pb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,m.jsx)("polyline",{points:"12,6 12,12 16,14"})]})},xb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,m.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},hb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,m.jsx)("path",{d:"M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]})},fb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})},mb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,m.jsx)("path",{d:"M21 21l-4.35-4.35"})]})};const gb=function(){var n=(0,r.useState)([]),e=(0,p.A)(n,2),t=e[0],i=e[1],a=(0,r.useState)(!0),o=(0,p.A)(a,2),c=o[0],l=o[1],d=(0,r.useState)("all"),x=(0,p.A)(d,2),f=x[0],g=x[1],v=(0,r.useState)(""),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)(!1),A=(0,p.A)(w,2),k=A[0],N=A[1],S=(0,r.useState)(null),C=(0,p.A)(S,2),z=C[0],_=C[1],E=(0,r.useState)(null),P=(0,p.A)(E,2),L=P[0],O=(P[1],(0,r.useState)(!1)),D=(0,p.A)(O,2),$=D[0],M=D[1],I=(0,r.useState)(null),U=(0,p.A)(I,2),T=U[0],R=U[1],B=(0,r.useState)(!1),W=(0,p.A)(B,2),F=W[0],Q=W[1];(0,r.useEffect)(function(){q()},[]);var q=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,Sn.getEvents();case 1:e=n.sent,i(Array.isArray(e.events)?e.events:Array.isArray(e)?e:[]),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.error("Ошибка загрузки мероприятий:",t),i([]);case 3:return n.prev=3,l(!1),n.finish(3);case 4:case"end":return n.stop()}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),H=function(){var n=(0,u.A)(h().mark(function n(e){var r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Вы уверены, что хотите удалить это мероприятие?")){n.next=4;break}return n.prev=1,n.next=2,Sn.deleteEvent(e);case 2:i((t||[]).filter(function(n){return n.id!==e})),n.next=4;break;case 3:n.prev=3,r=n.catch(1),console.error("Ошибка удаления мероприятия:",r);case 4:case"end":return n.stop()}},n,null,[[1,3]])}));return function(e){return n.apply(this,arguments)}}(),V=function(){_(null),N(!0)},X=function(n){return qv(n.date,n.duration_hours||2,n.end_date)},Y=(t||[]).filter(function(n){var e=X(n),t="all"===f||f===e,r=n.title.toLowerCase().includes(j.toLowerCase())||n.location.toLowerCase().includes(j.toLowerCase());return t&&r});return c?(0,m.jsxs)("div",{className:"club-events-loading",children:[(0,m.jsx)("div",{className:"loading-spinner"}),(0,m.jsx)("p",{children:"Загрузка мероприятий..."})]}):(0,m.jsxs)("div",{className:"club-events",children:[(0,m.jsxs)("div",{className:"events-header",children:[(0,m.jsxs)("div",{className:"header-content",children:[(0,m.jsx)("h1",{children:"Мероприятия клуба"}),(0,m.jsx)("p",{children:"Управляйте мероприятиями и событиями вашего клуба"})]}),(0,m.jsxs)("button",{className:"btn btn-primary create-event-btn",onClick:V,children:[(0,m.jsx)(cb,{className:"icon"}),"Создать мероприятие"]})]}),(0,m.jsxs)("div",{className:"events-controls",children:[(0,m.jsxs)("div",{className:"search-box",children:[(0,m.jsx)(mb,{className:"search-icon"}),(0,m.jsx)("input",{type:"text",placeholder:"Поиск мероприятий...",value:j,onChange:function(n){return y(n.target.value)},className:"search-input"})]}),(0,m.jsxs)("div",{className:"filter-buttons",children:[(0,m.jsx)("button",{className:"filter-btn ".concat("all"===f?"active":""),onClick:function(){return g("all")},children:"Все"}),(0,m.jsx)("button",{className:"filter-btn ".concat("upcoming"===f?"active":""),onClick:function(){return g("upcoming")},children:"Предстоящие"}),(0,m.jsx)("button",{className:"filter-btn ".concat("ongoing"===f?"active":""),onClick:function(){return g("ongoing")},children:"Идут сейчас"}),(0,m.jsx)("button",{className:"filter-btn ".concat("completed"===f?"active":""),onClick:function(){return g("completed")},children:"Завершенные"})]})]}),(0,m.jsx)("div",{className:"events-container",children:0===Y.length?(0,m.jsxs)("div",{className:"no-events",children:[(0,m.jsx)(lb,{className:"no-events-icon"}),(0,m.jsx)("h3",{children:"Мероприятия не найдены"}),(0,m.jsx)("p",{children:"Создайте первое мероприятие для вашего клуба"}),(0,m.jsxs)("button",{className:"btn btn-primary",onClick:V,children:[(0,m.jsx)(cb,{className:"icon"}),"Создать мероприятие"]})]}):(0,m.jsx)("div",{className:"events-grid",children:Y.map(function(n){return(0,m.jsxs)("div",{className:"event-card",children:[(0,m.jsxs)("div",{className:"event-header",children:[(0,m.jsxs)("div",{className:"event-status-badge",children:[(0,m.jsx)("span",{className:"status-dot ".concat(X(n))}),Hv(X(n))]}),(0,m.jsxs)("div",{className:"event-actions",children:[(0,m.jsx)("button",{className:"action-btn view",onClick:function(e){var t;e.preventDefault(),e.stopPropagation(),t=n.id,console.log("Opening event details for ID:",t),R(t),Q(!0)},title:"Просмотр деталей",children:(0,m.jsx)(fb,{className:"icon"})}),(0,m.jsx)("button",{className:"action-btn participants",onClick:function(){return e=n.id,R(e),void M(!0);var e},title:"Управление участниками",children:(0,m.jsx)(ub,{className:"icon"})}),(0,m.jsx)("button",{className:"action-btn edit",onClick:function(){return function(n){_(n),N(!0)}(n)},children:(0,m.jsx)(xb,{className:"icon"})}),(0,m.jsx)("button",{className:"action-btn delete",onClick:function(){return H(n.id)},children:(0,m.jsx)(hb,{className:"icon"})})]})]}),(0,m.jsxs)("div",{className:"event-content",children:[(0,m.jsx)("h3",{className:"event-title",children:n.title}),(0,m.jsx)("p",{className:"event-description",children:n.description}),(0,m.jsxs)("div",{className:"event-details",children:[(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)(lb,{className:"icon"}),(0,m.jsx)("span",{children:new Date(n.date).toLocaleDateString("ru-RU")}),n.time&&(0,m.jsxs)("span",{className:"event-time",children:[" в ",n.time]})]}),(e=X(n),t=function(n){var e=new Date,t=new Date(n);if(t<=e)return null;var r=t.getTime()-e.getTime(),i=Math.floor(r/864e5),a=Math.floor(r%864e5/36e5),s=Math.floor(r%36e5/6e4);return i>0?"".concat(i," дн. ").concat(a," ч."):a>0?"".concat(a," ч. ").concat(s," мин."):"".concat(s," мин.")}(n.date),r=function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new Date,a=new Date(n);if(e=r?new Date(r):new Date(a.getTime()+60*t*60*1e3),i<a||i>e)return null;var s=e.getTime()-i.getTime(),o=Math.floor(s/36e5),c=Math.floor(s%36e5/6e4);return o>0?"".concat(o," ч. ").concat(c," мин."):"".concat(c," мин.")}(n.date,n.duration_hours||2,n.end_date),"upcoming"===e&&t?(0,m.jsxs)("div",{className:"detail-item time-info",children:[(0,m.jsx)(pb,{className:"icon"}),(0,m.jsxs)("span",{children:["До начала: ",t]})]}):"ongoing"===e&&r?(0,m.jsxs)("div",{className:"detail-item time-info",children:[(0,m.jsx)(pb,{className:"icon"}),(0,m.jsxs)("span",{children:["До окончания: ",r]})]}):null),(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)(db,{className:"icon"}),(0,m.jsx)("span",{children:n.location})]}),(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)(ub,{className:"icon"}),(0,m.jsx)("span",{children:n.max_participants&&n.max_participants>0?"".concat(n.current_participants||0,"/").concat(n.max_participants," участников"):"".concat(n.current_participants||0," участников")})]})]}),n.price>0&&(0,m.jsxs)("div",{className:"event-price",children:[(0,m.jsx)("span",{className:"price-label",children:"Стоимость:"}),(0,m.jsxs)("span",{className:"price-value",children:[n.price," ₽"]})]}),n.is_premium&&(0,m.jsx)("div",{className:"premium-badge",children:(0,m.jsx)("span",{children:"Премиум"})})]}),(0,m.jsxs)("div",{className:"event-footer",children:[n.max_participants?(0,m.jsxs)("div",{className:"participation-progress",children:[(0,m.jsx)("div",{className:"progress-bar",children:(0,m.jsx)("div",{className:"progress-fill",style:{width:"".concat(Math.min((n.current_participants||0)/n.max_participants*100,100),"%")}})}),(0,m.jsxs)("span",{className:"progress-text",children:[Math.round((n.current_participants||0)/n.max_participants*100),"% заполнено"]})]}):(0,m.jsx)("div",{className:"participation-progress",children:(0,m.jsx)("span",{className:"progress-text",children:"Без ограничений"})}),(0,m.jsx)(s.N_,{to:"/club/events/".concat(n.id,"/participants"),className:"btn btn-sm btn-secondary",children:"Участники"})]})]},n.id);var e,t,r})})}),k&&(0,m.jsx)(lv,{event:z,onSave:function(){N(!1),_(null),q()},onCancel:function(){N(!1),_(null)},clubId:L}),$&&(0,m.jsx)(ob,{eventId:T,onClose:function(){M(!1),R(null)}}),(0,m.jsx)(Qv,{isOpen:F,onClose:function(){Q(!1),R(null)},eventId:T})]})};var vb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,m.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,m.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},bb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,m.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},jb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M6 3h12"}),(0,m.jsx)("path",{d:"M6 8h12"}),(0,m.jsx)("path",{d:"M6 13l8 0"}),(0,m.jsx)("path",{d:"M6 18l8 0"}),(0,m.jsx)("path",{d:"M15 8a3 3 0 1 0 0 6"})]})},yb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"22,7 13.5,15.5 8.5,10.5 2,17"}),(0,m.jsx)("polyline",{points:"16,7 22,7 22,13"})]})},wb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"22,17 13.5,8.5 8.5,13.5 2,7"}),(0,m.jsx)("polyline",{points:"16,17 22,17 22,11"})]})},Ab=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})},kb=function(){return(0,m.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};const Nb=function(){var n,e,t,i,a,s,o,c,l,d,x,f,g,v,b,j,y,w,A,k,N,S,C,z,_=(0,r.useState)({}),E=(0,p.A)(_,2),P=E[0],L=E[1],O=(0,r.useState)(!0),D=(0,p.A)(O,2),$=D[0],M=D[1],I=(0,r.useState)("week"),U=(0,p.A)(I,2),T=U[0],R=U[1],B=(0,r.useState)("overview"),W=(0,p.A)(B,2);W[0],W[1],(0,r.useEffect)(function(){F()},[T]);var F=function(){var n=(0,u.A)(h().mark(function n(){var e,t,r,i,a,s,o;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,Promise.all([Sn.getAnalytics("overview",T),Sn.getAnalytics("events",T),Sn.getAnalytics("participants",T),Sn.getAnalytics("financial",T)]);case 1:e=n.sent,t=(0,p.A)(e,4),r=t[0],i=t[1],a=t[2],s=t[3],L({overview:r.analytics||r,events:i.analytics||i,participants:a.analytics||a,financial:s.analytics||s}),n.next=3;break;case 2:n.prev=2,o=n.catch(0),console.error("Ошибка загрузки аналитики:",o);case 3:return n.prev=3,M(!1),n.finish(3);case 4:case"end":return n.stop()}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),Q=function(n,e,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"blue",a=function(n,e){if(!e)return{value:0,isPositive:!0};var t=(n-e)/e*100;return{value:Math.abs(t).toFixed(1),isPositive:t>=0}}(e,null==r?void 0:r.previous);return(0,m.jsxs)("div",{className:"metric-card ".concat(i),children:[(0,m.jsxs)("div",{className:"metric-header",children:[(0,m.jsx)("div",{className:"metric-icon ".concat(i),children:t}),(0,m.jsx)("div",{className:"metric-change",children:a.value>0&&(0,m.jsxs)(m.Fragment,{children:[a.isPositive?(0,m.jsx)(yb,{className:"trend-icon positive"}):(0,m.jsx)(wb,{className:"trend-icon negative"}),(0,m.jsxs)("span",{className:"change-value ".concat(a.isPositive?"positive":"negative"),children:[a.value,"%"]})]})})]}),(0,m.jsxs)("div",{className:"metric-content",children:[(0,m.jsx)("h3",{className:"metric-value",children:(null==e?void 0:e.toLocaleString())||0}),(0,m.jsx)("p",{className:"metric-title",children:n})]})]})},q=function(n,e){if(!Array.isArray(n)||0===n.length)return(0,m.jsxs)("div",{className:"chart-container",children:[(0,m.jsx)("h3",{className:"chart-title",children:e}),(0,m.jsx)("div",{className:"chart-content",children:(0,m.jsx)("p",{children:"Нет данных для отображения"})})]});var t=Math.max.apply(Math,(0,pa.A)(n.map(function(n){return n.value})));return(0,m.jsxs)("div",{className:"chart-container",children:[(0,m.jsx)("h3",{className:"chart-title",children:e}),(0,m.jsx)("div",{className:"chart-content",children:n.map(function(n,e){return(0,m.jsxs)("div",{className:"chart-bar",children:[(0,m.jsx)("div",{className:"bar-label",children:n.label}),(0,m.jsx)("div",{className:"bar-container",children:(0,m.jsx)("div",{className:"bar-fill",style:{width:"".concat(n.value/t*100,"%"),backgroundColor:"hsl(".concat(60*e,", 70%, 60%)")}})}),(0,m.jsx)("div",{className:"bar-value",children:n.value})]},e)})})]})};return $?(0,m.jsxs)("div",{className:"club-analytics-loading",children:[(0,m.jsx)("div",{className:"loading-spinner"}),(0,m.jsx)("p",{children:"Загрузка аналитики..."})]}):(0,m.jsxs)("div",{className:"club-analytics",children:[(0,m.jsxs)("div",{className:"analytics-header",children:[(0,m.jsxs)("div",{className:"header-content",children:[(0,m.jsx)("h1",{children:"Аналитика клуба"}),(0,m.jsx)("p",{children:"Детальная статистика и метрики вашего клуба"})]}),(0,m.jsxs)("div",{className:"period-selector",children:[(0,m.jsx)("button",{className:"period-btn ".concat("week"===T?"active":""),onClick:function(){return R("week")},children:"Неделя"}),(0,m.jsx)("button",{className:"period-btn ".concat("month"===T?"active":""),onClick:function(){return R("month")},children:"Месяц"}),(0,m.jsx)("button",{className:"period-btn ".concat("year"===T?"active":""),onClick:function(){return R("year")},children:"Год"})]})]}),(0,m.jsxs)("div",{className:"metrics-grid",children:[Q("Всего мероприятий",null===(n=P.overview)||void 0===n?void 0:n.total_events,(0,m.jsx)(bb,{}),null===(e=P.overview)||void 0===e?void 0:e.events_change,"blue"),Q("Участников",null===(t=P.overview)||void 0===t?void 0:t.total_participants,(0,m.jsx)(vb,{}),null===(i=P.overview)||void 0===i?void 0:i.participants_change,"green"),Q("Доход",null===(a=P.overview)||void 0===a?void 0:a.total_revenue,(0,m.jsx)(jb,{}),null===(s=P.overview)||void 0===s?void 0:s.revenue_change,"purple"),Q("Рейтинг",null===(o=P.overview)||void 0===o?void 0:o.average_rating,(0,m.jsx)(kb,{}),null===(c=P.overview)||void 0===c?void 0:c.rating_change,"red")]}),(0,m.jsxs)("div",{className:"analytics-sections",children:[(0,m.jsxs)("div",{className:"analytics-section",children:[(0,m.jsxs)("div",{className:"section-header",children:[(0,m.jsx)("h2",{children:"Аналитика мероприятий"}),(0,m.jsx)("div",{className:"section-actions",children:(0,m.jsxs)("button",{className:"btn btn-sm btn-secondary",children:[(0,m.jsx)(Ab,{className:"icon"}),"Экспорт"]})})]}),(0,m.jsxs)("div",{className:"section-content",children:[(0,m.jsxs)("div",{className:"metrics-row",children:[(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Средняя посещаемость"}),(0,m.jsxs)("span",{className:"metric-value",children:[(null===(l=P.events)||void 0===l?void 0:l.average_participation)||0,"%"]})]}),(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Популярные дни"}),(0,m.jsx)("span",{className:"metric-value",children:(null===(d=P.events)||void 0===d||null===(d=d.popular_days)||void 0===d?void 0:d.join(", "))||"Нет данных"})]}),(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Отмены"}),(0,m.jsx)("span",{className:"metric-value",children:(null===(x=P.events)||void 0===x?void 0:x.cancellations)||0})]})]}),(null===(f=P.events)||void 0===f?void 0:f.monthly_data)&&(0,m.jsx)("div",{className:"chart-section",children:q(P.events.monthly_data,"Мероприятия по месяцам")})]})]}),(0,m.jsxs)("div",{className:"analytics-section",children:[(0,m.jsx)("div",{className:"section-header",children:(0,m.jsx)("h2",{children:"Аналитика участников"})}),(0,m.jsxs)("div",{className:"section-content",children:[(0,m.jsxs)("div",{className:"metrics-row",children:[(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Новые участники"}),(0,m.jsx)("span",{className:"metric-value",children:(null===(g=P.participants)||void 0===g?void 0:g.new_participants)||0})]}),(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Активные участники"}),(0,m.jsx)("span",{className:"metric-value",children:(null===(v=P.participants)||void 0===v?void 0:v.active_participants)||0})]}),(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Средний возраст"}),(0,m.jsxs)("span",{className:"metric-value",children:[(null===(b=P.participants)||void 0===b?void 0:b.average_age)||0," лет"]})]})]}),(null===(j=P.participants)||void 0===j?void 0:j.demographics)&&(0,m.jsxs)("div",{className:"demographics-grid",children:[(0,m.jsxs)("div",{className:"demographic-item",children:[(0,m.jsx)("h4",{children:"Пол"}),(0,m.jsxs)("div",{className:"demographic-data",children:[(0,m.jsxs)("div",{className:"demographic-bar",children:[(0,m.jsx)("span",{children:"Мужчины"}),(0,m.jsx)("div",{className:"bar",children:(0,m.jsx)("div",{className:"bar-fill male",style:{width:"".concat((null===(y=P.participants.demographics.gender)||void 0===y?void 0:y.male)||0,"%")}})}),(0,m.jsxs)("span",{children:[(null===(w=P.participants.demographics.gender)||void 0===w?void 0:w.male)||0,"%"]})]}),(0,m.jsxs)("div",{className:"demographic-bar",children:[(0,m.jsx)("span",{children:"Женщины"}),(0,m.jsx)("div",{className:"bar",children:(0,m.jsx)("div",{className:"bar-fill female",style:{width:"".concat((null===(A=P.participants.demographics.gender)||void 0===A?void 0:A.female)||0,"%")}})}),(0,m.jsxs)("span",{children:[(null===(k=P.participants.demographics.gender)||void 0===k?void 0:k.female)||0,"%"]})]})]})]}),(0,m.jsxs)("div",{className:"demographic-item",children:[(0,m.jsx)("h4",{children:"Возраст"}),(0,m.jsx)("div",{className:"demographic-data",children:(P.participants.demographics.age_groups||[]).map(function(n,e){return(0,m.jsxs)("div",{className:"demographic-bar",children:[(0,m.jsx)("span",{children:n.range}),(0,m.jsx)("div",{className:"bar",children:(0,m.jsx)("div",{className:"bar-fill age",style:{width:"".concat(n.percentage,"%")}})}),(0,m.jsxs)("span",{children:[n.percentage,"%"]})]},e)})})]})]})]})]}),(0,m.jsxs)("div",{className:"analytics-section",children:[(0,m.jsx)("div",{className:"section-header",children:(0,m.jsx)("h2",{children:"Финансовая аналитика"})}),(0,m.jsxs)("div",{className:"section-content",children:[(0,m.jsxs)("div",{className:"metrics-row",children:[(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Общий доход"}),(0,m.jsxs)("span",{className:"metric-value",children:[(null===(N=P.financial)||void 0===N||null===(N=N.total_revenue)||void 0===N?void 0:N.toLocaleString())||0," ₽"]})]}),(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Средний чек"}),(0,m.jsxs)("span",{className:"metric-value",children:[(null===(S=P.financial)||void 0===S||null===(S=S.average_ticket)||void 0===S?void 0:S.toLocaleString())||0," ₽"]})]}),(0,m.jsxs)("div",{className:"metric-item",children:[(0,m.jsx)("span",{className:"metric-label",children:"Прибыль"}),(0,m.jsxs)("span",{className:"metric-value",children:[(null===(C=P.financial)||void 0===C||null===(C=C.profit)||void 0===C?void 0:C.toLocaleString())||0," ₽"]})]})]}),(null===(z=P.financial)||void 0===z?void 0:z.revenue_by_month)&&(0,m.jsx)("div",{className:"chart-section",children:q(P.financial.revenue_by_month,"Доход по месяцам")})]})]})]})]})};function Sb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Cb(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Sb(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sb(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var zb=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,m.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})},_b=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,m.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},Eb=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,m.jsx)("path",{d:"M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"}),(0,m.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,m.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})},Pb=function(){return(0,m.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polygon",{points:"5,3 19,12 5,21"})})},Lb=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"6",y:"4",width:"4",height:"16"}),(0,m.jsx)("rect",{x:"14",y:"4",width:"4",height:"16"})]})},Ob=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,m.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})},Db=function(){return(0,m.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12"})})},$b=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,m.jsx)("polyline",{points:"12,6 12,12 16,14"})]})},Mb=function(n){var e=n.bot,t=n.onCancel,i=n.onSave,a=(0,r.useState)({name:(null==e?void 0:e.name)||"",description:(null==e?void 0:e.description)||"",type:(null==e?void 0:e.type)||"custom",trigger:(null==e?void 0:e.trigger)||"",interval:(null==e?void 0:e.interval)||"",settings:(null==e?void 0:e.settings)||{},status:(null==e?void 0:e.status)||"inactive"}),s=(0,p.A)(a,2),o=s[0],c=s[1],d=(0,r.useState)(!1),x=(0,p.A)(d,2),f=x[0],g=x[1],v=function(){var n=(0,u.A)(h().mark(function n(t){var r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),g(!0),n.prev=1,!e){n.next=3;break}return n.next=2,Sn.updateBot(e.id,o);case 2:n.next=4;break;case 3:return n.next=4,Sn.createBot(o);case 4:i(),n.next=6;break;case 5:n.prev=5,r=n.catch(1),console.error("Ошибка сохранения бота:",r),l.Ay.error("Ошибка при сохранении бота");case 6:return n.prev=6,g(!1),n.finish(6);case 7:case"end":return n.stop()}},n,null,[[1,5,6,7]])}));return function(e){return n.apply(this,arguments)}}(),j=function(n){var e=n.target,t=e.name,r=e.value;c(function(n){return Cb(Cb({},n),{},(0,b.A)({},t,r))})};return(0,m.jsxs)("form",{onSubmit:v,className:"bot-form",children:[(0,m.jsxs)("div",{className:"form-header",children:[(0,m.jsx)("h2",{children:e?"Редактировать бота":"Создать бота"}),(0,m.jsx)("button",{type:"button",className:"close-btn",onClick:t,children:"×"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"name",children:"Название бота *"}),(0,m.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:j,required:!0,placeholder:"Введите название бота"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"description",children:"Описание"}),(0,m.jsx)("textarea",{id:"description",name:"description",value:o.description,onChange:j,rows:"3",placeholder:"Опишите функционал бота"})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"type",children:"Тип бота *"}),(0,m.jsxs)("select",{id:"type",name:"type",value:o.type,onChange:j,required:!0,children:[(0,m.jsx)("option",{value:"welcome",children:"Приветственный"}),(0,m.jsx)("option",{value:"event_reminder",children:"Напоминания о событиях"}),(0,m.jsx)("option",{value:"auto_response",children:"Автоответчик"}),(0,m.jsx)("option",{value:"analytics",children:"Аналитика"}),(0,m.jsx)("option",{value:"moderation",children:"Модерация"}),(0,m.jsx)("option",{value:"custom",children:"Пользовательский"})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"status",children:"Статус"}),(0,m.jsxs)("select",{id:"status",name:"status",value:o.status,onChange:j,children:[(0,m.jsx)("option",{value:"inactive",children:"Неактивен"}),(0,m.jsx)("option",{value:"active",children:"Активен"})]})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"trigger",children:"Триггер (условие запуска)"}),(0,m.jsx)("input",{type:"text",id:"trigger",name:"trigger",value:o.trigger,onChange:j,placeholder:"Например: новое сообщение, регистрация пользователя"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"interval",children:"Интервал выполнения"}),(0,m.jsxs)("select",{id:"interval",name:"interval",value:o.interval,onChange:j,children:[(0,m.jsx)("option",{value:"",children:"По событию"}),(0,m.jsx)("option",{value:"1m",children:"Каждую минуту"}),(0,m.jsx)("option",{value:"5m",children:"Каждые 5 минут"}),(0,m.jsx)("option",{value:"15m",children:"Каждые 15 минут"}),(0,m.jsx)("option",{value:"30m",children:"Каждые 30 минут"}),(0,m.jsx)("option",{value:"1h",children:"Каждый час"}),(0,m.jsx)("option",{value:"6h",children:"Каждые 6 часов"}),(0,m.jsx)("option",{value:"12h",children:"Каждые 12 часов"}),(0,m.jsx)("option",{value:"1d",children:"Ежедневно"}),(0,m.jsx)("option",{value:"1w",children:"Еженедельно"})]})]}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Отмена"}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Сохранение...":e?"Обновить":"Создать"})]})]})};const Ib=function(){var n=(0,r.useState)([]),e=(0,p.A)(n,2),t=e[0],i=e[1],a=(0,r.useState)(!0),s=(0,p.A)(a,2),o=s[0],c=s[1],d=(0,r.useState)(!1),x=(0,p.A)(d,2),f=x[0],g=x[1],v=(0,r.useState)(null),b=(0,p.A)(v,2),j=b[0],y=b[1];(0,r.useEffect)(function(){w()},[]);var w=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(!0),n.next=1,Sn.getBots();case 1:e=n.sent,i(Array.isArray(e.bots)?e.bots:Array.isArray(e)?e:[]),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.error("Ошибка загрузки ботов:",t),i([]);case 3:return n.prev=3,c(!1),n.finish(3);case 4:case"end":return n.stop()}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),A=function(){y(null),g(!0)},k=function(n){y(n),g(!0)},N=function(){var n=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Вы уверены, что хотите удалить этого бота?")){n.next=5;break}return n.prev=1,n.next=2,Sn.deleteBot(e);case 2:return n.next=3,w();case 3:n.next=5;break;case 4:n.prev=4,t=n.catch(1),console.error("Ошибка удаления бота:",t),l.Ay.error("Ошибка при удалении бота");case 5:case"end":return n.stop()}},n,null,[[1,4]])}));return function(e){return n.apply(this,arguments)}}(),S=function(){var n=(0,u.A)(h().mark(function n(e,t){var r,i;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r="active"===t?"inactive":"active",n.next=1,Sn.updateBot(e,{status:r});case 1:return n.next=2,w();case 2:n.next=4;break;case 3:n.prev=3,i=n.catch(0),console.error("Ошибка изменения статуса бота:",i),l.Ay.error("Ошибка при изменении статуса бота");case 4:case"end":return n.stop()}},n,null,[[0,3]])}));return function(e,t){return n.apply(this,arguments)}}(),C=function(n){switch(n){case"welcome":return"👋";case"event_reminder":return"📅";case"auto_response":return"💬";case"analytics":return"📊";case"moderation":return"🛡️";default:return"🤖"}};return o?(0,m.jsx)("div",{className:"club-bots",children:(0,m.jsxs)("div",{className:"loading",children:[(0,m.jsx)("div",{className:"spinner"}),(0,m.jsx)("p",{children:"Загрузка ботов..."})]})}):(0,m.jsxs)("div",{className:"club-bots",children:[(0,m.jsxs)("div",{className:"page-header",children:[(0,m.jsxs)("div",{className:"header-content",children:[(0,m.jsx)("h1",{children:"Боты клуба"}),(0,m.jsx)("p",{children:"Управляйте автоматизацией и ботами для вашего клуба"})]}),(0,m.jsxs)("button",{className:"btn btn-primary",onClick:A,children:[(0,m.jsx)(zb,{className:"icon"}),"Создать бота"]})]}),(0,m.jsxs)("div",{className:"bots-stats",children:[(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Всего ботов"}),(0,m.jsx)("span",{className:"stat-number",children:t.length})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Активных"}),(0,m.jsx)("span",{className:"stat-number",children:t.filter(function(n){return"active"===n.status}).length})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Выполнено задач"}),(0,m.jsx)("span",{className:"stat-number",children:t.reduce(function(n,e){return n+(e.tasks_completed||0)},0)})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Ошибок"}),(0,m.jsx)("span",{className:"stat-number",children:t.filter(function(n){return"error"===n.status}).length})]})]}),(0,m.jsx)("div",{className:"bots-content",children:0===t.length?(0,m.jsxs)("div",{className:"empty-state",children:[(0,m.jsx)("div",{className:"empty-icon",children:"🤖"}),(0,m.jsx)("h3",{children:"Нет ботов"}),(0,m.jsx)("p",{children:"Создайте первого бота для автоматизации процессов в клубе"}),(0,m.jsxs)("button",{className:"btn btn-primary",onClick:A,children:[(0,m.jsx)(zb,{className:"icon"}),"Создать бота"]})]}):(0,m.jsx)("div",{className:"bots-grid",children:t.map(function(n){return(0,m.jsxs)("div",{className:"bot-card",children:[(0,m.jsxs)("div",{className:"bot-header",children:[(0,m.jsxs)("div",{className:"bot-info",children:[(0,m.jsx)("div",{className:"bot-icon",children:C(n.type)}),(0,m.jsxs)("div",{className:"bot-details",children:[(0,m.jsx)("h3",{children:n.name}),(0,m.jsx)("p",{children:(r=n.type,{welcome:"Приветственный",event_reminder:"Напоминания о событиях",auto_response:"Автоответчик",analytics:"Аналитика",moderation:"Модерация",custom:"Пользовательский"}[r]||r)})]})]}),(0,m.jsx)("div",{className:"bot-status",children:(e=n.status,t={active:{text:"Активен",class:"status-active"},inactive:{text:"Неактивен",class:"status-inactive"},error:{text:"Ошибка",class:"status-error"}}[e]||{text:e,class:"status-unknown"},(0,m.jsx)("span",{className:"status-badge ".concat(t.class),children:t.text}))})]}),(0,m.jsxs)("div",{className:"bot-content",children:[(0,m.jsx)("p",{className:"bot-description",children:n.description}),(0,m.jsxs)("div",{className:"bot-settings",children:[(0,m.jsxs)("div",{className:"setting-item",children:[(0,m.jsx)("span",{className:"setting-label",children:"Триггер:"}),(0,m.jsx)("span",{className:"setting-value",children:n.trigger||"Не настроен"})]}),(0,m.jsxs)("div",{className:"setting-item",children:[(0,m.jsx)("span",{className:"setting-label",children:"Интервал:"}),(0,m.jsx)("span",{className:"setting-value",children:n.interval||"Не настроен"})]}),n.last_run&&(0,m.jsxs)("div",{className:"setting-item",children:[(0,m.jsx)("span",{className:"setting-label",children:"Последний запуск:"}),(0,m.jsx)("span",{className:"setting-value",children:new Date(n.last_run).toLocaleString("ru-RU")})]})]})]}),(0,m.jsxs)("div",{className:"bot-footer",children:[(0,m.jsxs)("div",{className:"bot-metrics",children:[(0,m.jsxs)("div",{className:"metric",children:[(0,m.jsx)(Db,{className:"icon"}),(0,m.jsxs)("span",{children:[n.tasks_completed||0," задач"]})]}),(0,m.jsxs)("div",{className:"metric",children:[(0,m.jsx)($b,{className:"icon"}),(0,m.jsxs)("span",{children:["Создан: ",new Date(n.created_at).toLocaleDateString("ru-RU")]})]})]}),(0,m.jsxs)("div",{className:"bot-actions",children:[(0,m.jsxs)("button",{className:"btn btn-sm ".concat("active"===n.status?"btn-warning":"btn-success"),onClick:function(){return S(n.id,n.status)},title:"active"===n.status?"Остановить":"Запустить",children:["active"===n.status?(0,m.jsx)(Lb,{className:"icon"}):(0,m.jsx)(Pb,{className:"icon"}),"active"===n.status?"Остановить":"Запустить"]}),(0,m.jsx)("button",{className:"btn-icon",onClick:function(){return k(n)},title:"Настройки",children:(0,m.jsx)(Ob,{})}),(0,m.jsx)("button",{className:"btn-icon",onClick:function(){return k(n)},title:"Редактировать",children:(0,m.jsx)(_b,{})}),(0,m.jsx)("button",{className:"btn-icon danger",onClick:function(){return N(n.id)},title:"Удалить",children:(0,m.jsx)(Eb,{})})]})]})]},n.id);var e,t,r})})}),f&&(0,m.jsx)("div",{className:"modal-overlay",children:(0,m.jsx)("div",{className:"modal-content",children:(0,m.jsx)(Mb,{bot:j,onCancel:function(){g(!1),y(null)},onSave:function(){g(!1),y(null),w()}})})})]})};var Ub=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})},Tb=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"}),(0,m.jsx)("path",{d:"M6 16h12"})]})},Rb=function(){return(0,m.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})},Bb=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,m.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},Wb=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,m.jsx)("path",{d:"M21 21l-4.35-4.35"})]})},Fb=function(){return(0,m.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,m.jsx)("polygon",{points:"22,3 2,3 10,12.46 10,19 14,21 14,12.46 22,3"})})},Qb=function(n){var e,t,i,a,s,o,c=n.participant,l=n.onClose,d=n.onChangeRole,u=n.onRemove,x=(0,r.useState)(!1),h=(0,p.A)(x,2),f=h[0],g=h[1],v=(0,r.useState)(c.role),b=(0,p.A)(v,2),j=b[0],y=b[1];return(0,m.jsxs)("div",{className:"participant-modal",children:[(0,m.jsxs)("div",{className:"modal-header",children:[(0,m.jsx)("h2",{children:"Информация об участнике"}),(0,m.jsx)("button",{className:"close-btn",onClick:l,children:"×"})]}),(0,m.jsxs)("div",{className:"modal-body",children:[(0,m.jsxs)("div",{className:"user-profile",children:[(0,m.jsx)("div",{className:"user-avatar-large",children:null!==(e=c.user)&&void 0!==e&&e.avatar?(0,m.jsx)("img",{src:c.user.avatar,alt:c.user.name||c.user.login}):(0,m.jsx)(Ub,{})}),(0,m.jsxs)("div",{className:"user-info",children:[(0,m.jsx)("h3",{children:(null===(t=c.user)||void 0===t?void 0:t.name)||(null===(i=c.user)||void 0===i?void 0:i.login)||"Неизвестный пользователь"}),(0,m.jsx)("p",{children:(null===(a=c.user)||void 0===a?void 0:a.email)||"Email не указан"}),(null===(s=c.user)||void 0===s?void 0:s.age)&&(0,m.jsxs)("p",{children:["Возраст: ",c.user.age]}),(null===(o=c.user)||void 0===o?void 0:o.location)&&(0,m.jsxs)("p",{children:["Местоположение: ",c.user.location]})]})]}),(0,m.jsxs)("div",{className:"participant-details",children:[(0,m.jsxs)("div",{className:"detail-section",children:[(0,m.jsx)("h4",{children:"Роль в клубе"}),(0,m.jsxs)("div",{className:"role-section",children:[(0,m.jsxs)("span",{className:"role-badge role-".concat(c.role),children:["owner"===c.role?(0,m.jsx)(Tb,{}):"admin"===c.role||"moderator"===c.role?(0,m.jsx)(Rb,{}):(0,m.jsx)(Ub,{}),"owner"===c.role?"Владелец":"admin"===c.role?"Администратор":"moderator"===c.role?"Модератор":"Участник"]}),"owner"!==c.role&&(0,m.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){return g(!f)},children:"Изменить роль"})]}),f&&(0,m.jsxs)("div",{className:"role-change-form",children:[(0,m.jsxs)("select",{value:j,onChange:function(n){return y(n.target.value)},children:[(0,m.jsx)("option",{value:"member",children:"Участник"}),(0,m.jsx)("option",{value:"moderator",children:"Модератор"}),(0,m.jsx)("option",{value:"admin",children:"Администратор"})]}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsx)("button",{className:"btn btn-sm btn-primary",onClick:function(){d(c.id,j),g(!1)},children:"Сохранить"}),(0,m.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){return g(!1)},children:"Отмена"})]})]})]}),(0,m.jsxs)("div",{className:"detail-section",children:[(0,m.jsx)("h4",{children:"Статус"}),(0,m.jsx)("span",{className:"status-badge status-".concat(c.status),children:"active"===c.status?"Активен":"inactive"===c.status?"Неактивен":"Заблокирован"})]}),(0,m.jsxs)("div",{className:"detail-section",children:[(0,m.jsx)("h4",{children:"Дата присоединения"}),(0,m.jsx)("p",{children:new Date(c.joined_at).toLocaleString("ru-RU")})]}),c.events_attended&&(0,m.jsxs)("div",{className:"detail-section",children:[(0,m.jsx)("h4",{children:"Событий посещено"}),(0,m.jsx)("p",{children:c.events_attended})]}),c.last_activity&&(0,m.jsxs)("div",{className:"detail-section",children:[(0,m.jsx)("h4",{children:"Последняя активность"}),(0,m.jsx)("p",{children:new Date(c.last_activity).toLocaleString("ru-RU")})]}),c.bio&&(0,m.jsxs)("div",{className:"detail-section",children:[(0,m.jsx)("h4",{children:"О себе"}),(0,m.jsx)("p",{children:c.bio})]})]})]}),(0,m.jsxs)("div",{className:"modal-footer",children:[(0,m.jsx)("button",{className:"btn btn-secondary",onClick:l,children:"Закрыть"}),"owner"!==c.role&&(0,m.jsx)("button",{className:"btn btn-danger",onClick:function(){return u(c.id)},children:"Исключить из клуба"})]})]})};const qb=function(){var n=(0,r.useState)([]),e=(0,p.A)(n,2),t=e[0],i=e[1],a=(0,r.useState)(!0),s=(0,p.A)(a,2),o=s[0],c=s[1],d=(0,r.useState)(""),x=(0,p.A)(d,2),f=x[0],g=x[1],v=(0,r.useState)("all"),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)("all"),A=(0,p.A)(w,2),k=A[0],N=A[1],S=(0,r.useState)(null),C=(0,p.A)(S,2),z=C[0],_=C[1],E=(0,r.useState)(!1),P=(0,p.A)(E,2),L=P[0],O=P[1];(0,r.useEffect)(function(){D()},[]);var D=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(!0),n.next=1,Sn.getParticipants();case 1:e=n.sent,i(Array.isArray(e.participants)?e.participants:Array.isArray(e)?e:[]),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.error("Ошибка загрузки участников:",t),i([]);case 3:return n.prev=3,c(!1),n.finish(3);case 4:case"end":return n.stop()}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),$=function(){var n=(0,u.A)(h().mark(function n(e,t){var r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Вы уверены, что хотите изменить роль участника?")){n.next=5;break}return n.prev=1,n.next=2,Sn.updateParticipantRole(e,t);case 2:return n.next=3,D();case 3:O(!1),_(null),n.next=5;break;case 4:n.prev=4,r=n.catch(1),console.error("Ошибка изменения роли:",r),l.Ay.error("Ошибка при изменении роли участника");case 5:case"end":return n.stop()}},n,null,[[1,4]])}));return function(e,t){return n.apply(this,arguments)}}(),M=function(){var n=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Вы уверены, что хотите исключить этого участника из клуба?")){n.next=5;break}return n.prev=1,n.next=2,Sn.removeParticipant(e);case 2:return n.next=3,D();case 3:O(!1),_(null),n.next=5;break;case 4:n.prev=4,t=n.catch(1),console.error("Ошибка исключения участника:",t),l.Ay.error("Ошибка при исключении участника");case 5:case"end":return n.stop()}},n,null,[[1,4]])}));return function(e){return n.apply(this,arguments)}}(),I=t.filter(function(n){var e,t,r,i=!f||(null===(e=n.user)||void 0===e?void 0:e.name)&&n.user.name.toLowerCase().includes(f.toLowerCase())||(null===(t=n.user)||void 0===t?void 0:t.login)&&n.user.login.toLowerCase().includes(f.toLowerCase())||(null===(r=n.user)||void 0===r?void 0:r.email)&&n.user.email.toLowerCase().includes(f.toLowerCase()),a="all"===j||n.role===j,s="all"===k||n.status===k;return i&&a&&s});return o?(0,m.jsx)("div",{className:"club-participants",children:(0,m.jsxs)("div",{className:"loading",children:[(0,m.jsx)("div",{className:"spinner"}),(0,m.jsx)("p",{children:"Загрузка участников..."})]})}):(0,m.jsxs)("div",{className:"club-participants",children:[(0,m.jsx)("div",{className:"page-header",children:(0,m.jsxs)("div",{className:"header-content",children:[(0,m.jsx)("h1",{children:"Участники клуба"}),(0,m.jsx)("p",{children:"Управляйте участниками и их ролями в клубе"})]})}),(0,m.jsxs)("div",{className:"participants-stats",children:[(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Всего участников"}),(0,m.jsx)("span",{className:"stat-number",children:t.length})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Администраторов"}),(0,m.jsx)("span",{className:"stat-number",children:t.filter(function(n){return"admin"===n.role||"owner"===n.role}).length})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Модераторов"}),(0,m.jsx)("span",{className:"stat-number",children:t.filter(function(n){return"moderator"===n.role}).length})]}),(0,m.jsxs)("div",{className:"stat-card",children:[(0,m.jsx)("h3",{children:"Активных"}),(0,m.jsx)("span",{className:"stat-number",children:t.filter(function(n){return"active"===n.status}).length})]})]}),(0,m.jsxs)("div",{className:"participants-filters",children:[(0,m.jsxs)("div",{className:"search-box",children:[(0,m.jsx)(Wb,{className:"search-icon"}),(0,m.jsx)("input",{type:"text",placeholder:"Поиск участников...",value:f,onChange:function(n){return g(n.target.value)}})]}),(0,m.jsxs)("div",{className:"filter-controls",children:[(0,m.jsxs)("div",{className:"filter-group",children:[(0,m.jsx)(Fb,{className:"filter-icon"}),(0,m.jsxs)("select",{value:j,onChange:function(n){return y(n.target.value)},children:[(0,m.jsx)("option",{value:"all",children:"Все роли"}),(0,m.jsx)("option",{value:"owner",children:"Владелец"}),(0,m.jsx)("option",{value:"admin",children:"Администратор"}),(0,m.jsx)("option",{value:"moderator",children:"Модератор"}),(0,m.jsx)("option",{value:"member",children:"Участник"})]})]}),(0,m.jsx)("div",{className:"filter-group",children:(0,m.jsxs)("select",{value:k,onChange:function(n){return N(n.target.value)},children:[(0,m.jsx)("option",{value:"all",children:"Все статусы"}),(0,m.jsx)("option",{value:"active",children:"Активные"}),(0,m.jsx)("option",{value:"inactive",children:"Неактивные"}),(0,m.jsx)("option",{value:"banned",children:"Заблокированные"})]})})]})]}),(0,m.jsx)("div",{className:"participants-content",children:0===I.length?(0,m.jsxs)("div",{className:"empty-state",children:[(0,m.jsx)("div",{className:"empty-icon",children:"👥"}),(0,m.jsx)("h3",{children:"Нет участников"}),(0,m.jsx)("p",{children:f||"all"!==j||"all"!==k?"По вашему запросу участники не найдены":"В клубе пока нет участников"})]}):(0,m.jsx)("div",{className:"participants-list",children:I.map(function(n){var e,t,r,i,a,s,o,c;return(0,m.jsxs)("div",{className:"participant-card",children:[(0,m.jsxs)("div",{className:"participant-header",children:[(0,m.jsxs)("div",{className:"user-info",children:[(0,m.jsx)("div",{className:"user-avatar",children:null!==(e=n.user)&&void 0!==e&&e.avatar?(0,m.jsx)("img",{src:n.user.avatar,alt:n.user.name||n.user.login}):(0,m.jsx)(Ub,{})}),(0,m.jsxs)("div",{className:"user-details",children:[(0,m.jsx)("h3",{children:(null===(t=n.user)||void 0===t?void 0:t.name)||(null===(r=n.user)||void 0===r?void 0:r.login)||"Неизвестный пользователь"}),(0,m.jsx)("p",{children:(null===(i=n.user)||void 0===i?void 0:i.email)||"Email не указан"})]})]}),(0,m.jsxs)("div",{className:"participant-badges",children:[(o=n.role,c={owner:{text:"Владелец",class:"role-owner",icon:(0,m.jsx)(Tb,{})},admin:{text:"Администратор",class:"role-admin",icon:(0,m.jsx)(Rb,{})},moderator:{text:"Модератор",class:"role-moderator",icon:(0,m.jsx)(Rb,{})},member:{text:"Участник",class:"role-member",icon:(0,m.jsx)(Ub,{})}}[o]||{text:o,class:"role-unknown",icon:(0,m.jsx)(Ub,{})},(0,m.jsxs)("span",{className:"role-badge ".concat(c.class),children:[c.icon,c.text]})),(a=n.status,s={active:{text:"Активен",class:"status-active"},inactive:{text:"Неактивен",class:"status-inactive"},banned:{text:"Заблокирован",class:"status-banned"}}[a]||{text:a,class:"status-unknown"},(0,m.jsx)("span",{className:"status-badge ".concat(s.class),children:s.text}))]})]}),(0,m.jsx)("div",{className:"participant-content",children:(0,m.jsxs)("div",{className:"participant-stats",children:[(0,m.jsxs)("div",{className:"stat-item",children:[(0,m.jsx)(Bb,{className:"icon"}),(0,m.jsxs)("span",{children:["Присоединился: ",new Date(n.joined_at).toLocaleDateString("ru-RU")]})]}),n.events_attended&&(0,m.jsx)("div",{className:"stat-item",children:(0,m.jsxs)("span",{children:["Событий посещено: ",n.events_attended]})}),n.last_activity&&(0,m.jsx)("div",{className:"stat-item",children:(0,m.jsxs)("span",{children:["Последняя активность: ",new Date(n.last_activity).toLocaleDateString("ru-RU")]})})]})}),(0,m.jsx)("div",{className:"participant-footer",children:(0,m.jsxs)("div",{className:"participant-actions",children:[(0,m.jsx)("button",{className:"btn btn-secondary",onClick:function(){return function(n){_(n),O(!0)}(n)},children:"Подробнее"}),"owner"!==n.role&&(0,m.jsx)("button",{className:"btn btn-danger",onClick:function(){return M(n.id)},children:"Исключить"})]})})]},n.id)})})}),L&&z&&(0,m.jsx)("div",{className:"modal-overlay",children:(0,m.jsx)("div",{className:"modal-content",children:(0,m.jsx)(Qb,{participant:z,onClose:function(){O(!1),_(null)},onChangeRole:$,onRemove:M})})})]})};function Hb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function Vb(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Hb(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hb(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var Xb=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),(0,m.jsx)("polyline",{points:"17,21 17,13 7,13 7,21"}),(0,m.jsx)("polyline",{points:"7,3 7,8 15,8"})]})},Yb=function(){return(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,m.jsx)("polyline",{points:"7,10 12,15 17,10"}),(0,m.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})},Kb=function(n){var e=n.club,t=n.onSave,i=n.saving,a=(0,r.useState)({name:(null==e?void 0:e.name)||"",description:(null==e?void 0:e.description)||"",type:(null==e?void 0:e.type)||"general",website:(null==e?void 0:e.website)||"",contact_info:(null==e?void 0:e.contact_info)||""}),s=(0,p.A)(a,2),o=s[0],c=s[1],l=function(n){var e=n.target,t=e.name,r=e.value;c(function(n){return Vb(Vb({},n),{},(0,b.A)({},t,r))})};return(0,m.jsxs)("div",{className:"settings-section",children:[(0,m.jsx)("h2",{children:"Основные настройки"}),(0,m.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(o)},className:"settings-form",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"name",children:"Название клуба *"}),(0,m.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:l,required:!0,placeholder:"Введите название клуба"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"description",children:"Описание клуба"}),(0,m.jsx)("textarea",{id:"description",name:"description",value:o.description,onChange:l,rows:"4",placeholder:"Опишите ваш клуб"})]}),(0,m.jsx)("div",{className:"form-row",children:(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"type",children:"Тип клуба"}),(0,m.jsxs)("select",{id:"type",name:"type",value:o.type,onChange:l,children:[(0,m.jsx)("option",{value:"general",children:"Общий"}),(0,m.jsx)("option",{value:"swing",children:"Свинг"}),(0,m.jsx)("option",{value:"bdsm",children:"БДСМ"}),(0,m.jsx)("option",{value:"fetish",children:"Фетиш"}),(0,m.jsx)("option",{value:"lifestyle",children:"Лайфстайл"}),(0,m.jsx)("option",{value:"other",children:"Другое"})]})]})}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"website",children:"Веб-сайт"}),(0,m.jsx)("input",{type:"url",id:"website",name:"website",value:o.website,onChange:l,placeholder:"https://example.com"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"contact_info",children:"Контактная информация"}),(0,m.jsx)("textarea",{id:"contact_info",name:"contact_info",value:o.contact_info,onChange:l,rows:"3",placeholder:"Дополнительная контактная информация"})]}),(0,m.jsx)("div",{className:"form-actions",children:(0,m.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:i,children:[(0,m.jsx)(Xb,{className:"icon"}),i?"Сохранение...":"Сохранить"]})})]})]})},Gb=function(n){var e=n.club,t=n.onSave,i=n.onUploadAvatar,a=n.saving,s=(0,r.useState)({country:(null==e?void 0:e.country)||"",city:(null==e?void 0:e.city)||"",address:(null==e?void 0:e.address)||"",email:(null==e?void 0:e.email)||""}),o=(0,p.A)(s,2),c=o[0],l=o[1],d=function(n){var e=n.target,t=e.name,r=e.value;l(function(n){return Vb(Vb({},n),{},(0,b.A)({},t,r))})};return(0,m.jsxs)("div",{className:"settings-section",children:[(0,m.jsx)("h2",{children:"Настройки профиля"}),(0,m.jsxs)("div",{className:"avatar-section",children:[(0,m.jsx)("h3",{children:"Аватар клуба"}),(0,m.jsxs)("div",{className:"avatar-upload",children:[(0,m.jsxs)("div",{className:"current-avatar",onClick:function(){return document.getElementById("avatar-upload").click()},children:[null!=e&&e.avatar?(0,m.jsx)("img",{src:"/uploads/".concat(e.avatar),alt:"Аватар клуба",onError:function(n){n.target.src="/uploads/no_photo.jpg"}}):(0,m.jsx)("div",{className:"avatar-placeholder",children:"👤"}),(0,m.jsxs)("div",{className:"avatar-overlay",children:[(0,m.jsx)("span",{children:"📷"}),(0,m.jsx)("span",{children:"Изменить аватар"})]})]}),(0,m.jsxs)("div",{className:"upload-controls",children:[(0,m.jsxs)("label",{htmlFor:"avatar-upload",className:"btn btn-secondary",children:[(0,m.jsx)(Yb,{className:"icon"}),"Загрузить аватар"]}),(0,m.jsx)("input",{type:"file",id:"avatar-upload",accept:"image/*",onChange:function(n){var e=n.target.files[0];e&&i(e)},style:{display:"none"}}),(0,m.jsx)("p",{className:"upload-hint",children:"Рекомендуемый размер: 200x200px"})]})]})]}),(0,m.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(c)},className:"settings-form",children:[(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"country",children:"Страна"}),(0,m.jsx)("input",{type:"text",id:"country",name:"country",value:c.country,onChange:d,placeholder:"Россия"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"city",children:"Город"}),(0,m.jsx)("input",{type:"text",id:"city",name:"city",value:c.city,onChange:d,placeholder:"Москва"})]})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"address",children:"Адрес"}),(0,m.jsx)("input",{type:"text",id:"address",name:"address",value:c.address,onChange:d,placeholder:"Полный адрес клуба"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"email",children:"Email"}),(0,m.jsx)("input",{type:"email",id:"email",name:"email",value:c.email,onChange:d,placeholder:"club@example.com"})]}),(0,m.jsx)("div",{className:"form-actions",children:(0,m.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:a,children:[(0,m.jsx)(Xb,{className:"icon"}),a?"Сохранение...":"Сохранить"]})})]})]})},Jb=function(n){var e=n.club,t=n.onSave,i=n.saving,a=(0,r.useState)({is_public:!1!==(null==e?void 0:e.is_public),show_members:!1!==(null==e?void 0:e.show_members)}),s=(0,p.A)(a,2),o=s[0],c=s[1],l=function(n){var e=n.target,t=e.name,r=e.checked;c(function(n){return Vb(Vb({},n),{},(0,b.A)({},t,r))})};return(0,m.jsxs)("div",{className:"settings-section",children:[(0,m.jsx)("h2",{children:"Настройки приватности"}),(0,m.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(o)},className:"settings-form",children:[(0,m.jsxs)("div",{className:"privacy-options",children:[(0,m.jsxs)("div",{className:"privacy-item",children:[(0,m.jsxs)("div",{className:"privacy-info",children:[(0,m.jsx)("h4",{children:"Публичный клуб"}),(0,m.jsx)("p",{children:"Клуб будет виден всем пользователям в каталоге"})]}),(0,m.jsxs)("label",{className:"toggle-switch",children:[(0,m.jsx)("input",{type:"checkbox",name:"is_public",checked:o.is_public,onChange:l}),(0,m.jsx)("span",{className:"toggle-slider"})]})]}),(0,m.jsxs)("div",{className:"privacy-item",children:[(0,m.jsxs)("div",{className:"privacy-info",children:[(0,m.jsx)("h4",{children:"Показывать участников"}),(0,m.jsx)("p",{children:"Отображать список участников на странице клуба"})]}),(0,m.jsxs)("label",{className:"toggle-switch",children:[(0,m.jsx)("input",{type:"checkbox",name:"show_members",checked:o.show_members,onChange:l}),(0,m.jsx)("span",{className:"toggle-slider"})]})]})]}),(0,m.jsx)("div",{className:"form-actions",children:(0,m.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:i,children:[(0,m.jsx)(Xb,{className:"icon"}),i?"Сохранение...":"Сохранить"]})})]})]})},Zb=function(n){var e=n.club,t=n.onSave,i=n.saving,a=(0,r.useState)({email_notifications:!1!==(null==e?void 0:e.email_notifications),event_reminders:!1!==(null==e?void 0:e.event_reminders),member_activity:!1!==(null==e?void 0:e.member_activity)}),s=(0,p.A)(a,2),o=s[0],c=s[1],l=function(n){var e=n.target,t=e.name,r=e.checked;c(function(n){return Vb(Vb({},n),{},(0,b.A)({},t,r))})};return(0,m.jsxs)("div",{className:"settings-section",children:[(0,m.jsx)("h2",{children:"Настройки уведомлений"}),(0,m.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(o)},className:"settings-form",children:[(0,m.jsxs)("div",{className:"notification-options",children:[(0,m.jsxs)("div",{className:"notification-item",children:[(0,m.jsxs)("div",{className:"notification-info",children:[(0,m.jsx)("h4",{children:"Email уведомления"}),(0,m.jsx)("p",{children:"Получать уведомления на email"})]}),(0,m.jsxs)("label",{className:"toggle-switch",children:[(0,m.jsx)("input",{type:"checkbox",name:"email_notifications",checked:o.email_notifications,onChange:l}),(0,m.jsx)("span",{className:"toggle-slider"})]})]}),(0,m.jsxs)("div",{className:"notification-item",children:[(0,m.jsxs)("div",{className:"notification-info",children:[(0,m.jsx)("h4",{children:"Напоминания о событиях"}),(0,m.jsx)("p",{children:"Уведомления о предстоящих мероприятиях"})]}),(0,m.jsxs)("label",{className:"toggle-switch",children:[(0,m.jsx)("input",{type:"checkbox",name:"event_reminders",checked:o.event_reminders,onChange:l}),(0,m.jsx)("span",{className:"toggle-slider"})]})]}),(0,m.jsxs)("div",{className:"notification-item",children:[(0,m.jsxs)("div",{className:"notification-info",children:[(0,m.jsx)("h4",{children:"Активность участников"}),(0,m.jsx)("p",{children:"Уведомления о активности участников клуба"})]}),(0,m.jsxs)("label",{className:"toggle-switch",children:[(0,m.jsx)("input",{type:"checkbox",name:"member_activity",checked:o.member_activity,onChange:l}),(0,m.jsx)("span",{className:"toggle-slider"})]})]})]}),(0,m.jsx)("div",{className:"form-actions",children:(0,m.jsxs)("button",{type:"submit",className:"btn btn-primary",disabled:i,children:[(0,m.jsx)(Xb,{className:"icon"}),i?"Сохранение...":"Сохранить"]})})]})]})},nj=function(n){var e=n.club,t=(n.onSave,n.onChangePassword),i=n.showPasswordForm,a=n.setShowPasswordForm,s=n.saving,o=(0,r.useState)({current_password:"",new_password:"",confirm_password:""}),c=(0,p.A)(o,2),d=c[0],u=c[1],x=function(n){var e=n.target,t=e.name,r=e.value;u(function(n){return Vb(Vb({},n),{},(0,b.A)({},t,r))})};return(0,m.jsxs)("div",{className:"settings-section",children:[(0,m.jsx)("h2",{children:"Настройки безопасности"}),(0,m.jsxs)("div",{className:"security-section",children:[(0,m.jsx)("h3",{children:"Смена пароля"}),(0,m.jsx)("p",{children:"Регулярно меняйте пароль для обеспечения безопасности"}),i?(0,m.jsxs)("form",{onSubmit:function(n){if(n.preventDefault(),d.new_password===d.confirm_password){var e={currentPassword:d.current_password,newPassword:d.new_password};t(e),u({current_password:"",new_password:"",confirm_password:""})}else l.Ay.error("Пароли не совпадают")},className:"password-form",children:[(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"current_password",children:"Текущий пароль"}),(0,m.jsx)("input",{type:"password",id:"current_password",name:"current_password",value:d.current_password,onChange:x,required:!0,placeholder:"Введите текущий пароль"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"new_password",children:"Новый пароль"}),(0,m.jsx)("input",{type:"password",id:"new_password",name:"new_password",value:d.new_password,onChange:x,required:!0,placeholder:"Введите новый пароль",minLength:"6"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"confirm_password",children:"Подтвердите пароль"}),(0,m.jsx)("input",{type:"password",id:"confirm_password",name:"confirm_password",value:d.confirm_password,onChange:x,required:!0,placeholder:"Подтвердите новый пароль",minLength:"6"})]}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return a(!1)},children:"Отмена"}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:s,children:s?"Сохранение...":"Изменить пароль"})]})]}):(0,m.jsx)("button",{className:"btn btn-secondary",onClick:function(){return a(!0)},children:"Изменить пароль"})]}),(0,m.jsxs)("div",{className:"security-info",children:[(0,m.jsx)("h3",{children:"Информация о безопасности"}),(0,m.jsxs)("div",{className:"security-stats",children:[(0,m.jsxs)("div",{className:"security-item",children:[(0,m.jsx)("span",{className:"security-label",children:"Последний вход:"}),(0,m.jsx)("span",{className:"security-value",children:null!=e&&e.last_login?new Date(e.last_login).toLocaleString("ru-RU"):"Неизвестно"})]}),(0,m.jsxs)("div",{className:"security-item",children:[(0,m.jsx)("span",{className:"security-label",children:"Email подтвержден:"}),(0,m.jsx)("span",{className:"security-value",children:null!=e&&e.email_verified?"Да":"Нет"})]})]})]})]})};const ej=function(){var n=(0,r.useState)(null),e=(0,p.A)(n,2),t=e[0],i=e[1],a=(0,r.useState)(!0),s=(0,p.A)(a,2),o=s[0],c=s[1],d=(0,r.useState)(!1),x=(0,p.A)(d,2),f=x[0],g=x[1],v=(0,r.useState)("general"),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)(!1),A=(0,p.A)(w,2),k=A[0],N=A[1];(0,r.useEffect)(function(){S()},[]);var S=function(){var n=(0,u.A)(h().mark(function n(){var e,t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(!0),n.next=1,Sn.getProfile();case 1:e=n.sent,i(e.club||e),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.error("Ошибка загрузки данных клуба:",t);case 3:return n.prev=3,c(!1),n.finish(3);case 4:case"end":return n.stop()}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),C=function(){var n=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,g(!0),n.next=1,Sn.updateProfile(e);case 1:return n.next=2,S();case 2:l.Ay.success("Настройки сохранены успешно!"),n.next=4;break;case 3:n.prev=3,t=n.catch(0),console.error("Ошибка сохранения настроек:",t),l.Ay.error("Ошибка при сохранении настроек");case 4:return n.prev=4,g(!1),n.finish(4);case 5:case"end":return n.stop()}},n,null,[[0,3,4,5]])}));return function(e){return n.apply(this,arguments)}}(),z=function(){var n=(0,u.A)(h().mark(function n(e){var t;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,g(!0),n.next=1,Sn.changePassword(e);case 1:N(!1),l.Ay.success("Пароль изменен успешно!"),n.next=3;break;case 2:n.prev=2,t=n.catch(0),console.error("Ошибка изменения пароля:",t),l.Ay.error("Ошибка при изменении пароля");case 3:return n.prev=3,g(!1),n.finish(3);case 4:case"end":return n.stop()}},n,null,[[0,2,3,4]])}));return function(e){return n.apply(this,arguments)}}(),_=function(){var n=(0,u.A)(h().mark(function n(e){var t,r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,g(!0),(t=new FormData).append("avatar",e),n.next=1,Sn.uploadAvatar(t);case 1:return n.next=2,S();case 2:l.Ay.success("Аватар обновлен успешно!"),n.next=4;break;case 3:n.prev=3,r=n.catch(0),console.error("Ошибка загрузки аватара:",r),l.Ay.error("Ошибка при загрузке аватара");case 4:return n.prev=4,g(!1),n.finish(4);case 5:case"end":return n.stop()}},n,null,[[0,3,4,5]])}));return function(e){return n.apply(this,arguments)}}();return o?(0,m.jsx)("div",{className:"club-settings",children:(0,m.jsxs)("div",{className:"loading",children:[(0,m.jsx)("div",{className:"spinner"}),(0,m.jsx)("p",{children:"Загрузка настроек..."})]})}):(0,m.jsxs)("div",{className:"club-settings",children:[(0,m.jsx)("div",{className:"page-header",children:(0,m.jsxs)("div",{className:"header-content",children:[(0,m.jsx)("h1",{children:"Настройки клуба"}),(0,m.jsx)("p",{children:"Управляйте настройками и конфигурацией вашего клуба"})]})}),(0,m.jsxs)("div",{className:"settings-container",children:[(0,m.jsx)("div",{className:"settings-sidebar",children:(0,m.jsx)("div",{className:"tabs-list",children:[{id:"general",label:"Основные",icon:"⚙️"},{id:"profile",label:"Профиль",icon:"👤"},{id:"privacy",label:"Приватность",icon:"🔒"},{id:"notifications",label:"Уведомления",icon:"🔔"},{id:"security",label:"Безопасность",icon:"🛡️"}].map(function(n){return(0,m.jsxs)("button",{className:"tab-button ".concat(j===n.id?"active":""),onClick:function(){return y(n.id)},children:[(0,m.jsx)("span",{className:"tab-icon",children:n.icon}),(0,m.jsx)("span",{className:"tab-label",children:n.label})]},n.id)})})}),(0,m.jsxs)("div",{className:"settings-content",children:["general"===j&&(0,m.jsx)(Kb,{club:t,onSave:C,saving:f}),"profile"===j&&(0,m.jsx)(Gb,{club:t,onSave:C,onUploadAvatar:_,saving:f}),"privacy"===j&&(0,m.jsx)(Jb,{club:t,onSave:C,saving:f}),"notifications"===j&&(0,m.jsx)(Zb,{club:t,onSave:C,saving:f}),"security"===j&&(0,m.jsx)(nj,{club:t,onSave:C,onChangePassword:z,showPasswordForm:k,setShowPasswordForm:N,saving:f})]})]})]})};var tj=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,m.jsx)("polyline",{points:"9,22 9,12 15,12 15,22"})]})},rj=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,m.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,m.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})},ij=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M18 20V10"}),(0,m.jsx)("path",{d:"M12 20V4"}),(0,m.jsx)("path",{d:"M6 20v-6"})]})},aj=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,m.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})},sj=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,m.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,m.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},oj=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("rect",{x:"3",y:"11",width:"18",height:"10",rx:"2",ry:"2"}),(0,m.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,m.jsx)("path",{d:"M12 7v4"}),(0,m.jsx)("line",{x1:"8",y1:"16",x2:"8",y2:"16"}),(0,m.jsx)("line",{x1:"16",y1:"16",x2:"16",y2:"16"})]})},cj=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,m.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,m.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})},lj=function(){return(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,m.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,m.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})};const dj=function(){var n=(0,r.useState)(!1),e=(0,p.A)(n,2),t=e[0],i=e[1],a=(0,o.zy)(),c=(0,o.Zp)(),l=[{name:"Дашборд",href:"/club/dashboard",icon:tj,description:"Главная страница клуба"},{name:"Мероприятия",href:"/club/events",icon:rj,description:"Управление мероприятиями"},{name:"Аналитика",href:"/club/analytics",icon:ij,description:"Статистика и отчеты"},{name:"Боты",href:"/club/bots",icon:oj,description:"Автоматизация и боты"},{name:"Участники",href:"/club/participants",icon:sj,description:"Управление участниками"},{name:"Настройки",href:"/club/settings",icon:aj,description:"Настройки клуба"}],d=function(){var n=(0,u.A)(h().mark(function n(){var e;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,zn();case 1:c("/club/login"),n.next=3;break;case 2:n.prev=2,e=n.catch(0),console.error("Ошибка выхода:",e);case 3:case"end":return n.stop()}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),x=function(n){return a.pathname===n||a.pathname.startsWith(n+"/")};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("nav",{className:"club-navigation",children:[(0,m.jsx)("div",{className:"nav-header",children:(0,m.jsx)("div",{className:"nav-logo",children:(0,m.jsx)("span",{className:"logo-text",children:"SwingFox Club"})})}),(0,m.jsx)("div",{className:"nav-menu",children:l.map(function(n){var e=n.icon;return(0,m.jsxs)(s.N_,{to:n.href,className:"nav-item ".concat(x(n.href)?"active":""),title:n.description,children:[(0,m.jsx)(e,{className:"nav-icon"}),(0,m.jsx)("span",{className:"nav-text",children:n.name})]},n.name)})}),(0,m.jsx)("div",{className:"nav-footer",children:(0,m.jsxs)("button",{className:"logout-btn",onClick:d,children:[(0,m.jsx)(aj,{className:"nav-icon"}),(0,m.jsx)("span",{className:"nav-text",children:"Выйти"})]})})]}),(0,m.jsx)("button",{className:"mobile-nav-toggle",onClick:function(){return i(!t)},children:t?(0,m.jsx)(lj,{className:"toggle-icon"}):(0,m.jsx)(cj,{className:"toggle-icon"})}),t&&(0,m.jsx)("div",{className:"mobile-nav-overlay ".concat(t?"active":""),onClick:function(){return i(!1)},children:(0,m.jsxs)("nav",{className:"mobile-navigation",onClick:function(n){return n.stopPropagation()},children:[(0,m.jsxs)("div",{className:"mobile-nav-header",children:[(0,m.jsx)("div",{className:"nav-logo",children:(0,m.jsx)("span",{className:"logo-text",children:"SwingFox Club"})}),(0,m.jsx)("button",{className:"mobile-close-btn",onClick:function(){return i(!1)},children:(0,m.jsx)(lj,{className:"close-icon"})})]}),(0,m.jsx)("div",{className:"mobile-nav-menu",children:l.map(function(n){var e=n.icon;return(0,m.jsxs)(s.N_,{to:n.href,className:"mobile-nav-item ".concat(x(n.href)?"active":""),onClick:function(){return i(!1)},children:[(0,m.jsx)(e,{className:"nav-icon"}),(0,m.jsxs)("div",{className:"mobile-nav-content",children:[(0,m.jsx)("span",{className:"nav-text",children:n.name}),(0,m.jsx)("span",{className:"nav-description",children:n.description})]})]},n.name)})}),(0,m.jsx)("div",{className:"mobile-nav-footer",children:(0,m.jsxs)("button",{className:"mobile-logout-btn",onClick:d,children:[(0,m.jsx)(aj,{className:"nav-icon"}),(0,m.jsx)("span",{className:"nav-text",children:"Выйти"})]})})]})})]})},uj=function(n){var e=n.children;return(0,m.jsxs)("div",{className:"club-layout",children:[(0,m.jsx)(dj,{}),(0,m.jsx)("main",{className:"club-main",children:e})]})};function pj(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function xj(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?pj(Object(t),!0).forEach(function(e){(0,b.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pj(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}const hj=function(n){var e,t=n.event,i=n.onClose,a=n.onSuccess,s=(0,r.useState)({message:"",contact_info:"",special_requirements:""}),o=(0,p.A)(s,2),c=o[0],l=o[1],d=(0,r.useState)(!1),x=(0,p.A)(d,2),f=x[0],g=x[1],v=(0,r.useState)(null),j=(0,p.A)(v,2),y=j[0],w=j[1],A=function(n){var e=n.target,t=e.name,r=e.value;l(function(n){return xj(xj({},n),{},(0,b.A)({},t,r))}),y&&w(null)},k=function(){var n=(0,u.A)(h().mark(function n(e){var r;return h().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),c.message.trim()){n.next=1;break}return w("Пожалуйста, напишите сообщение"),n.abrupt("return");case 1:return g(!0),n.prev=2,n.next=3,Sn.applyToEvent(t.id,c);case 3:null==a||a(),i(),n.next=5;break;case 4:n.prev=4,r=n.catch(2),console.error("Ошибка подачи заявки:",r),w("Не удалось подать заявку. Попробуйте снова.");case 5:return n.prev=5,g(!1),n.finish(5);case 6:case"end":return n.stop()}},n,null,[[2,4,5,6]])}));return function(e){return n.apply(this,arguments)}}();return(0,m.jsx)("div",{className:"event-application-overlay",children:(0,m.jsxs)("div",{className:"event-application",children:[(0,m.jsxs)("div",{className:"application-header",children:[(0,m.jsx)("h2",{children:"Подать заявку на участие"}),(0,m.jsx)("button",{className:"close-button",onClick:i,children:"×"})]}),(0,m.jsxs)("div",{className:"event-info",children:[(0,m.jsx)("h3",{children:t.title}),(0,m.jsxs)("div",{className:"event-details",children:[(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-icon",children:"📅"}),(0,m.jsx)("span",{children:(e=t.date,new Date(e).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),t.location&&(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-icon",children:"📍"}),(0,m.jsx)("span",{children:t.location})]}),t.price&&(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-icon",children:"💰"}),(0,m.jsxs)("span",{children:[t.price," ₽"]})]})]})]}),(0,m.jsxs)("form",{onSubmit:k,className:"application-form",children:[y&&(0,m.jsx)("div",{className:"error-message",children:y}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{htmlFor:"message",children:["Сообщение организатору *",(0,m.jsx)("span",{className:"label-hint",children:"Расскажите, почему вы хотите участвовать в этом событии"})]}),(0,m.jsx)("textarea",{id:"message",name:"message",value:c.message,onChange:A,rows:"4",placeholder:"Напишите сообщение организатору...",required:!0})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{htmlFor:"contact_info",children:["Контактная информация",(0,m.jsx)("span",{className:"label-hint",children:"Телефон, Telegram или другие способы связи"})]}),(0,m.jsx)("input",{type:"text",id:"contact_info",name:"contact_info",value:c.contact_info,onChange:A,placeholder:"+7 (999) 123-45-67 или @username"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsxs)("label",{htmlFor:"special_requirements",children:["Особые требования",(0,m.jsx)("span",{className:"label-hint",children:"Диетические ограничения, доступность и т.д."})]}),(0,m.jsx)("textarea",{id:"special_requirements",name:"special_requirements",value:c.special_requirements,onChange:A,rows:"3",placeholder:"Укажите, если у вас есть особые требования..."})]}),(0,m.jsxs)("div",{className:"form-actions",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:i,disabled:f,children:"Отмена"}),(0,m.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Отправка...":"Подать заявку"})]})]})]})})},fj=function(){var n=(0,o.g)().id,e=(0,r.useState)(null),t=(0,p.A)(e,2),i=t[0],a=t[1],c=(0,r.useState)([]),d=(0,p.A)(c,2),x=d[0],g=d[1],v=(0,r.useState)(!0),b=(0,p.A)(v,2),j=b[0],y=b[1],w=(0,r.useState)(null),A=(0,p.A)(w,2),k=A[0],N=A[1],S=(0,r.useState)("info"),C=(0,p.A)(S,2),z=C[0],_=C[1],E=(0,r.useState)(!1),P=(0,p.A)(E,2),L=P[0],O=P[1],D=(0,r.useState)(null),$=(0,p.A)(D,2),M=$[0],I=$[1];(0,r.useEffect)(function(){n&&U()},[n]);var U=function(){var e=(0,u.A)(h().mark(function e(){var t,r,i,s;return h().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),N(null),e.next=1,f.api.clubs.getClub(n);case 1:return t=e.sent,a(t.club||t),e.prev=2,e.next=3,Sn.getEvents({club_id:n,limit:10});case 3:r=e.sent,g(r.events||[]),e.next=5;break;case 4:e.prev=4,i=e.catch(2),console.warn("Не удалось загрузить события:",i),g([]);case 5:e.next=7;break;case 6:e.prev=6,s=e.catch(0),console.error("Ошибка загрузки клуба:",s),N("Клуб не найден или произошла ошибка загрузки");case 7:return e.prev=7,y(!1),e.finish(7);case 8:case"end":return e.stop()}},e,null,[[0,6,7,8],[2,4]])}));return function(){return e.apply(this,arguments)}}(),T=function(n){return{nightclub:"Ночной клуб",restaurant:"Ресторан",event_space:"Event Space",other:"Другое"}[n]||"Клуб"};return j?(0,m.jsxs)("div",{className:"public-club-detail-loading",children:[(0,m.jsx)("div",{className:"loading-spinner"}),(0,m.jsx)("p",{children:"Загрузка информации о клубе..."})]}):k||!i?(0,m.jsxs)("div",{className:"public-club-detail-error",children:[(0,m.jsx)("h2",{children:"Ошибка загрузки"}),(0,m.jsx)("p",{children:k||"Клуб не найден"}),(0,m.jsx)(s.N_,{to:"/clubs",className:"btn btn-primary",children:"Вернуться к списку клубов"})]}):(0,m.jsxs)("div",{className:"public-club-detail",children:[(0,m.jsxs)("div",{className:"club-detail-header",children:[(0,m.jsx)("div",{className:"club-detail-back",children:(0,m.jsx)(s.N_,{to:"/clubs",className:"back-link",children:"← Назад к клубам"})}),(0,m.jsxs)("div",{className:"club-detail-hero",children:[(0,m.jsx)("div",{className:"club-hero-avatar",children:(0,m.jsx)("img",{src:i.avatar?"/uploads/".concat(i.avatar):"/uploads/no_photo.jpg",alt:i.name,onError:function(n){n.target.src="/uploads/no_photo.jpg"}})}),(0,m.jsxs)("div",{className:"club-hero-info",children:[(0,m.jsxs)("div",{className:"club-type-badge",children:[(0,m.jsx)("span",{className:"club-type-icon",children:function(n){switch(n){case"nightclub":return"🎵";case"restaurant":return"🍽️";case"event_space":return"🏢";default:return"🏛️"}}(i.type)}),(0,m.jsx)("span",{className:"club-type-label",children:T(i.type)})]}),(0,m.jsx)("h1",{className:"club-hero-name",children:i.name}),(0,m.jsxs)("div",{className:"club-hero-location",children:[(0,m.jsx)("span",{className:"location-icon",children:"📍"}),(0,m.jsxs)("span",{className:"location-text",children:[i.city,", ",i.country]})]}),i.website&&(0,m.jsx)("div",{className:"club-hero-website",children:(0,m.jsxs)("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"website-link",children:["🌐 ",i.website]})})]})]})]}),(0,m.jsxs)("div",{className:"club-detail-tabs",children:[(0,m.jsx)("button",{className:"tab-button ".concat("info"===z?"active":""),onClick:function(){return _("info")},children:"Информация"}),(0,m.jsxs)("button",{className:"tab-button ".concat("events"===z?"active":""),onClick:function(){return _("events")},children:["События (",x.length,")"]})]}),(0,m.jsxs)("div",{className:"club-detail-content",children:["info"===z&&(0,m.jsxs)("div",{className:"club-info-tab",children:[(0,m.jsxs)("div",{className:"club-description",children:[(0,m.jsx)("h3",{children:"О клубе"}),(0,m.jsx)("p",{children:i.description||"Описание клуба не указано."})]}),(0,m.jsxs)("div",{className:"club-contact",children:[(0,m.jsx)("h3",{children:"Контактная информация"}),i.email&&(0,m.jsxs)("div",{className:"contact-item",children:[(0,m.jsx)("strong",{children:"Email:"})," ",i.email]}),i.contact_info&&(0,m.jsxs)("div",{className:"contact-item",children:[(0,m.jsx)("strong",{children:"Дополнительные контакты:"})," ",i.contact_info]}),i.website&&(0,m.jsxs)("div",{className:"contact-item",children:[(0,m.jsx)("strong",{children:"Веб-сайт:"}),(0,m.jsx)("a",{href:i.website.startsWith("http")?i.website:"https://".concat(i.website),target:"_blank",rel:"noopener noreferrer",className:"website-link",children:i.website})]})]}),(0,m.jsxs)("div",{className:"club-details",children:[(0,m.jsx)("h3",{children:"Детали"}),(0,m.jsxs)("div",{className:"details-grid",children:[(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-label",children:"Тип:"}),(0,m.jsx)("span",{className:"detail-value",children:T(i.type)})]}),(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-label",children:"Город:"}),(0,m.jsx)("span",{className:"detail-value",children:i.city})]}),(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-label",children:"Страна:"}),(0,m.jsx)("span",{className:"detail-value",children:i.country})]}),i.address&&(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-label",children:"Адрес:"}),(0,m.jsx)("span",{className:"detail-value",children:i.address})]}),(0,m.jsxs)("div",{className:"detail-item",children:[(0,m.jsx)("span",{className:"detail-label",children:"Дата создания:"}),(0,m.jsx)("span",{className:"detail-value",children:i.date_created?new Date(i.date_created).toLocaleDateString("ru-RU"):"Не указана"})]})]})]})]}),"events"===z&&(0,m.jsxs)("div",{className:"club-events-tab",children:[(0,m.jsx)("h3",{children:"Предстоящие события"}),0===x.length?(0,m.jsxs)("div",{className:"no-events",children:[(0,m.jsx)("div",{className:"no-events-icon",children:"📅"}),(0,m.jsx)("p",{children:"У этого клуба пока нет запланированных событий"})]}):(0,m.jsx)("div",{className:"events-list",children:x.map(function(n){return(0,m.jsxs)("div",{className:"event-card",children:[(0,m.jsx)("div",{className:"event-date",children:(e=n.date,new Date(e).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}))}),(0,m.jsxs)("div",{className:"event-info",children:[(0,m.jsx)("h4",{className:"event-title",children:n.title}),n.description&&(0,m.jsx)("p",{className:"event-description",children:n.description}),(0,m.jsxs)("div",{className:"event-details",children:[(0,m.jsx)("span",{className:"event-price",children:n.price?"".concat(n.price," ₽"):"Бесплатно"}),(0,m.jsx)("span",{className:"event-participants",children:n.max_participants?"До ".concat(n.max_participants," участников"):"Без ограничений"})]}),(0,m.jsx)("div",{className:"event-actions",children:(0,m.jsx)("button",{className:"btn btn-primary btn-sm",onClick:function(){return function(n){I(n),O(!0)}(n)},children:"Подать заявку"})})]})]},n.id);var e})})]})]}),L&&M&&(0,m.jsx)(hj,{event:M,onClose:function(){O(!1),I(null)},onSuccess:function(){l.Ay.success("Заявка успешно подана! Организатор рассмотрит её в ближайшее время.")}})]})};var mj,gj,vj={colors:{primary:"#dc3522",secondary:"#39354e",background:"#fbfbfb",surface:"#ffffff",text:"#39354e",textLight:"#666",border:"#e0e0e0",success:"#4caf50",error:"#f44336",warning:"#ff9800"},fonts:{primary:"Arial, sans-serif",sizes:{small:"12px",medium:"14px",large:"16px",xlarge:"18px",xxlarge:"24px"}},spacing:{xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px"},borderRadius:"8px",shadow:"0 2px 8px rgba(0,0,0,0.1)"},bj=(0,d.DU)(mj||(mj=(0,a.A)(["\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n\n  body {\n    font-family: ",";\n    background-color: ",";\n    color: ",";\n    font-size: ",";\n    line-height: 1.5;\n  }\n\n  a {\n    color: ",";\n    text-decoration: none;\n    \n    &:hover {\n      text-decoration: underline;\n    }\n  }\n\n  button {\n    cursor: pointer;\n    border: none;\n    background: none;\n    font-family: inherit;\n  }\n\n  input, textarea, select {\n    font-family: inherit;\n    font-size: inherit;\n  }\n\n  .container {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 0 ",";\n  }\n\n  .btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: "," ",";\n    border-radius: ",";\n    font-weight: 500;\n    transition: all 0.2s ease;\n    text-decoration: none;\n    border: none;\n    cursor: pointer;\n    \n    &.btn-primary {\n      background-color: ",";\n      color: white;\n      \n      &:hover {\n        background-color: #b8291e;\n        text-decoration: none;\n      }\n    }\n    \n    &.btn-secondary {\n      background-color: transparent;\n      color: ",";\n      border: 1px solid ",";\n      \n      &:hover {\n        background-color: ",";\n        text-decoration: none;\n      }\n    }\n  }\n\n  .form-group {\n    margin-bottom: ",";\n    \n    label {\n      display: block;\n      margin-bottom: ",";\n      font-weight: 500;\n      color: ",";\n    }\n    \n    input, textarea, select {\n      width: 100%;\n      padding: ",";\n      border: 1px solid ",";\n      border-radius: ",";\n      background-color: white;\n      \n      &:focus {\n        outline: none;\n        border-color: ",";\n        box-shadow: 0 0 0 2px rgba(220, 53, 34, 0.1);\n      }\n      \n      &::placeholder {\n        color: ",";\n      }\n    }\n    \n    textarea {\n      min-height: 100px;\n      resize: vertical;\n    }\n  }\n\n  .card {\n    background: white;\n    border-radius: ",";\n    box-shadow: ",";\n    padding: ",";\n    margin-bottom: ",";\n  }\n\n  .text-center {\n    text-align: center;\n  }\n\n  .text-error {\n    color: ",";\n    font-size: ",";\n  }\n\n  .loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: ",";\n    \n    &::after {\n      content: '';\n      width: 20px;\n      height: 20px;\n      border: 2px solid ",";\n      border-top: 2px solid ",";\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n    }\n  }\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n\n  @media (max-width: 768px) {\n    .container {\n      padding: 0 ",";\n    }\n  }\n"])),function(n){return n.theme.fonts.primary},function(n){return n.theme.colors.background},function(n){return n.theme.colors.text},function(n){return n.theme.fonts.sizes.large},function(n){return n.theme.colors.primary},function(n){return n.theme.spacing.md},function(n){return n.theme.spacing.sm},function(n){return n.theme.spacing.md},function(n){return n.theme.borderRadius},function(n){return n.theme.colors.primary},function(n){return n.theme.colors.secondary},function(n){return n.theme.colors.border},function(n){return n.theme.colors.border},function(n){return n.theme.spacing.md},function(n){return n.theme.spacing.xs},function(n){return n.theme.colors.secondary},function(n){return n.theme.spacing.sm},function(n){return n.theme.colors.border},function(n){return n.theme.borderRadius},function(n){return n.theme.colors.primary},function(n){return n.theme.colors.textLight},function(n){return n.theme.borderRadius},function(n){return n.theme.shadow},function(n){return n.theme.spacing.md},function(n){return n.theme.spacing.md},function(n){return n.theme.colors.error},function(n){return n.theme.fonts.sizes.small},function(n){return n.theme.spacing.xl},function(n){return n.theme.colors.border},function(n){return n.theme.colors.primary},function(n){return n.theme.spacing.sm}),jj=d.Ay.div(gj||(gj=(0,a.A)(["\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n"]))),yj=new c.QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:3e4,cacheTime:3e5}}});const wj=function(){return(0,m.jsx)(c.QueryClientProvider,{client:yj,children:(0,m.jsxs)(d.NP,{theme:vj,children:[(0,m.jsx)(bj,{}),(0,m.jsx)(jj,{children:(0,m.jsx)(s.Kd,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,m.jsx)(Ia,{children:(0,m.jsxs)(o.BV,{children:[(0,m.jsx)(o.qh,{path:"/login",element:(0,m.jsx)(Ba,{})}),(0,m.jsx)(o.qh,{path:"/register",element:(0,m.jsx)(zo,{})}),(0,m.jsx)(o.qh,{path:"/clubs",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(pm,{})]})}),(0,m.jsx)(o.qh,{path:"/clubs/:id",element:(0,m.jsx)(fj,{})}),(0,m.jsx)(o.qh,{path:"/clubs/:id/events",element:(0,m.jsx)(fj,{})}),(0,m.jsx)(o.qh,{path:"/club/login",element:(0,m.jsx)(yg,{})}),(0,m.jsx)(o.qh,{path:"/club/register",element:(0,m.jsx)(kg,{})}),(0,m.jsx)(o.qh,{path:"/club/dashboard",element:(0,m.jsx)(_n,{children:(0,m.jsx)(uj,{children:(0,m.jsx)(ib,{})})})}),(0,m.jsx)(o.qh,{path:"/club/events",element:(0,m.jsx)(_n,{children:(0,m.jsx)(uj,{children:(0,m.jsx)(gb,{})})})}),(0,m.jsx)(o.qh,{path:"/club/analytics",element:(0,m.jsx)(_n,{children:(0,m.jsx)(uj,{children:(0,m.jsx)(Nb,{})})})}),(0,m.jsx)(o.qh,{path:"/club/bots",element:(0,m.jsx)(_n,{children:(0,m.jsx)(uj,{children:(0,m.jsx)(Ib,{})})})}),(0,m.jsx)(o.qh,{path:"/club/participants",element:(0,m.jsx)(_n,{children:(0,m.jsx)(uj,{children:(0,m.jsx)(qb,{})})})}),(0,m.jsx)(o.qh,{path:"/club/settings",element:(0,m.jsx)(_n,{children:(0,m.jsx)(uj,{children:(0,m.jsx)(ej,{})})})}),(0,m.jsx)(o.qh,{path:"/",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(dc,{})]})}),(0,m.jsx)(o.qh,{path:"/catalog",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(Vc,{})]})}),(0,m.jsx)(o.qh,{path:"/profile",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(Cu,{})]})}),(0,m.jsx)(o.qh,{path:"/profile/:login",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(Cu,{})]})}),(0,m.jsx)(o.qh,{path:"/chat/:username?",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(Ap,{})]})}),(0,m.jsx)(o.qh,{path:"/notifications",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(Of,{})]})}),(0,m.jsx)(o.qh,{path:"/subscriptions",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(Rm,{})]})}),(0,m.jsx)(o.qh,{path:"/ratings",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(xg,{})]})}),(0,m.jsx)(o.qh,{path:"/ads",element:(0,m.jsxs)(g,{children:[(0,m.jsx)(Hi,{}),(0,m.jsx)(xx,{})]})}),(0,m.jsx)(o.qh,{path:"/admin/*",element:(0,m.jsx)(g,{children:(0,m.jsx)(Hx,{})})}),(0,m.jsx)(o.qh,{path:"/balance-topup",element:(0,m.jsx)(g,{children:(0,m.jsx)(vg,{})})}),(0,m.jsx)(o.qh,{path:"*",element:(0,m.jsx)(o.C5,{to:"/",replace:!0})})]})})})}),(0,m.jsx)(l.l$,{position:"top-right",toastOptions:{duration:4e3,style:{background:vj.colors.surface,color:vj.colors.text,border:"1px solid ".concat(vj.colors.border),borderRadius:vj.borderRadius},success:{iconTheme:{primary:vj.colors.success,secondary:"white"}},error:{iconTheme:{primary:vj.colors.error,secondary:"white"}}}})]})})};var Aj=document.getElementById("root");(0,i.H)(Aj).render(r.createElement(wj))},4983:(n,e,t)=>{t.r(e),t.d(e,{adminAPI:()=>Re,adsAPI:()=>Te,api:()=>Ke,apiUtils:()=>Ye,authAPI:()=>De,catalogAPI:()=>Ie,chatAPI:()=>Ue,clubsAPI:()=>Qe,default:()=>Ge,giftsAPI:()=>Fe,notificationsAPI:()=>Be,privacyAPI:()=>We,ratingAPI:()=>He,reactionsAPI:()=>Ve,subscriptionsAPI:()=>qe,swipeAPI:()=>Me,uploadsAPI:()=>Xe,usersAPI:()=>$e});var r=t(2284),i=t(467),a=t(4980),s=t(4756),o=t.n(s),c=t(1083),l=t(888);function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function u(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach(function(e){(0,a.A)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var p=c.A.create({baseURL:{KDE_FULL_SESSION:"true",LESS_TERMCAP_se:"[0m",POWERSHELL_TELEMETRY_OPTOUT:"1",USER:"fsociety",PAM_KWALLET5_LOGIN:"/run/user/1000/kwallet5.socket",LANGUAGE:"",LESS_TERMCAP_ue:"[0m",npm_config_user_agent:"npm/9.2.0 node/v20.19.2 linux x64 workspaces/false",XDG_SEAT:"seat0",DOTNET_CLI_TELEMETRY_OPTOUT:"1",XDG_SESSION_TYPE:"wayland",GIT_ASKPASS:"/tmp/.mount_CursortlKEob/usr/share/cursor/resources/app/extensions/git/dist/askpass.sh",npm_node_execpath:"/usr/bin/node",QT_WAYLAND_RECONNECT:"1",LD_LIBRARY_PATH:"/tmp/.mount_CursortlKEob/usr/lib/:/tmp/.mount_CursortlKEob/usr/lib32/:/tmp/.mount_CursortlKEob/usr/lib64/:/tmp/.mount_CursortlKEob/lib/:/tmp/.mount_CursortlKEob/lib/i386-linux-gnu/:/tmp/.mount_CursortlKEob/lib/x86_64-linux-gnu/:/tmp/.mount_CursortlKEob/lib/aarch64-linux-gnu/:/tmp/.mount_CursortlKEob/lib32/:/tmp/.mount_CursortlKEob/lib64/:",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/fsociety",KDE_APPLICATIONS_AS_SCOPE:"1",OLDPWD:"/home/fsociety/swingfox",APPDIR:"/tmp/.mount_CursortlKEob",CHROME_DESKTOP:"cursor.desktop",DESKTOP_SESSION:"plasma",DISABLE_AUTO_UPDATE:"true",TERM_PROGRAM_VERSION:"1.4.5",npm_package_json:"/home/fsociety/swingfox/client/package.json",PERLLIB:"/tmp/.mount_CursortlKEob/usr/share/perl5/:/tmp/.mount_CursortlKEob/usr/lib/perl5/:",GTK_RC_FILES:"/etc/gtk/gtkrc:/home/fsociety/.gtkrc:/home/fsociety/.config/gtkrc",KDE_SESSION_VERSION:"6",XDG_SEAT_PATH:"/org/freedesktop/DisplayManager/Seat0",PAGER:'sh -c "head -n 10000 | cat"',VSCODE_GIT_ASKPASS_MAIN:"/tmp/.mount_CursortlKEob/usr/share/cursor/resources/app/extensions/git/dist/askpass-main.js",MANAGERPID:"2388",LESS_TERMCAP_so:"[01;33m",VSCODE_GIT_ASKPASS_NODE:"/tmp/.mount_CursortlKEob/usr/share/cursor/cursor",npm_config_userconfig:"/home/fsociety/.npmrc",npm_config_local_prefix:"/home/fsociety/swingfox/client",DBUS_SESSION_BUS_ADDRESS:"unix:path=/run/user/1000/bus",NMAP_PRIVILEGED:"",SYSTEMD_EXEC_PID:"2606",npm_config_yes:"true",COLORTERM:"truecolor",COLOR:"0",COMMAND_NOT_FOUND_INSTALL_PROMPT:"1",npm_config_metrics_registry:"https://registry.npmjs.org/",WAYLAND_DISPLAY:"wayland-0",XKB_DEFAULT_LAYOUT:"us,ru",XKB_DEFAULT_OPTIONS:"grp:alt_shift_toggle,grp_led:scroll",LOGNAME:"fsociety",VSCODE_PROFILE_INITIALIZED:"1",QT_AUTO_SCREEN_SCALE_FACTOR:"0",JOURNAL_STREAM:"9:20768",OWD:"/home/fsociety/Рабочий стол",LESS_TERMCAP_us:"[1;32m",_:"/usr/bin/npm",npm_config_prefix:"/usr/local",XDG_SESSION_CLASS:"user",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/session.slice/plasma-plasmashell.service/memory.pressure",USER_ZDOTDIR:"/home/fsociety",XDG_SESSION_ID:"3",TERM:"xterm-256color",npm_config_cache:"/home/fsociety/.npm",GTK2_RC_FILES:"/etc/gtk-2.0/gtkrc:/home/fsociety/.gtkrc-2.0:/home/fsociety/.config/gtkrc-2.0",COMPOSER_NO_INTERACTION:"1",npm_config_node_gyp:"/usr/share/nodejs/node-gyp/bin/node-gyp.js",PATH:"/home/fsociety/swingfox/client/node_modules/.bin:/home/fsociety/swingfox/node_modules/.bin:/home/fsociety/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/usr/share/nodejs/@npmcli/run-script/lib/node-gyp-bin:/home/fsociety/.local/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/snap/bin:/snap/bin",SESSION_MANAGER:"local/kali:@/tmp/.ICE-unix/2551,unix/kali:/tmp/.ICE-unix/2551",INVOCATION_ID:"5e7ee3b118da40598b89d150904158a3",APPIMAGE:"/home/fsociety/Рабочий стол/Cursor-1.4.5-x86_64.AppImage",NODE:"/usr/bin/node",npm_package_name:"swingfox-client",XDG_RUNTIME_DIR:"/run/user/1000",XDG_MENU_PREFIX:"plasma-",XDG_SESSION_PATH:"/org/freedesktop/DisplayManager/Session1",XKB_DEFAULT_MODEL:"pc105",GDK_BACKEND:"x11",DISPLAY:":1",ICEAUTHORITY:"/run/user/1000/iceauth_zgchub",CURSOR_AGENT:"1",LANG:"ru_RU.UTF-8",POWERSHELL_UPDATECHECK:"Off",XDG_CURRENT_DESKTOP:"KDE",VSCODE_INJECTION:"1",XAUTHORITY:"/run/user/1000/xauth_uBKiBS",XDG_SESSION_DESKTOP:"KDE",CURSOR_TRACE_ID:"3a5b4306f3b14575910c9d013282db84",LS_COLORS:"rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=00:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.7z=01;31:*.ace=01;31:*.alz=01;31:*.apk=01;31:*.arc=01;31:*.arj=01;31:*.bz=01;31:*.bz2=01;31:*.cab=01;31:*.cpio=01;31:*.crate=01;31:*.deb=01;31:*.drpm=01;31:*.dwm=01;31:*.dz=01;31:*.ear=01;31:*.egg=01;31:*.esd=01;31:*.gz=01;31:*.jar=01;31:*.lha=01;31:*.lrz=01;31:*.lz=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.lzo=01;31:*.pyz=01;31:*.rar=01;31:*.rpm=01;31:*.rz=01;31:*.sar=01;31:*.swm=01;31:*.t7z=01;31:*.tar=01;31:*.taz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tgz=01;31:*.tlz=01;31:*.txz=01;31:*.tz=01;31:*.tzo=01;31:*.tzst=01;31:*.udeb=01;31:*.war=01;31:*.whl=01;31:*.wim=01;31:*.xz=01;31:*.z=01;31:*.zip=01;31:*.zoo=01;31:*.zst=01;31:*.avif=01;35:*.jpg=01;35:*.jpeg=01;35:*.jxl=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:*~=00;90:*#=00;90:*.bak=00;90:*.crdownload=00;90:*.dpkg-dist=00;90:*.dpkg-new=00;90:*.dpkg-old=00;90:*.dpkg-tmp=00;90:*.old=00;90:*.orig=00;90:*.part=00;90:*.rej=00;90:*.rpmnew=00;90:*.rpmorig=00;90:*.rpmsave=00;90:*.swp=00;90:*.tmp=00;90:*.ucf-dist=00;90:*.ucf-new=00;90:*.ucf-old=00;90::ow=30;44:",TERM_PROGRAM:"vscode",VSCODE_GIT_IPC_HANDLE:"/run/user/1000/vscode-git-9c70c8913b.sock",npm_lifecycle_script:"webpack --mode production",SSH_AUTH_SOCK:"/run/user/1000/openssh_agent",GSETTINGS_SCHEMA_DIR:"/tmp/.mount_CursortlKEob/usr/share/glib-2.0/schemas/:",ORIGINAL_XDG_CURRENT_DESKTOP:"KDE",SHELL:"/usr/bin/zsh",npm_package_version:"1.0.0",npm_lifecycle_event:"build",QT_ACCESSIBILITY:"1",XKB_DEFAULT_VARIANT:",",LESS_TERMCAP_mb:"[1;31m",GPG_AGENT_INFO:"/run/user/1000/gnupg/S.gpg-agent:0:1",XDG_VTNR:"1",LESS_TERMCAP_md:"[1;36m",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",npm_config_globalconfig:"/etc/npmrc",npm_config_init_module:"/home/fsociety/.npm-init.js",PWD:"/home/fsociety/swingfox/client",LESS_TERMCAP_me:"[0m",npm_config_globalignorefile:"/etc/npmignore",npm_execpath:"/usr/share/nodejs/npm/bin/npm-cli.js",XDG_DATA_DIRS:"/tmp/.mount_CursortlKEob/usr/share/:/usr/local/share:/usr/share:/usr/local/share:/usr/share:/var/lib/snapd/desktop",XDG_CONFIG_DIRS:"/home/fsociety/.config/kdedefaults:/etc/xdg",ZDOTDIR:"/home/fsociety",npm_config_global_prefix:"/usr/local",npm_command:"run-script",KDE_SESSION_UID:"1000",QT_PLUGIN_PATH:"/tmp/.mount_CursortlKEob/usr/lib/qt4/plugins/:/tmp/.mount_CursortlKEob/usr/lib/i386-linux-gnu/qt4/plugins/:/tmp/.mount_CursortlKEob/usr/lib/x86_64-linux-gnu/qt4/plugins/:/tmp/.mount_CursortlKEob/usr/lib/aarch64-linux-gnu/qt4/plugins/:/tmp/.mount_CursortlKEob/usr/lib32/qt4/plugins/:/tmp/.mount_CursortlKEob/usr/lib64/qt4/plugins/:/tmp/.mount_CursortlKEob/usr/lib/qt5/plugins/:/tmp/.mount_CursortlKEob/usr/lib/i386-linux-gnu/qt5/plugins/:/tmp/.mount_CursortlKEob/usr/lib/x86_64-linux-gnu/qt5/plugins/:/tmp/.mount_CursortlKEob/usr/lib/aarch64-linux-gnu/qt5/plugins/:/tmp/.mount_CursortlKEob/usr/lib32/qt5/plugins/:/tmp/.mount_CursortlKEob/usr/lib64/qt5/plugins/:",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",PIP_NO_INPUT:"true",INIT_CWD:"/home/fsociety/swingfox/client",EDITOR:"vi"}.REACT_APP_API_URL||"/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),x="swingfox_token",h="swingfox_user_cache",f=function(){return localStorage.getItem(x)},m=function(n){n?localStorage.setItem(x,n):(localStorage.removeItem(x),b())},g=function(){try{var n=localStorage.getItem(h);return n?JSON.parse(n):null}catch(n){return console.warn("Ошибка парсинга кэша пользователя:",n),null}},v=function(n){try{localStorage.setItem(h,JSON.stringify(u(u({},n),{},{cachedAt:Date.now()})))}catch(n){console.warn("Ошибка сохранения кэша пользователя:",n)}},b=function(){localStorage.removeItem(h)},j=!1;p.interceptors.request.use(function(n){var e=f();return e&&(n.headers.Authorization="Bearer ".concat(e)),n},function(n){return Promise.reject(n)}),p.interceptors.response.use(function(n){return n},function(n){var e,t;return 401!==(null===(e=n.response)||void 0===e?void 0:e.status)||j?(null===(t=n.response)||void 0===t?void 0:t.status)>=500&&l.Ay.error("Ошибка сервера. Попробуйте позже."):(j=!0,m(null),window.dispatchEvent(new CustomEvent("auth-logout")),setTimeout(function(){j=!1},1e3)),Promise.reject(n)});var y,w,A,k,N,S,C,z,_,E,P,L,O,D,$,M,I,U,T,R,B,W,F,Q,q,H,V,X,Y,K,G,J,Z,nn,en,tn,rn,an,sn,on,cn,ln,dn,un,pn,xn,hn,fn,mn,gn,vn,bn,jn,yn,wn,An,kn,Nn,Sn,Cn,zn,_n,En,Pn,Ln,On,Dn,$n,Mn,In,Un,Tn,Rn,Bn,Wn,Fn,Qn,qn,Hn,Vn,Xn,Yn,Kn,Gn,Jn,Zn,ne,ee,te,re,ie,ae,se,oe,ce,le,de,ue,pe,xe,he,fe,me,ge,ve,be,je,ye,we,Ae,ke,Ne,Se,Ce,ze,_e,Ee,Pe,Le,Oe,De={login:(S=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/auth/login",e);case 1:return(t=n.sent).data.token&&(m(t.data.token),t.data.user&&v(t.data.user)),n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return S.apply(this,arguments)}),register:(N=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/auth/register",e);case 1:return(t=n.sent).data.token&&(m(t.data.token),t.data.user&&v(t.data.user)),n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return N.apply(this,arguments)}),sendCode:(k=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/auth/send-code",{email:e});case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return k.apply(this,arguments)}),resetPassword:(A=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/auth/reset-password",e);case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return A.apply(this,arguments)}),logout:(w=(0,i.A)(o().mark(function n(){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,p.post("/auth/logout");case 1:return n.prev=1,m(null),n.finish(1);case 2:case"end":return n.stop()}},n,null,[[0,,1,2]])})),function(){return w.apply(this,arguments)}),getCurrentUser:function(){var n,e=f();if(!e)return null;try{var t=JSON.parse(atob(e.split(".")[1])),r={userId:t.userId,login:t.login,vipType:t.vipType},i=g();return i&&(n=i)&&n.cachedAt&&Date.now()-n.cachedAt<9e5&&i.login===r.login?u(u({},r),{},{ava:i.ava,email:i.email,status:i.status,city:i.city,country:i.country,is_admin:i.is_admin||!1}):r}catch(n){return null}},fetchCurrentUserData:(y=(0,i.A)(o().mark(function n(){var e,t,r,i;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if((e=De.getCurrentUser())&&e.login){n.next=1;break}return n.abrupt("return",null);case 1:return n.prev=1,n.next=2,p.get("/users/profile/".concat(e.login));case 2:return t=n.sent,r=t.data,v({id:r.id,login:r.login,ava:r.ava,email:e.email,status:r.status,city:r.city,country:r.country,viptype:r.viptype,is_admin:e.is_admin}),n.abrupt("return",De.getCurrentUser());case 3:return n.prev=3,i=n.catch(1),console.warn("Ошибка получения актуальных данных пользователя:",i),n.abrupt("return",e);case 4:case"end":return n.stop()}},n,null,[[1,3]])})),function(){return y.apply(this,arguments)}),updateUserCache:function(n){var e=g();e&&v(u(u({},e),n))}},$e={getProfile:(X=(0,i.A)(o().mark(function n(e){var t,r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/profiles/".concat(e));case 1:return t=n.sent,(r=De.getCurrentUser())&&r.login===e&&De.updateUserCache({ava:t.data.profile.ava,status:t.data.profile.status,city:t.data.profile.city,country:t.data.profile.country,viptype:t.data.profile.viptype}),n.abrupt("return",t.data.profile);case 2:case"end":return n.stop()}},n)})),function(n){return X.apply(this,arguments)}),updateProfile:(V=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.put("/users/profile",e);case 1:return(t=n.sent).data.success&&t.data.user&&De.updateUserCache({status:t.data.user.status,city:t.data.user.city,country:t.data.user.country}),n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return V.apply(this,arguments)}),uploadAvatar:(H=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/users/upload-avatar",e,{headers:{"Content-Type":"multipart/form-data"}});case 1:return(t=n.sent).data.success&&t.data.filename&&De.updateUserCache({ava:t.data.filename}),n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return H.apply(this,arguments)}),uploadImages:(q=(0,i.A)(o().mark(function n(e){var t,r,i,a;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/users/upload-images",e,{headers:{"Content-Type":"multipart/form-data"}});case 1:if(!(t=n.sent).data.success){n.next=6;break}if(n.prev=2,!(r=De.getCurrentUser())||!r.login){n.next=4;break}return n.next=3,p.get("/users/profile/".concat(r.login));case 3:(i=n.sent).data.success&&De.updateUserCache({ava:i.data.user.ava,status:i.data.user.status,city:i.data.user.city,country:i.data.user.country,viptype:i.data.user.viptype});case 4:n.next=6;break;case 5:n.prev=5,a=n.catch(2),console.warn("Ошибка обновления кэша после загрузки изображений:",a);case 6:return n.abrupt("return",t.data);case 7:case"end":return n.stop()}},n,null,[[2,5]])})),function(n){return q.apply(this,arguments)}),deleteImage:(Q=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"images",n.next=1,p.delete("/users/images/".concat(e,"?type=").concat(t));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return Q.apply(this,arguments)}),setLockedPassword:(F=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/users/set-locked-password",{password:e});case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return F.apply(this,arguments)}),unlockImages:(W=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/users/unlock-images",{target_user:e,password:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return W.apply(this,arguments)}),likePhoto:(B=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/profiles/".concat(e,"/like-photo"),{photo_index:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return B.apply(this,arguments)}),getPhotoLikes:(R=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/profiles/".concat(e,"/photo-likes"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return R.apply(this,arguments)}),getPhotoComments:(T=(0,i.A)(o().mark(function n(e){var t,r,i,a=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.length>2&&void 0!==a[2]?a[2]:20,r=new URLSearchParams({page:(a.length>1&&void 0!==a[1]?a[1]:1).toString(),limit:t.toString()}),n.next=1,p.get("/photo-comments/".concat(e,"?").concat(r.toString()));case 1:return i=n.sent,n.abrupt("return",i.data);case 2:case"end":return n.stop()}},n)})),function(n){return T.apply(this,arguments)}),createPhotoComment:(U=(0,i.A)(o().mark(function n(e,t){var i;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("API createPhotoComment called with:",{filename:e,commentText:t}),console.log("Filename type:",(0,r.A)(e),"Value:",e),"string"==typeof e){n.next=1;break}throw console.error("Filename is not a string:",e),new Error("Filename must be a string");case 1:return n.next=2,p.post("/photo-comments/".concat(e),{comment_text:t});case 2:return i=n.sent,n.abrupt("return",i.data);case 3:case"end":return n.stop()}},n)})),function(n,e){return U.apply(this,arguments)}),updatePhotoComment:(I=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.put("/photo-comments/".concat(e),{comment_text:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return I.apply(this,arguments)}),deletePhotoComment:(M=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/photo-comments/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return M.apply(this,arguments)}),getProfileComments:($=(0,i.A)(o().mark(function n(e){var t,r,i,a,s=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=s.length>2&&void 0!==s[2]?s[2]:20,r=s.length>3&&void 0!==s[3]&&s[3],i=new URLSearchParams({page:(s.length>1&&void 0!==s[1]?s[1]:1).toString(),limit:t.toString()}),r&&i.append("include_private","true"),n.next=1,p.get("/profile-comments/".concat(e,"?").concat(i.toString()));case 1:return a=n.sent,n.abrupt("return",a.data);case 2:case"end":return n.stop()}},n)})),function(n){return $.apply(this,arguments)}),createProfileComment:(D=(0,i.A)(o().mark(function n(e,t){var i,a,s=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=!(s.length>2&&void 0!==s[2])||s[2],console.log("API createProfileComment called with:",{username:e,commentText:t,isPublic:i}),console.log("Username type:",(0,r.A)(e),"Value:",e),"string"==typeof e){n.next=1;break}throw console.error("Username is not a string:",e),new Error("Username must be a string");case 1:return n.next=2,p.post("/profile-comments/".concat(e),{comment_text:t,is_public:i});case 2:return a=n.sent,n.abrupt("return",a.data);case 3:case"end":return n.stop()}},n)})),function(n,e){return D.apply(this,arguments)}),updateProfileComment:(O=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.put("/profile-comments/".concat(e),{comment_text:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return O.apply(this,arguments)}),deleteProfileComment:(L=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/profile-comments/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return L.apply(this,arguments)}),sendGift:(P=(0,i.A)(o().mark(function n(e,t){var r,i,a=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:"",n.next=1,p.post("/profiles/".concat(e,"/send-gift"),{gift_type:t,message:r});case 1:return i=n.sent,n.abrupt("return",i.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return P.apply(this,arguments)}),rateUser:(E=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/profiles/".concat(e,"/rate"),{value:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return E.apply(this,arguments)}),getUserRating:(_=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/profiles/".concat(e,"/rating"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return _.apply(this,arguments)}),sendSuperlike:(z=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"",n.next=1,p.post("/profiles/".concat(e,"/superlike"),{message:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return z.apply(this,arguments)}),registerVisit:(C=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/profiles/".concat(e,"/visit"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return C.apply(this,arguments)})},Me={getProfiles:(en=(0,i.A)(o().mark(function n(){var e,t,r=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"forward",n.next=1,p.get("/swipe/profiles?direction=".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(){return en.apply(this,arguments)}),getProfilesBatch:(nn=(0,i.A)(o().mark(function n(){var e,t,r,i,a=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:10,t=a.length>1&&void 0!==a[1]?a[1]:[],(r=new URLSearchParams).append("count",e),t.length>0&&r.append("exclude",t.join(",")),n.next=1,p.get("/swipe/profiles/batch?".concat(r.toString()));case 1:return i=n.sent,n.abrupt("return",i.data);case 2:case"end":return n.stop()}},n)})),function(){return nn.apply(this,arguments)}),like:(Z=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"gesture",n.next=1,p.post("/swipe/like",{target_user:e,source:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return Z.apply(this,arguments)}),dislike:(J=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"gesture",n.next=1,p.post("/swipe/dislike",{target_user:e,source:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return J.apply(this,arguments)}),superlike:(G=(0,i.A)(o().mark(function n(e){var t,r,i;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.targetUser,r=e.message,n.next=1,p.post("/swipe/superlike",{target_user:t,message:r||""});case 1:return i=n.sent,n.abrupt("return",i.data);case 2:case"end":return n.stop()}},n)})),function(n){return G.apply(this,arguments)}),getSuperlikes:(K=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/swipe/superlike-count");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return K.apply(this,arguments)}),checkExistingMatch:(Y=(0,i.A)(o().mark(function n(e){var t,r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,p.get("/chat/match-status/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:return n.prev=2,r=n.catch(0),console.error("Error checking existing match:",r),n.abrupt("return",{hasMatch:!1});case 3:case"end":return n.stop()}},n,null,[[0,2]])})),function(n){return Y.apply(this,arguments)})},Ie={getProfiles:(rn=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=new URLSearchParams,e.status&&e.status.length>0&&e.status.forEach(function(n){return t.append("status",n)}),e.country&&t.append("country",e.country),e.city&&t.append("city",e.city),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset),n.next=1,p.get("/catalog?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return rn.apply(this,arguments)}),getFilters:(tn=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/catalog/filters");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return tn.apply(this,arguments)})},Ue={getConversations:(xn=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:20,t=i.length>1&&void 0!==i[1]?i[1]:0,n.next=1,p.get("/chat/conversations?limit=".concat(e,"&offset=").concat(t));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return xn.apply(this,arguments)}),getMessages:(pn=(0,i.A)(o().mark(function n(e){var t,r,i,a=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:50,r=a.length>2&&void 0!==a[2]?a[2]:0,n.next=1,p.get("/chat/".concat(e,"?limit=").concat(t,"&offset=").concat(r));case 1:return i=n.sent,n.abrupt("return",i.data);case 2:case"end":return n.stop()}},n)})),function(n){return pn.apply(this,arguments)}),sendMessage:(un=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/chat/send",e,{headers:{"Content-Type":"multipart/form-data"}});case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return un.apply(this,arguments)}),getUserStatus:(dn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/chat/status/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return dn.apply(this,arguments)}),setTyping:(ln=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/chat/typing",{to_user:e,is_typing:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return ln.apply(this,arguments)}),getUnreadCount:(cn=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/chat/unread-count");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return cn.apply(this,arguments)}),deleteConversation:(on=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/chat/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return on.apply(this,arguments)}),getMatchStatus:(sn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/chat/match-status/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return sn.apply(this,arguments)}),checkMatchPermission:(an=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/chat/can-message/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return an.apply(this,arguments)})},Te={getAds:(jn=(0,i.A)(o().mark(function n(){var e,t,r=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new URLSearchParams(r.length>0&&void 0!==r[0]?r[0]:{}).toString(),n.next=1,p.get("/ads?".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(){return jn.apply(this,arguments)}),getMyAds:(bn=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:10,t=i.length>1&&void 0!==i[1]?i[1]:0,n.next=1,p.get("/ads/my?limit=".concat(e,"&offset=").concat(t));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return bn.apply(this,arguments)}),createAd:(vn=(0,i.A)(o().mark(function n(e){var t,r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("title",e.title),t.append("type",e.type),t.append("description",e.description),t.append("country",e.country),t.append("city",e.city),e.price&&t.append("price",e.price),e.contact_info&&t.append("contact_info",e.contact_info),e.image&&e.image instanceof File&&t.append("image",e.image),n.next=1,p.post("/ads/create",t,{headers:{"Content-Type":"multipart/form-data"}});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return vn.apply(this,arguments)}),updateAd:(gn=(0,i.A)(o().mark(function n(e,t){var r,i;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new FormData).append("title",t.title),r.append("type",t.type),r.append("description",t.description),r.append("country",t.country),r.append("city",t.city),t.price&&r.append("price",t.price),t.contact_info&&r.append("contact_info",t.contact_info),t.image&&t.image instanceof File&&r.append("image",t.image),n.next=1,p.put("/ads/".concat(e),r,{headers:{"Content-Type":"multipart/form-data"}});case 1:return i=n.sent,n.abrupt("return",i.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return gn.apply(this,arguments)}),deleteAd:(mn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/ads/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return mn.apply(this,arguments)}),respondToAd:(fn=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/ads/".concat(e,"/respond"),{message:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return fn.apply(this,arguments)}),getAdTypes:(hn=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/ads/types");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return hn.apply(this,arguments)})},Re={getDashboard:(zn=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/admin/dashboard");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return zn.apply(this,arguments)}),getUsers:(Cn=(0,i.A)(o().mark(function n(){var e,t,r=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new URLSearchParams(r.length>0&&void 0!==r[0]?r[0]:{}).toString(),n.next=1,p.get("/admin/users?".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(){return Cn.apply(this,arguments)}),updateUser:(Sn=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.put("/admin/users/".concat(e),t);case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return Sn.apply(this,arguments)}),deleteUser:(Nn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/admin/users/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Nn.apply(this,arguments)}),getMessages:(kn=(0,i.A)(o().mark(function n(){var e,t,r=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=new URLSearchParams(r.length>0&&void 0!==r[0]?r[0]:{}).toString(),n.next=1,p.get("/admin/messages?".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(){return kn.apply(this,arguments)}),deleteMessage:(An=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/admin/messages/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return An.apply(this,arguments)}),broadcast:(wn=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"ALL",n.next=1,p.post("/admin/broadcast",{message:e,target_viptype:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return wn.apply(this,arguments)}),getAnalytics:(yn=(0,i.A)(o().mark(function n(){var e,t,r=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"30",n.next=1,p.get("/admin/analytics?period=".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(){return yn.apply(this,arguments)})},Be={getNotifications:(Mn=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=new URLSearchParams,e.type&&t.append("type",e.type),e.priority&&t.append("priority",e.priority),void 0!==e.unread&&t.append("unread",e.unread),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset),n.next=1,p.get("/notifications?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return Mn.apply(this,arguments)}),getGuests:($n=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>1&&void 0!==i[1]?i[1]:20,t=new URLSearchParams({page:(i.length>0&&void 0!==i[0]?i[0]:1).toString(),limit:e.toString()}),n.next=1,p.get("/notifications/guests?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return $n.apply(this,arguments)}),markAsRead:(Dn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.put("/notifications/".concat(e,"/read"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Dn.apply(this,arguments)}),markAllAsRead:(On=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/notifications/mark-read");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return On.apply(this,arguments)}),deleteNotification:(Ln=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/notifications/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Ln.apply(this,arguments)}),deleteReadNotifications:(Pn=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/notifications/delete-read");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return Pn.apply(this,arguments)}),getNotificationTypes:(En=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/notifications/types");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return En.apply(this,arguments)}),getUnreadCount:(_n=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/notifications/count");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return _n.apply(this,arguments)})},We={getSettings:(Un=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/users/privacy-settings");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return Un.apply(this,arguments)}),updateSettings:(In=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.put("/users/privacy-settings",e);case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return In.apply(this,arguments)})},Fe={getGiftTypes:(Qn=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/gifts/types");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return Qn.apply(this,arguments)}),sendGift:(Fn=(0,i.A)(o().mark(function n(e){var t,r,i,a;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.to_user,r=e.gift_type,i=e.message,n.next=1,p.post("/gifts/send",{target_user:t,gift_type:r,message:i||""});case 1:return a=n.sent,n.abrupt("return",a.data);case 2:case"end":return n.stop()}},n)})),function(n){return Fn.apply(this,arguments)}),getGiftHistory:(Wn=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>2&&void 0!==i[2]?i[2]:0,t=new URLSearchParams({type:i.length>0&&void 0!==i[0]?i[0]:"all",limit:(i.length>1&&void 0!==i[1]?i[1]:20).toString(),offset:e.toString()}),n.next=1,p.get("/gifts/history?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return Wn.apply(this,arguments)}),getGiftStats:(Bn=(0,i.A)(o().mark(function n(){var e,t,r=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"30",n.next=1,p.get("/gifts/stats?period=".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(){return Bn.apply(this,arguments)}),getReceivedGifts:(Rn=(0,i.A)(o().mark(function n(){var e,t,r,i,a,s,c,l,d=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e=d.length>0&&void 0!==d[0]?d[0]:20,t=d.length>1&&void 0!==d[1]?d[1]:0,r=d.length>2&&void 0!==d[2]?d[2]:null,console.log("getReceivedGifts called with:",{limit:e,offset:t,targetUser:r}),!r){n.next=2;break}return i="/gifts/received/".concat(r,"?limit=").concat(e,"&offset=").concat(t),console.log("Calling API:",i),n.next=1,p.get(i);case 1:return a=n.sent,console.log("API response:",a.data),n.abrupt("return",a.data);case 2:return s=new URLSearchParams({limit:e.toString(),offset:t.toString()}),c="/gifts?".concat(s.toString()),console.log("Calling API:",c),n.next=3,p.get(c);case 3:return l=n.sent,console.log("API response:",l.data),n.abrupt("return",l.data);case 4:case"end":return n.stop()}},n)})),function(){return Rn.apply(this,arguments)}),getSentGifts:(Tn=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>1&&void 0!==i[1]?i[1]:0,t=new URLSearchParams({limit:(i.length>0&&void 0!==i[0]?i[0]:20).toString(),offset:e.toString()}),n.next=1,p.get("/gifts/sent?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return Tn.apply(this,arguments)})},Qe={getClubs:(ae=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=new URLSearchParams,e.type&&t.append("type",e.type),e.city&&t.append("city",e.city),e.search&&t.append("search",e.search),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset),n.next=1,p.get("/clubs?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return ae.apply(this,arguments)}),createClub:(ie=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/clubs",e);case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return ie.apply(this,arguments)}),getClub:(re=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/clubs/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return re.apply(this,arguments)}),updateClub:(te=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.put("/clubs/".concat(e),t);case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return te.apply(this,arguments)}),deleteClub:(ee=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/clubs/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return ee.apply(this,arguments)}),joinClub:(ne=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"",n.next=1,p.post("/clubs/".concat(e,"/apply"),{message:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return ne.apply(this,arguments)}),leaveClub:(Zn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/clubs/".concat(e,"/leave"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Zn.apply(this,arguments)}),getMyClubs:(Jn=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/clubs/my");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return Jn.apply(this,arguments)}),getClubMembers:(Gn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/clubs/".concat(e,"/members"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Gn.apply(this,arguments)}),getClubApplications:(Kn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/clubs/".concat(e,"/applications"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Kn.apply(this,arguments)}),manageApplication:(Yn=(0,i.A)(o().mark(function n(e,t,r){var i,a,s=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=s.length>3&&void 0!==s[3]?s[3]:"",n.next=1,p.put("/clubs/".concat(e,"/applications/").concat(t),{action:r,reason:i});case 1:return a=n.sent,n.abrupt("return",a.data);case 2:case"end":return n.stop()}},n)})),function(n,e,t){return Yn.apply(this,arguments)}),checkClubOwnership:(Xn=(0,i.A)(o().mark(function n(){var e,t,r,i;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,p.get("/clubs/my/ownership");case 1:return e=n.sent,n.abrupt("return",{isOwner:e.data.hasActiveClub,club:e.data.club});case 2:if(n.prev=2,i=n.catch(0),404!==(null===(t=i.response)||void 0===t?void 0:t.status)&&500!==(null===(r=i.response)||void 0===r?void 0:r.status)){n.next=3;break}return n.abrupt("return",{isOwner:!1,club:null});case 3:throw i;case 4:case"end":return n.stop()}},n,null,[[0,2]])})),function(){return Xn.apply(this,arguments)}),getEvents:(Vn=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=new URLSearchParams,e.city&&t.append("city",e.city),e.type&&t.append("type",e.type),e.search&&t.append("search",e.search),e.limit&&t.append("limit",e.limit),n.next=1,p.get("/club/user-events/events?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return Vn.apply(this,arguments)}),joinEvent:(Hn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/club/user-events/events/".concat(e,"/join"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Hn.apply(this,arguments)}),leaveEvent:(qn=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/club/user-events/events/".concat(e,"/leave"));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return qn.apply(this,arguments)})},qe={getPlans:(he=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/subscriptions/pricing");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return he.apply(this,arguments)}),subscribe:(xe=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/subscriptions/create",e);case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return xe.apply(this,arguments)}),getStatus:(pe=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/subscriptions/current");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return pe.apply(this,arguments)}),getHistory:(ue=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>1&&void 0!==i[1]?i[1]:0,t=new URLSearchParams({limit:(i.length>0&&void 0!==i[0]?i[0]:20).toString(),offset:e.toString()}),n.next=1,p.get("/subscriptions/history?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return ue.apply(this,arguments)}),cancel:(de=(0,i.A)(o().mark(function n(){var e,t,r=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"",n.next=1,p.post("/subscriptions/cancel",{reason:e});case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(){return de.apply(this,arguments)}),usePromoCode:(le=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/subscriptions/validate-promo",{code:e});case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return le.apply(this,arguments)}),getFeatures:(ce=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/subscriptions/pricing");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return ce.apply(this,arguments)}),changePlan:(oe=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:1,n.next=1,p.post("/subscriptions/change-plan",{new_plan_type:e,duration_months:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return oe.apply(this,arguments)}),getBalance:(se=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/users/balance");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return se.apply(this,arguments)})},He={getUserRating:(we=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/rating/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return we.apply(this,arguments)}),rateUser:(ye=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/rating/".concat(e),{value:t});case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return ye.apply(this,arguments)}),deleteRating:(je=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/rating/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return je.apply(this,arguments)}),getTopUsers:(be=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=new URLSearchParams,e.period&&t.append("period",e.period),e.limit&&t.append("limit",e.limit.toString()),n.next=1,p.get("/rating/top/users?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return be.apply(this,arguments)}),getMyGivenRatings:(ve=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>1&&void 0!==i[1]?i[1]:20,t=new URLSearchParams({page:(i.length>0&&void 0!==i[0]?i[0]:1).toString(),limit:e.toString()}),n.next=1,p.get("/rating/my/given?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return ve.apply(this,arguments)}),getMyReceivedRatings:(ge=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>1&&void 0!==i[1]?i[1]:20,t=new URLSearchParams({page:(i.length>0&&void 0!==i[0]?i[0]:1).toString(),limit:e.toString()}),n.next=1,p.get("/rating/my/received?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return ge.apply(this,arguments)}),getLeaderboard:(me=(0,i.A)(o().mark(function n(){var e,t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=new URLSearchParams,e.period&&t.append("period",e.period),e.category&&t.append("category",e.category),e.city&&t.append("city",e.city),e.limit&&t.append("limit",e.limit.toString()),n.next=1,p.get("/rating/leaderboard?".concat(t.toString()));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(){return me.apply(this,arguments)}),getMyStats:(fe=(0,i.A)(o().mark(function n(){var e;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/rating/my/stats");case 1:return e=n.sent,n.abrupt("return",e.data);case 2:case"end":return n.stop()}},n)})),function(){return fe.apply(this,arguments)})},Ve={getObjectReactions:(Ce=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/reactions/".concat(e,"/").concat(t));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return Ce.apply(this,arguments)}),setReaction:(Se=(0,i.A)(o().mark(function n(e,t,r){var i,a,s=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=s.length>3&&void 0!==s[3]?s[3]:1,n.next=1,p.post("/reactions/".concat(e,"/").concat(t),{reaction_type:r,value:i});case 1:return a=n.sent,n.abrupt("return",a.data);case 2:case"end":return n.stop()}},n)})),function(n,e,t){return Se.apply(this,arguments)}),removeReaction:(Ne=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.delete("/reactions/".concat(e,"/").concat(t));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return Ne.apply(this,arguments)}),getUserReactions:(ke=(0,i.A)(o().mark(function n(e){var t,r,i,a,s=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=s.length>2&&void 0!==s[2]?s[2]:20,r=s.length>3&&void 0!==s[3]?s[3]:null,i=new URLSearchParams({page:(s.length>1&&void 0!==s[1]?s[1]:1).toString(),limit:t.toString()}),r&&i.append("object_type",r),n.next=1,p.get("/reactions/user/".concat(e,"?").concat(i.toString()));case 1:return a=n.sent,n.abrupt("return",a.data);case 2:case"end":return n.stop()}},n)})),function(n){return ke.apply(this,arguments)}),getReactionStats:(Ae=(0,i.A)(o().mark(function n(e,t){var r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.get("/reactions/stats/".concat(e,"/").concat(t));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n,e){return Ae.apply(this,arguments)})},Xe={uploadAvatar:(Pe=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/uploads/avatar",e,{headers:{"Content-Type":"multipart/form-data"}});case 1:return(t=n.sent).data.success&&t.data.filename&&De.updateUserCache({ava:t.data.filename}),n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Pe.apply(this,arguments)}),uploadPhotos:(Ee=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/uploads/photos",e,{headers:{"Content-Type":"multipart/form-data"}});case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return Ee.apply(this,arguments)}),uploadPrivatePhotos:(_e=(0,i.A)(o().mark(function n(e){var t;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,p.post("/uploads/private-photos",e,{headers:{"Content-Type":"multipart/form-data"}});case 1:return t=n.sent,n.abrupt("return",t.data);case 2:case"end":return n.stop()}},n)})),function(n){return _e.apply(this,arguments)}),deletePhoto:(ze=(0,i.A)(o().mark(function n(e){var t,r,i=arguments;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:"photos",n.next=1,p.delete("/uploads/".concat(t,"/").concat(e));case 1:return r=n.sent,n.abrupt("return",r.data);case 2:case"end":return n.stop()}},n)})),function(n){return ze.apply(this,arguments)}),getUploadProgress:function(n){return{onUploadProgress:function(e){var t=Math.round(e.loaded/e.total*100);n&&n(t)}}}},Ye={isAuthenticated:function(){return!!f()},getCurrentUser:De.getCurrentUser,logout:De.logout,refreshCurrentUser:(Oe=(0,i.A)(o().mark(function n(){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=1,De.fetchCurrentUserData();case 1:return n.abrupt("return",n.sent);case 2:case"end":return n.stop()}},n)})),function(){return Oe.apply(this,arguments)}),updateUserCache:De.updateUserCache,clearUserCache:b,createFormData:function(n){var e=new FormData;return Object.keys(n).forEach(function(t){null!==n[t]&&void 0!==n[t]&&(Array.isArray(n[t])?n[t].forEach(function(n){return e.append(t,n)}):e.append(t,n[t]))}),e},handleError:function(n){var e;return null!==(e=n.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.message?n.response.data.message:n.message?n.message:"Произошла неизвестная ошибка"},formatDate:function(n){return new Date(n).toLocaleDateString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},formatTimeAgo:function(n){var e=new Date,t=new Date(n),r=Math.floor((e-t)/1e3);return r<60?"только что":r<3600?"".concat(Math.floor(r/60)," мин назад"):r<86400?"".concat(Math.floor(r/3600)," ч назад"):r<604800?"".concat(Math.floor(r/86400)," дн назад"):Ye.formatDate(n)},isVip:function(n){return(null==n?void 0:n.vipType)&&"BASE"!==n.vipType},isPremium:function(n){return"PREMIUM"===(null==n?void 0:n.vipType)},getVipBadgeColor:function(n){switch(n){case"VIP":return"#ffd700";case"PREMIUM":return"#9b59b6";default:return null}},getVipBadgeIcon:function(n){switch(n){case"VIP":return"👑";case"PREMIUM":return"💎";default:return null}},getUserInfo:(Le=(0,i.A)(o().mark(function n(e){var t,r;return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=1,p.get("/users/profile/".concat(e));case 1:return t=n.sent,n.abrupt("return",t.data);case 2:return n.prev=2,r=n.catch(0),console.error("Error fetching user info:",r),n.abrupt("return",null);case 3:case"end":return n.stop()}},n,null,[[0,2]])})),function(n){return Le.apply(this,arguments)})},Ke={auth:De,users:$e,swipe:Me,catalog:Ie,chat:Ue,ads:Te,admin:Re,notifications:Be,privacy:We,gifts:Fe,clubs:Qe,subscriptions:qe,rating:He,reactions:Ve,uploads:Xe,utils:Ye};const Ge=p}},n=>{n.O(0,[96],()=>n(n.s=210)),n.O()}]);
//# sourceMappingURL=main.83fc08cefdbe841cba5d.js.map