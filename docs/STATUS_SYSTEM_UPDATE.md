# Обновление системы статусов на русские названия

## Описание изменений

Система была обновлена для работы с русскими статусами вместо английских, как в оригинальной PHP версии.

## Новые статусы

### Основные статусы
- `Семейная пара(М+Ж)` - Семейная пара мужчина + женщина
- `Несемейная пара(М+Ж)` - Несемейная пара мужчина + женщина  
- `Мужчина` - Одинокий мужчина
- `Женщина` - Одинокая женщина

### Логика отображения полей

#### Для пар (Семейная пара/Несемейная пара)
- Показываются поля для ОБОИХ партнеров
- Дата рождения: `1990-01-01_1992-05-15` (муж_женщина)
- Рост: `180_165` (муж_женщина)
- Вес: `70_60` (муж_женщина)
- Курение: `Не курю_Не курю` (муж_женщина)
- Алкоголь: `Не употребляю_Не употребляю` (муж_женщина)

#### Для одиночек (Мужчина/Женщина)
- Показываются только соответствующие поля
- Дата рождения: `1990-01-01` (только один)
- Рост: `180` (только один)
- Вес: `70` (только один)
- Курение: `Не курю` (только один)
- Алкоголь: `Не употребляю` (только один)

## Обновленные файлы

### 1. Модель User (`src/models/User.js`)
- Добавлены комментарии к полям с описанием форматов
- Добавлен метод `isCouple()` для проверки статуса пары
- Добавлен метод `getPartnerData()` для извлечения данных партнера

### 2. Форма регистрации (`client/src/pages/Register.js`)
- Обновлены статусы на русские названия
- Добавлена логика показа/скрытия полей партнера
- Обновлены опции для курения и алкоголя на русские названия
- Добавлено поле выбора мест для встреч
- Обновлена валидация прогресса формы

### 3. Роут авторизации (`src/routes/auth.js`)
- Добавлена валидация русских статусов
- Обновлена логика создания пользователя

### 4. Роут свайпа (`src/routes/swipe.js`)
- Добавлена поддержка данных партнера в профилях
- Обновлена логика формирования ответа для пар

### 5. Роут каталога (`src/routes/catalog.js`)
- Добавлена поддержка данных партнера в каталоге
- Обновлена логика формирования ответа для пар

### 6. Роут профилей (`src/routes/profiles.js`)
- Добавлен новый роут `GET /api/profiles/:login` для получения полного профиля
- Добавлена поддержка данных партнера
- Включены все дополнительные поля профиля

### 7. Миграция (`migrations/20241226000001-update-status-to-russian.js`)
- Конвертация существующих английских статусов на русские
- Обновление search_status на русские названия

## Новые API endpoints

### Получение полного профиля
```
GET /api/profiles/:login
```

Возвращает:
- Базовую информацию о пользователе
- Данные партнера (если это пара)
- Дополнительные поля (рост, вес, курение, алкоголь)
- Статистику лайков фото
- Рейтинг пользователя
- Расстояние до текущего пользователя

## Примеры ответов API

### Для одиночки (Мужчина)
```json
{
  "success": true,
  "profile": {
    "id": 123,
    "login": "user123",
    "status": "Мужчина",
    "age": "30 лет",
    "isCouple": false,
    "height": "180",
    "weight": "70",
    "smoking": "Не курю",
    "alko": "Не употребляю"
  }
}
```

### Для пары
```json
{
  "success": true,
  "profile": {
    "id": 456,
    "login": "couple123",
    "status": "Семейная пара(М+Ж)",
    "age": "30 лет",
    "isCouple": true,
    "partnerData": {
      "manDate": "1990-01-01",
      "womanDate": "1992-05-15",
      "manHeight": "180",
      "womanHeight": "165",
      "manWeight": "70",
      "womanWeight": "60",
      "manSmoking": "Не курю",
      "womanSmoking": "Не курю",
      "manAlko": "Не употребляю",
      "womanAlko": "Не употребляю"
    },
    "height": "180_165",
    "weight": "70_60",
    "smoking": "Не курю_Не курю",
    "alko": "Не употребляю_Не употребляю"
  }
}
```

## Запуск миграции

```bash
npx sequelize-cli db:migrate
```

## Тестирование

1. Зарегистрируйте пользователя с разными статусами
2. Проверьте отображение полей в зависимости от статуса
3. Проверьте API endpoints для получения профилей
4. Убедитесь, что данные партнера корректно отображаются для пар

## Обратная совместимость

- Все существующие пользователи будут автоматически конвертированы
- Старые английские статусы будут заменены на русские аналоги
- API endpoints остаются теми же, но возвращают больше данных
